CREATE TABLE [dbo].[TD_LOGIN] (
    [LGN_ID]             INT            IDENTITY (1, 1) NOT NULL,
    [LGN_1FA]            VARCHAR (64)   NULL,
    [LGN_2FA]            NVARCHAR (MAX) COLLATE Latin1_General_BIN2  ENCRYPTED WITH (
     COLUMN_ENCRYPTION_KEY = [CEK_LGN_2FA],
     ALGORITHM = N'AEAD_AES_256_CBC_HMAC_SHA_256',
     ENCRYPTION_TYPE = DETERMINISTIC
    ) NULL,
    [LGN_TOKEN_1FA]      VARCHAR (64)   NULL,
    [LGN_TOKEN_2FA]      VARCHAR (64)   NULL,
    [LGN_SESSION]        VARCHAR (64)   NULL,
    [LGN_SESSION_EXPIRY] DATETIME       NULL,
    [LGN_CCN_ID]         INT            NOT NULL,
    CONSTRAINT [PK_TD_LOGIN] PRIMARY KEY CLUSTERED ([LGN_ID] ASC),
    CONSTRAINT [FK_TD_LOGIN_TD_ACCOUNT] FOREIGN KEY ([LGN_CCN_ID]) REFERENCES [dbo].[TD_ACCOUNT] ([CCN_ID])
);




GO
CREATE NONCLUSTERED INDEX [IX_LGN_CCN_ID]
    ON [dbo].[TD_LOGIN]([LGN_CCN_ID] ASC);


GO
CREATE NONCLUSTERED INDEX [IX_LGN_SESSION]
    ON [dbo].[TD_LOGIN]([LGN_SESSION] ASC);


GO
CREATE NONCLUSTERED INDEX [IX_LGN_TOKEN_1FA]
    ON [dbo].[TD_LOGIN]([LGN_TOKEN_1FA] ASC);


GO
CREATE NONCLUSTERED INDEX [IX_LGN_TOKEN_2FA]
    ON [dbo].[TD_LOGIN]([LGN_TOKEN_2FA] ASC);

