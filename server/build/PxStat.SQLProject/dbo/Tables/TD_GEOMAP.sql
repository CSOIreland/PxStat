CREATE TABLE [dbo].[TD_GEOMAP] (
    [GMP_ID]            INT            IDENTITY (1, 1) NOT NULL,
    [GMP_CODE]          NVARCHAR (32)  NOT NULL,
    [GMP_NAME]          NVARCHAR (256) NOT NULL,
    [GMP_DESCRIPTION]   NVARCHAR (MAX) NULL,
    [GMP_GEOJSON]       NVARCHAR (MAX) NOT NULL,
    [GMP_FEATURE_COUNT] INT            CONSTRAINT [DF_TD_GEOMAP_GMP_FEATURE_COUNT] DEFAULT ((0)) NOT NULL,
    [GMP_GLR_ID]        INT            NOT NULL,
    [GMP_DTG_ID]        INT            NOT NULL,
    [GMP_DELETE_FLAG]   BIT            CONSTRAINT [DF_TD_GEOMAP_GMP_DELETE_FLAG] DEFAULT ((0)) NOT NULL,
    CONSTRAINT [PK_TD_GEOMAP] PRIMARY KEY CLUSTERED ([GMP_ID] ASC),
    CONSTRAINT [FK_TD_GEOMAP_TD_AUDITING] FOREIGN KEY ([GMP_DTG_ID]) REFERENCES [dbo].[TD_AUDITING] ([DTG_ID]),
    CONSTRAINT [FK_TD_GEOMAP_TD_GEOLAYER] FOREIGN KEY ([GMP_GLR_ID]) REFERENCES [dbo].[TD_GEOLAYER] ([GLR_ID])
);


GO
CREATE NONCLUSTERED INDEX [IX_GMP_CODE]
    ON [dbo].[TD_GEOMAP]([GMP_CODE] ASC);


GO
CREATE NONCLUSTERED INDEX [IX_GMP_DELETE_FLAG]
    ON [dbo].[TD_GEOMAP]([GMP_DELETE_FLAG] ASC);


GO
CREATE NONCLUSTERED INDEX [IX_GMP_DTG_ID]
    ON [dbo].[TD_GEOMAP]([GMP_DTG_ID] ASC);


GO
CREATE NONCLUSTERED INDEX [IX_GMP_GLR_ID]
    ON [dbo].[TD_GEOMAP]([GMP_GLR_ID] ASC);

