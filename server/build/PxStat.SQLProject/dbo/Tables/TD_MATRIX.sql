CREATE TABLE [dbo].[TD_MATRIX] (
    [MTR_ID]             INT            IDENTITY (1, 1) NOT NULL,
    [MTR_CODE]           NVARCHAR (20)  NOT NULL,
    [MTR_TITLE]          NVARCHAR (256) NOT NULL,
    [MTR_OFFICIAL_FLAG]  BIT            CONSTRAINT [DF_TD_MATRIX_MTR_OFFICIAL_FLAG] DEFAULT ((0)) NOT NULL,
    [MTR_INPUT]          NVARCHAR (MAX) COLLATE Latin1_General_BIN2  ENCRYPTED WITH (
     COLUMN_ENCRYPTION_KEY = [CEK_MTR_INPUT],
     ALGORITHM = N'AEAD_AES_256_CBC_HMAC_SHA_256',
     ENCRYPTION_TYPE = DETERMINISTIC
    ) NULL,
    [MTR_NOTE]           NVARCHAR (MAX) NULL,
    [MTR_RLS_ID]         INT            NOT NULL,
    [MTR_LNG_ID]         INT            NOT NULL,
    [MTR_FRM_ID]         INT            NOT NULL,
    [MTR_CPR_ID]         INT            NOT NULL,
    [MTR_DTG_ID]         INT            NOT NULL,
    [MTR_DELETE_FLAG]    BIT            CONSTRAINT [DF_TD_MATRIX_MTR_DELETE_FLAG] DEFAULT ((0)) NOT NULL,
    [MTR_DATA_FLAG]      BIT            CONSTRAINT [DF_TD_MATRIX_MTR_DATA_FLAG] DEFAULT ((0)) NULL,
    CONSTRAINT [PK_TD_MATRIX] PRIMARY KEY CLUSTERED ([MTR_ID] ASC),
    CONSTRAINT [FK_TD_MATRIX_TD_AUDITING] FOREIGN KEY ([MTR_DTG_ID]) REFERENCES [dbo].[TD_AUDITING] ([DTG_ID]),
    CONSTRAINT [FK_TD_MATRIX_TD_RELEASE] FOREIGN KEY ([MTR_RLS_ID]) REFERENCES [dbo].[TD_RELEASE] ([RLS_ID]),
    CONSTRAINT [FK_TD_MATRIX_TS_COPYRIGHT] FOREIGN KEY ([MTR_CPR_ID]) REFERENCES [dbo].[TS_COPYRIGHT] ([CPR_ID]),
    CONSTRAINT [FK_TD_MATRIX_TS_FORMAT] FOREIGN KEY ([MTR_FRM_ID]) REFERENCES [dbo].[TS_FORMAT] ([FRM_ID]),
    CONSTRAINT [FK_TD_MATRIX_TS_LANGUAGE] FOREIGN KEY ([MTR_LNG_ID]) REFERENCES [dbo].[TS_LANGUAGE] ([LNG_ID])
);




GO
CREATE NONCLUSTERED INDEX [IX_MTR_CODE]
    ON [dbo].[TD_MATRIX]([MTR_CODE] ASC);


GO
CREATE NONCLUSTERED INDEX [IX_MTR_CPR_ID]
    ON [dbo].[TD_MATRIX]([MTR_CPR_ID] ASC);


GO
CREATE NONCLUSTERED INDEX [IX_MTR_DATA_FLAG]
    ON [dbo].[TD_MATRIX]([MTR_DATA_FLAG] ASC);


GO
CREATE NONCLUSTERED INDEX [IX_MTR_DELETE_FLAG]
    ON [dbo].[TD_MATRIX]([MTR_DELETE_FLAG] ASC)
    INCLUDE([MTR_CODE], [MTR_TITLE], [MTR_RLS_ID]);


GO
CREATE NONCLUSTERED INDEX [IX_MTR_DTG_ID]
    ON [dbo].[TD_MATRIX]([MTR_DTG_ID] ASC);


GO
CREATE NONCLUSTERED INDEX [IX_MTR_FRM_ID]
    ON [dbo].[TD_MATRIX]([MTR_FRM_ID] ASC);


GO
CREATE NONCLUSTERED INDEX [IX_MTR_LNG_ID]
    ON [dbo].[TD_MATRIX]([MTR_LNG_ID] ASC);


GO
CREATE NONCLUSTERED INDEX [IX_MTR_OFFICIAL_FLAG]
    ON [dbo].[TD_MATRIX]([MTR_OFFICIAL_FLAG] ASC);


GO
CREATE NONCLUSTERED INDEX [IX_MTR_RLS_ID]
    ON [dbo].[TD_MATRIX]([MTR_RLS_ID] ASC);

