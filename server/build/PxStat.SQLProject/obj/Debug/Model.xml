<?xml version="1.0" encoding="utf-8"?>
<DataSchemaModel FileFormatVersion="1.2" SchemaVersion="2.9" DspName="Microsoft.Data.Tools.Schema.Sql.Sql130DatabaseSchemaProvider" CollationLcid="1033" CollationCaseSensitive="False" xmlns="http://schemas.microsoft.com/sqlserver/dac/Serialization/2012/02">
	<Header>
		<CustomData Category="AnsiNulls">
			<Metadata Name="AnsiNulls" Value="True" />
		</CustomData>
		<CustomData Category="QuotedIdentifier">
			<Metadata Name="QuotedIdentifier" Value="True" />
		</CustomData>
		<CustomData Category="CompatibilityMode">
			<Metadata Name="CompatibilityMode" Value="130" />
		</CustomData>
		<CustomData Category="Reference" Type="Assembly">
			<Metadata Name="LogicalName" Value="SQLProject.dll" />
			<Metadata Name="FileName" Value="C:\USERS\CHAPMAND\DEVELOPMENT\GITHUB\PXSTAT\SERVER\BUILD\PXSTAT.SQLPROJECT\OBJ\DEBUG\SQLPROJECT.DLL" />
			<Metadata Name="AssemblyName" Value="SQLProject" />
			<Metadata Name="PermissionSet" Value="SAFE" />
			<Metadata Name="Owner" Value="" />
			<Metadata Name="GenerateSqlClrDdl" Value="True" />
			<Metadata Name="IsVisible" Value="True" />
			<Metadata Name="IsModelAware" Value="True" />
			<Metadata Name="SkipCreationIfEmpty" Value="True" />
			<Metadata Name="AssemblySymbolsName" Value="C:\Users\chapmand\development\GitHub\PxStat\server\build\PxStat.SQLProject\obj\Debug\SQLProject.pdb" />
		</CustomData>
		<CustomData Category="SqlCmdVariables" Type="SqlCmdVariable" />
	</Header>
	<Model>
		<Element Type="SqlDatabaseOptions">
			<Property Name="Collation" Value="Latin1_General_CI_AS" />
			<Property Name="IsAnsiNullDefaultOn" Value="True" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Property Name="IsAnsiWarningsOn" Value="True" />
			<Property Name="IsArithAbortOn" Value="True" />
			<Property Name="IsConcatNullYieldsNullOn" Value="True" />
			<Property Name="IsTornPageProtectionOn" Value="False" />
			<Property Name="IsFullTextEnabled" Value="True" />
			<Property Name="PageVerifyMode" Value="3" />
			<Property Name="DefaultLanguage" Value="" />
			<Property Name="DefaultFullTextLanguage" Value="" />
			<Property Name="QueryStoreStaleQueryThreshold" Value="367" />
			<Relationship Name="DefaultFilegroup">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[PRIMARY]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION_DEPLOY]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION_DEPLOY].[HCD_DEPLOYED_TIME]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="12" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_HISTORY_APP_SETTING]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TS_HISTORY_APP_SETTING].[HPP_UPDATED_AT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="13" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(user_name())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_HISTORY_APP_SETTING]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TS_HISTORY_APP_SETTING].[HPP_UPDATED_BY]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="14" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_SENSITIVE_VALUE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="15" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_HISTORY_API_SETTING]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TS_HISTORY_API_SETTING].[HPI_UPDATED_AT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="16" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(user_name())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_HISTORY_API_SETTING]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TS_HISTORY_API_SETTING].[HPI_UPDATED_BY]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="17" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_API_SETTING]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_SENSITIVE_VALUE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="18" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_LOCKED_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="19" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_AD_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="20" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION].[HSV_UPDATED_AT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="21" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(user_name())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION].[HSV_UPDATED_BY]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="22" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_VARIABLE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_VARIABLE].[VRB_ELIMINATION_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="23" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION_DEPLOY].[HCD_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION_DEPLOY]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="24" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_API_TRACE].[TRC_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_API_TRACE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="25" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_HISTORY_APP_SETTING].[HPP_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_HISTORY_APP_SETTING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="26" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_APP_SETTING].[APP_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="27" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_HISTORY_API_SETTING].[HPI_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_HISTORY_API_SETTING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="28" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_API_SETTING].[API_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_API_SETTING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="29" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION].[HSV_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="30" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="31" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="32" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_API_CACHE_TRACE].[CCH_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_API_CACHE_TRACE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="33" />
		</Element>
		<Element Type="SqlRoleMembership">
			<Relationship Name="Member">
				<Entry>
					<References Name="[pxstat]" />
				</Entry>
			</Relationship>
			<Relationship Name="Role">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[db_datareader]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlRoleMembership">
			<Relationship Name="Member">
				<Entry>
					<References Name="[pxstat]" />
				</Entry>
			</Relationship>
			<Relationship Name="Role">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[db_datawriter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlRoleMembership">
			<Relationship Name="Member">
				<Entry>
					<References Name="[pxstat]" />
				</Entry>
			</Relationship>
			<Relationship Name="Role">
				<Entry>
					<References Name="[db_executor]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlUniqueConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_DATASET].[DTT_MTR_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_DATASET]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="34" />
		</Element>
		<Element Type="SqlColumnEncryptionKey" Name="[CEK_LGN_2FA]">
			<Relationship Name="ColumnEncryptionKeyValues">
				<Entry>
					<Element Type="SqlColumnEncryptionKeyValue">
						<Property Name="EncryptedValue" Value="0x0" />
						<Property Name="EncryptionAlgorithm" Value="RSA_OAEP" />
						<Relationship Name="ColumnMasterKey">
							<Entry>
								<References Name="[CMK]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlColumnEncryptionKey" Name="[CEK_MTD_DATA]">
			<Relationship Name="ColumnEncryptionKeyValues">
				<Entry>
					<Element Type="SqlColumnEncryptionKeyValue">
						<Property Name="EncryptedValue" Value="0x0" />
						<Property Name="EncryptionAlgorithm" Value="RSA_OAEP" />
						<Relationship Name="ColumnMasterKey">
							<Entry>
								<References Name="[CMK]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlColumnEncryptionKey" Name="[CEK_MTR_INPUT]">
			<Relationship Name="ColumnEncryptionKeyValues">
				<Entry>
					<Element Type="SqlColumnEncryptionKeyValue">
						<Property Name="EncryptedValue" Value="0x0" />
						<Property Name="EncryptionAlgorithm" Value="RSA_OAEP" />
						<Relationship Name="ColumnMasterKey">
							<Entry>
								<References Name="[CMK]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlColumnEncryptionKey" Name="[CEK_TDT_VALUE]">
			<Relationship Name="ColumnEncryptionKeyValues">
				<Entry>
					<Element Type="SqlColumnEncryptionKeyValue">
						<Property Name="EncryptedValue" Value="0x0" />
						<Property Name="EncryptionAlgorithm" Value="RSA_OAEP" />
						<Relationship Name="ColumnMasterKey">
							<Entry>
								<References Name="[CMK]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlColumnMasterKey" Name="[CMK]">
			<Property Name="KeyStoreProviderName" Value="MSSQL_CERTIFICATE_STORE" />
			<Property Name="KeyPath" Value="LocalMachine/My/XXX" />
		</Element>
		<Element Type="SqlRole" Name="[db_executor]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Api_Settings_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @APIASVID AS INT;
	DECLARE @APIID AS INT;

	SET @APIASVID = (
			SELECT TM_APP_SETTING_CONFIG_VERSION.ASV_ID
			FROM TM_APP_SETTING_CONFIG_VERSION
			INNER JOIN TS_CONFIG_SETTING_TYPE ON TS_CONFIG_SETTING_TYPE.CST_ID = TM_APP_SETTING_CONFIG_VERSION.ASV_CST_ID
			WHERE (TS_CONFIG_SETTING_TYPE.CST_CODE = 'API')
				AND TM_APP_SETTING_CONFIG_VERSION.ASV_VERSION = @apiversion
			);
	SET @APIID = (
			SELECT API_ID
			FROM TS_API_SETTING
			WHERE API_ASV_ID = @APIASVID
				AND API_KEY = @apikey
			)

	DELETE
	FROM TS_HISTORY_API_SETTING
	WHERE HPI_API_ID = @APIID

	DELETE
	FROM TS_API_SETTING
	WHERE API_ASV_ID = @APIASVID
		AND API_KEY = @apikey
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_CST_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Api_Settings_Delete].[@apiversion]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_KEY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Api_Settings_Delete].[@apikey]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_HISTORY_API_SETTING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_HISTORY_API_SETTING].[HPI_API_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_KEY]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Api_Settings_Delete].[@apiversion]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="2" />
									<Property Name="Precision" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Api_Settings_Delete].[@apikey]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="28" />
				<Property Name="Length" Value="849" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;--Use for migration only&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[Api_Settings_Delete] @apiversion DECIMAL(10, 2)&#xD;&#xA;&#x9;,@apikey VARCHAR(200)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Api_Settings_Migrate_Write]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @APIASVID AS INT;

	SET @APIASVID = (
			SELECT MAX(TM_APP_SETTING_CONFIG_VERSION.ASV_ID)
			FROM TM_APP_SETTING_CONFIG_VERSION
			INNER JOIN TS_CONFIG_SETTING_TYPE ON TS_CONFIG_SETTING_TYPE.CST_ID = TM_APP_SETTING_CONFIG_VERSION.ASV_CST_ID
			WHERE (TS_CONFIG_SETTING_TYPE.CST_CODE = 'API')
			);

	DECLARE @DtgId INT = NULL

	EXEC @DtgId = Security_Auditing_Create @userName;

	IF @DtgId IS NULL
		OR @DtgId = 0
	BEGIN
		RAISERROR (
				'SP: Security_Auditing_Create has failed!'
				,16
				,1
				)

		RETURN 0
	END

	INSERT INTO TS_API_SETTING
	(
		API_ASV_ID,
		API_KEY,
		API_VALUE,
		API_DESCRIPTION,
		API_SENSITIVE_VALUE

	)
	VALUES (
		@APIASVID
		,@apikey
		,@apivalue
		,@apidescription
		,COALESCE(@apisensitivevalue,0)
		);
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_CST_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Api_Settings_Migrate_Write].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_KEY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_DESCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_SENSITIVE_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Api_Settings_Migrate_Write].[@apikey]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Api_Settings_Migrate_Write].[@apivalue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Api_Settings_Migrate_Write].[@apidescription]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Api_Settings_Migrate_Write].[@apisensitivevalue]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Api_Settings_Migrate_Write].[@apiversion]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="2" />
									<Property Name="Precision" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Api_Settings_Migrate_Write].[@apikey]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Api_Settings_Migrate_Write].[@apivalue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Api_Settings_Migrate_Write].[@apidescription]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Api_Settings_Migrate_Write].[@apisensitivevalue]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Api_Settings_Migrate_Write].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="41" />
				<Property Name="Length" Value="1091" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- This sp is used for migration only&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[Api_Settings_Migrate_Write] @apiversion DECIMAL(10, 2)&#xD;&#xA;&#x9;,@apikey VARCHAR(200)&#xD;&#xA;&#x9;,@apivalue VARCHAR(MAX)&#xD;&#xA;&#x9;,@apidescription VARCHAR(MAX)&#xD;&#xA;&#x9;,@apisensitivevalue BIT=NULL&#xD;&#xA;&#x9;,@userName NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Api_Settings_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON

	DECLARE @errorMessage VARCHAR(1300)
		,@version_id DECIMAL(10, 2) = NULL
		,@config_setting_type_id INT = NULL;

	SELECT @config_setting_type_id = cst_id
	FROM TS_CONFIG_SETTING_TYPE
	WHERE cst_code = 'API';

	IF @config_setting_type_id IS NULL
	BEGIN
		SELECT @errorMessage = 'Api setting type not found for code : API';

		RAISERROR (
				@errorMessage
				,16
				,1
				)

		RETURN 0
	END

	SELECT @version_id = ASV_ID
	FROM TM_APP_SETTING_CONFIG_VERSION
	WHERE ASV_VERSION = @app_settings_version
		AND ASV_CST_ID = @config_setting_type_id;

	IF @version_id IS NULL  AND @app_settings_version is not null
	BEGIN
		SELECT @errorMessage = CONCAT (
				'Api setting version not found for version : '
				,@app_settings_version
				);

		RAISERROR (
				@errorMessage
				,16
				,1
				)

		RETURN 0
	END


	declare @versionToFind DECIMAL(10, 2) = NULL;

	IF @app_settings_version is null
		BEGIN
			DECLARE @max_version_id INT = NULL
				,@max_version_number DECIMAL(10, 2) = NULL;

			SELECT @max_version_id = max(ASV_ID)
				,@max_version_number = ASV_VERSION
			FROM TM_APP_SETTING_CONFIG_VERSION
			WHERE ASV_CST_ID = @config_setting_type_id
			GROUP BY ASV_ID
				,ASV_VERSION;

			IF @max_version_id IS NULL
				BEGIN
					SELECT @errorMessage = 'Api setting version not found for latest version';

						RAISERROR (
								@errorMessage
								,16
								,1
								)
							
						RETURN 0
				END
			ELSE
				BEGIN
					set @versionToFind = @max_version_id;
			END
		END
	ELSE
		BEGIN
			set @versionToFind = @version_id;
		END


		IF @read_sensitive_value = 1
			BEGIN
				SELECT	API_KEY
				,API_VALUE
				,API_DESCRIPTION 
				,API_SENSITIVE_VALUE
				FROM TS_API_SETTING
				WHERE API_ASV_ID = @versionToFind;
			END
		ELSE
		BEGIN
			SELECT	API_KEY
			,CASE WHEN API_SENSITIVE_VALUE=0 THEN API_VALUE ELSE null END AS API_VALUE
			,API_DESCRIPTION 
			,API_SENSITIVE_VALUE
			FROM TS_API_SETTING
			WHERE API_ASV_ID = @versionToFind;
		END


		IF @app_settings_version is null
			begin
				SELECT @max_version_number AS max_version_number;
			end
		else
			begin
				SELECT ASV_VERSION AS max_version_number
				FROM TM_APP_SETTING_CONFIG_VERSION
				WHERE ASV_CST_ID = @config_setting_type_id
				and asv_id = @versionToFind
			end

END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Api_Settings_Read].[@app_settings_version]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_CST_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Api_Settings_Read].[@read_sensitive_value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_KEY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_DESCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_SENSITIVE_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_ASV_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Api_Settings_Read].[@app_settings_version]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="2" />
									<Property Name="Precision" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Api_Settings_Read].[@read_sensitive_value]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="1066" />
				<Property Name="Length" Value="3578" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="/******************************************************************************** &#xD;&#xA;Author Name                           :  Stephen Lane &#xD;&#xA;Date written                          :  04/11/2022 &#xD;&#xA;Version                               :  1 &#xD;&#xA;Description   &#xD;&#xA;              &#xD;&#xA;Reads the application settings based on the version in the TM_APP_SETTING_VERSION table which is passed in. &#xD;&#xA;For c# application will come from appsettings.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;REVISION HISTORY &#xD;&#xA;---------------- &#xD;&#xA;CHANGE NO.    DATE          CHANGED BY          REASON &#xD;&#xA;01&#x9;&#x9;&#x9;22/06/2023&#x9;&#x9;Stephen Lane&#x9;dont return sensitive values unless requested&#xD;&#xA;02&#x9;&#x9;&#x9;13/09/2023&#x9;&#x9;Stephen Lane&#x9;changing mask to null to work with always encrypted&#xD;&#xA;03&#x9;&#x9;&#x9;24/11/2023&#x9;&#x9;Stephen Lane&#x9;app_settings_version being null means get max pk version&#xD;&#xA;04&#x9;&#x9;&#x9;07/11/2023&#x9;&#x9;Stephen Lane&#x9;always return two select statements&#xD;&#xA;&#xD;&#xA;PEER REVIEW HISTORY &#xD;&#xA;------------------- &#xD;&#xA;REVIEW NO.    DATE          REVIEWED BY         COMMENTS &#xD;&#xA;&#xD;&#xA;exec api_settings_read 1&#xD;&#xA;&#xD;&#xA;*************************************************************************************/&#xD;&#xA;CREATE   PROCEDURE [dbo].[Api_Settings_Read] @app_settings_version DECIMAL(10, 2),&#xD;&#xA;@read_sensitive_value BIT=1&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Api_Settings_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @APIASVID AS INT;

	SET @APIASVID = (
			SELECT TM_APP_SETTING_CONFIG_VERSION.ASV_ID
			FROM TM_APP_SETTING_CONFIG_VERSION
			INNER JOIN TS_CONFIG_SETTING_TYPE ON TS_CONFIG_SETTING_TYPE.CST_ID = TM_APP_SETTING_CONFIG_VERSION.ASV_CST_ID
			WHERE (TS_CONFIG_SETTING_TYPE.CST_CODE = 'API')
				AND TM_APP_SETTING_CONFIG_VERSION.ASV_VERSION = @apiversion
			);

	UPDATE TS_API_SETTING
	SET API_KEY = COALESCE(@apikeyNew, API_KEY)
		,API_VALUE = COALESCE(@apivalue, API_VALUE)
		,API_DESCRIPTION = COALESCE(@apidescription, API_DESCRIPTION)
		,API_SENSITIVE_VALUE = COALESCE(@apisensitivevalue, API_SENSITIVE_VALUE)
	WHERE API_ASV_ID = @APIASVID
		AND API_KEY = @apikey
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_CST_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Api_Settings_Update].[@apiversion]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_KEY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Api_Settings_Update].[@apikeyNew]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Api_Settings_Update].[@apivalue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_DESCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Api_Settings_Update].[@apidescription]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_SENSITIVE_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Api_Settings_Update].[@apisensitivevalue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Api_Settings_Update].[@apikey]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Api_Settings_Update].[@apiversion]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="2" />
									<Property Name="Precision" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Api_Settings_Update].[@apikey]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Api_Settings_Update].[@apikeyNew]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Api_Settings_Update].[@apivalue]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Api_Settings_Update].[@apidescription]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Api_Settings_Update].[@apisensitivevalue]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="38" />
				<Property Name="Length" Value="1006" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- This is used only for migration&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[Api_Settings_Update] @apiversion DECIMAL(10, 2)&#xD;&#xA;&#x9;,@apikey VARCHAR(200)&#xD;&#xA;&#x9;,@apikeyNew VARCHAR(200) = NULL&#xD;&#xA;&#x9;,@apivalue VARCHAR(MAX) = NULL&#xD;&#xA;&#x9;,@apidescription VARCHAR(MAX) = NULL&#xD;&#xA;&#x9;,@apisensitivevalue BIT = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Api_Settings_Write]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @APIID AS INT;
	DECLARE @newkey AS INT;

	SET @APIID = (
			SELECT MAX(TM_APP_SETTING_CONFIG_VERSION.ASV_ID)
			FROM TM_APP_SETTING_CONFIG_VERSION
			INNER JOIN TS_CONFIG_SETTING_TYPE ON TS_CONFIG_SETTING_TYPE.CST_ID = TM_APP_SETTING_CONFIG_VERSION.ASV_CST_ID
			WHERE (TS_CONFIG_SETTING_TYPE.CST_CODE = 'API')
			);

	DECLARE @DtgId AS INT = NULL;

	EXECUTE @DtgId = Security_Auditing_Create @userName;

	IF @DtgId IS NULL
		OR @DtgId = 0
	BEGIN
		RAISERROR (
				'SP: Security_Auditing_Create has failed!'
				,16
				,1
				);

		RETURN 0;
	END

	SET @newkey = (
			SELECT count(*)
			FROM TS_API_SETTING
			WHERE API_KEY = @apikey
				AND API_ASV_ID = (
					SELECT MAX(ASV_ID)
					FROM TM_APP_SETTING_CONFIG_VERSION
					WHERE ASV_VERSION = @apiversion
					)
			);

	IF @newkey = 0
	BEGIN
		INSERT INTO TS_API_SETTING
		VALUES (
			@APIID
			,@apikey
			,@apivalue
			,@apidescription
			,COALESCE(@apisensitivevalue, 0)
			);

		INSERT INTO TS_API_SETTING
		SELECT @APIID
			,API_KEY
			,API_VALUE
			,API_DESCRIPTION
			,API_SENSITIVE_VALUE
		FROM TS_API_SETTING
		WHERE API_ASV_ID = (
				SELECT DISTINCT ASV_ID
				FROM TM_APP_SETTING_CONFIG_VERSION
				WHERE ASV_VERSION = @apiversion
					AND ASV_CST_ID = 1
				);
	END
	ELSE
	BEGIN
		INSERT INTO TS_API_SETTING
		VALUES (
			@APIID
			,@apikey
			,@apivalue
			,@apidescription
			,COALESCE(@apisensitivevalue, 0)
			);

		INSERT INTO TS_API_SETTING
		SELECT @APIID
			,API_KEY
			,API_VALUE
			,API_DESCRIPTION
			,API_SENSITIVE_VALUE
		FROM TS_API_SETTING
		WHERE API_ASV_ID = (
				SELECT DISTINCT ASV_ID
				FROM TM_APP_SETTING_CONFIG_VERSION
				WHERE ASV_VERSION = @apiversion
					AND ASV_CST_ID = 1
				)
			AND API_KEY <> @apikey;
	END
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_CST_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Api_Settings_Write].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_KEY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Api_Settings_Write].[@apikey]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Api_Settings_Write].[@apiversion]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Api_Settings_Write].[@apivalue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Api_Settings_Write].[@apidescription]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Api_Settings_Write].[@apisensitivevalue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_KEY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_DESCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_SENSITIVE_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_CST_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Api_Settings_Write].[@apiversion]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="2" />
									<Property Name="Precision" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Api_Settings_Write].[@apikey]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Api_Settings_Write].[@apivalue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Api_Settings_Write].[@apidescription]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Api_Settings_Write].[@apisensitivevalue]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Api_Settings_Write].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="2063" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[Api_Settings_Write] @apiversion DECIMAL(10, 2)&#xD;&#xA;&#x9;,@apikey VARCHAR(200)&#xD;&#xA;&#x9;,@apivalue VARCHAR(MAX)&#xD;&#xA;&#x9;,@apidescription VARCHAR(MAX)&#xD;&#xA;&#x9;,@apisensitivevalue BIT = NULL&#xD;&#xA;&#x9;,@userName NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[App_Setting_Deploy_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    DECLARE @errorMessage AS VARCHAR (1300), @version_id AS DECIMAL (10, 2) = NULL, @config_setting_type_id AS INT = NULL;
    SELECT @config_setting_type_id = cst_id
    FROM   TS_CONFIG_SETTING_TYPE
    WHERE  cst_code = @config_setting_type;
    IF @config_setting_type_id IS NULL
        BEGIN
            SELECT @errorMessage = CONCAT(@config_setting_type, ' setting type not found for code : ' + @config_setting_type);
            RAISERROR (@errorMessage, 16, 1);
            RETURN 0;
        END
    IF @auto_version = 1
        BEGIN
            SELECT @version_id = max(ASV_ID)
            FROM   TM_APP_SETTING_CONFIG_VERSION
            WHERE  ASV_CST_ID = @config_setting_type_id;
        END
    ELSE
        BEGIN
            SELECT @version_id = ASV_ID
            FROM   TM_APP_SETTING_CONFIG_VERSION
            WHERE  ASV_VERSION = @app_settings_version
                   AND ASV_CST_ID = @config_setting_type_id;
        END
    IF @version_id IS NULL
        BEGIN
            SELECT @errorMessage = CONCAT(@config_setting_type, ' setting version not found for version : ', @app_settings_version);
            RAISERROR (@errorMessage, 16, 1);
            RETURN 0;
        END
    DECLARE @machineIP AS VARCHAR (100) = NULL;
    SELECT @machineIP = CONVERT (VARCHAR (100), CONNECTIONPROPERTY('client_net_address'));
    DECLARE @historyID AS INT = NULL;
    SELECT @historyID = max(HSV_ID)
    FROM   TM_HISTORY_APP_SETTING_CONFIG_VERSION
    WHERE  HSV_ASV_ID = @version_id;
    INSERT  INTO [TM_HISTORY_APP_SETTING_CONFIG_VERSION_DEPLOY] ([HCD_HSV_ID], [HCD_IP_ADDRESS])
    VALUES                                                     (@historyID, @machineIP);
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[App_Setting_Deploy_Update].[@config_setting_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[App_Setting_Deploy_Update].[@auto_version]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_CST_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[App_Setting_Deploy_Update].[@app_settings_version]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION].[HSV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION].[HSV_ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION_DEPLOY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION_DEPLOY].[HCD_HSV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION_DEPLOY].[HCD_IP_ADDRESS]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[App_Setting_Deploy_Update].[@app_settings_version]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="2" />
									<Property Name="Precision" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[App_Setting_Deploy_Update].[@config_setting_type]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[App_Setting_Deploy_Update].[@auto_version]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1908" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[App_Setting_Deploy_Update]&#xD;&#xA;@app_settings_version DECIMAL (10, 2), @config_setting_type VARCHAR (10), @auto_version BIT=NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[App_Settings_Insert_Version]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	INSERT INTO TM_APP_SETTING_CONFIG_VERSION
	VALUES (
		@version_id
		,@cst_id
		);

	SELECT ASV_VERSION
	FROM TM_APP_SETTING_CONFIG_VERSION
	WHERE ASV_VERSION = @version_id
		AND ASV_CST_ID = @cst_id;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[App_Settings_Insert_Version].[@version_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[App_Settings_Insert_Version].[@cst_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_CST_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[App_Settings_Insert_Version].[@version_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[App_Settings_Insert_Version].[@cst_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="348" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[App_Settings_Insert_Version] @version_id VARCHAR(100)&#xD;&#xA;&#x9;,@cst_id INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[App_Settings_Migrate_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @ASVID AS INT;

	
	

	SET @ASVID = (
			SELECT MAX(TM_APP_SETTING_CONFIG_VERSION.ASV_ID)
			FROM TM_APP_SETTING_CONFIG_VERSION
			INNER JOIN TS_CONFIG_SETTING_TYPE ON TS_CONFIG_SETTING_TYPE.CST_ID = TM_APP_SETTING_CONFIG_VERSION.ASV_CST_ID
			WHERE (TS_CONFIG_SETTING_TYPE.CST_CODE = 'APP')
			);

	DECLARE @DtgId INT = NULL

	EXEC @DtgId = Security_Auditing_Create @userName;

	IF @DtgId IS NULL
		OR @DtgId = 0
	BEGIN
		RAISERROR (
				'SP: [App_Settings_Migrate_Update] failed'
				,16
				,1
				)

		RETURN 0
	END;



	DISABLE TRIGGER TRIG_TS_APP_SETTING_UPDATE ON TS_APP_SETTING;


	BEGIN TRY
		UPDATE TS_APP_SETTING
		SET APP_VALUE=@appvalue,
		APP_DESCRIPTION=@appdescription
		WHERE APP_KEY=@appkey
		AND APP_ASV_ID=@ASVID;
	END TRY
	BEGIN CATCH
		ENABLE TRIGGER TRIG_TS_APP_SETTING_UPDATE ON TS_APP_SETTING;
		THROW;
	END CATCH;
	
	ENABLE TRIGGER TRIG_TS_APP_SETTING_UPDATE ON TS_APP_SETTING;
	
	return @@rowcount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_CST_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[App_Settings_Migrate_Update].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TRIG_TS_APP_SETTING_UPDATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[App_Settings_Migrate_Update].[@appvalue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_DESCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[App_Settings_Migrate_Update].[@appdescription]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_KEY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[App_Settings_Migrate_Update].[@appkey]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_ASV_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[App_Settings_Migrate_Update].[@appkey]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[App_Settings_Migrate_Update].[@appvalue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[App_Settings_Migrate_Update].[@appdescription]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[App_Settings_Migrate_Update].[@appsensitivevalue]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[App_Settings_Migrate_Update].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="1894" />
				<Property Name="Length" Value="3109" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- For migration only&#xD;&#xA;/*&#xD;&#xA; exec App_Settings_Migrate_Update 'config.global.json','{&#xD;&#xA;  &quot;title&quot;: &quot;Pre-Production&quot;,&#xD;&#xA;  &quot;language&quot;: {&#xD;&#xA;    &quot;iso&quot;: {&#xD;&#xA;      &quot;code&quot;: &quot;en&quot;,&#xD;&#xA;      &quot;name&quot;: &quot;English&quot;&#xD;&#xA;    },&#xD;&#xA;    &quot;culture&quot;: &quot;en-ie&quot;&#xD;&#xA;  },&#xD;&#xA;  &quot;url&quot;: {&#xD;&#xA;    &quot;api&quot;: {&#xD;&#xA;      &quot;restful&quot;: &quot;https://ppws-data.nisra.gov.uk/public/api.restful&quot;,&#xD;&#xA;      &quot;static&quot;: &quot;https://ppws-data.nisra.gov.uk/public/api.static&quot;&#xD;&#xA;    },&#xD;&#xA;    &quot;logo&quot;: &quot;https://ppdata.nisra.gov.uk/image/logo.png&quot;,&#xD;&#xA;    &quot;application&quot;: &quot;https://ppdata.nisra.gov.uk/&quot;&#xD;&#xA;    &#xD;&#xA;  },&#xD;&#xA;  &quot;dataset&quot;: {&#xD;&#xA;    &quot;officialStatistics&quot;: true,&#xD;&#xA;    &quot;download&quot;: {&#xD;&#xA;      &quot;threshold&quot;: {&#xD;&#xA;        &quot;csv&quot;: 1048575,&#xD;&#xA;        &quot;xlsx&quot;: 1048575&#xD;&#xA;      }&#xD;&#xA;    }&#xD;&#xA;  },&#xD;&#xA;&#xD;&#xA;  &quot;regex&quot;: {&#xD;&#xA;    &quot;phone&quot;: {&#xD;&#xA;      &quot;pattern&quot;: &quot;^(\\d+ \\d+ \\d+)$&quot;,&#xD;&#xA;      &quot;placeholder&quot;: &quot;028 9038 8474&quot;&#xD;&#xA;    },&#xD;&#xA;    &quot;password&quot;: &quot;^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[\\W]).{8,}$&quot;,&#xD;&#xA;    &quot;matrix-name&quot;: &quot;^[A-Z0-9]+$&quot;,&#xD;&#xA;    &quot;product-code&quot;: &quot;^[a-zA-Z0-9]+$&quot;&#xD;&#xA;  },&#xD;&#xA;  &quot;workflow&quot;: {&#xD;&#xA;    &quot;embargo&quot;: {&#xD;&#xA;      &quot;time&quot;: &quot;09:30:00&quot;,&#xD;&#xA;      &quot;day&quot;: [&#xD;&#xA;        1,&#xD;&#xA;        2,&#xD;&#xA;        3,&#xD;&#xA;        4,&#xD;&#xA;        5&#xD;&#xA;      ]&#xD;&#xA;    },&#xD;&#xA;    &quot;fastrack&quot;: {&#xD;&#xA;      &quot;response&quot;: {&#xD;&#xA;        &quot;approver&quot;: false,&#xD;&#xA;        &quot;poweruser&quot;: true,&#xD;&#xA;        &quot;administrator&quot;: true&#xD;&#xA;      },&#xD;&#xA;      &quot;signoff&quot;: {&#xD;&#xA;        &quot;poweruser&quot;: true,&#xD;&#xA;        &quot;administrator&quot;: true&#xD;&#xA;      }&#xD;&#xA;    },&#xD;&#xA;    &quot;release&quot;: {&#xD;&#xA;      &quot;reasonRequired&quot;: false&#xD;&#xA;    }&#xD;&#xA;  },&#xD;&#xA;  &quot;build&quot;: {&#xD;&#xA;    &quot;create&quot;: {&#xD;&#xA;      &quot;moderator&quot;: true&#xD;&#xA;    },&#xD;&#xA;    &quot;update&quot;: {&#xD;&#xA;      &quot;moderator&quot;: true&#xD;&#xA;    },&#xD;&#xA;    &quot;import&quot;: {&#xD;&#xA;      &quot;moderator&quot;: true&#xD;&#xA;    }&#xD;&#xA;  },&#xD;&#xA;  &quot;session&quot;: {&#xD;&#xA;    &quot;length&quot;: 1200&#xD;&#xA;  },&#xD;&#xA;  &quot;security&quot;: {&#xD;&#xA;    &quot;adOpenAccess&quot;: true,&#xD;&#xA;    &quot;demo&quot;: false&#xD;&#xA;  },&#xD;&#xA;  &quot;search&quot;: {&#xD;&#xA;&#xD;&#xA;    &quot;maximumResults&quot;: 100&#xD;&#xA;  },&#xD;&#xA;  &quot;report&quot;: {&#xD;&#xA;    &quot;date-validation&quot;: {&#xD;&#xA;      &quot;minDate&quot;: 365,&#xD;&#xA;      &quot;maxDate&quot;: -1&#xD;&#xA;    }&#xD;&#xA;  }&#xD;&#xA;}','Json config for config.global.json',0,'okeeffene'&#xD;&#xA;*/&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[App_Settings_Migrate_Update] @appkey VARCHAR(200)&#xD;&#xA;&#x9;,@appvalue VARCHAR(MAX)&#xD;&#xA;&#x9;,@appdescription VARCHAR(MAX)&#xD;&#xA;&#x9;,@appsensitivevalue BIT = NULL&#xD;&#xA;&#x9;,@userName NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[App_Settings_Migrate_Write]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @APPID AS INT;

	SET @APPID = (
			SELECT MAX(TM_APP_SETTING_CONFIG_VERSION.ASV_ID)
			FROM TM_APP_SETTING_CONFIG_VERSION
			INNER JOIN TS_CONFIG_SETTING_TYPE ON TS_CONFIG_SETTING_TYPE.CST_ID = TM_APP_SETTING_CONFIG_VERSION.ASV_CST_ID
			WHERE (TS_CONFIG_SETTING_TYPE.CST_CODE = 'APP')
			);

	DECLARE @DtgId INT = NULL

	EXEC @DtgId = Security_Auditing_Create @userName;

	IF @DtgId IS NULL
		OR @DtgId = 0
	BEGIN
		RAISERROR (
				'SP: Security_Auditing_Create has failed!'
				,16
				,1
				)

		RETURN 0
	END

	INSERT INTO TS_APP_SETTING
	VALUES (
		@APPID
		,@appkey
		,@appvalue
		,@appdescription
		,COALESCE(@appsensitivevalue, 0)
		);
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_CST_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[App_Settings_Migrate_Write].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[App_Settings_Migrate_Write].[@appkey]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[App_Settings_Migrate_Write].[@appvalue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[App_Settings_Migrate_Write].[@appdescription]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[App_Settings_Migrate_Write].[@appsensitivevalue]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[App_Settings_Migrate_Write].[@appkey]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[App_Settings_Migrate_Write].[@appvalue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[App_Settings_Migrate_Write].[@appdescription]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[App_Settings_Migrate_Write].[@appsensitivevalue]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[App_Settings_Migrate_Write].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="25" />
				<Property Name="Length" Value="945" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- For migration only&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[App_Settings_Migrate_Write] @appkey VARCHAR(200)&#xD;&#xA;&#x9;,@appvalue VARCHAR(MAX)&#xD;&#xA;&#x9;,@appdescription VARCHAR(MAX)&#xD;&#xA;&#x9;,@appsensitivevalue BIT = NULL&#xD;&#xA;&#x9;,@userName NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[App_Settings_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON

	DECLARE @errorMessage VARCHAR(1300)
		,@version_id DECIMAL(10, 2) = NULL
		,@config_setting_type_id INT = NULL;

	SELECT @config_setting_type_id = cst_id
	FROM TS_CONFIG_SETTING_TYPE
	WHERE cst_code = 'APP'

	IF @config_setting_type_id IS NULL
	BEGIN
		SELECT @errorMessage = 'App setting type not found for code : APP';

		RAISERROR (
				@errorMessage
				,16
				,1
				)

		RETURN 0
	END

	SELECT @version_id = ASV_ID
	FROM TM_APP_SETTING_CONFIG_VERSION
	WHERE ASV_VERSION = @app_settings_version
		AND ASV_CST_ID = @config_setting_type_id;

	IF @version_id IS NULL AND @app_settings_version is not null
	BEGIN
		SELECT @errorMessage = CONCAT (
				'App setting version not found for version : '
				,@app_settings_version
				);

		RAISERROR (
				@errorMessage
				,16
				,1
				)

		RETURN 0
	END

	declare @versionToFind DECIMAL(10, 2) = NULL;


	IF @app_settings_version is null
	BEGIN
		DECLARE @max_version_id INT = NULL
			,@max_version_number DECIMAL(10, 2) = NULL;

		SELECT @max_version_id = max(ASV_ID)
			,@max_version_number = ASV_VERSION
		FROM TM_APP_SETTING_CONFIG_VERSION
		WHERE ASV_CST_ID = @config_setting_type_id
		GROUP BY ASV_ID
			,ASV_VERSION;

		IF @max_version_id IS NULL
			BEGIN
				SELECT @errorMessage = 'App setting version not found for latest version';

				RAISERROR (
						@errorMessage
						,16
						,1
						)

				RETURN 0
			END
		ELSE
			BEGIN
				set @versionToFind = @max_version_id;
			END
		END
		ELSE
		BEGIN
			set @versionToFind = @version_id;
		END

		IF @read_sensitive_value = 1
		BEGIN
			SELECT	APP_KEY
			,APP_VALUE
			,APP_DESCRIPTION 
			,APP_SENSITIVE_VALUE
			FROM TS_APP_SETTING
			WHERE APP_ASV_ID = @versionToFind;
		END
		ELSE
		BEGIN
			SELECT	APP_KEY
			,CASE WHEN APP_SENSITIVE_VALUE=0 THEN APP_VALUE ELSE null END AS APP_VALUE
			,APP_DESCRIPTION 
			,APP_SENSITIVE_VALUE
			FROM TS_APP_SETTING
			WHERE APP_ASV_ID = @versionToFind;
		END

		IF @app_settings_version is null
			begin
				SELECT @max_version_number AS max_version_number;
			end
		else
			begin
				SELECT ASV_VERSION AS max_version_number
				FROM TM_APP_SETTING_CONFIG_VERSION
				WHERE ASV_CST_ID = @config_setting_type_id
				and asv_id = @versionToFind
			end
	END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[App_Settings_Read].[@app_settings_version]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_CST_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[App_Settings_Read].[@read_sensitive_value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_KEY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_DESCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_SENSITIVE_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_ASV_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[App_Settings_Read].[@app_settings_version]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="2" />
									<Property Name="Precision" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[App_Settings_Read].[@read_sensitive_value]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="1217" />
				<Property Name="Length" Value="3681" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="/******************************************************************************** &#xD;&#xA;Author Name                           :  Stephen Lane &#xD;&#xA;Date written                          :  04/11/2022 &#xD;&#xA;Version                               :  2 &#xD;&#xA;Description   &#xD;&#xA;              &#xD;&#xA;Reads the application settings based on the version in the TM_APP_SETTING_VERSION table which is passed in. &#xD;&#xA;For c# application will come from appsettings.&#xD;&#xA;&#xD;&#xA;EXEC App_Settings_Read 3.0,0,0&#xD;&#xA;&#xD;&#xA;REVISION HISTORY &#xD;&#xA;---------------- &#xD;&#xA;CHANGE NO.    DATE          CHANGED BY          REASON &#xD;&#xA;1&#x9;&#x9;&#x9;23/03/2023&#x9;Stephen Lane&#x9;&#x9;&#x9;adding auto_version param so that latest version can always be retrieved instead of specific version&#xD;&#xA;2&#x9;&#x9;&#x9;22/06/2023&#x9;&#x9;Stephen Lane&#x9;dont return sensitive values unless requested&#xD;&#xA;03&#x9;&#x9;&#x9;13/09/2023&#x9;&#x9;Stephen Lane&#x9;changing mask to null to work with always encrypted&#xD;&#xA;04&#x9;&#x9;&#x9;24/11/2023&#x9;&#x9;Stephen Lane&#x9;replacing autoversion with app_settings_version being null&#xD;&#xA;05&#x9;&#x9;&#x9;07/11/2023&#x9;&#x9;Stephen Lane&#x9;always return two select statements&#xD;&#xA;test comment&#xD;&#xA;&#xD;&#xA;PEER REVIEW HISTORY &#xD;&#xA;------------------- &#xD;&#xA;REVIEW NO.    DATE          REVIEWED BY         COMMENTS &#xD;&#xA;&#xD;&#xA;*************************************************************************************/&#xD;&#xA;CREATE   PROCEDURE [dbo].[App_Settings_Read] @app_settings_version DECIMAL(10, 2)&#xD;&#xA;&#x9;,@read_sensitive_value BIT=1&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[App_Settings_Read_Version]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	IF @version_id IS NULL
	BEGIN
		SELECT MAX(ASV_VERSION) AS ASV_VERSION
		FROM TM_APP_SETTING_CONFIG_VERSION
		WHERE ASV_CST_ID = @cst_id
	END
	ELSE
	BEGIN
		SET NOCOUNT ON;

		SELECT ASV_VERSION
		FROM TM_APP_SETTING_CONFIG_VERSION
		WHERE ASV_VERSION = @version_id
			AND ASV_CST_ID = @cst_id;
	END
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[App_Settings_Read_Version].[@version_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_CST_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[App_Settings_Read_Version].[@cst_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[App_Settings_Read_Version].[@version_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[App_Settings_Read_Version].[@cst_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="438" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[App_Settings_Read_Version] @version_id VARCHAR(100) = NULL&#xD;&#xA;&#x9;,@cst_id INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[App_Settings_Write]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @APPID AS INT;
	DECLARE @newkey AS INT;

	SET @APPID = (
			SELECT MAX(TM_APP_SETTING_CONFIG_VERSION.ASV_ID)
			FROM TM_APP_SETTING_CONFIG_VERSION
			INNER JOIN TS_CONFIG_SETTING_TYPE ON TS_CONFIG_SETTING_TYPE.CST_ID = TM_APP_SETTING_CONFIG_VERSION.ASV_CST_ID
			WHERE (TS_CONFIG_SETTING_TYPE.CST_CODE = 'APP')
			);

	DECLARE @DtgId AS INT = NULL;

	EXECUTE @DtgId = Security_Auditing_Create @userName;

	IF @DtgId IS NULL
		OR @DtgId = 0
	BEGIN
		RAISERROR (
				'SP: Security_Auditing_Create has failed!'
				,16
				,1
				);

		RETURN 0;
	END

	SET @newkey = (
			SELECT count(*)
			FROM TS_APP_SETTING
			WHERE APP_KEY = @appkey
				AND APP_ASV_ID = (
					SELECT MAX(ASV_ID)
					FROM TM_APP_SETTING_CONFIG_VERSION
					WHERE ASV_VERSION = @appversion
					)
			);

	IF @newkey = 0
	BEGIN
		INSERT INTO TS_APP_SETTING
		VALUES (
			@APPID
			,@appkey
			,@appvalue
			,@appdescription
			,COALESCE(@appsensitivevalue, 0)
			);

		INSERT INTO TS_APP_SETTING
		SELECT @APPID
			,APP_KEY
			,APP_VALUE
			,APP_DESCRIPTION
			,APP_SENSITIVE_VALUE
		FROM TS_APP_SETTING
		WHERE APP_ASV_ID = (
				SELECT DISTINCT ASV_ID
				FROM TM_APP_SETTING_CONFIG_VERSION
				WHERE ASV_VERSION = @appversion
					AND ASV_CST_ID = 2
				);
	END
	ELSE
	BEGIN
		INSERT INTO TS_APP_SETTING
		VALUES (
			@APPID
			,@appkey
			,@appvalue
			,@appdescription
			,COALESCE(@appsensitivevalue, 0)
			);

		INSERT INTO TS_APP_SETTING
		SELECT @APPID
			,APP_KEY
			,APP_VALUE
			,APP_DESCRIPTION
			,APP_SENSITIVE_VALUE
		FROM TS_APP_SETTING
		WHERE APP_ASV_ID = (
				SELECT DISTINCT ASV_ID
				FROM TM_APP_SETTING_CONFIG_VERSION
				WHERE ASV_VERSION = @appversion
					AND ASV_CST_ID = 2
				)
			AND APP_KEY <> @appkey;
	END
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_CST_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[App_Settings_Write].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_KEY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[App_Settings_Write].[@appkey]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[App_Settings_Write].[@appversion]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[App_Settings_Write].[@appvalue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[App_Settings_Write].[@appdescription]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[App_Settings_Write].[@appsensitivevalue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_KEY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_DESCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_SENSITIVE_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_CST_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[App_Settings_Write].[@appversion]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="2" />
									<Property Name="Precision" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[App_Settings_Write].[@appkey]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[App_Settings_Write].[@appvalue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[App_Settings_Write].[@appdescription]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[App_Settings_Write].[@appsensitivevalue]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[App_Settings_Write].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="2063" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[App_Settings_Write] @appversion DECIMAL(10, 2)&#xD;&#xA;&#x9;,@appkey VARCHAR(200)&#xD;&#xA;&#x9;,@appvalue VARCHAR(MAX)&#xD;&#xA;&#x9;,@appdescription VARCHAR(MAX)&#xD;&#xA;&#x9;,@appsensitivevalue BIT = NULL&#xD;&#xA;&#x9;,@userName NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlCheckConstraint" Name="[dbo].[CK_FRM_DIRECTION]">
			<Property Name="CheckExpressionScript">
				<Value><![CDATA[[FRM_DIRECTION]='UPLOAD' OR [FRM_DIRECTION]='DOWNLOAD']]></Value>
			</Property>
			<Relationship Name="CheckExpressionDependencies">
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_DIRECTION]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_FORMAT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="35" />
		</Element>
		<Element Type="SqlSequence" Name="[dbo].[CMM_CODE_seq]">
			<Property Name="HasNoMinValue" Value="False" />
			<Property Name="MinValue" Value="1" />
			<Property Name="Increment" Value="1" />
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="TypeSpecifier">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[int]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[CMM_CODE_SEQUENCE]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(NEXT VALUE FOR [CMM_CODE_seq])]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ExpressionDependencies">
				<Entry>
					<References Name="[dbo].[CMM_CODE_seq]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="36" />
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Classification_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT MDM_CODE AS ClsCode
		,MDM_VALUE AS ClsValue
		,CASE WHEN MDM_GEO_FLAG=0 THEN NULL ELSE MDM_GEO_URL END AS ClsGeoUrl
		,DMT_CODE AS VrbCode
		,DMT_VALUE AS VrbValue
		,MTR_CODE AS MtrCode
		,DMT_ELIMINATION_FLAG AS VrbEliminationFlag
		,CASE 
			WHEN rcount IS NULL
				THEN 0
			ELSE rcount
			END AS VrbCount
		,MDM_ID as ClsID
	FROM TD_MATRIX_DIMENSION
	INNER JOIN TS_DIMENSION_ROLE ON MDM_DMR_ID = DMR_ID
		AND DMR_CODE = 'CLASSIFICATION'
	INNER JOIN TD_DIMENSION_ITEM ON DMT_MDM_ID = MDM_ID
	INNER JOIN TD_MATRIX ON MDM_MTR_ID = MTR_ID
	INNER JOIN VW_RELEASE_LIVE_NOW ON MTR_ID = VRN_MTR_ID
	LEFT JOIN (
		SELECT MDM_ID AS mdmClsID
			,COUNT(*) AS rcount
		FROM TD_MATRIX_DIMENSION
		INNER JOIN TS_DIMENSION_ROLE ON MDM_DMR_ID = DMR_ID
			AND DMR_CODE = 'CLASSIFICATION'
		INNER JOIN TD_DIMENSION_ITEM ON DMT_MDM_ID = MDM_ID
		GROUP BY MDM_ID
		) countQuery ON MDM_ID = mdmClsID
	WHERE MDM_ID = @ClsID
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_GEO_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_GEO_URL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_ELIMINATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Classification_Read].[@ClsID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Classification_Read].[@ClsID]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="271" />
				<Property Name="Length" Value="1310" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 19/03/2019&#xD;&#xA;-- Description:&#x9;Reads an individual Classification based on ClassificationID&#xD;&#xA;-- exec Data_Classification_Read 3&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Classification_Read @ClsID INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Classification_Search]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @LngId INT
	DECLARE @errorMessage VARCHAR(256)

	IF @LngIsoCode IS NOT NULL
	BEGIN
		SET @LngId = (
				SELECT LNG_ID
				FROM TS_LANGUAGE
				WHERE LNG_ISO_CODE = @LngIsoCode
				)

		IF (
				@LngId IS NULL
				OR @LngId = 0
				)
		BEGIN
			SET @errorMessage = 'SP: Data_Classification_Search - language not found: ' + cast(@LngIsoCode AS VARCHAR)

			RAISERROR (
					@errorMessage
					,16
					,1
					);
		END
	END

	SELECT DISTINCT MDM_VALUE ClsValue
		,MDM_CODE ClsCode
		,MDM_ID ClsID
		,CASE WHEN MDM_GEO_FLAG=0 THEN NULL ELSE MDM_GEO_URL END AS ClsGeoUrl
		,MTR_CODE AS MtrCode
		,CASE 
			WHEN rcount IS NULL
				THEN 0
			ELSE rcount
			END AS VrbCount
	FROM TD_MATRIX
	INNER JOIN TD_MATRIX_DIMENSION ON MTR_ID = MDM_MTR_ID
		AND MTR_DELETE_FLAG = 0
	INNER JOIN TS_DIMENSION_ROLE ON DMR_ID = MDM_DMR_ID
		AND DMR_CODE = 'CLASSIFICATION'
	INNER JOIN TD_DIMENSION_ITEM ON DMT_MDM_ID = MDM_ID
	INNER JOIN VW_RELEASE_LIVE_NOW ON MTR_ID = VRN_MTR_ID
	LEFT JOIN (
		SELECT MDM_ID AS clsID
			,COUNT(*) AS rcount
		FROM TD_MATRIX_DIMENSION
		INNER JOIN TS_DIMENSION_ROLE ON DMR_ID = MDM_DMR_ID
			AND DMR_CODE = 'CLASSIFICATION'
		INNER JOIN TD_DIMENSION_ITEM ON DMT_MDM_ID = MDM_ID
		GROUP BY MDM_ID
		) countQuery ON MDM_ID = clsID
	INNER JOIN (
		SELECT [Value]
		FROM @Search
		) search ON (MDM_VALUE LIKE '%' + search.[Value] + '%')
		OR DMT_VALUE LIKE '%' + search.[Value] + '%'
		OR MDM_CODE LIKE '%' + search.[Value] + '%'
	WHERE (
			@LngIsoCode IS NULL
			OR @LngId = MTR_LNG_ID
			)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Classification_Search].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Classification_Search].[@Search]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Classification_Search].[@Search].[Value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Classification_Search].[@Search].[Value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_GEO_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_GEO_URL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Data_Classification_Search].[@Search]" Disambiguator="6">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Classification_Search].[@Search].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="256" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Classification_Search].[@Search]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[dbo].[ValueVarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Classification_Search].[@LngIsoCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="432" />
				<Property Name="Length" Value="2150" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 15/03/2019&#xD;&#xA;-- Description:&#x9;Searches for Classification based on a keyword. Also searches the related variables of the classification.&#xD;&#xA;-- If a language is specified then return only classifications related to matrices in that language. Otherwise return all qualifying Classifications.&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Classification_Search @Search ValueVarchar Readonly&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Dataset_Lock_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN

	SET NOCOUNT ON;

	-- If the Mtr Code is not in the table then we insert the entry
	IF (
			SELECT COUNT(*)
			FROM TD_DATASET
			WHERE DTT_MTR_CODE = @DttMtrCode
			) = 0
	BEGIN
		INSERT INTO TD_DATASET (DTT_MTR_CODE)
		VALUES (@DttMtrCode)
	END

	UPDATE TD_DATASET
	SET DTT_DATETIME_LOCKED = @DttDatetimeLocked
	WHERE DTT_MTR_CODE = @DttMtrCode

	RETURN @@ROWCOUNT
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_DATASET]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DATASET].[DTT_MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Dataset_Lock_Update].[@DttMtrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DATASET]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DATASET].[DTT_MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DATASET].[DTT_DATETIME_LOCKED]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Dataset_Lock_Update].[@DttDatetimeLocked]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Dataset_Lock_Update].[@DttMtrCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Dataset_Lock_Update].[@DttDatetimeLocked]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="235" />
				<Property Name="Length" Value="749" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 08/10/2021&#xD;&#xA;-- Description:&#x9;Set an entry in the TD_DATASET table as locked/unlocked&#xD;&#xA;-- &#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Dataset_Lock_Update @DttMtrCode NVARCHAR(20)&#xD;&#xA;&#x9;,@DttDatetimeLocked DATETIME = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Dataset_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN

	SET NOCOUNT ON;

	SELECT DTT_DATETIME_LOCKED as DttDatetimeLocked
	FROM TD_DATASET
	WHERE DTT_MTR_CODE=@DttMtrCode

END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_DATASET]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DATASET].[DTT_DATETIME_LOCKED]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DATASET].[DTT_MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Dataset_Read].[@DttMtrCode]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Dataset_Read].[@DttMtrCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="208" />
				<Property Name="Length" Value="413" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 08/10/2021&#xD;&#xA;-- Description:&#x9;Reads the lock state of a dataset&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE   PROCEDURE Data_Dataset_Read &#xD;&#xA;&#x9;@DttMtrCode NVARCHAR(20)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_GeoLayer_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT

	DECLARE @GlrCode NVARCHAR(256)
	SET @GlrCode=CONCAT('L',(SELECT MAX(GLR_ID) FROM TD_GEOLAYER)+1)

	-- Do the create Audit and get the new DtgID from the stored procedure
	EXEC @DtgID = Security_Auditing_Create @CcnUsername

	-- Check for problems with the audit stored procedure
	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		RAISERROR (
				'Error in calling Security_Auditing_Create'
				,16
				,1
				)

		RETURN 0
	END

	INSERT INTO TD_GEOLAYER (
		GLR_NAME
		,GLR_CODE
		,GLR_DTG_ID
		,GLR_DELETE_FLAG
		)
	VALUES (
		@GlrName
		,@GlrCode
		,@DtgID
		,0
		)

	RETURN @@rowcount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_GeoLayer_Create].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_GeoLayer_Create].[@GlrName]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_GeoLayer_Create].[@GlrName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_GeoLayer_Create].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="192" />
				<Property Name="Length" Value="966" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 30/04/2021&#xD;&#xA;-- Description:&#x9;Create a GeoLayer&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_GeoLayer_Create @GlrName NVARCHAR(256)&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_GeoLayer_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT

	SET @DtgID = (
			SELECT GLR_DTG_ID
			FROM TD_GEOLAYER
			WHERE GLR_CODE = @GlrCode
				AND GLR_DELETE_FLAG = 0
			)

	IF @DtgID IS NULL
	BEGIN
		RETURN 0
	END

	-- Do the create Audit and get the new DtgID from the stored procedure
	EXEC @DtgID = Security_Auditing_Delete @DtgID
		,@CcnUsername

	-- Check for problems with the audit stored procedure
	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		RAISERROR (
				'Error in calling Security_Auditing_Delete'
				,16
				,1
				)

		RETURN 0
	END

	UPDATE TD_GEOLAYER
	SET GLR_DELETE_FLAG = 1
	WHERE GLR_CODE = @GlrCode

	RETURN @@rowcount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_GeoLayer_Delete].[@GlrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Delete]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_GeoLayer_Delete].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_GeoLayer_Delete].[@GlrCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_GeoLayer_Delete].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="199" />
				<Property Name="Length" Value="980" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 30/04/2021&#xD;&#xA;-- Description:&#x9;Update a GeoLayer record&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_GeoLayer_Delete&#xD;&#xA;&#x9;@GlrCode NVARCHAR(256)&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_GeoLayer_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT GLR_NAME AS GlrName
		,GLR_CODE AS GlrCode
		,SUM(hasMap) AS GmpCount
	FROM (
		SELECT GLR_NAME
			,GLR_CODE
			,CASE 
				WHEN GMP_ID IS NULL
					THEN 0
				ELSE 1
				END AS hasMap
		FROM TD_GEOLAYER
		LEFT JOIN TD_GEOMAP ON GMP_GLR_ID = GLR_ID
			AND GMP_DELETE_FLAG = 0
			AND GLR_DELETE_FLAG = 0
		WHERE (
				@GlrCode IS NULL
				OR @GlrCode = GLR_CODE
				)
			AND (
				@GlrName IS NULL
				OR @GlrName = GLR_NAME
				)
			AND GLR_DELETE_FLAG = 0
		) q
	GROUP BY GLR_NAME
		,GLR_CODE
	ORDER BY GLR_NAME 
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_GLR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_GeoLayer_Read].[@GlrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_GeoLayer_Read].[@GlrName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_GeoLayer_Read].[@GlrCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_GeoLayer_Read].[@GlrName]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="294" />
				<Property Name="Length" Value="984" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 30/04/2021&#xD;&#xA;-- Description:&#x9;Read one or all GeoLayers&#xD;&#xA;-- exec Data_GeoLayer_Read '04089f73b1fbde4aa916974673ac63f9' --,'Gaeltacht Boundaries 2020'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_GeoLayer_Read @GlrCode NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@GlrName NVARCHAR(256) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_GeoLayer_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT

	SET @DtgID = (
			SELECT GLR_DTG_ID
			FROM TD_GEOLAYER
			WHERE GLR_CODE = @GlrCode
				AND GLR_DELETE_FLAG = 0
			)

	IF @DtgID IS NULL
	BEGIN
		RETURN 0
	END

	-- Do the create Audit and get the new DtgID from the stored procedure
	EXEC @DtgID = Security_Auditing_Update @DtgID
		,@CcnUsername

	-- Check for problems with the audit stored procedure
	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		RAISERROR (
				'Error in calling Security_Auditing_Update'
				,16
				,1
				)

		RETURN 0
	END

	UPDATE TD_GEOLAYER
	SET GLR_NAME = @GlrName
	WHERE GLR_CODE = @GlrCode

	RETURN @@rowcount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_GeoLayer_Update].[@GlrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_GeoLayer_Update].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_GeoLayer_Update].[@GlrName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_GeoLayer_Update].[@GlrName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_GeoLayer_Update].[@GlrCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_GeoLayer_Update].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="199" />
				<Property Name="Length" Value="1004" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 30/04/2021&#xD;&#xA;-- Description:&#x9;Update a GeoLayer record&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_GeoLayer_Update @GlrName NVARCHAR(256)&#xD;&#xA;&#x9;,@GlrCode NVARCHAR(256)&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Geomap_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @GlrId INT
	DECLARE @DtgID INT

	SET @GlrId = (
			SELECT GLR_ID
			FROM TD_GEOLAYER
			WHERE GLR_CODE = @GlrCode
			)

	IF @GlrId IS NULL
		OR @GlrId = 0
	BEGIN
		RETURN 0
	END

	-- Do the create Audit and get the new DtgID from the stored procedure
	EXEC @DtgID = Security_Auditing_Create @CcnUsername

	-- Check for problems with the audit stored procedure
	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		RAISERROR (
				'Error in calling Security_Auditing_Create'
				,16
				,1
				)

		RETURN 0
	END

	INSERT INTO TD_GEOMAP (
		GMP_CODE
		,GMP_NAME
		,GMP_DESCRIPTION
		,GMP_GEOJSON
		,GMP_FEATURE_COUNT 
		,GMP_GLR_ID
		,GMP_DTG_ID
		)
	VALUES (
		@GmpCode
		,@GmpName
		,@GmpDescription
		,@GmpGeoJson
		,@GmpFeatureCount 
		,@GlrId
		,@DtgID
		)

	RETURN @@ROWCOUNT
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Geomap_Create].[@GlrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Geomap_Create].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_DESCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_GEOJSON]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_FEATURE_COUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_GLR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Geomap_Create].[@GmpCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Geomap_Create].[@GmpName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Geomap_Create].[@GmpDescription]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Geomap_Create].[@GmpGeoJson]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Geomap_Create].[@GmpFeatureCount]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Geomap_Create].[@GmpCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Geomap_Create].[@GmpName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Geomap_Create].[@GmpDescription]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Geomap_Create].[@GmpGeoJson]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Geomap_Create].[@GlrCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Geomap_Create].[@GmpFeatureCount]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Geomap_Create].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="190" />
				<Property Name="Length" Value="1289" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 29/04/2021&#xD;&#xA;-- Description:&#x9;Create a GeoMap&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Geomap_Create @GmpCode NVARCHAR(32)&#xD;&#xA;&#x9;,@GmpName NVARCHAR(256)&#xD;&#xA;&#x9;,@GmpDescription NVARCHAR(MAX)&#xD;&#xA;&#x9;,@GmpGeoJson NVARCHAR(MAX)&#xD;&#xA;&#x9;,@GlrCode NVARCHAR(256)&#xD;&#xA;&#x9;,@GmpFeatureCount INT&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_GeoMap_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	DECLARE @DtgId INT

	SET @DtgId = (
			SELECT GMP_DTG_ID
			FROM TD_GEOMAP
			WHERE GMP_CODE = @GmpCode
			)

	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		RETURN 0
	END

	-- Do the create Audit and get the new DtgID from the stored procedure
	EXEC @DtgID = Security_Auditing_Delete @DtgID
		,@CcnUsername

	-- Check for problems with the audit stored procedure
	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		RAISERROR (
				'Error in calling Security_Auditing_Delete'
				,16
				,1
				)

		RETURN 0
	END

	DECLARE @Url NVARCHAR(2048)

	--We can't delete where there are data dimensions (classifications) associated with the map
	SET @Url = @UrlStub  + @GmpCode

	IF (
			SELECT COUNT(*)
			FROM TD_MATRIX_DIMENSION 
			INNER JOIN TD_MATRIX ON MDM_MTR_ID = MTR_ID
				AND MTR_DELETE_FLAG = 0
				AND MDM_GEO_URL = @Url
			) > 0
	BEGIN
		RETURN 0
	END

	UPDATE TD_GEOMAP
	SET GMP_DELETE_FLAG = 1
	WHERE GMP_CODE = @GmpCode
		AND GMP_DELETE_FLAG = 0

	RETURN @@ROWCOUNT
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_GeoMap_Delete].[@GmpCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Delete]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_GeoMap_Delete].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_GeoMap_Delete].[@UrlStub]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_GEO_URL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_GeoMap_Delete].[@GmpCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_GeoMap_Delete].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_GeoMap_Delete].[@UrlStub]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2048" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="195" />
				<Property Name="Length" Value="1351" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 05/05/2021&#xD;&#xA;-- Description:&#x9;Soft delete a GeoMap&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_GeoMap_Delete @GmpCode NVARCHAR(32)&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@UrlStub NVARCHAR(2048)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_GeoMap_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT GMP_CODE AS GmpCode
		,GMP_NAME AS GmpName
		,GMP_DESCRIPTION AS GmpDescription
		,GMP_GEOJSON AS GmpGeoJson
	FROM TD_GEOMAP
	WHERE GMP_DELETE_FLAG = 0
		AND GMP_CODE = @GmpCode
	ORDER BY GMP_NAME
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_GEOMAP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_DESCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_GEOJSON]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_GeoMap_Read].[@GmpCode]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_GeoMap_Read].[@GmpCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="268" />
				<Property Name="Length" Value="579" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 04/05/2021&#xD;&#xA;-- Description:&#x9;Reads a Geomap based on its code&#xD;&#xA;-- exec Data_GeoMap_Read 'c9989202b75921e3a062ca6942b3d8aa'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_GeoMap_Read @GmpCode NVARCHAR(32)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_GeoMap_ReadCollection]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT DISTINCT GMP_CODE AS GmpCode
		,GMP_NAME AS GmpName
		,GMP_DESCRIPTION AS GmpDescription
		,GLR_NAME AS GlrName
		,GLR_CODE AS GlrCode
		,GMP_FEATURE_COUNT AS GmpFeatureCount
		,MTR_ID
		,CASE 
			WHEN MTR_ID IS NULL
				THEN 0
			ELSE 1
			END AS HasTable
	INTO #MtrCls
	FROM TD_GEOMAP
	INNER JOIN TD_GEOLAYER ON GMP_GLR_ID = GLR_ID
	LEFT JOIN TD_MATRIX_DIMENSION ON (@UrlStub + GMP_CODE) = MDM_GEO_URL
	LEFT JOIN TD_MATRIX ON MDM_MTR_ID = MTR_ID
		AND MTR_DELETE_FLAG = 0
	WHERE GMP_DELETE_FLAG = 0
		AND (
			@GmpCode IS NULL
			OR GMP_CODE = @GmpCode
			)
		AND (
			@GlrCode IS NULL
			OR GLR_CODE = @GlrCode
			)

	SELECT GmpCode
		,GmpName
		,GmpDescription
		,GlrName
		,GlrCode
		,GmpFeatureCount
		,sum(HasTable) AS TableCount
	FROM #MtrCls
	GROUP BY GmpCode
		,GmpName
		,GmpDescription
		,GlrName
		,GlrCode
		,GmpFeatureCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_GEOMAP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_GLR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_GeoMap_ReadCollection].[@UrlStub]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_GEO_URL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_DESCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_FEATURE_COUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_GeoMap_ReadCollection].[@GmpCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_GeoMap_ReadCollection].[@GlrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_GeoMap_ReadCollection].[#MtrCls]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_GeoMap_ReadCollection].[#MtrCls].[GmpCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_GeoMap_ReadCollection].[#MtrCls].[GmpName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_GeoMap_ReadCollection].[#MtrCls].[GmpDescription]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_GeoMap_ReadCollection].[#MtrCls].[GlrName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_GeoMap_ReadCollection].[#MtrCls].[GlrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_GeoMap_ReadCollection].[#MtrCls].[GmpFeatureCount]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_GeoMap_ReadCollection].[#MtrCls].[HasTable]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Data_GeoMap_ReadCollection].[#MtrCls]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Data_GeoMap_ReadCollection].[#MtrCls].[GmpCode]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_GEOMAP].[GMP_CODE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Data_GeoMap_ReadCollection].[#MtrCls].[GmpName]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_GEOMAP].[GMP_NAME]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Data_GeoMap_ReadCollection].[#MtrCls].[GmpDescription]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_GEOMAP].[GMP_DESCRIPTION]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Data_GeoMap_ReadCollection].[#MtrCls].[GlrName]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_GEOLAYER].[GLR_NAME]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Data_GeoMap_ReadCollection].[#MtrCls].[GlrCode]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_GEOLAYER].[GLR_CODE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Data_GeoMap_ReadCollection].[#MtrCls].[GmpFeatureCount]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_GEOMAP].[GMP_FEATURE_COUNT]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Data_GeoMap_ReadCollection].[#MtrCls].[MTR_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Data_GeoMap_ReadCollection].[#MtrCls].[HasTable]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_GeoMap_ReadCollection].[@UrlStub]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2048" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_GeoMap_ReadCollection].[@GmpCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_GeoMap_ReadCollection].[@GlrCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="313" />
				<Property Name="Length" Value="1376" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 05/05/2021&#xD;&#xA;-- Description:&#x9;Reads the full list of GeoMaps&#xD;&#xA;-- EXEC Data_GeoMap_ReadCollection 'https://dev-ws.cso.ie/public/api.restful/PxStat.Data.GeoMap_API.Read/'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_GeoMap_ReadCollection @UrlStub NVARCHAR(2048)&#xD;&#xA;&#x9;,@GmpCode NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@GlrCode NVARCHAR(32) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Geomap_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    DECLARE @DtgID AS INT;
    DECLARE @GlrId AS INT;
    SET @DtgID = (SELECT GMP_DTG_ID
                  FROM   TD_GEOMAP
                  WHERE  GMP_CODE = @GmpCode);
    IF @DtgID = 0
       OR @DtgID IS NULL
        BEGIN
            RAISERROR ('Unknown GeoMap Code', 16, 1);
            RETURN 0;
        END
    SET @GlrId = (SELECT GLR_ID
                  FROM   TD_GEOLAYER
                  WHERE  GLR_CODE = @GlrCode
                         AND GLR_DELETE_FLAG = 0);
    IF @GlrId = 0
       OR @GlrId IS NULL
        BEGIN
            RAISERROR ('Unknown Geolayer Code', 16, 1);
            RETURN 0;
        END
    EXECUTE @DtgID = Security_Auditing_Update @DtgID, @CcnUsername;
    UPDATE TD_GEOMAP
    SET    GMP_NAME        = @GmpName,
           GMP_DESCRIPTION = @GmpDescription,
           GMP_GLR_ID      = @GlrId
    WHERE  GMP_CODE = @GmpCode;
    RETURN @@ROWCOUNT;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Geomap_Update].[@GmpCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Geomap_Update].[@GlrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Geomap_Update].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Geomap_Update].[@GmpName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_DESCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Geomap_Update].[@GmpDescription]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_GLR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Geomap_Update].[@GmpCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Geomap_Update].[@GmpName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Geomap_Update].[@GmpDescription]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Geomap_Update].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Geomap_Update].[@GlrCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1131" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE Data_Geomap_Update&#xD;&#xA;@GmpCode NVARCHAR (32), @GmpName NVARCHAR (256), @GmpDescription NVARCHAR (MAX), @CcnUsername NVARCHAR (256), @GlrCode NVARCHAR (256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	-- Error Message
	DECLARE @errorMessage VARCHAR(256)
	DECLARE @spName VARCHAR(100)
	set  @spName = 'Data_Stat_Matrix_Create'
	-- language lookup fk
	DECLARE @MtrLngId INT = NULL

	SELECT @MtrLngId = LNG_ID
	FROM TS_LANGUAGE
	WHERE LNG_ISO_CODE = @LngIsoCode
		AND LNG_DELETE_FLAG = 0

	IF @MtrLngId IS NULL
	BEGIN
		SET @errorMessage = 'SP: ' + @spName + ' - language not found: ' + cast(isnull(@LngIsoCode, 0) AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				);

		RETURN 0
	END

	-- copyright lookup fk
	DECLARE @MtrCprId INT = NULL

	SELECT @MtrCprId = CPR_ID
	FROM TS_COPYRIGHT
	WHERE CPR_VALUE = @CprValue
		AND CPR_DELETE_FLAG = 0

	IF @MtrCprId IS NULL
	BEGIN
		SET @errorMessage = 'SP: ' + @spName + ' - source not found: ' + cast(isnull(@CprValue, 0) AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				);

		RETURN 0
	END

	-- format fk lookup
	DECLARE @MtrFrmId INT = NULL

	-- We assume that the format has already been validated against the max version, so we accept the max version
	SELECT @MtrFrmId = (
			SELECT MAX(FRM_ID)
			FROM TS_FORMAT
			WHERE FRM_TYPE = @FrmType
			)

	IF @MtrFrmId IS NULL
	BEGIN
		SET @errorMessage = 'SP: ' + @spName + ' - format not type: ' + cast(isnull(@FrmType, 0) AS VARCHAR) + ', version: ' + cast(isnull(@FrmVersion, 0) AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				);

		RETURN 0
	END

	DECLARE @DtgId INT = NULL

	EXEC @DtgId = Security_Auditing_Create @userName;

	IF @DtgId IS NULL
		OR @DtgId = 0
	BEGIN
		RAISERROR (
				'SP: Security_Auditing_Create has failed!'
				,16
				,1
				)

		RETURN 0
	END

	INSERT INTO [TD_MATRIX] (
		[MTR_CODE]
		,[MTR_TITLE]
		,[MTR_OFFICIAL_FLAG]
		,[MTR_INPUT]
		,[MTR_NOTE]
		,[MTR_RLS_ID]
		,[MTR_LNG_ID]
		,[MTR_FRM_ID]
		,[MTR_CPR_ID]
		,[MTR_DTG_ID]
		,[MTR_DELETE_FLAG]
		)
	VALUES (
		@MtrCode
		,@MtrTitle
		,@MtrOfficialFlag
		,@MtrInput
		,-- input file
		@MtrNote
		,@MtrRlsId
		,-- release
		@MtrLngId
		,@MtrFrmId
		,@MtrCprId
		,@DtgId
		,0
		)

	RETURN @@identity
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Create].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Create].[@CprValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Create].[@FrmType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Create].[@FrmVersion]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Create].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_OFFICIAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_INPUT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_NOTE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Create].[@MtrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Create].[@MtrTitle]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Create].[@MtrOfficialFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Create].[@MtrInput]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Create].[@MtrNote]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Create].[@MtrRlsId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Create].[@MtrCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Create].[@MtrTitle]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Create].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Create].[@CprValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Create].[@FrmType]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Create].[@FrmVersion]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Create].[@MtrOfficialFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Create].[@MtrNote]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Create].[@MtrInput]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Create].[@MtrRlsId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Create].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="222" />
				<Property Name="Length" Value="2835" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Create date: 21 Sep 2018&#xD;&#xA;-- Description:&#x9;Inserts a new record into the TD_MATRIX table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE  &#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[Data_Matrix_Create] @MtrCode NVARCHAR(256)&#xD;&#xA;&#x9;,@MtrTitle NVARCHAR(256)&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@CprValue NVARCHAR(256)&#xD;&#xA;&#x9;,@FrmType NVARCHAR(32)&#xD;&#xA;&#x9;,@FrmVersion NVARCHAR(20)&#xD;&#xA;&#x9;,@MtrOfficialFlag BIT = 1&#xD;&#xA;&#x9;,@MtrNote NVARCHAR(max) = NULL&#xD;&#xA;&#x9;,@MtrInput NVARCHAR(max) = NULL&#xD;&#xA;&#x9;,@MtrRlsId INT&#xD;&#xA;&#x9;,@userName NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @updateCount INT

	DECLARE @MatrixIds TABLE (
		MtrId INT
		,MtrDtgId INT
		,Rownum INT
		)
	DECLARE @DtgId INT

	UPDATE TD_MATRIX
	SET MTR_DELETE_FLAG = 1
	WHERE MTR_RLS_ID IN (
			SELECT [RLS_ID]
			FROM [TD_RELEASE]
			WHERE [RLS_DELETE_FLAG] = 0
				AND [RLS_CODE] = @RlsCode
			)
		AND MTR_DELETE_FLAG = 0

	SET @updateCount = @@ROWCOUNT

	INSERT INTO @MatrixIds (
		MtrId
		,MtrDtgId
		,Rownum
		) (
		SELECT MTR_ID
		,MTR_DTG_ID
		,(
			SELECT ROW_NUMBER() OVER (
					ORDER BY MTR_ID ASC
					)
			) AS RowNumber FROM TD_MATRIX WHERE MTR_RLS_ID IN (
			SELECT [RLS_ID]
			FROM [TD_RELEASE]
			WHERE [RLS_DELETE_FLAG] = 0
				AND [RLS_CODE] = @RlsCode
			)
		AND MTR_DELETE_FLAG = 0
		)

	IF @updateCount > 0
	BEGIN
		DECLARE @userId INT

		SELECT @userId = CCN_ID
		FROM TD_ACCOUNT
		WHERE CCN_USERNAME = @CcnUsername
			AND CCN_DELETE_FLAG = 0

		DECLARE @rnum INT

		SET @rnum = 1

		DECLARE @rcount INT = (
				SELECT count(*)
				FROM @MatrixIds
				)

		WHILE (@rnum <= @rcount)
		BEGIN
			SET @DtgId = (
					SELECT MtrDtgId
					FROM @MatrixIds
					WHERE Rownum = @rnum
					)

			EXEC Security_Auditing_Delete @DtgID
				,@CcnUsername

			SET @rnum = @rnum + 1
		END
	END
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Delete].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Delete].[@MatrixIds].[MtrId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Delete].[@MatrixIds].[MtrDtgId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Delete].[@MatrixIds].[Rownum]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Delete].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Delete].[@MatrixIds].[MtrDtgId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Delete].[@MatrixIds].[Rownum]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Delete]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Data_Matrix_Delete].[@MatrixIds]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Matrix_Delete].[@MatrixIds].[MtrId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Matrix_Delete].[@MatrixIds].[MtrDtgId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Matrix_Delete].[@MatrixIds].[Rownum]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Delete].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Delete].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="297" />
				<Property Name="Length" Value="1689" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 10/07/2019&#xD;&#xA;-- Description:&#x9;Soft deletes all matrixes for a given Release Code&#xD;&#xA;-- A separate sp will hard delete the data associated with this matrix&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Matrix_Delete @RlsCode INT&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_DeleteEntities]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;
	SET IMPLICIT_TRANSACTIONS OFF;

	DECLARE @MatrixIds TABLE (MtrId INT)
	DECLARE @MdmIds TABLE (MdmId INT)
	DECLARE @StartTime DATETIME

	SET @StartTime = GETDATE()

	DECLARE @DLIMIT INT

	INSERT INTO @MatrixIds
	SELECT MTR_Id
	FROM TD_MATRIX
	WHERE MTR_DELETE_FLAG = 1

	INSERT INTO @MdmIds 
	
		SELECT DISTINCT MDM_ID
		FROM TD_MATRIX_DIMENSION 
		WHERE MDM_MTR_ID IN
		(
			SELECT MtrId from @MatrixIds
		)
	

	DELETE FROM TD_MATRIX_DATA 
	WHERE MTD_MTR_ID IN
	(
	SELECT MtrId from @MatrixIds
	)



	DELETE FROM TD_DIMENSION_ITEM 
	WHERE DMT_MDM_ID IN
	(
		SELECT MdmId from @MdmIds
	)



	DELETE FROM TD_MATRIX_DIMENSION 
	WHERE MDM_ID IN
	(
		SELECT MdmId from @MdmIds
	)


	INSERT INTO TD_LOGGING (
		LGG_DATETIME
		,LGG_THREAD
		,LGG_LEVEL
		,LGG_CLASS
		,LGG_METHOD
		,LGG_MESSAGE
		)
	VALUES (
		getdate()
		,'0'
		,'INFO'
		,'SQL SERVER AGENT'
		,'Data_Matrix_DeleteEntities'
		,'Unused Matrix entities deleted - exec time ' + (CAST(DATEDIFF(millisecond, @StartTime, GETDATE()) AS VARCHAR(256))) + ' ms'
		)

	RETURN 0
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_DeleteEntities].[@MatrixIds].[MtrId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DATA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DATA].[MTD_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_DeleteEntities].[@MatrixIds].[MtrId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_DeleteEntities].[@MdmIds].[MdmId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_DeleteEntities].[@MdmIds].[MdmId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_THREAD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_LEVEL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_CLASS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_METHOD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_MESSAGE]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Data_Matrix_DeleteEntities].[@MatrixIds]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Matrix_DeleteEntities].[@MatrixIds].[MtrId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Data_Matrix_DeleteEntities].[@MdmIds]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Matrix_DeleteEntities].[@MdmIds].[MdmId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="274" />
				<Property Name="Length" Value="1452" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 10/07/2019&#xD;&#xA;-- Description:&#x9;Hard deletes all data associated with all soft deleted matrixes&#xD;&#xA;-- exec Data_Matrix_DeleteEntities&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Matrix_DeleteEntities&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_Dimension_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DmrId INT
	DECLARE @errorMessage NVARCHAR(256)

	SET @DmrId = (
			SELECT DMR_ID
			FROM TS_DIMENSION_ROLE
			WHERE DMR_VALUE = @DmrValue
			)


	IF @DmrId IS NULL
	BEGIN
		SET @errorMessage = 'SP: Matrix_Dimension_Create - Dimension role not found: ' + @DmrValue

		RAISERROR (
				@errorMessage
				,16
				,1
				);

		RETURN 0
	END



	IF (
			SELECT COUNT(*)
			FROM TD_MATRIX_DIMENSION
			WHERE MDM_MTR_ID = @MtrId
				AND MDM_CODE = @MdmCode
				
			) > 0
	BEGIN
		SET @errorMessage = 'SP: Matrix_Dimension_Create - Duplicate Dimension Code: ' + @MdmCode

		RAISERROR (
				@errorMessage
				,16
				,1
				);

		RETURN 0
	END

	INSERT INTO TD_MATRIX_DIMENSION (
		MDM_SEQUENCE
		,MDM_CODE
		,MDM_VALUE
		,MDM_MTR_ID
		,MDM_DMR_ID
		,MDM_GEO_FLAG
		,MDM_GEO_URL
		)
	VALUES (
		@MdmSequence
		,@MdmCode
		,@MdmValue
		,@MtrId
		,@DmrId
		,@MdmGeoFlag
		,@MdmGeoUrl
		)

		RETURN @@IDENTITY
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Dimension_Create].[@DmrValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Dimension_Create].[@MtrId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Dimension_Create].[@MdmCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_SEQUENCE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_GEO_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_GEO_URL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Dimension_Create].[@MdmSequence]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Dimension_Create].[@MdmValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Dimension_Create].[@MdmGeoFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Dimension_Create].[@MdmGeoUrl]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Dimension_Create].[@MdmSequence]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Dimension_Create].[@MdmCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Dimension_Create].[@MdmValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Dimension_Create].[@MtrId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Dimension_Create].[@DmrValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Dimension_Create].[@MdmGeoFlag]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Dimension_Create].[@MdmGeoUrl]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2048" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="213" />
				<Property Name="Length" Value="1438" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 25/01/2022&#xD;&#xA;-- Description:&#x9;Load a dimension and return the mdm_id&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Matrix_Dimension_Create @MdmSequence INT&#xD;&#xA;&#x9;,@MdmCode NVARCHAR(256)&#xD;&#xA;&#x9;,@MdmValue NVARCHAR(256)&#xD;&#xA;&#x9;,@MtrId INT&#xD;&#xA;&#x9;,@DmrValue NVARCHAR(512)&#xD;&#xA;&#x9;,@MdmGeoFlag BIT&#xD;&#xA;&#x9;,@MdmGeoUrl NVARCHAR(2048) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_LoadSingleField]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;


	INSERT INTO TD_MATRIX_DATA (
		MTD_MTR_ID
		,MTD_DATA
		)
	VALUES (
		@MtrId
		,@MatrixData
		)

	RETURN @@ROWCOUNT
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DATA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DATA].[MTD_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DATA].[MTD_DATA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_LoadSingleField].[@MtrId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_LoadSingleField].[@MatrixData]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_LoadSingleField].[@MatrixData]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_LoadSingleField].[@MtrId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="205" />
				<Property Name="Length" Value="461" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 24/01/2022&#xD;&#xA;-- Description:&#x9;Load px data to a single field&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Matrix_LoadSingleField @MatrixData NVARCHAR(MAX)&#xD;&#xA;&#x9;,@MtrId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @GroupUserHasAccess TABLE (GRP_ID INT NOT NULL);

	INSERT INTO @GroupUserHasAccess
	EXEC Security_Group_AccessList @CcnUsername

	DECLARE @maxDate DATETIME

	SELECT MTR_CODE MtrCode
		,MTR_TITLE MtrTitle
		,MTR_NOTE MtrNote
		,MTR_OFFICIAL_FLAG MtrOfficialFlag
		,MTR_INPUT MtrInput
		,MTR_ID MtrId
		,CCN_CRT.CCN_USERNAME CcnUsernameCreate
		,DHT_CREATE.DHT_DATETIME DtgCreateDatetime
		,CCN_UPD.CCN_USERNAME CcnUsernameUpdate
		,DHT_UPDATE.DHT_DATETIME DtgUpdateDatetime
		,RLS_CODE RlsCode
		,RLS_VERSION RlsVersion
		,RLS_REVISION RlsRevision
		,RLS_LIVE_FLAG RlsLiveFlag
		,RLS_LIVE_DATETIME_FROM RlsLiveDatetimeFrom
		,RLS_LIVE_DATETIME_TO RlsLiveDatetimeTo
		,RLS_EXCEPTIONAL_FLAG RlsExceptionalFlag
		,RLS_RESERVATION_FLAG RlsReservationFlag
		,RLS_ARCHIVE_FLAG RlsArchiveFlag
		,RLS_ANALYTICAL_FLAG RlsAnalyticalFlag
		,RLS_EXPERIMENTAL_FLAG RlsExperimentalFlag
		,LNG_ISO_CODE LngIsoCode
		,LNG_ISO_NAME LngIsoName
		,CPR_VALUE CprValue
		,CPR_CODE CprCode
		,CPR_URL CprUrl
		,MDM_VALUE FrqValue
		,MDM_CODE FrqCode
		,FRM_TYPE FrmType
		,FRM_VERSION FrmVersion
		,GRP_CODE GrpCode
		,GRP_NAME GrpName
		,GRP_CONTACT_NAME GrpContactName
		,GRP_CONTACT_PHONE GrpContactPhone
		,GRP_CONTACT_EMAIL GrpContactEmail
		,CMM_CODE CmmCode
		,CMM_VALUE CmmValue
		,SBJ_CODE SbjCode
		,SBJ_VALUE SbjValue
		,PRC_CODE PrcCode
		,PRC_VALUE PrcValue
	FROM TD_MATRIX
	INNER JOIN TD_AUDITING
		ON DTG_ID = MTR_DTG_ID
	INNER JOIN TM_AUDITING_HISTORY DHT_CREATE
		ON DTG_ID = DHT_CREATE.DHT_DTG_ID
	INNER JOIN TS_AUDITING_TYPE DTP_CREATE
		ON DTP_CREATE.DTP_ID = DHT_CREATE.DHT_DTP_ID
			AND DTP_CREATE.DTP_CODE = 'CREATED'
	INNER JOIN TD_ACCOUNT CCN_CRT
		ON CCN_CRT.CCN_ID = DHT_CREATE.DHT_CCN_ID
	LEFT JOIN TM_AUDITING_HISTORY DHT_UPDATE
		ON DTG_ID = DHT_UPDATE.DHT_DTG_ID
			AND DHT_UPDATE.DHT_DATETIME = (
				SELECT max(DHT_DATETIME)
				FROM TM_AUDITING_HISTORY
				WHERE DHT_DTG_ID = DTG_ID
				)
	LEFT JOIN TS_AUDITING_TYPE DTP_UPDATE
		ON DHT_UPDATE.DHT_DTP_ID = DTP_UPDATE.DTP_ID
			AND DTP_UPDATE.DTP_CODE = 'UPDATED'
	LEFT JOIN TD_ACCOUNT CCN_UPD
		ON CCN_UPD.CCN_ID = DHT_UPDATE.DHT_CCN_ID
	INNER JOIN TD_RELEASE
		ON RLS_ID = MTR_RLS_ID
			AND RLS_CODE = @RlsCode
			AND RLS_DELETE_FLAG = 0
	INNER JOIN @GroupUserHasAccess g
		ON g.GRP_ID = RLS_GRP_ID
	INNER JOIN TS_LANGUAGE
		ON LNG_ID = MTR_LNG_ID
			AND LNG_DELETE_FLAG = 0
	INNER JOIN TS_COPYRIGHT
		ON CPR_ID = MTR_CPR_ID
			AND CPR_DELETE_FLAG = 0
	INNER JOIN TD_MATRIX_DIMENSION
		ON MDM_MTR_ID = MTR_ID
	INNER JOIN TS_DIMENSION_ROLE 
		ON MDM_DMR_ID=DMR_ID
		AND DMR_CODE='TIME'
	INNER JOIN TS_FORMAT
		ON FRM_ID = MTR_FRM_ID
	INNER JOIN TD_GROUP GP
		ON RLS_GRP_ID = GP.GRP_ID
			AND GP.GRP_DELETE_FLAG = 0
	LEFT JOIN TD_COMMENT
		ON CMM_ID = RLS_CMM_ID
			AND CMM_DELETE_FLAG = 0
	LEFT JOIN TD_PRODUCT
		ON RLS_PRC_ID = PRC_ID
			AND PRC_DELETE_FLAG = 0
	LEFT JOIN TD_SUBJECT
		ON SBJ_ID = PRC_SBJ_ID
			AND SBJ_DELETE_FLAG = 0
	WHERE MTR_DELETE_FLAG = 0
	AND LNG_ISO_CODE=@LngIsoCode
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_AccessList]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Read].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Read].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Read].[@GroupUserHasAccess].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_NOTE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_OFFICIAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_INPUT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_URL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CONTACT_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CONTACT_PHONE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CONTACT_EMAIL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Read].[@LngIsoCode]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Data_Matrix_Read].[@GroupUserHasAccess]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Matrix_Read].[@GroupUserHasAccess].[GRP_ID]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Read].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Read].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Read].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="302" />
				<Property Name="Length" Value="3511" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Read date: 22 Oct 2018&#xD;&#xA;-- Description:&#x9;Reads one record from the TD_MATRIX and TD_Release table for a given language&#xD;&#xA;-- exec Data_Matrix_Read 1074, 'ga', 'okeeffene'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Matrix_Read @RlsCode INT&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@CcnUsername VARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_Read_Live]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	IF (@LngIsoCode = @LngIsoCodeDefault)
	BEGIN
		SELECT MTR_CODE AS MtrCode
			,MTR_ID AS MtrId
			,MTR_OFFICIAL_FLAG AS MtrOfficialFlag
			,FRM_TYPE AS FrmType
			,FRM_VERSION AS FrmVersion
			,LNG_ISO_CODE AS LngIsoCode
			,CPR_CODE AS CprCode
			,CPR_VALUE AS CprValue
			,CPR_URL AS CprUrl
			,MTR_TITLE AS MtrTitle
			,MTR_NOTE AS MtrNote
		FROM TD_MATRIX
		INNER JOIN VW_RELEASE_LIVE_NOW ON MTR_ID = VRN_MTR_ID
		INNER JOIN TS_LANGUAGE ON MTR_LNG_ID = LNG_ID
			AND LNG_DELETE_FLAG = 0
			AND LNG_ISO_CODE = @LngIsoCode
			AND MTR_CODE = @MtrCode
			AND MTR_DELETE_FLAG = 0
		INNER JOIN TS_FORMAT ON FRM_ID = MTR_FRM_ID
		INNER JOIN TS_COPYRIGHT ON MTR_CPR_ID = CPR_ID
			AND CPR_DELETE_FLAG = 0;
	END
	ELSE
	BEGIN
		IF (
				SELECT COUNT(*)
				FROM TD_MATRIX
				INNER JOIN VW_RELEASE_LIVE_NOW ON MTR_ID = VRN_MTR_ID
				INNER JOIN TS_LANGUAGE ON MTR_LNG_ID = LNG_ID
					AND LNG_DELETE_FLAG = 0
					AND LNG_ISO_CODE = @LngIsoCode
					AND MTR_CODE = @MtrCode
					AND MTR_DELETE_FLAG = 0
				) > 0
		BEGIN
			SELECT MTR_CODE AS MtrCode
				,MTR_ID AS MtrId
				,MTR_OFFICIAL_FLAG AS MtrOfficialFlag
				,FRM_TYPE AS FrmType
				,FRM_VERSION AS FrmVersion
				,LNG_ISO_CODE AS LngIsoCode
				,CPR_CODE AS CprCode
				,CPR_VALUE AS CprValue
				,CPR_URL AS CprUrl
				,MTR_TITLE AS MtrTitle
				,MTR_NOTE AS MtrNote
			FROM TD_MATRIX
			INNER JOIN VW_RELEASE_LIVE_NOW ON MTR_ID = VRN_MTR_ID
			INNER JOIN TS_LANGUAGE ON MTR_LNG_ID = LNG_ID
				AND LNG_DELETE_FLAG = 0
				AND LNG_ISO_CODE = @LngIsoCode
				AND MTR_CODE = @MtrCode
				AND MTR_DELETE_FLAG = 0
			INNER JOIN TS_FORMAT ON FRM_ID = MTR_FRM_ID
			INNER JOIN TS_COPYRIGHT ON MTR_CPR_ID = CPR_ID
				AND CPR_DELETE_FLAG = 0;
		END
		ELSE
		BEGIN
			SELECT MTR_CODE AS MtrCode
				,MTR_ID AS MtrId
				,MTR_OFFICIAL_FLAG AS MtrOfficialFlag
				,FRM_TYPE AS FrmType
				,FRM_VERSION AS FrmVersion
				,LNG_ISO_CODE AS LngIsoCode
				,CPR_CODE AS CprCode
				,CPR_VALUE AS CprValue
				,CPR_URL AS CprUrl
				,MTR_TITLE AS MtrTitle
				,MTR_NOTE AS MtrNote
			FROM TD_MATRIX
			INNER JOIN VW_RELEASE_LIVE_NOW ON MTR_ID = VRN_MTR_ID
			INNER JOIN TS_LANGUAGE ON MTR_LNG_ID = LNG_ID
				AND LNG_DELETE_FLAG = 0
				AND LNG_ISO_CODE = @LngIsoCodeDefault
				AND MTR_CODE = @MtrCode
				AND MTR_DELETE_FLAG = 0
			INNER JOIN TS_FORMAT ON FRM_ID = MTR_FRM_ID
			INNER JOIN TS_COPYRIGHT ON MTR_CPR_ID = CPR_ID
				AND CPR_DELETE_FLAG = 0;
		END
	END
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[Data_Matrix_Read_Live].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Read_Live].[@LngIsoCodeDefault]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Read_Live].[@MtrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_OFFICIAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_URL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_NOTE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Read_Live].[@MtrCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Read_Live].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Read_Live].[@LngIsoCodeDefault]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="2658" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[Data_Matrix_Read_Live] @MtrCode NVARCHAR(20)&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@LngIsoCodeDefault CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_Read_LiveAll]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    SELECT MTR_CODE AS MtrCode,
           MTR_TITLE AS MtrTitle,
           LNG_ISO_CODE AS LngIsoCode,
           RLS_VERSION AS RlsVersion,
           RLS_REVISION AS RlsRevision,
           RLS_LIVE_DATETIME_FROM AS RlsLiveDatetimeFrom
    FROM   TD_MATRIX
           INNER JOIN
           VW_RELEASE_LIVE_NOW
           ON MTR_ID = VRN_MTR_ID
           INNER JOIN
           TD_RELEASE
           ON RLS_ID = VRN_RLS_ID
              AND RLS_ID = MTR_RLS_ID
           INNER JOIN
           TS_LANGUAGE
           ON LNG_ID = MTR_LNG_ID
              AND LNG_DELETE_FLAG = 0;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="688" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE [dbo].[Data_Matrix_Read_LiveAll]&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_ReadAllForRelease]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	DECLARE @GroupUserHasAccess TABLE (GRP_ID INT NOT NULL);

	INSERT INTO @GroupUserHasAccess
	EXEC Security_Group_AccessList @CcnUsername

	SELECT mtr.MTR_CODE AS MtrCode
		,mtr.MTR_TITLE AS MtrTitle
		,rls.RLS_CODE AS RlsCode
		,lng.LNG_ISO_CODE AS LngIsoCode
		,lng.LNG_ISO_NAME AS LngIsoName
		,rls.RLS_ID AS RlsID
		,cpr.CPR_CODE AS CprCode
		,cpr.CPR_VALUE AS CprValue
		,MDM_CODE AS FrqCode
		,MDM_VALUE AS FrqValue
	FROM TD_MATRIX mtr
	INNER JOIN TD_RELEASE rls
		ON rls.RLS_ID = mtr.MTR_RLS_ID
			AND rls.RLS_DELETE_FLAG = 0
			AND mtr.MTR_DELETE_FLAG = 0
	INNER JOIN TS_LANGUAGE lng
		ON mtr.MTR_LNG_ID = lng.LNG_ID
			AND mtr.MTR_DELETE_FLAG = 0
			AND lng.LNG_DELETE_FLAG = 0
	INNER JOIN @GroupUserHasAccess g
		ON g.GRP_ID = rls.RLS_GRP_ID
	INNER JOIN TS_COPYRIGHT cpr
		ON cpr.CPR_ID = mtr.MTR_CPR_ID
			AND cpr.CPR_DELETE_FLAG = 0
	INNER JOIN TD_MATRIX_DIMENSION 
		ON mtr.MTR_ID = MDM_MTR_ID 
	INNER JOIN TS_DIMENSION_ROLE 
	ON MDM_DMR_ID=DMR_ID 
	AND DMR_CODE='TIME'
	WHERE rls.RLS_CODE = @RlsCode
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[Security_Group_AccessList]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadAllForRelease].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadAllForRelease].[@GroupUserHasAccess].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadAllForRelease].[@RlsCode]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Data_Matrix_ReadAllForRelease].[@GroupUserHasAccess]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Matrix_ReadAllForRelease].[@GroupUserHasAccess].[GRP_ID]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadAllForRelease].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadAllForRelease].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="275" />
				<Property Name="Length" Value="1435" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 30/11/2018&#xD;&#xA;-- Description:&#x9;Gets all matrices for a specific Release Code&#xD;&#xA;-- EXEC Data_Matrix_ReadAllForRelease 'okeeffene', 12&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Matrix_ReadAllForRelease @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@RlsCode INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_ReadByCopyright]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;


	DECLARE @LngId INT
	DECLARE @LngDefaultId INT

	SET @LngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)
	SET @LngDefaultId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCodeDefault
				AND LNG_DELETE_FLAG = 0
			)

	SELECT DISTINCT mtr.MTR_CODE MtrCode
		,max(coalesce(mtrCpr.MTR_TITLE, mtr.MTR_TITLE)) MtrTitle
		
	FROM TD_MATRIX mtr
	LEFT JOIN (
		SELECT distinct MTR_CODE
			,MTR_TITLE
		FROM TD_MATRIX
		INNER JOIN TS_COPYRIGHT 
		ON CPR_ID=MTR_CPR_ID 
		AND MTR_DELETE_FLAG = 0
		AND CPR_DELETE_FLAG=0
			AND CPR_CODE =@CprCode
		) mtrCpr
		ON mtr.MTR_CODE = mtrCpr.MTR_CODE
			AND MTR_DELETE_FLAG = 0
	INNER JOIN TS_COPYRIGHT
		ON MTR_CPR_ID = CPR_ID
			AND CPR_DELETE_FLAG = 0
			AND CPR_CODE = @CprCode
			AND MTR_DELETE_FLAG=0
	LEFT JOIN VW_RELEASE_LIVE_NOW
		ON MTR_ID = VRN_MTR_ID
	GROUP BY mtr.MTR_CODE 
	ORDER BY mtr.MTR_CODE
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadByCopyright].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadByCopyright].[@LngIsoCodeDefault]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadByCopyright].[@CprCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadByCopyright].[@CprCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadByCopyright].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadByCopyright].[@LngIsoCodeDefault]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="312" />
				<Property Name="Length" Value="1448" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 11/11/2020&#xD;&#xA;-- Description:&#x9;Returns a list of individual Matrix codes that are associated with a given copyright&#xD;&#xA;-- EXEC Data_Matrix_ReadByCopyright 'CSO','en','en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Matrix_ReadByCopyright @CprCode NVARCHAR(32)&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@LngIsoCodeDefault CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_ReadByGeoMap]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @LngId INT
	DECLARE @LngDefaultId INT
	DECLARE @Url NVARCHAR(2048)

	SET @Url = @UrlStub + @GmpCode
	SET @LngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)
	SET @LngDefaultId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCodeDefault
				AND LNG_DELETE_FLAG = 0
			)

	SELECT DISTINCT mtr.MTR_CODE MtrCode
		,max(coalesce(mtrLng.MTR_TITLE, mtr.MTR_TITLE)) MtrTitle
	FROM TD_MATRIX mtr
	LEFT JOIN (
		SELECT MTR_CODE
			,MTR_TITLE
			,MTR_RLS_ID
		FROM TD_MATRIX
		WHERE MTR_DELETE_FLAG = 0
			AND MTR_LNG_ID = @LngId
		) mtrLng ON mtr.MTR_CODE = mtrLng.MTR_CODE
		AND MTR.MTR_RLS_ID = mtrLng.MTR_RLS_ID
	INNER JOIN TD_RELEASE ON mtr.MTR_RLS_ID = RLS_ID
		AND MTR_DELETE_FLAG = 0
		AND RLS_DELETE_FLAG = 0
	INNER JOIN TD_MATRIX_DIMENSION
		ON MDM_MTR_ID = MTR_ID
	INNER JOIN TS_DIMENSION_ROLE 
		ON MDM_DMR_ID=DMR_ID
		AND DMR_CODE='CLASSIFICATION'
	AND MDM_GEO_URL=@Url
	GROUP BY mtr.MTR_CODE
	ORDER BY mtr.MTR_CODE
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadByGeoMap].[@UrlStub]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadByGeoMap].[@GmpCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadByGeoMap].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadByGeoMap].[@LngIsoCodeDefault]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_GEO_URL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadByGeoMap].[@GmpCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadByGeoMap].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadByGeoMap].[@LngIsoCodeDefault]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadByGeoMap].[@UrlStub]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2048" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="407" />
				<Property Name="Length" Value="1650" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 03/12/2019&#xD;&#xA;-- Description:&#x9;Returns a list of individual Matrix codes that are associated with a given GeoMap&#xD;&#xA;-- EXEC Data_Matrix_ReadByGeoMap 'c9989202b75921e3a062ca6942b3d8aa','en','en','https://dev-ws.cso.ie/public/api.restful/PxStat.Data.GeoMap_API.Read/'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Matrix_ReadByGeoMap @GmpCode NVARCHAR(32)&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@LngIsoCodeDefault CHAR(2)&#xD;&#xA;&#x9;,@UrlStub NVARCHAR(2048)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_ReadByGroup]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @IsLive BIT
	DECLARE @IsNotLive BIT

	SET @IsLive = 1
	SET @IsNotLive = 0

	DECLARE @LngId INT
	DECLARE @LngDefaultId INT

	SET @LngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)
	SET @LngDefaultId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCodeDefault
				AND LNG_DELETE_FLAG = 0
			)

	SELECT DISTINCT mtr.MTR_CODE MtrCode
		,max(coalesce(mtrLng.MTR_TITLE, mtr.MTR_TITLE)) MtrTitle -- in case there's a variable spelling of the matrix title, we choose only the first one thus avoiding MtrCode duplicates
	FROM TD_MATRIX mtr
	LEFT JOIN (
		SELECT MTR_CODE
			,MTR_TITLE
			,MTR_RLS_ID
		FROM TD_MATRIX
		WHERE MTR_DELETE_FLAG = 0
			AND MTR_LNG_ID = @LngId
		) mtrLng
		ON mtr.MTR_CODE = mtrLng.MTR_CODE
			AND MTR.MTR_RLS_ID = mtrLng.MTR_RLS_ID
	INNER JOIN TD_RELEASE
		ON mtr.MTR_RLS_ID = RLS_ID
			AND MTR_DELETE_FLAG = 0
			AND RLS_DELETE_FLAG = 0
	INNER JOIN TD_GROUP
		ON RLS_GRP_ID = GRP_ID
			AND GRP_CODE = @GrpCode
			AND GRP_DELETE_FLAG = 0
	LEFT JOIN VW_RELEASE_LIVE_NOW
		ON MTR_ID = VRN_MTR_ID
	GROUP BY mtr.MTR_CODE
	ORDER BY mtr.MTR_CODE
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadByGroup].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadByGroup].[@LngIsoCodeDefault]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadByGroup].[@GrpCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadByGroup].[@GrpCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadByGroup].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadByGroup].[@LngIsoCodeDefault]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="311" />
				<Property Name="Length" Value="1675" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 07/02/2020&#xD;&#xA;-- Description:&#x9;Returns a list of individual Matrix codes that are associated with a given group&#xD;&#xA;-- EXEC Data_Matrix_ReadByGroup '2016PCP3OY','en','en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Matrix_ReadByGroup @GrpCode NVARCHAR(32)&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@LngIsoCodeDefault CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_ReadByLanguage]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @LngId INT
	DECLARE @LngDefaultId INT

	SET @LngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)
	SET @LngDefaultId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCodeDefault
				AND LNG_DELETE_FLAG = 0
			)

	SELECT DISTINCT mtr.MTR_CODE MtrCode
		,max(coalesce(mtrLng.MTR_TITLE, mtr.MTR_TITLE)) MtrTitle
	FROM TD_MATRIX mtr
	LEFT JOIN (
		SELECT distinct MTR_CODE
			,MTR_TITLE
		FROM TD_MATRIX
		WHERE MTR_DELETE_FLAG = 0
			AND MTR_LNG_ID =@LngId
		) mtrLng
		ON mtr.MTR_CODE = mtrLng.MTR_CODE
			AND MTR_DELETE_FLAG = 0
	INNER JOIN TS_LANGUAGE
		ON MTR_LNG_ID = LNG_ID
			AND LNG_DELETE_FLAG = 0
			AND LNG_ISO_CODE = @LngIsoCode
			and MTR_DELETE_FLAG=0
	GROUP BY mtr.MTR_CODE
	ORDER BY mtr.MTR_CODE
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadByLanguage].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadByLanguage].[@LngIsoCodeDefault]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadByLanguage].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadByLanguage].[@LngIsoCodeDefault]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="305" />
				<Property Name="Length" Value="1280" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 11/11/2020&#xD;&#xA;-- Description:&#x9;Returns a list of individual Matrix codes that are associated with a given copyright&#xD;&#xA;-- EXEC Data_Matrix_ReadByLanguage 'ga','en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Matrix_ReadByLanguage @LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@LngIsoCodeDefault CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_ReadByProduct]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @LngId INT
	DECLARE @LngDefaultId INT

	SET @LngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)
	SET @LngDefaultId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCodeDefault
				AND LNG_DELETE_FLAG = 0
			)
	
	IF (@AssociatedOnly = 0)
	BEGIN
		SELECT DISTINCT mtr.MTR_CODE MtrCode
		,max(coalesce(mtrLng.MTR_TITLE, mtr.MTR_TITLE)) MtrTitle
		FROM TD_MATRIX mtr
		LEFT JOIN (
				SELECT MTR_CODE
					,MTR_TITLE
					,MTR_RLS_ID
				FROM TD_MATRIX
				WHERE MTR_DELETE_FLAG = 0
					AND MTR_LNG_ID = @LngId
				) mtrLng
				ON mtr.MTR_CODE = mtrLng.MTR_CODE
					AND MTR.MTR_RLS_ID = mtrLng.MTR_RLS_ID
		INNER JOIN TD_RELEASE
			ON mtr.MTR_RLS_ID = RLS_ID
				AND MTR_DELETE_FLAG = 0
				AND RLS_DELETE_FLAG = 0
		INNER JOIN TD_PRODUCT
			ON RLS_PRC_ID = PRC_ID
				AND PRC_DELETE_FLAG = 0
		WHERE PRC_CODE = @PrcCode
		GROUP BY mtr.MTR_CODE
		ORDER BY mtr.MTR_CODE
	END
	ELSE
		BEGIN
		SELECT DISTINCT MTR_CODE MtrCode, MTR_TITLE MtrTitle
		FROM TD_RELEASE
		INNER JOIN TM_RELEASE_PRODUCT
		on RPR_RLS_ID=RLS_ID
			AND RPR_DELETE_FLAG=0
		INNER JOIN TD_PRODUCT
		on RPR_PRC_ID=PRC_ID
			AND PRC_DELETE_FLAG=0
		INNER JOIN TD_MATRIX
		on MTR_RLS_ID=RLS_ID
			AND MTR_LNG_ID=1
		INNER JOIN VW_RELEASE_LIVE_NOW
		on RLS_ID=VRN_RLS_ID
		AND VRN_MTR_ID = MTR_ID
		WHERE    PRC_CODE = @PrcCode
		GROUP BY MTR_CODE, MTR_TITLE
		ORDER BY MTR_CODE
		END
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadByProduct].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadByProduct].[@LngIsoCodeDefault]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadByProduct].[@AssociatedOnly]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadByProduct].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadByProduct].[@PrcCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadByProduct].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadByProduct].[@LngIsoCodeDefault]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadByProduct].[@AssociatedOnly]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="341" />
				<Property Name="Length" Value="2030" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 03/12/2019&#xD;&#xA;-- Description:&#x9;Returns a list of individual Matrix codes that are associated with a given product code (via the Release entity)&#xD;&#xA;-- EXEC Data_Matrix_ReadByProduct 'CP1HII','ga','en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Matrix_ReadByProduct @PrcCode NVARCHAR(32)&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@LngIsoCodeDefault CHAR(2)&#xD;&#xA;&#x9;,@AssociatedOnly INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_ReadCodeList]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @GroupUserHasAccess TABLE (GRP_ID INT NOT NULL);
	

	INSERT INTO @GroupUserHasAccess
	EXEC Security_Group_AccessList @CcnUsername

	SELECT DISTINCT MtrCode
		
	FROM (
		SELECT mtr.MTR_CODE MtrCode
			,mtr.MTR_LNG_ID
			,mtrLng.MTR_TITLE MtrTitle
			
		FROM TD_MATRIX mtr
		LEFT JOIN (
			SELECT MTR_CODE
				,MTR_TITLE
				,MTR_RLS_ID
			FROM TD_MATRIX
			WHERE MTR_DELETE_FLAG = 0
				
			) mtrLng
			ON mtr.MTR_CODE = mtrLng.MTR_CODE
				AND MTR.MTR_RLS_ID = mtrLng.MTR_RLS_ID
		INNER JOIN TD_RELEASE
			ON RLS_ID = mtr.MTR_RLS_ID
				AND RLS_DELETE_FLAG = 0
		INNER JOIN @GroupUserHasAccess g
			ON g.GRP_ID = RLS_GRP_ID
		WHERE MTR_DELETE_FLAG = 0
		GROUP BY mtr.MTR_CODE
			,mtr.MTR_LNG_ID
			,mtrLng.MTR_TITLE
		) q
	
	ORDER BY q.MtrCode
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[Security_Group_AccessList]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadCodeList].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadCodeList].[@GroupUserHasAccess].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Data_Matrix_ReadCodeList].[@GroupUserHasAccess]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Matrix_ReadCodeList].[@GroupUserHasAccess].[GRP_ID]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadCodeList].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="286" />
				<Property Name="Length" Value="1189" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Read date: 22 Oct 2018&#xD;&#xA;-- Description:&#x9;Reads record(s) from the TD_MATRIX and TD_Release table&#xD;&#xA;-- exec Data_Matrix_ReadCodeList 'okeeffene','en','en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Matrix_ReadCodeList @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_ReadDataField]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	SELECT MTD_DATA AS MtdData
	FROM TD_MATRIX_DATA
	WHERE MTD_MTR_ID = @MtrId
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DATA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DATA].[MTD_DATA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DATA].[MTD_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadDataField].[@MtrId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadDataField].[@MtrId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="218" />
				<Property Name="Length" Value="494" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 26/01/2022&#xD;&#xA;-- Description:&#x9;For a matrix id, read the single field data&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Matrix_ReadDataField @MtrId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_ReadDimensionItems]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT DMT_CODE AS DmtCode
		,DMT_VALUE AS DmtValue
		,DMT_SEQUENCE AS DmtSequence
		,DMT_ELIMINATION_FLAG AS DmtEliminationFlag
		,DMT_DECIMAL AS DmtDecimals
		,DMT_UNIT AS DmtUnit
	FROM TD_DIMENSION_ITEM
	WHERE DMT_MDM_ID = @MdmId
	ORDER BY DMT_SEQUENCE 
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_SEQUENCE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_ELIMINATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_DECIMAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_UNIT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadDimensionItems].[@MdmId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadDimensionItems].[@MdmId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="255" />
				<Property Name="Length" Value="623" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 26/01/2022&#xD;&#xA;-- Description:&#x9;Get dimension items for a dimension id&#xD;&#xA;-- exec Data_Matrix_ReadDimensionItems 9&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Matrix_ReadDimensionItems @MdmId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_ReadDimensionRole]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @MtrId INT
	DECLARE @LngId INT

	SET @LngId=(SELECT LNG_ID FROM TS_LANGUAGE WHERE LNG_ISO_CODE=@LngIsoCode AND LNG_DELETE_FLAG=0)

	IF @MtrCode IS NOT NULL -- We are just reading a live release for the matrix code
	BEGIN
		SET @MtrId = (
				SELECT  MTR_ID
				FROM TD_MATRIX
				INNER JOIN VW_RELEASE_LIVE_NOW
					ON MTR_ID = VRN_MTR_ID
				WHERE MTR_CODE = @MtrCode
				and MTR_DELETE_FLAG=0
				and MTR_LNG_ID=@LngId 
				)
	END
	ELSE
	BEGIN -- We are reading based on the Release for the specific language version
		SET @MtrId = (
				SELECT MTR_ID
				FROM TD_MATRIX
				INNER JOIN TS_LANGUAGE
					ON MTR_LNG_ID = LNG_ID
						AND MTR_DELETE_FLAG = 0
						AND LNG_DELETE_FLAG = 0
						AND LNG_ISO_CODE = @LngIsoCode
				INNER JOIN TD_RELEASE
					ON MTR_RLS_ID = RLS_ID
						AND RLS_CODE = @RlsCode
						AND RLS_DELETE_FLAG = 0
				)
	END

	IF (@MtrId IS NULL)
	BEGIN
		RETURN
	END

	SELECT MDM_CODE AS CODE
		,CASE 
			WHEN MDM_GEO_FLAG  = 1
				THEN 'geo'
			ELSE NULL
			END AS ROLE
	FROM TD_MATRIX_DIMENSION
	INNER JOIN TS_DIMENSION_ROLE 
	ON MDM_DMR_ID=DMR_ID 
	AND DMR_CODE='CLASSIFICATION'
	WHERE MDM_MTR_ID = @MtrId
	
	UNION
	
	SELECT MDM_CODE AS CODE
		,'time' AS ROLE
	FROM TD_MATRIX_DIMENSION
	INNER JOIN TS_DIMENSION_ROLE 
	ON MDM_DMR_ID=DMR_ID 
	AND DMR_CODE='TIME'
	WHERE MDM_MTR_ID = @MtrId
	
	UNION
	
	SELECT @ContentVariable AS DimensionCode
		,'metric' AS ROLE
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadDimensionRole].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadDimensionRole].[@MtrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadDimensionRole].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_GEO_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadDimensionRole].[@ContentVariable]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadDimensionRole].[@ContentVariable]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadDimensionRole].[@MtrCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadDimensionRole].[@RlsCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadDimensionRole].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="419" />
				<Property Name="Length" Value="2081" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 06/02/2020&#xD;&#xA;-- Description:&#x9;For a matrix code, get the roles of its various dimensions. Live matrices only.&#xD;&#xA;-- You must supply either a valid currently live matrix code or a Release Code plus LngIsoCode&#xD;&#xA;-- exec Data_Matrix_ReadDimensionRole 'STATISTIC','E3002',null,'en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Matrix_ReadDimensionRole @ContentVariable NVARCHAR(256)&#xD;&#xA;&#x9;,@MtrCode NVARCHAR(20) = NULL&#xD;&#xA;&#x9;,@RlsCode INT = NULL&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_ReadDimensions]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT MDM_ID AS MdmId
		,MDM_SEQUENCE AS MdmSequence
		,MDM_CODE AS MdmCode
		,MDM_VALUE AS MdmValue
		,MDM_GEO_FLAG AS MdmGeoFlag
		,MDM_GEO_URL AS MdmGeoUrl
		,DMR_CODE AS DmrCode
		,DMR_VALUE AS DmrValue
	FROM TD_MATRIX
	INNER JOIN TD_MATRIX_DIMENSION ON MTR_ID = MDM_MTR_ID
		AND MTR_ID = @MtrId
		AND MTR_DELETE_FLAG = 0
	INNER JOIN TS_DIMENSION_ROLE ON MDM_DMR_ID = DMR_ID
	ORDER BY MDM_SEQUENCE 
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadDimensions].[@MtrId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_SEQUENCE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_GEO_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_GEO_URL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_SEQUENCE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadDimensions].[@MtrId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="244" />
				<Property Name="Length" Value="760" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 26/01/2022&#xD;&#xA;-- Description:&#x9;Get dimensions for a matrix id&#xD;&#xA;-- exec Data_Matrix_ReadDimensions 20&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Matrix_ReadDimensions @MtrId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_ReadDmatrixByRelease]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT MTR_CODE AS MtrCode
		,MTR_ID AS MtrId
		,MTR_TITLE AS MtrTitle
		,MTR_OFFICIAL_FLAG AS MtrOfficialFlag
		,MTR_NOTE AS MtrNote
		,FRM_TYPE AS FrmType
		,FRM_VERSION AS FrmVersion
		,LNG_ISO_CODE AS LngIsoCode
		,CPR_CODE AS CprCode
		,CPR_VALUE AS CprValue
		,CPR_URL AS CprUrl
		,MTR_INPUT AS MtrInput
	FROM TD_MATRIX
	INNER JOIN TD_RELEASE ON RLS_ID = MTR_RLS_ID
		AND MTR_DELETE_FLAG = 0
		AND RLS_DELETE_FLAG = 0
		AND RLS_CODE = @RlsCode
	INNER JOIN TS_LANGUAGE ON MTR_LNG_ID = LNG_ID
		AND LNG_ISO_CODE = @LngIsoCode
	INNER JOIN TS_FORMAT ON MTR_FRM_ID = FRM_ID
	INNER JOIN TS_COPYRIGHT ON MTR_CPR_ID = CPR_ID
		AND CPR_DELETE_FLAG = 0;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadDmatrixByRelease].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadDmatrixByRelease].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_OFFICIAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_NOTE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_URL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_INPUT]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadDmatrixByRelease].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadDmatrixByRelease].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="809" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[Data_Matrix_ReadDmatrixByRelease] @RlsCode INT&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_ReadHistory]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @GroupUserHasAccess TABLE (GRP_ID INT NOT NULL);
	DECLARE @LngId INT
	DECLARE @LngDefaultId INT

	SET @LngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)
	SET @LngDefaultId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCodeDefault
				AND LNG_DELETE_FLAG = 0
			)
	SET @DateTo = dateadd(day, 1, @DateTo)

	INSERT INTO @GroupUserHasAccess
	EXEC Security_Group_AccessList @CcnUsername

	SELECT q.MtrCode
		,q.RlsCode
		,q.RlsLiveDatetimeFrom
		,q.RlsLiveDatetimeTo
		,q.RlsVersion
		,q.RlsRevision
		,q.GrpCode
		,q.GrpName
		,q.CcnUsername 
		,max(q.CreateDatetime) as CreateDateTime
		,q.MtrTitle
		,q.RqsValue
		,q.RqsCode
		,q.RspValue
		,q.RspCode
		,q.SgnValue
		,q.SgnCode
	FROM (
		SELECT mtr.MTR_CODE MtrCode
			,RLS_CODE RlsCode
			,RLS_LIVE_DATETIME_FROM RlsLiveDatetimeFrom
			,RLS_LIVE_DATETIME_TO RlsLiveDatetimeTo
			,RLS_VERSION RlsVersion
			,RLS_REVISION RlsRevision
			,GRP_CODE AS GrpCode
			,GRP_NAME AS GrpName
			,CCN_USERNAME AS CcnUsername
			,COALESCE(DHT_UPDATE.DHT_DATETIME, DHT_CREATE.DHT_DATETIME) AS CreateDatetime
			,coalesce(mtrLng.MTR_TITLE, mtr.MTR_TITLE) MtrTitle
			,mtr.MTR_LNG_ID
			,RQS_VALUE RqsValue
			,RSP_VALUE RspValue
			,SGN_VALUE SgnValue
			,RQS_CODE RqsCode
			,RSP_CODE RspCode
			,SGN_CODE SgnCode
		FROM TD_MATRIX mtr
		LEFT JOIN (
			SELECT MTR_CODE
				,MTR_TITLE
				,MTR_RLS_ID
			FROM TD_MATRIX
			WHERE MTR_DELETE_FLAG = 0
				AND MTR_LNG_ID = @LngId
			) mtrLng
			ON mtr.MTR_CODE = mtrLng.MTR_CODE
				AND MTR.MTR_RLS_ID = mtrLng.MTR_RLS_ID
		INNER JOIN TD_RELEASE
			ON RLS_ID = mtr.MTR_RLS_ID
				AND RLS_DELETE_FLAG = 0
				AND MTR_DELETE_FLAG = 0
		INNER JOIN @GroupUserHasAccess g
			ON g.GRP_ID = RLS_GRP_ID
		INNER JOIN TD_GROUP
			ON RLS_GRP_ID = TD_GROUP.GRP_ID
				AND GRP_DELETE_FLAG = 0
		INNER JOIN TD_AUDITING
			ON MTR_DTG_ID = DTG_ID
		INNER JOIN TM_AUDITING_HISTORY DHT_CREATE
			ON DTG_ID = DHT_CREATE.DHT_DTG_ID
		INNER JOIN TD_ACCOUNT
			ON DHT_CREATE.DHT_CCN_ID = CCN_ID
		INNER JOIN TS_AUDITING_TYPE DTP_CREATE
			ON DHT_CREATE.DHT_DTP_ID = DTP_CREATE.DTP_ID
				AND DTP_CREATE.DTP_CODE = 'CREATED'
		LEFT JOIN TM_AUDITING_HISTORY DHT_UPDATE
			ON DTG_ID = DHT_UPDATE.DHT_DTG_ID
		LEFT JOIN TS_AUDITING_TYPE DTP_UPDATE
			ON DHT_UPDATE.DHT_DTP_ID = DTP_UPDATE.DTP_ID
				AND DHT_UPDATE.DHT_DATETIME = (
					SELECT max(DHT_DATETIME)
					FROM TM_AUDITING_HISTORY
					WHERE DHT_DTG_ID = DTG_ID
					)
				AND DTP_UPDATE.DTP_CODE = 'UPDATED'
				LEFT JOIN TD_WORKFLOW_REQUEST
			ON WRQ_RLS_ID = RLS_ID
				AND WRQ_CURRENT_FLAG = 1
				AND WRQ_DELETE_FLAG = 0
		LEFT JOIN TS_REQUEST
			ON WRQ_RQS_ID = RQS_ID
		LEFT JOIN TD_WORKFLOW_RESPONSE
			ON WRQ_ID = WRS_WRQ_ID
		LEFT JOIN TS_RESPONSE
			ON WRS_RSP_ID = RSP_ID
		LEFT JOIN TD_WORKFLOW_SIGNOFF
			ON WRS_ID = WSG_WRS_ID
		LEFT JOIN TS_SIGNOFF
			ON WSG_SGN_ID = SGN_ID
		WHERE MTR_DELETE_FLAG = 0
			AND DHT_CREATE.DHT_DATETIME >= @DateFrom
			AND DHT_CREATE.DHT_DATETIME <= @DateTo
		) q
	WHERE q.MTR_LNG_ID IN (
			@LngId
			,@LngDefaultId
			)
	GROUP BY q.MtrCode
		,q.RlsCode
		,q.RlsLiveDatetimeFrom
		,q.RlsLiveDatetimeTo
		,q.RlsVersion
		,q.RlsRevision
		,q.GrpCode
		,q.GrpName
		,q.MtrTitle
		,q.CcnUsername 
		,q.RqsValue
		,q.RqsCode
		,q.RspValue
		,q.RspCode
		,q.SgnValue
		,q.SgnCode
	ORDER BY q.MtrCode
		,q.RlsVersion
		,q.RlsRevision
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadHistory].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadHistory].[@LngIsoCodeDefault]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadHistory].[@DateTo]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_AccessList]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadHistory].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadHistory].[@GroupUserHasAccess].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CURRENT_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RQS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_RSP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_WRS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_SGN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadHistory].[@DateFrom]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Data_Matrix_ReadHistory].[@GroupUserHasAccess]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Matrix_ReadHistory].[@GroupUserHasAccess].[GRP_ID]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadHistory].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadHistory].[@DateFrom]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadHistory].[@DateTo]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadHistory].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadHistory].[@LngIsoCodeDefault]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="347" />
				<Property Name="Length" Value="4079" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 11/06/2019&#xD;&#xA;-- Description:&#x9;Reads a history of release uploads based on either the user's group or the user's privilege&#xD;&#xA;-- exec Data_Matrix_ReadHistory 'okeeffene','2019-12-01','2019-12-30','ga','en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Matrix_ReadHistory @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@DateFrom DATETIME&#xD;&#xA;&#x9;,@DateTo DATETIME&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@LngIsoCodeDefault CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_ReadLanguage]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @GroupUserHasAccess TABLE (GRP_ID INT NOT NULL);

	INSERT INTO @GroupUserHasAccess
	EXEC Security_Group_AccessList @CcnUsername

	SELECT LNG_ISO_CODE LngIsoCode
		,LNG_ISO_NAME LngIsoName
	FROM TD_MATRIX
	INNER JOIN TD_RELEASE
		ON RLS_ID = MTR_RLS_ID
			AND RLS_CODE = @RlsCode
			AND RLS_DELETE_FLAG = 0
	INNER JOIN @GroupUserHasAccess g
		ON g.GRP_ID = RLS_GRP_ID
	INNER JOIN TS_LANGUAGE
		ON LNG_ID = MTR_LNG_ID
			AND LNG_DELETE_FLAG = 0
	WHERE MTR_DELETE_FLAG = 0
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[Security_Group_AccessList]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadLanguage].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadLanguage].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadLanguage].[@GroupUserHasAccess].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Data_Matrix_ReadLanguage].[@GroupUserHasAccess]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Matrix_ReadLanguage].[@GroupUserHasAccess].[GRP_ID]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadLanguage].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadLanguage].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="230" />
				<Property Name="Length" Value="854" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Read date: 22 Oct 2018&#xD;&#xA;-- Description:&#x9;Reads record(s) from the TD_MATRIX and TD_Release table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Matrix_ReadLanguage @RlsCode INT&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_ReadPeriodByRelease]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT MDM_CODE FrqCode
		,DMT_CODE PrdCode
		,DMT_VALUE PrdValue
		,LNG_ISO_CODE LngIsoCode
		,LNG_ISO_NAME LngIsoName
	FROM TD_RELEASE
	INNER JOIN TD_MATRIX
		ON MTR_RLS_ID = RLS_ID
			AND MTR_DELETE_FLAG = 0
	INNER JOIN TS_LANGUAGE
		ON MTR_LNG_ID = LNG_ID
			AND LNG_DELETE_FLAG = 0
			AND (
				@LngIsoCode IS NULL
				OR @LngIsoCode = LNG_ISO_CODE
				)


	INNER JOIN TD_MATRIX_DIMENSION 
	ON MTR_ID=MDM_MTR_ID 
	INNER JOIN TS_DIMENSION_ROLE 
	ON MDM_DMR_ID=DMR_ID
	AND DMR_CODE='TIME'
	INNER JOIN TD_DIMENSION_ITEM 
	ON DMT_MDM_ID =MDM_ID


	WHERE RLS_CODE = @RlsCode
		AND MTR_DELETE_FLAG = 0
	ORDER BY MDM_ID
		,DMT_ID
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadPeriodByRelease].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadPeriodByRelease].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadPeriodByRelease].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadPeriodByRelease].[@LngIsoCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadPeriodByRelease].[@FrqCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="280" />
				<Property Name="Length" Value="1107" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Read date: 12 Dec 2018&#xD;&#xA;-- Description:&#x9;Reads Period for a given matrix code and language (optional)&#xD;&#xA;-- EXEC Data_Matrix_ReadPeriodByRelease 32 &#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Matrix_ReadPeriodByRelease @RlsCode INT&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2) = NULL&#xD;&#xA;&#x9;,@FrqCode NVARCHAR(256) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_ReadSingleField]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT MTD_DATA AS MtdData
	FROM TD_MATRIX_DATA
	WHERE MTD_MTR_ID = @MtrId
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DATA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DATA].[MTD_DATA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DATA].[MTD_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadSingleField].[@MtrId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadSingleField].[@MtrId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="205" />
				<Property Name="Length" Value="382" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 24/01/2022&#xD;&#xA;-- Description:&#x9;Reads data from a single field&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Matrix_ReadSingleField @MtrId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_ReadStatisticByRelease]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT DMT_CODE SttCode
		,DMT_VALUE SttValue
		,DMT_UNIT SttUnit
		,DMT_DECIMAL SttDecimal
		,LNG_ISO_CODE LngIsoCode
		,LNG_ISO_NAME LngIsoName
	FROM TD_RELEASE
	INNER JOIN TD_MATRIX
		ON MTR_RLS_ID = RLS_ID
			AND MTR_DELETE_FLAG = 0
	INNER JOIN TS_LANGUAGE
		ON MTR_LNG_ID = LNG_ID
			AND LNG_DELETE_FLAG = 0
			AND (
				@LngIsoCode IS NULL
				OR @LngIsoCode = LNG_ISO_CODE
				)


	INNER JOIN TD_MATRIX_DIMENSION 
	ON MTR_ID=MDM_MTR_ID 
	INNER JOIN TS_DIMENSION_ROLE 
	ON MDM_DMR_ID=DMR_ID
	AND DMR_CODE='STATISTIC'
	INNER JOIN TD_DIMENSION_ITEM 
	ON DMT_MDM_ID =MDM_ID

	WHERE RLS_CODE = @RlsCode
		AND RLS_DELETE_FLAG = 0
	ORDER BY DMT_ID 
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadStatisticByRelease].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_UNIT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_DECIMAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_ReadStatisticByRelease].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadStatisticByRelease].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_ReadStatisticByRelease].[@LngIsoCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="299" />
				<Property Name="Length" Value="1116" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Read date: 12 Dec 2018&#xD;&#xA;-- Description:&#x9;Reads Statistic Records for a given matrix code and language (optional)&#xD;&#xA;-- EXEC Data_Matrix_ReadStatisticByRelease 52, 'en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Matrix_ReadStatisticByRelease @RlsCode INT&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_Release_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SELECT MTR_ID AS MtrId
		,MTR_CODE AS MtrCode
	FROM TD_MATRIX
	INNER JOIN TD_RELEASE ON RLS_DELETE_FLAG = 0
		AND MTR_DELETE_FLAG = 0
		AND MTR_RLS_ID = RLS_ID
		AND RLS_CODE = @RlsCode
	INNER JOIN TS_LANGUAGE ON MTR_LNG_ID = LNG_ID
		AND LNG_ISO_CODE = @LngIsoCode
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Release_Read].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Release_Read].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Release_Read].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Release_Read].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="256" />
				<Property Name="Length" Value="632" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 26/01/2022&#xD;&#xA;-- Description:&#x9;Read Matrix highlights from release code&#xD;&#xA;-- exec Data_Matrix_Release_Read 1,'en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Matrix_Release_Read @RlsCode INT&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_Remove]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @updateCount INT

	DECLARE @MatrixIds TABLE (
		MtrId INT
		,MtrDtgId INT
		,Rownum INT
		)
	DECLARE @DtgId INT

	UPDATE TD_MATRIX
	SET MTR_DELETE_FLAG = 1
	WHERE MTR_RLS_ID IN (
			SELECT [RLS_ID]
			FROM [TD_RELEASE]
			WHERE [RLS_DELETE_FLAG] = 0
				AND [RLS_CODE] = @RlsCode
			)
		AND MTR_DELETE_FLAG = 0

	SET @updateCount = @@ROWCOUNT

	INSERT INTO @MatrixIds (
		MtrId
		,MtrDtgId
		,Rownum
		) (
		SELECT MTR_ID
		,MTR_DTG_ID
		,(
			SELECT ROW_NUMBER() OVER (
					ORDER BY MTR_ID ASC
					)
			) AS RowNumber FROM TD_MATRIX WHERE MTR_RLS_ID IN (
			SELECT [RLS_ID]
			FROM [TD_RELEASE]
			WHERE [RLS_DELETE_FLAG] = 0
				AND [RLS_CODE] = @RlsCode
			)
		AND MTR_DELETE_FLAG = 0
		)

	IF @updateCount > 0
	BEGIN
		DECLARE @userId INT

		SELECT @userId = CCN_ID
		FROM TD_ACCOUNT
		WHERE CCN_USERNAME = @CcnUsername
			AND CCN_DELETE_FLAG = 0

		DECLARE @rnum INT

		SET @rnum = 1

		DECLARE @rcount INT = (
				SELECT count(*)
				FROM @MatrixIds
				)

		WHILE (@rnum <= @rcount)
		BEGIN
			SET @DtgId = (
					SELECT MtrDtgId
					FROM @MatrixIds
					WHERE Rownum = @rnum
					)

			EXEC Security_Auditing_Delete @DtgID
				,@CcnUsername

			SET @rnum = @rnum + 1
		END
	END

	-- Remove metaData Tables
	DELETE FROM TD_MATRIX_DATA
	WHERE MTD_MTR_ID = @MtrId 

	DELETE FROM TD_DIMENSION_ITEM
	WHERE DMT_MDM_ID IN (SELECT DISTINCT MDM_ID FROM TD_MATRIX_DIMENSION
	INNER JOIN TD_MATRIX
	ON MDM_MTR_ID = @MtrId)

    DELETE FROM TD_MATRIX_DIMENSION
	WHERE MDM_ID IN (SELECT DISTINCT MDM_ID FROM TD_MATRIX_DIMENSION
	INNER JOIN TD_MATRIX
	ON MDM_MTR_ID = @MtrId)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Remove].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Remove].[@MatrixIds].[MtrId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Remove].[@MatrixIds].[MtrDtgId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Remove].[@MatrixIds].[Rownum]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Remove].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Remove].[@MatrixIds].[MtrDtgId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Remove].[@MatrixIds].[Rownum]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Delete]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DATA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DATA].[MTD_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Remove].[@MtrId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Data_Matrix_Remove].[@MatrixIds]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Matrix_Remove].[@MatrixIds].[MtrId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Matrix_Remove].[@MatrixIds].[MtrDtgId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Matrix_Remove].[@MatrixIds].[Rownum]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Remove].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Remove].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Remove].[@MtrId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="253" />
				<Property Name="Length" Value="2057" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Damian Chapman&#xD;&#xA;-- Create date: 12/04/2022&#xD;&#xA;-- Description:&#x9;Soft deletes the matrix and its &#xD;&#xA;--              associated metaData tables.&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE   PROCEDURE [dbo].[Data_Matrix_Remove] @RlsCode INT&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256), @MtrId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	UPDATE TD_MATRIX
	SET MTR_DATA_FLAG =COALESCE (@MtrDataFlag,MTR_DATA_FLAG)
	,MTR_INPUT=COALESCE(@MtrInput,MTR_INPUT)
	WHERE MTR_ID = @MtrId

	RETURN @@rowcount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DATA_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Update].[@MtrDataFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_INPUT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Update].[@MtrInput]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Update].[@MtrId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Update].[@MtrId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Update].[@MtrDataFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Update].[@MtrInput]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="273" />
				<Property Name="Length" Value="586" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 13/06/2024&#xD;&#xA;-- Description:&#x9;Update a matrix &#xD;&#xA;-- Add new parameters as required (allowing that nulls will result in no update)&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Matrix_Update @MtrId INT&#xD;&#xA;&#x9;,@MtrDataFlag BIT=NULL&#xD;&#xA;&#x9;,@MtrInput NVARCHAR(MAX)=NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Matrix_Update_Data_Flag]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	UPDATE TD_MATRIX
	SET MTR_DATA_FLAG = @MtrDataFlag
	WHERE MTR_ID = @MtrId

	RETURN @@rowcount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DATA_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Update_Data_Flag].[@MtrDataFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Matrix_Update_Data_Flag].[@MtrId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Update_Data_Flag].[@MtrId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Matrix_Update_Data_Flag].[@MtrDataFlag]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="382" />
				<Property Name="Length" Value="601" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 29/11/2019&#xD;&#xA;-- Description:&#x9;Update a matrix to set the Update flag. This flag indicates that this matrix has data.&#xD;&#xA;-- Typically where multiple languages are represented in a single release, only one matrix will have the data attached.&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Matrix_Update_Data_Flag @MtrId INT&#xD;&#xA;&#x9;,@MtrDataFlag BIT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Read_Title_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
DECLARE @cursor CURSOR;
DECLARE @MtrId INT;
DECLARE @Title AS NVARCHAR (MAX);
DECLARE @Contents AS NVARCHAR (256);
DECLARE @Dimensions AS NVARCHAR (256);
DECLARE @Time AS NVARCHAR (256);
DECLARE @StartValue AS NVARCHAR (256);
DECLARE @FinishValue AS NVARCHAR (256);
CREATE TABLE #TITLES (MtrId INT, MtrTitle NVARCHAR (MAX)) 
BEGIN
	SET @Placeholder = ' ' + @Placeholder + ' ';
    SET @cursor = CURSOR FOR
    select [Key], [Value]
	from @MatrixMap   

    OPEN @cursor 
    FETCH NEXT FROM @cursor 
    INTO @MtrId, @Contents

    WHILE @@FETCH_STATUS = 0
		BEGIN
		SET @Time = (SELECT MDM_VALUE
					 FROM   TD_MATRIX_DIMENSION
					 WHERE  MDM_MTR_ID = @MtrId
							AND MDM_DMR_ID = 2);
        SET @Dimensions = ''
		SELECT @Dimensions = @Dimensions + MDM_VALUE + ', '
		FROM   TD_MATRIX_DIMENSION
		WHERE  MDM_MTR_ID = @MtrId
			   AND MDM_DMR_ID = 3;
		SET @StartValue = (SELECT   TOP (1) DMT_VALUE
						   FROM     TD_DIMENSION_ITEM
						   WHERE    DMT_MDM_ID = (SELECT MDM_ID
												  FROM   TD_MATRIX_DIMENSION
												  WHERE  MDM_MTR_ID = @MtrId
														 AND MDM_DMR_ID = 2)
						   ORDER BY DMT_VALUE DESC);
		SET @FinishValue = (SELECT   TOP (1) DMT_VALUE
							FROM     TD_DIMENSION_ITEM
							WHERE    DMT_MDM_ID = (SELECT MDM_ID
												   FROM   TD_MATRIX_DIMENSION
												   WHERE  MDM_MTR_ID = @MtrId
														  AND MDM_DMR_ID = 2)
							ORDER BY DMT_VALUE ASC);
		SET @Dimensions = SUBSTRING(@Dimensions, 1, len(@Dimensions)-1)
		IF @StartValue = @FinishValue
			BEGIN
				SET @Title = @Contents + @Placeholder + @Dimensions + ' and ' + @Time + ' ' + @StartValue;
			END
		ELSE
			BEGIN
				SET @Title = @Contents + @Placeholder + @Dimensions + ' and ' + @Time + ' ' + @StartValue + @Placeholder + @FinishValue;
			END 
		INSERT INTO #TITLES VALUES(@MtrId, @Title)
		FETCH NEXT FROM @cursor INTO @MtrId, @Contents
    END; 
    CLOSE @cursor;
    DEALLOCATE @cursor;
	SELECT * from #TITLES
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[cursor]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Read_Title_Update].[@Placeholder]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Read_Title_Update].[@MatrixMap]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Read_Title_Update].[@MatrixMap].[Key]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Read_Title_Update].[@MatrixMap].[Value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Read_Title_Update].[#TITLES]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Data_Read_Title_Update].[#TITLES]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Read_Title_Update].[#TITLES].[MtrId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Read_Title_Update].[#TITLES].[MtrTitle]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Data_Read_Title_Update].[@MatrixMap]" Disambiguator="5">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Read_Title_Update].[@MatrixMap].[Key]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="256" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Read_Title_Update].[@MatrixMap].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="256" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Read_Title_Update].[@MatrixMap].[Attribute]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Read_Title_Update].[@Placeholder]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Read_Title_Update].[@MatrixMap]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[dbo].[KeyValueVarcharAttribute]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="2143" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE     PROCEDURE [dbo].[Data_Read_Title_Update]&#xD;&#xA;@Placeholder NVARCHAR (256), @MatrixMap KeyValueVarcharAttribute READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Reason_Release_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @ReasonReleaseDtgID INT = NULL
	DECLARE @ReasonReleaseCommentDtgID INT = NULL
	DECLARE @errorMessage VARCHAR(256)
	DECLARE @errorDetails VARCHAR(256)
	DECLARE @commentId INT
	DECLARE @RlsId INT
	DECLARE @RsnId INT

	SET @errorDetails = ' for ReasonRelease RlsCode:' + cast(isnull(@RlsCode, 0) AS VARCHAR) + ' RsnCode:' + cast(isnull(@RsnCode, 0) AS VARCHAR)
	SET @RlsId = (
			SELECT rls.RLS_ID
			FROM TD_RELEASE rls
			WHERE rls.RLS_CODE = @RlsCode
				AND RLS_DELETE_FLAG = 0
			)

	IF @RlsId IS NULL
		OR @RlsId = 0
	BEGIN
		RETURN 0
	END

	SET @RsnId = (
			SELECT rsn.RSN_ID
			FROM TS_REASON rsn
			WHERE rsn.RSN_CODE = @RsnCode
				AND RSN_DELETE_FLAG = 0
			)

	IF @RsnId = 0
		OR @RsnId IS NULL
	BEGIN
		RETURN 0
	END

	-- Do the create Audit for the ReasonRelease and get the new DtgID from the stored procedure
	EXEC @ReasonReleaseDtgID = Security_Auditing_Create @CcnUsername

	-- Check for problems with the audit stored procedure
	IF @ReasonReleaseDtgID = 0
		OR @ReasonReleaseDtgID IS NULL
	BEGIN
		SET @errorMessage = 'Error in calling Security_Auditing_Create' + @errorDetails

		RAISERROR (
				@errorMessage
				,16
				,1
				)

		RETURN 0
	END

	IF @CmmValue IS NOT NULL
	BEGIN
		-- Do the create Audit for the Comment and get the new DtgID from the stored procedure
		EXEC @ReasonReleaseCommentDtgID = Security_Auditing_Create @CcnUsername

		-- Check for problems with the audit stored procedure
		IF @ReasonReleaseCommentDtgID = 0
			OR @ReasonReleaseCommentDtgID IS NULL
		BEGIN
			SET @errorMessage = 'Error in calling Security_Auditing_Create' + @errorDetails

			RAISERROR (
					@errorMessage
					,16
					,1
					)

			RETURN 0
		END

		-- Create the comment for the ReleaseReason
		INSERT INTO TD_COMMENT (
			CMM_VALUE
			,CMM_DTG_ID
			,CMM_DELETE_FLAG
			)
		VALUES (
			@CmmValue
			,@ReasonReleaseCommentDtgID
			,0
			)

		IF @@IDENTITY = 0
		BEGIN
			SET @errorMessage = 'Unable to create comment' + @errorDetails

			RAISERROR (
					@errorMessage
					,16
					,1
					)

			RETURN 0
		END

		SET @commentID = @@IDENTITY
	END

	-- Create the ReasonRelease entry
	INSERT INTO TM_REASON_RELEASE (
		RSR_RSN_ID
		,RSR_RLS_ID
		,RSR_CMM_ID
		,RSR_DTG_ID
		,RSR_DELETE_FLAG
		)
	VALUES (
		@RsnId
		,@RlsId
		,@commentID
		,@ReasonReleaseDtgID
		,0
		)

	IF @@IDENTITY = 0
	BEGIN
		SET @errorMessage = 'Unable to create Reason Release' + @errorDetails

		RAISERROR (
				@errorMessage
				,16
				,1
				)

		RETURN 0
	END

	RETURN @@IDENTITY
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Reason_Release_Create].[@RlsCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Reason_Release_Create].[@RsnCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Reason_Release_Create].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Reason_Release_Create].[@CmmValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_RSN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Reason_Release_Create].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Reason_Release_Create].[@RsnCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Reason_Release_Create].[@CmmValue]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Reason_Release_Create].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="304" />
				<Property Name="Length" Value="3113" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 13/12/2018&#xD;&#xA;-- Description:&#x9;Creates a new ReasonRelease entry&#xD;&#xA;-- exec Data_Reason_Release_Create 32,'DFG01','A Comment for ReasonRelease Create','OKeeffeNe'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Reason_Release_Create @RlsCode INT&#xD;&#xA;&#x9;,@RsnCode NVARCHAR(32)&#xD;&#xA;&#x9;,@CmmValue NVARCHAR(1024) = NULL&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Reason_Release_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @ReasonReleaseDtgID INT = NULL
	DECLARE @ReasonReleaseCommentDtgID INT = NULL
	DECLARE @AuditUpdateCount INT
	DECLARE @errorMessage VARCHAR(256)
	DECLARE @errorDetails VARCHAR(256)
	DECLARE @commentId INT
	DECLARE @RlsId INT
	DECLARE @RsnId INT
	DECLARE @DeleteCount INT

	SET @errorDetails = ' for ReasonRelease RlsCode:' + cast(isnull(@RlsCode, 0) AS VARCHAR) + ' RsnCode:' + cast(isnull(@RsnCode, 0) AS VARCHAR)
	SET @RlsId = (
			SELECT rls.RLS_ID
			FROM TD_RELEASE rls
			WHERE rls.RLS_CODE = @RlsCode
				AND RLS_DELETE_FLAG = 0
			)

	IF @RlsId IS NULL
		OR @RlsId = 0
	BEGIN
		RETURN 0
	END

	SET @RsnId = (
			SELECT rsn.RSN_ID
			FROM TS_REASON rsn
			INNER JOIN TM_REASON_RELEASE
				ON RSN_ID = RSR_RSN_ID
			WHERE rsn.RSN_CODE = @RsnCode
				AND RSR_RLS_ID = @RlsId
				AND RSR_DELETE_FLAG = 0
			)

	IF @RsnId = 0
		OR @RsnId IS NULL
	BEGIN
		RETURN 0
	END

	SELECT @commentId = rsr.RSR_CMM_ID
		,@ReasonReleaseDtgID = rsr.RSR_DTG_ID
	FROM TM_REASON_RELEASE rsr
	WHERE rsr.RSR_RLS_ID = @RlsId
		AND rsr.RSR_RSN_ID = @RsnId
		AND rsr.RSR_DELETE_FLAG = 0

IF @commentId IS NOT NULL AND @commentId>0
BEGIN			
	SELECT @ReasonReleaseCommentDtgID = cmm.CMM_DTG_ID
	FROM TD_COMMENT cmm
	WHERE CMM_ID = @commentId

	

	--soft delete the comment
	UPDATE TD_COMMENT
	SET CMM_DELETE_FLAG = 1
	WHERE CMM_ID = @commentId
		AND CMM_DELETE_FLAG = 0

	SET @DeleteCount = @@ROWCOUNT

	IF @DeleteCount > 0
	BEGIN
		-- do the auditing for the comment
		-- Create the entry in the TD_AUDITING table
		EXEC @AuditUpdateCount = Security_Auditing_Delete @ReasonReleaseCommentDtgID
			,@CcnUsername

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @errorMessage = 'Error creating entry in TD_AUDITING comment ' + @errorDetails

			RAISERROR (
					@errorMessage
					,16
					,1
					)

			RETURN 0
		END
	END
END

	--soft delete the ReasonRelease
	UPDATE TM_REASON_RELEASE
	SET RSR_DELETE_FLAG = 1
	WHERE RSR_RLS_ID = @RlsId
		AND RSR_RSN_ID = @RsnId

	SET @DeleteCount = @@ROWCOUNT

	IF @DeleteCount > 0
	BEGIN
		-- do the auditing for the Reason Release
		-- Create the entry in the TD_AUDITING table
		EXEC @AuditUpdateCount = Security_Auditing_Delete @ReasonReleaseDtgID
			,@CcnUsername

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @errorMessage = 'Error creating entry in TD_AUDITING Reason Release' + @errorDetails

			RAISERROR (
					@errorMessage
					,16
					,1
					)

			RETURN 0
		END
	END

	RETURN @DeleteCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Reason_Release_Delete].[@RlsCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Reason_Release_Delete].[@RsnCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_RSN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_RSN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Delete]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Reason_Release_Delete].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_RSN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Reason_Release_Delete].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Reason_Release_Delete].[@RsnCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Reason_Release_Delete].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="284" />
				<Property Name="Length" Value="3077" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 13/12/2018&#xD;&#xA;-- Description:&#x9;Deletes a ReasonRelease and its associated comment&#xD;&#xA;-- exec Data_Reason_Release_Delete 32,'DFG01','OKeeffeNe'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Reason_Release_Delete @RlsCode INT&#xD;&#xA;&#x9;,@RsnCode NVARCHAR(32)&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Reason_Release_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @LngIsoId INT

	SET @LngIsoId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)

	SELECT rls.RLS_CODE AS RlsCode
		,rsn.RSN_CODE AS RsnCode
		,coalesce(rlg.RLG_VALUE_EXTERNAL , rsn.RSN_VALUE_EXTERNAL) AS RsnValueExternal
		,coalesce(rlg.RLG_VALUE_INTERNAL , rsn.RSN_VALUE_INTERNAL) AS RsnValueInternal
		,cmm.CMM_Value AS CmmValue
	FROM TM_REASON_RELEASE rsr
	INNER JOIN TS_REASON rsn
		ON rsr.RSR_RSN_ID = rsn.RSN_ID
			AND rsr.RSR_DELETE_FLAG = 0
	LEFT JOIN TD_COMMENT cmm
		ON cmm.CMM_ID = rsr.RSR_CMM_ID
			AND cmm.CMM_DELETE_FLAG = 0
	INNER JOIN TD_RELEASE rls
		ON rsr.RSR_RLS_ID = rls.RLS_ID
			AND rls.RLS_DELETE_FLAG = 0
	left join TS_REASON_LANGUAGE rlg
	on rsn.RSN_ID=rlg.RLG_RSN_ID 
	and rlg.RLG_LNG_ID=@LngIsoId 
	WHERE rls.RLS_CODE = @RlsCode
		AND (
			@RsnCode IS NULL
			OR @RsnCode = rsn.RSN_CODE
			)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Reason_Release_Read].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_RSN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON_LANGUAGE].[RLG_RSN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON_LANGUAGE].[RLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON_LANGUAGE].[RLG_VALUE_EXTERNAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_VALUE_EXTERNAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON_LANGUAGE].[RLG_VALUE_INTERNAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_VALUE_INTERNAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Reason_Release_Read].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Reason_Release_Read].[@RsnCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Reason_Release_Read].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Reason_Release_Read].[@RsnCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Reason_Release_Read].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="253" />
				<Property Name="Length" Value="1326" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 13/12/2018&#xD;&#xA;-- Reads ReasonRelease entities based on RlsCode&#xD;&#xA;-- exec Data_Reason_Release_Read 6,null,'ga'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Reason_Release_Read @RlsCode INT&#xD;&#xA;&#x9;,@RsnCode NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@LngIsoCode char(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Reason_Release_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @ReasonReleaseCommentDtgID INT = NULL
	DECLARE @AuditUpdateCount INT
	DECLARE @errorMessage VARCHAR(256)
	DECLARE @errorDetails VARCHAR(256)
	DECLARE @commentId INT
	DECLARE @RlsId INT
	DECLARE @RsnId INT
	DECLARE @UpdatedCount INT

	SET @errorDetails = ' for ReasonRelease RlsCode:' + cast(isnull(@RlsCode, 0) AS VARCHAR) + ' RsnCode:' + cast(isnull(@RsnCode, 0) AS VARCHAR)
	SET @RlsId = (
			SELECT rls.RLS_ID
			FROM TD_RELEASE rls
			WHERE rls.RLS_CODE = @RlsCode
			)

	IF @RlsId IS NULL
		OR @RlsId = 0
	BEGIN
		RETURN 0
	END

	SET @RsnId = (
			SELECT rsn.RSN_ID
			FROM TS_REASON rsn
			WHERE rsn.RSN_CODE = @RsnCode
				AND rsn.RSN_DELETE_FLAG = 0
			)

	IF @RsnId = 0
		OR @RsnId IS NULL
	BEGIN
		RETURN 0
	END

	IF @CmmValue IS NULL
	BEGIN
	UPDATE TM_REASON_RELEASE 
		SET RSR_CMM_ID=NULL
		WHERE RSR_RLS_ID=@RlsId 
		AND RSR_RSN_ID=@RsnId 
		AND RSR_DELETE_FLAG=0

		return @@ROWCOUNT
	END

	SET @commentId = (
			SELECT rsr.RSR_CMM_ID
			FROM TM_REASON_RELEASE rsr
			WHERE rsr.RSR_RLS_ID = @RlsId
				AND rsr.RSR_RSN_ID = @RsnId
				AND rsr.RSR_DELETE_FLAG = 0
			)

	IF @commentId = 0
		OR @commentId IS NULL
	BEGIN
		-- we must insert a new comment
		-- Do the create Audit for the Comment and get the new DtgID from the stored procedure
		EXEC @ReasonReleaseCommentDtgID = Security_Auditing_Create @CcnUsername

		-- Check for problems with the audit stored procedure
		IF @ReasonReleaseCommentDtgID = 0
			OR @ReasonReleaseCommentDtgID IS NULL
		BEGIN
			SET @errorMessage = 'Error in calling Security_Auditing_Create' + @errorDetails

			RAISERROR (
					@errorMessage
					,16
					,1
					)

			RETURN 0
		END

		-- Create the comment for the ReleaseReason
		INSERT INTO TD_COMMENT (
			CMM_VALUE
			,CMM_DTG_ID
			,CMM_DELETE_FLAG
			)
		VALUES (
			@CmmValue
			,@ReasonReleaseCommentDtgID
			,0
			)

		IF @@IDENTITY = 0
		BEGIN
			SET @errorMessage = 'Unable to create comment' + @errorDetails

			RAISERROR (
					@errorMessage
					,16
					,1
					)

			RETURN 0
		END

		SET @commentID = @@IDENTITY

		UPDATE TM_REASON_RELEASE 
		SET RSR_CMM_ID=@commentID
		WHERE RSR_RLS_ID=@RlsId 
		AND RSR_RSN_ID=@RsnId 
		AND RSR_DELETE_FLAG=0

		SET @UpdatedCount = @@ROWCOUNT
	END
	ELSE
	BEGIN
		--otherwise we must update the existing comment
		SET @ReasonReleaseCommentDtgID = (
				SELECT cmm.CMM_DTG_ID
				FROM TD_COMMENT cmm
				WHERE cmm.CMM_ID = @commentId
					AND cmm.CMM_DELETE_FLAG = 0
				)

		IF @ReasonReleaseCommentDtgID = 0
			OR @ReasonReleaseCommentDtgID IS NULL
		BEGIN
			SET @errorMessage = 'No comment DTG value found' + @errorDetails

			RAISERROR (
					@errorMessage
					,16
					,1
					)

			RETURN 0
		END

		-- Do the update Audit for the Comment and get the new DtgID from the stored procedure
		EXEC @AuditUpdateCount = Security_Auditing_Update @ReasonReleaseCommentDtgID
			,@CcnUsername

		-- Check for problems with the audit stored procedure
		IF @AuditUpdateCount = 0
			OR @AuditUpdateCount IS NULL
		BEGIN
			SET @errorMessage = 'Error in calling Security_Auditing_Update' + @errorDetails

			RAISERROR (
					@errorMessage
					,16
					,1
					)

			RETURN 0
		END

		

		UPDATE TD_COMMENT
		SET CMM_VALUE = @CmmValue
		WHERE CMM_ID = @commentId
			AND CMM_DELETE_FLAG = 0

		SET @UpdatedCount = @@ROWCOUNT
	END



	RETURN @UpdatedCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Reason_Release_Update].[@RlsCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Reason_Release_Update].[@RsnCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Reason_Release_Update].[@CmmValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_RSN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_RSN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Reason_Release_Update].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Reason_Release_Update].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Reason_Release_Update].[@RsnCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Reason_Release_Update].[@CmmValue]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Reason_Release_Update].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="311" />
				<Property Name="Length" Value="3973" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 13/12/2014&#xD;&#xA;-- Description:&#x9;Updates the comments of a ReasonRelease&#xD;&#xA;-- exec Data_Reason_Release_Update 32,'DFG01','Updated Comment for Release Code 32','OKeeffeNe'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Reason_Release_Update @RlsCode INT&#xD;&#xA;&#x9;,@RsnCode NVARCHAR(32)&#xD;&#xA;&#x9;,@CmmValue NVARCHAR(1024)=NULL&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_Clone]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	-- Error Message
	DECLARE @errorMessage VARCHAR(256)
	DECLARE @spName VARCHAR(100)

	SET @spName = 'Data_Stat_Release_Clone'

	DECLARE @RlsGrpId INT = NULL
	DECLARE @RlsId INT = NULL
	DECLARE @NewRlsId INT = NULL
	DECLARE @GrpId INT = NULL
	DECLARE @PreviousGrpCode VARCHAR(32) = NULL

	SELECT @RlsId = RLS_ID
	FROM TD_RELEASE
	WHERE RLS_DELETE_FLAG = 0
		AND RLS_CODE = @RlsCode

	IF @RlsId IS NULL
	BEGIN
		SET @errorMessage = 'SP: ' + @spName + ' - release code not found: ' + cast(isnull(@RlsCode, '') AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				);

		RETURN - 1
	END

	SELECT @GrpId = GRP_ID
	FROM TD_GROUP
	WHERE GRP_DELETE_FLAG = 0
		AND GRP_CODE = @GrpCode

	IF @GrpId IS NULL
	BEGIN
		SET @errorMessage = 'SP: ' + @spName + ' - group code not found: ' + cast(isnull(@GrpCode, '') AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				);

		RETURN - 2
	END

	-- Start the cloning!
	-- 1 get a new auditing 
	DECLARE @DtgId INT = NULL

	EXEC @DtgId = Security_Auditing_Create @userName;

	IF @DtgId IS NULL
		OR @DtgId = 0
	BEGIN
		RAISERROR (
				'SP: Security_Auditing_Create has failed!'
				,16
				,1
				)

		RETURN 0
	END

	-- release
	INSERT INTO [TD_RELEASE] (
		[RLS_VERSION]
		,[RLS_REVISION]
		,[RLS_RESERVATION_FLAG]
		,[RLS_ARCHIVE_FLAG]
		,[RLS_ANALYTICAL_FLAG]
		,[RLS_EXPERIMENTAL_FLAG]
		,[RLS_GRP_ID]
		,[RLS_PRC_ID]
		,[RLS_DTG_ID]
		)
	SELECT [RLS_VERSION]
		,[RLS_REVISION] + 1
		,[RLS_RESERVATION_FLAG]
		,[RLS_ARCHIVE_FLAG]
		,[RLS_ANALYTICAL_FLAG]
		,[RLS_EXPERIMENTAL_FLAG]
		,@GrpId
		,[RLS_PRC_ID]
		,@DtgId
	FROM [TD_RELEASE]
	WHERE RLS_ID = @RlsId
		AND RLS_DELETE_FLAG = 0

	SET @NewRlsId = @@identity

	-- Update TD_RELEASE_PRODUCT for cloned release
	DECLARE @auditId AS INT = NULL;
    EXECUTE @auditId = Security_Auditing_Create @userName;
    IF @auditId IS NULL
       OR @auditId = 0
        BEGIN
            RAISERROR ('SP: Security_Auditing_Create has failed!', 16, 1);
            RETURN 0;
        END
	INSERT INTO TM_RELEASE_PRODUCT(RPR_RLS_ID, RPR_PRC_ID, RPR_DTG_ID, RPR_DELETE_FLAG)
	SELECT @NewRlsId, RPR_PRC_ID, @auditId, 0 FROM TM_RELEASE_PRODUCT
	WHERE RPR_PRC_ID IN (SELECT RPR_PRC_ID from TM_RELEASE_PRODUCT WHERE RPR_RLS_ID = @RlsId AND RPR_DELETE_FLAG = 0)
	AND RPR_RLS_ID = @RlsId

	RETURN @NewRlsId
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Clone].[@RlsCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Clone].[@GrpCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Clone].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Clone].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Clone].[@GrpCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Clone].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="219" />
				<Property Name="Length" Value="2764" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Create date: 27 Nov 2018&#xD;&#xA;-- Description:&#x9;Clones a release record and related tables&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_Clone @RlsCode INT&#xD;&#xA;&#x9;,@GrpCode NVARCHAR(32)&#xD;&#xA;&#x9;,@userName NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_Clone_Comment]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @RlsId INT = NULL
	DECLARE @CmmId INT = NULL
	DECLARE @errorMessage NVARCHAR(256)
	DECLARE @spName NVARCHAR(100)
	DECLARE @CmmValue NVARCHAR(1024)
	DECLARE @DtgID INT

	SET @spName = (
			SELECT OBJECT_NAME(@@PROCID)
			)

	SELECT @RlsId = RLS_ID
	FROM TD_RELEASE
	WHERE RLS_DELETE_FLAG = 0
		AND RLS_CODE = @RlsCode

	IF @RlsId IS NULL
	BEGIN
		SET @errorMessage = 'SP: ' + @spName + ' - release code not found: ' + cast(isnull(@RlsCode, '') AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				);

		RETURN - 1
	END

	SET @CmmId = (
			SELECT RLS_CMM_ID
			FROM TD_RELEASE
			WHERE RLS_ID = @RlsId
				AND RLS_DELETE_FLAG = 0
			)

	IF @CmmId IS NULL
		OR @CmmId = 0
	BEGIN
		RETURN 0
	END

	SET @CmmValue = (
			SELECT CMM_VALUE
			FROM TD_COMMENT
			WHERE CMM_ID = @CmmId
				AND CMM_DELETE_FLAG = 0
			)

	IF @CmmValue IS NULL
	BEGIN
		RETURN 0
	END

	-- Do the create Audit and get the new DtgID from the stored procedure
	EXEC @DtgID = Security_Auditing_Create @CcnUsername

	-- Check for problems with the audit stored procedure
	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		RAISERROR (
				'Error in calling Security_Auditing_Create'
				,16
				,1
				)

		RETURN 0
	END

	--Create the comment
	INSERT INTO TD_COMMENT (
		CMM_VALUE
		,CMM_DTG_ID
		,CMM_DELETE_FLAG
		)
	VALUES (
		@CmmValue
		,@DtgID
		,0
		)

	SET @CmmId = @@IDENTITY

	UPDATE TD_RELEASE
	SET RLS_CMM_ID = @CmmId
	WHERE RLS_ID = @RlsIdNew
		AND RLS_DELETE_FLAG = 0

	RETURN @CmmId
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Clone_Comment].[@RlsCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Clone_Comment].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Clone_Comment].[@RlsIdNew]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Clone_Comment].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Clone_Comment].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Clone_Comment].[@RlsIdNew]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="266" />
				<Property Name="Length" Value="1979" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 15/06/2020&#xD;&#xA;-- Description:&#x9;Clone a comment from a release defined by @RlsCode and apply it to the Release in @RlsIdNew&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_Clone_Comment @RlsCode INT&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@RlsIdNew INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_Clone_ToVersion]">
			<Property Name="BodyScript">
				<Value><![CDATA[
	DECLARE @RlsId INT = NULL
	DECLARE @errorMessage VARCHAR(256)
	DECLARE @NewRlsId INT = NULL

	SELECT @RlsId = RLS_ID
	FROM TD_RELEASE
	WHERE RLS_DELETE_FLAG = 0
		AND RLS_CODE = @RlsCode

	IF @RlsId IS NULL
	BEGIN
		SET @errorMessage = 'SP: ' + OBJECT_NAME(@@PROCID) + ' - release code not found: ' + cast(isnull(@RlsCode, '') AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				);

		RETURN - 1
	END

	DECLARE @DtgId INT = NULL

	EXEC @DtgId = Security_Auditing_Create @UserName;

	IF @DtgId IS NULL
		OR @DtgId = 0
	BEGIN
		RAISERROR (
				'SP: Security_Auditing_Create has failed!'
				,16
				,1
				)

		RETURN 0
	END

		INSERT INTO [TD_RELEASE] (
		[RLS_VERSION]
		,[RLS_REVISION]
		,[RLS_LIVE_FLAG]
		,[RLS_RESERVATION_FLAG]
		,[RLS_ARCHIVE_FLAG]
		,[RLS_ANALYTICAL_FLAG]
		,[RLS_EXPERIMENTAL_FLAG]
		,[RLS_GRP_ID]
		,[RLS_PRC_ID]
		,[RLS_DTG_ID]
		)
	SELECT @Version
		,@Revision
		,0
		,[RLS_RESERVATION_FLAG]
		,[RLS_ARCHIVE_FLAG]
		,[RLS_ANALYTICAL_FLAG]
		,[RLS_EXPERIMENTAL_FLAG]
		,[RLS_GRP_ID]
		,[RLS_PRC_ID]
		,@DtgId
	FROM [TD_RELEASE]
	WHERE RLS_ID = @RlsId
		AND RLS_DELETE_FLAG = 0

	SET @NewRlsId = @@identity

		-- Update TD_RELEASE_PRODUCT for cloned release
	DECLARE @auditId AS INT = NULL;
    EXECUTE @auditId = Security_Auditing_Create @userName;
    IF @auditId IS NULL
       OR @auditId = 0
        BEGIN
            RAISERROR ('SP: Security_Auditing_Create has failed!', 16, 1);
            RETURN 0;
        END
	INSERT INTO TM_RELEASE_PRODUCT(RPR_RLS_ID, RPR_PRC_ID, RPR_DTG_ID, RPR_DELETE_FLAG)
	SELECT @NewRlsId, RPR_PRC_ID, @auditId, 0 FROM TM_RELEASE_PRODUCT
	WHERE RPR_PRC_ID IN (SELECT RPR_PRC_ID from TM_RELEASE_PRODUCT WHERE RPR_RLS_ID = @RlsId AND RPR_DELETE_FLAG = 0)
	AND RPR_RLS_ID = @RlsId

	RETURN @NewRlsId

RETURN 0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Clone_ToVersion].[@RlsCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Clone_ToVersion].[@UserName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Clone_ToVersion].[@Version]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Clone_ToVersion].[@Revision]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Clone_ToVersion].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Clone_ToVersion].[@Version]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Clone_ToVersion].[@Revision]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Clone_ToVersion].[@UserName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="213" />
				<Property Name="Length" Value="2205" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 04/10/2024&#xD;&#xA;-- Description:&#x9;Clones a release to a specific version&#xD;&#xA;-- =============================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [dbo].[Data_Release_Clone_ToVersion] @RlsCode INT&#xD;&#xA;&#x9;,@Version INT&#xD;&#xA;&#x9;,@Revision INT&#xD;&#xA;&#x9;,@UserName NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_Comment_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT = NULL
	DECLARE @CmmID INT = NULL
	DECLARE @CmmCount INT
	DECLARE @RlsCount INT
	DECLARE @eMessage VARCHAR(256)

	--Check if the RlsCode exists
	SET @RlsCount = (
			SELECT count(*)
			FROM TD_RELEASE
			WHERE RLS_CODE = @RlsCode
				AND RLS_DELETE_FLAG = 0
			)

	IF @RlsCount = 0
	BEGIN
		SET @eMessage = 'SP: ' + OBJECT_NAME(@@PROCID) + ' - No Release found for Release Code: ' + cast(isnull(@RlsCode, '') AS VARCHAR)

		RAISERROR (
				@eMessage
				,16
				,1
				)

		RETURN 0
	END

	--Check if a comment already exists for this Release Code
	SET @CmmCount = (
			SELECT count(*)
			FROM TD_RELEASE
			WHERE RLS_CODE = @RlsCode
				AND RLS_CMM_ID IS NOT NULL
			)

	IF @CmmCount > 0
	BEGIN
		SET @eMessage = 'SP: ' + OBJECT_NAME(@@PROCID) + ' - A comment already exists for Release Code: ' + cast(isnull(@RlsCode, '') AS VARCHAR)

		RAISERROR (
				@eMessage
				,16
				,1
				)

		RETURN 0
	END

	-- Do the create Audit and get the new DtgID from the stored procedure
	EXEC @DtgID = Security_Auditing_Create @CcnUsername

	-- Check for problems with the audit stored procedure
	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		RAISERROR (
				'Error in calling Security_Auditing_Create'
				,16
				,1
				)

		RETURN 0
	END

	--Create the comment
	INSERT INTO TD_COMMENT (
		CMM_VALUE
		,CMM_DTG_ID
		,CMM_DELETE_FLAG
		)
	VALUES (
		@CmmValue
		,@DtgID
		,0
		)

	SET @CmmID = @@IDENTITY

	DECLARE @AuditUpdateCount INT

	EXEC @AuditUpdateCount = Security_Auditing_Update @DtgID
		,@CcnUsername

	-- check the previous stored procedure for error
	IF @AuditUpdateCount = 0
	BEGIN
		SET @eMessage = 'Error creating entry in TD_AUDITING for Release Comment Update:' + cast(isnull(@RlsCode, 0) AS VARCHAR)

		RAISERROR (
				@eMessage
				,16
				,1
				)

		RETURN
	END

	--Update the Release with the newly created comment
	UPDATE TD_RELEASE
	SET RLS_CMM_ID = @CmmID
	WHERE RLS_CODE = @RlsCode
		AND RLS_DELETE_FLAG = 0

	IF @@ROWCOUNT > 0
	BEGIN
		RETURN @CmmID
	END
	ELSE
	BEGIN
		RETURN 0
	END
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Comment_Create].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CMM_ID]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Comment_Create].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Comment_Create].[@CmmValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Update]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Comment_Create].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Comment_Create].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Comment_Create].[@CmmValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="306" />
				<Property Name="Length" Value="2594" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 14/01/2019&#xD;&#xA;-- Description:&#x9;Create a new comment for a Release Code&#xD;&#xA;-- exec Data_Stat_Release_Comment_Create 'OKeeffeNe',85,'This is a comment for RlsCode 85'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_Comment_Create @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@RlsCode INT&#xD;&#xA;&#x9;,@CmmValue NVARCHAR(1024)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_Comment_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgCommentID INT = NULL
	DECLARE @DtgReleaseID INT = NULL
	DECLARE @CmmID INT = NULL
	DECLARE @eMessage VARCHAR(256)
	DECLARE @DeleteCount INT

	SELECT @CmmID = RLS_CMM_ID
		,@DtgReleaseID = RLS_DTG_ID
	FROM TD_RELEASE
	WHERE RLS_CODE = @RlsCode
		AND RLS_DELETE_FLAG = 0

	IF @CmmID = 0
		OR @CmmID IS NULL
	BEGIN
		SET @eMessage = 'SP: ' + OBJECT_NAME(@@PROCID) + ' - No comment exists for Release Code: ' + cast(isnull(@RlsCode, '') AS VARCHAR)

		RAISERROR (
				@eMessage
				,16
				,1
				)

		RETURN 0
	END

	SELECT @DtgCommentID = CMM_DTG_ID
	FROM TD_COMMENT
	WHERE CMM_ID = @CmmID
		AND CMM_DELETE_FLAG = 0

	DECLARE @AuditUpdateCount INT

	EXEC @AuditUpdateCount = Security_Auditing_Delete @DtgCommentID
		,@CcnUsername

	-- check the previous stored procedure for error
	IF @AuditUpdateCount = 0
	BEGIN
		SET @eMessage = 'Error creating entry in TD_AUDITING for Release Comment Delete:' + cast(isnull(@RlsCode, 0) AS VARCHAR)

		RAISERROR (
				@eMessage
				,16
				,1
				)

		RETURN
	END

	UPDATE TD_COMMENT
	SET CMM_DELETE_FLAG = 1
	WHERE CMM_ID = @CmmID

	SET @DeleteCount = @@rowcount

	EXEC @AuditUpdateCount = Security_Auditing_Update @DtgReleaseID
		,@CcnUsername

	-- check the previous stored procedure for error
	IF @AuditUpdateCount = 0
	BEGIN
		SET @eMessage = 'Error creating entry in TD_AUDITING for Release Update while deleting its comment:' + cast(isnull(@RlsCode, 0) AS VARCHAR)

		RAISERROR (
				@eMessage
				,16
				,1
				)

		RETURN
	END

	UPDATE TD_RELEASE
	SET RLS_CMM_ID = NULL
	WHERE RLS_CODE = @RlsCode
		AND RLS_DELETE_FLAG = 0

	RETURN @DeleteCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Comment_Delete].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Delete]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Comment_Delete].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Update]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Comment_Delete].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Comment_Delete].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="264" />
				<Property Name="Length" Value="2077" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 14/01/2018&#xD;&#xA;-- Description:&#x9;Deletes a comment from a release&#xD;&#xA;-- exec Data_Stat_Release_Comment_Delete 'OKeeffeNe',85&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_Comment_Delete @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@RlsCode INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_Comment_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT = NULL
	DECLARE @CmmID INT = NULL
	DECLARE @eMessage VARCHAR(256)

	SELECT @CmmID = RLS_CMM_ID
	FROM TD_RELEASE
	WHERE RLS_CODE = @RlsCode
		AND RLS_DELETE_FLAG = 0

	IF @CmmID = 0
		OR @CmmID IS NULL
	BEGIN
		SET @eMessage = 'SP: ' + OBJECT_NAME(@@PROCID) + ' - No comment exists for Release Code: ' + cast(isnull(@RlsCode, '') AS VARCHAR)

		RAISERROR (
				@eMessage
				,16
				,1
				)

		RETURN 0
	END

	SELECT @DtgID = CMM_DTG_ID
	FROM TD_COMMENT
	WHERE CMM_ID = @CmmID
		AND CMM_DELETE_FLAG = 0

	DECLARE @AuditUpdateCount INT

	EXEC @AuditUpdateCount = Security_Auditing_Update @DtgID
		,@CcnUsername

	-- check the previous stored procedure for error
	IF @AuditUpdateCount = 0
	BEGIN
		SET @eMessage = 'Error creating entry in TD_AUDITING for Release Comment Update:' + cast(isnull(@RlsCode, 0) AS VARCHAR)

		RAISERROR (
				@eMessage
				,16
				,1
				)

		RETURN
	END

	UPDATE TD_COMMENT
	SET CMM_VALUE = @CmmValue
	WHERE CMM_ID = @CmmID
		AND CMM_DELETE_FLAG = 0

	RETURN @@rowcount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Comment_Update].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Comment_Update].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Comment_Update].[@CmmValue]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Comment_Update].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Comment_Update].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Comment_Update].[@CmmValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="295" />
				<Property Name="Length" Value="1524" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 14/01/2019&#xD;&#xA;-- Description:&#x9;Updates a comment for a release&#xD;&#xA;-- exec Data_Stat_Release_Comment_Update 'OKeeffeNe',85,'An amended comment for Rls 85'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_Comment_Update @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@RlsCode INT&#xD;&#xA;&#x9;,@CmmValue NVARCHAR(1024)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	-- Error Message
	DECLARE @errorMessage VARCHAR(256)
	DECLARE @RlsCmmID INT

	SET @RlsCmmID = (
			SELECT CMM_ID
			FROM TD_COMMENT
			WHERE CMM_CODE = @CmmCode
				AND CMM_DELETE_FLAG = 0
			)

	-- Group lookup fk
	DECLARE @RlsGrpId INT = NULL

	SELECT @RlsGrpId = [GRP_ID]
	FROM [TD_GROUP]
	WHERE GRP_DELETE_FLAG = 0
		AND [GRP_CODE] = @GrpCode

	IF @RlsGrpId IS NULL
	BEGIN
		SET @errorMessage = 'SP: ' + OBJECT_NAME(@@PROCID) + ' - group not found: ' + cast(isnull(@GrpCode, '') AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				);

		RETURN 0
	END

	-- Product lookup fk
	DECLARE @RlsPrcId INT = NULL

	IF @PrcCode IS NOT NULL
	BEGIN
		SELECT @RlsPrcId = [PRC_ID]
		FROM [TD_PRODUCT]
		WHERE [PRC_DELETE_FLAG] = 0
			AND [PRC_CODE] = @PrcCode

		IF @RlsPrcId IS NULL
		BEGIN
			SET @errorMessage = 'SP: ' + OBJECT_NAME(@@PROCID) + ' - Product not found: ' + cast(isnull(@PrcCode, 0) AS VARCHAR)

			RAISERROR (
					@errorMessage
					,16
					,1
					);

			RETURN 0
		END
	END

	DECLARE @DtgId INT = NULL

	EXEC @DtgId = Security_Auditing_Create @userName;

	IF @DtgId IS NULL
		OR @DtgId = 0
	BEGIN
		RAISERROR (
				'SP: Security_Auditing_Create has failed!'
				,16
				,1
				)

		RETURN 0
	END

	INSERT INTO [TD_RELEASE] (
		[RLS_CODE]
		,[RLS_VERSION]
		,[RLS_REVISION]
		,[RLS_LIVE_FLAG]
		,[RLS_LIVE_DATETIME_FROM]
		,[RLS_LIVE_DATETIME_TO]
		,[RLS_EXCEPTIONAL_FLAG]
		,[RLS_RESERVATION_FLAG]
		,[RLS_ARCHIVE_FLAG]
		,[RLS_ANALYTICAL_FLAG]
		,[RLS_EXPERIMENTAL_FLAG]
		,[RLS_GRP_ID]
		,[RLS_PRC_ID]
		,[RLS_CMM_ID]
		,[RLS_DTG_ID]
		,[RLS_DELETE_FLAG]
		)
	VALUES (
		DEFAULT
		,@RlsVersion
		,@RlsRevision
		,@RlsLiveFlag
		,@RlsLiveDateTimeFrom
		,@RlsLiveDateTimeTo
		,@RlsExceptionalFlag
		,@RlsReservationFlag
		,@RlsArchiveFlag
		,@RlsAnalyticalFlag
		,@RlsExperimentalFlag 
		,@RlsGrpId
		,@RlsPrcId
		,@RlsCmmId
		,@DtgId
		,0
		)

	RETURN @@identity
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Create].[@CmmCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Create].[@GrpCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Create].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Create].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Create].[@RlsVersion]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Create].[@RlsRevision]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Create].[@RlsLiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Create].[@RlsLiveDateTimeFrom]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Create].[@RlsLiveDateTimeTo]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Create].[@RlsExceptionalFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Create].[@RlsReservationFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Create].[@RlsArchiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Create].[@RlsAnalyticalFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Create].[@RlsExperimentalFlag]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Create].[@RlsVersion]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Create].[@RlsRevision]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Create].[@RlsLiveFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Create].[@RlsLiveDateTimeFrom]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Create].[@RlsLiveDateTimeTo]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Create].[@RlsExceptionalFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Create].[@RlsReservationFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Create].[@RlsArchiveFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Create].[@RlsAnalyticalFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Create].[@RlsExperimentalFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Create].[@GrpCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Create].[@PrcCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Create].[@CmmCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Create].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="223" />
				<Property Name="Length" Value="2697" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Create date: 24 Oct 2018&#xD;&#xA;-- Description:&#x9;Inserts a new record into the TD_RELEASE table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_Create @RlsVersion INT&#xD;&#xA;&#x9;,@RlsRevision INT&#xD;&#xA;&#x9;,@RlsLiveFlag BIT = 0&#xD;&#xA;&#x9;,@RlsLiveDateTimeFrom DATETIME = NULL&#xD;&#xA;&#x9;,@RlsLiveDateTimeTo DATETIME = NULL&#xD;&#xA;&#x9;,@RlsExceptionalFlag BIT = 0&#xD;&#xA;&#x9;,@RlsReservationFlag BIT = 0&#xD;&#xA;&#x9;,@RlsArchiveFlag BIT = 0&#xD;&#xA;&#x9;,@RlsAnalyticalFlag BIT = 0&#xD;&#xA;&#x9;,@RlsExperimentalFlag BIT = 0&#xD;&#xA;&#x9;,@GrpCode NVARCHAR(32)&#xD;&#xA;&#x9;,@PrcCode NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@CmmCode INT = NULL&#xD;&#xA;&#x9;,@userName NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT = NULL
	DECLARE @eMessage VARCHAR(256)
	DECLARE @updateCount INT

	--some pre-auditing work first:
	SET @DtgID = (
			SELECT rls.RLS_DTG_ID
			FROM TD_RELEASE rls
			WHERE rls.RLS_CODE = @RlsCode
				AND rls.RLS_DELETE_FLAG = 0
			)

	IF @DtgID IS NULL
		OR @DtgID = 0
	BEGIN
		--This record doesn't exist
		RETURN 0
	END

	UPDATE TD_RELEASE
	SET RLS_DELETE_FLAG = 1
	WHERE RLS_CODE = @RlsCode
		AND RLS_DELETE_FLAG = 0

	SET @updateCount = @@ROWCOUNT

	IF @updateCount > 0
	BEGIN
		-- do the auditing 
		-- Create the entry in the TD_AUDITING table
		DECLARE @AuditUpdateCount INT

		EXEC @AuditUpdateCount = Security_Auditing_Delete @DtgID
			,@CcnUsername

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error creating entry in TD_AUDITING for Release delete - Release Code: ' + cast(isnull(@RlsCode, 0) AS VARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN 0
		END
	END
	
	-- Remove all entries in the TM_RELEASE_PRODUCT table that contain a reference to the release code
    DECLARE @auditId AS INT = NULL; 
    EXECUTE @auditId = Security_Auditing_Delete @DtgId, @CcnUsername;
    IF @auditId IS NULL
       OR @auditId = 0
        BEGIN
            RAISERROR ('SP: Security_Auditing_Delete has failed!', 16, 1);
            RETURN 0;
        END

	UPDATE TM_RELEASE_PRODUCT
    SET    RPR_DELETE_FLAG = 1,
           RPR_DTG_ID      = @auditId
           WHERE RPR_RLS_ID = (SELECT RLS_ID
                             FROM   TD_RELEASE
                             WHERE  RLS_CODE = @RlsCode
                                    AND RLS_DELETE_FLAG = 0)
           AND RPR_DELETE_FLAG = 0;
	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Delete].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Delete]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Delete].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Delete].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Delete].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="218" />
				<Property Name="Length" Value="2129" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 15/11/2018&#xD;&#xA;-- Description:&#x9;Soft Delete a Release based on Release Code&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_Delete @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@RlsCode INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_DeleteKeywords]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	-- Error Message
	DECLARE @errorMessage VARCHAR(256)
	DECLARE @spName VARCHAR(100)

	SET @spName = 'Data_Stat_Release_DeleteKeywords'

	-- Release lookup
	DECLARE @RlsId INT = NULL

	SELECT @RlsId = [RLS_ID]
	FROM [TD_RELEASE]
	WHERE [RLS_DELETE_FLAG] = 0
		AND [RLS_CODE] = @RlsCode

	IF @RlsId IS NULL
	BEGIN
		SET @errorMessage = 'SP: ' + @spName + ' - Release not found: ' + cast(isnull(@RlsCode, 0) AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				);

		RETURN 0
	END

	DELETE TD_KEYWORD_RELEASE
	WHERE KRL_RLS_ID = @RlsId
		AND KRL_MANDATORY_FLAG = 1

	RETURN 0
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_DeleteKeywords].[@RlsCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_MANDATORY_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_DeleteKeywords].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_DeleteKeywords].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="281" />
				<Property Name="Length" Value="1024" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Create date: 24 Oct 2018&#xD;&#xA;-- Description:&#x9;Inserts a new record into the TD_RELEASE table&#xD;&#xA;-- exec Data_Stat_Release_DeleteKeywords 118,'okeeffene'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_DeleteKeywords @RlsCode INT&#xD;&#xA;&#x9;,@userName NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_IncrementRevision]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	-- Error Message
	DECLARE @errorMessage VARCHAR(256)
	DECLARE @spName VARCHAR(100) 
	set @spName = 'Data_Stat_Release_IncrementRevision'
	DECLARE @DtgId INT = NULL
	-- Release lookup
	DECLARE @RlsId INT = NULL
	DECLARE @updateCount INT 
	set @updateCount = 0
	DECLARE @eMessage VARCHAR(256)

	SELECT @RlsId = [RLS_ID]
		,@DtgId = RLS_DTG_ID
	FROM [TD_RELEASE]
	WHERE [RLS_DELETE_FLAG] = 0
		AND [RLS_CODE] = @RlsCode

	IF @RlsId IS NULL
	BEGIN
		SET @errorMessage = 'SP: ' + @spName + ' - Release not found: ' + cast(isnull(@RlsCode, 0) AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				);

		RETURN 0
	END

	UPDATE TD_RELEASE
	SET RLS_REVISION = RLS_REVISION + 1
	WHERE RLS_ID = @RlsId
		AND RLS_DELETE_FLAG = 0

	SET @updateCount = @@ROWCOUNT

	--Update the Group ID of the release if necessary
	IF @GrpCode IS NOT NULL
	BEGIN
		DECLARE @GrpId INT

		SET @GrpId = (
				SELECT GRP_ID
				FROM TD_GROUP
				WHERE GRP_CODE = @GrpCode
					AND GRP_DELETE_FLAG = 0
				)

		IF @GrpId IS NULL
			OR @GrpId = 0
		BEGIN
			SET @errorMessage = 'SP: ' + @spName + ' - Group Not Found: ' + cast(isnull(@GrpCode, 0) AS VARCHAR)

			RAISERROR (
					@errorMessage
					,16
					,1
					);

			RETURN 0
		END

		UPDATE TD_RELEASE
		SET RLS_GRP_ID = @GrpId
		WHERE RLS_ID = @RlsId
			AND RLS_DELETE_FLAG = 0
	END

	IF @updateCount > 0
	BEGIN
		-- Auditing:
		-- update record on auditing table
		DECLARE @AuditUpdateCount INT

		EXEC @AuditUpdateCount = Security_Auditing_Update @DtgID
			,@userName

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error creating entry in TD_AUDITING for Release update:' + cast(isnull(@RlsCode, 0) AS VARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN
		END
	END

	--Return the number of rows updated
	RETURN @RlsId
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_IncrementRevision].[@RlsCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_IncrementRevision].[@GrpCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_IncrementRevision].[@userName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_IncrementRevision].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_IncrementRevision].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_IncrementRevision].[@GrpCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="223" />
				<Property Name="Length" Value="2316" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Create date: 24 Oct 2018&#xD;&#xA;-- Description:&#x9;Inserts a new record into the TD_RELEASE table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_IncrementRevision @RlsCode INT&#xD;&#xA;&#x9;,@userName NVARCHAR(256)&#xD;&#xA;&#x9;,@GrpCode NVARCHAR(32) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_IsHistorical]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	IF EXISTS (
			SELECT TOP 1 VRW_RLS_ID
			FROM VW_RELEASE_HISTORICAL
			INNER JOIN TD_RELEASE
				ON VRW_RLS_ID = RLS_ID
					AND RLS_CODE = @RlsCode
			)
	BEGIN
		RETURN CAST('TRUE' AS BIT)
	END
	ELSE
	BEGIN
		RETURN CAST('FALSE' AS BIT)
	END
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[VW_RELEASE_HISTORICAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_HISTORICAL].[VRW_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_IsHistorical].[@RlsCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_IsHistorical].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="244" />
				<Property Name="Length" Value="601" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 06/10/2020&#xD;&#xA;-- Description:&#x9;Tests if a Release is Historical&#xD;&#xA;-- exec Data_Release_IsHistorical 2&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_IsHistorical @RlsCode INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_IsLiveNext]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	IF EXISTS (
			SELECT TOP 1 VRX_RLS_ID
			FROM VW_RELEASE_LIVE_NEXT
			INNER JOIN TD_RELEASE
				ON VRX_RLS_ID = RLS_ID
					AND RLS_CODE = @RlsCode
			)
	BEGIN
		RETURN CAST('TRUE' AS BIT)
	END
	ELSE
	BEGIN
		RETURN CAST('FALSE' AS BIT)
	END
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NEXT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NEXT].[VRX_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_IsLiveNext].[@RlsCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_IsLiveNext].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="240" />
				<Property Name="Length" Value="594" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 01/08/2019&#xD;&#xA;-- Description:&#x9;Tests if a Release is LiveNext&#xD;&#xA;-- exec Data_Release_IsLiveNext 2&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_IsLiveNext @RlsCode INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_IsLiveNow]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	IF EXISTS (
			SELECT TOP 1 VRN_RLS_ID
			FROM VW_RELEASE_LIVE_NOW
			INNER JOIN TD_RELEASE
				ON VRN_RLS_ID = RLS_ID
					AND RLS_CODE = @RlsCode
			)
	BEGIN
		RETURN CAST('TRUE' AS BIT)
	END
	ELSE
	BEGIN
		RETURN CAST('FALSE' AS BIT)
	END
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_IsLiveNow].[@RlsCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_IsLiveNow].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="238" />
				<Property Name="Length" Value="590" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 01/08/2019&#xD;&#xA;-- Description:&#x9;Tests if a Release is LiveNow&#xD;&#xA;-- exec Data_Release_IsLiveNow 2&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_IsLiveNow @RlsCode INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_IsWIP]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	IF EXISTS (
			SELECT TOP 1 VRW_RLS_ID
			FROM VW_RELEASE_WIP
			INNER JOIN TD_RELEASE
				ON VRW_RLS_ID = RLS_ID
					AND RLS_CODE = @RlsCode
			)
	BEGIN
		RETURN CAST('TRUE' AS BIT)
	END
	ELSE
	BEGIN
		RETURN CAST('FALSE' AS BIT)
	END
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[VW_RELEASE_WIP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_WIP].[VRW_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_IsWIP].[@RlsCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_IsWIP].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="249" />
				<Property Name="Length" Value="592" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 01/08/2019&#xD;&#xA;-- Description:&#x9;Tests if a Release is WIP (Work In Progress)&#xD;&#xA;-- exec Data_Release_IsWIP 2&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_IsWIP @RlsCode INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_LanguagesForRelease]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	SELECT LNG_ISO_CODE as LngIsoCode
	FROM TD_RELEASE
	INNER JOIN TD_MATRIX ON RLS_ID = MTR_RLS_ID
		AND MTR_DELETE_FLAG = 0
		AND RLS_DELETE_FLAG = 0
		AND RLS_CODE = @RlsCode
	INNER JOIN TS_LANGUAGE ON MTR_LNG_ID = LNG_ID
		AND LNG_DELETE_FLAG = 0
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_LanguagesForRelease].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_LanguagesForRelease].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="258" />
				<Property Name="Length" Value="720" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 09/01/2023&#xD;&#xA;-- Description:&#x9;Get all language codes for a release&#xD;&#xA;-- EXEC Data_Release_LanguagesForRelease 1362&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_LanguagesForRelease @RlsCode INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_Live_Now]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT rls.RLS_CODE AS RlsCode
		,rls.RLS_VERSION AS RlsVersion
		,rls.RLS_REVISION AS RlsRevision
		,rls.RLS_LIVE_FLAG AS RlsLiveFlag
		,rls.RLS_LIVE_DATETIME_FROM AS RlsLiveDatetimeFrom
		,rls.RLS_LIVE_DATETIME_TO AS RlsLiveDatetimeTo
		,rls.RLS_EXCEPTIONAL_FLAG AS RlsExceptionalFlag
		,rls.RLS_RESERVATION_FLAG AS RlsReservationFlag
		,rls.RLS_ARCHIVE_FLAG AS RlsArchiveFlag
		,rls.RLS_ANALYTICAL_FLAG AS RlsAnalyticalFlag
		,rls.RLS_EXPERIMENTAL_FLAG AS RlsExperimentalFlag
		,mtr.MTR_CODE AS MtrCode
		,GRP_CODE GrpCode
		,GRP_NAME GrpName
		,GRP_CONTACT_NAME GrpContactName
		,GRP_CONTACT_PHONE GrpContactPhone
		,GRP_CONTACT_EMAIL GrpContactEmail
		,CMM_CODE CmmCode
		,CMM_VALUE CmmValue
		,SBJ_CODE SbjCode
		,SBJ_VALUE SbjValue
		,PRC_CODE PrcCode
		,PRC_VALUE PrcValue
		,LNG_ISO_CODE  LngIsoCode
	FROM TD_RELEASE rls
	INNER JOIN VW_RELEASE_LIVE_NOW
		ON VRN_RLS_ID = rls.RLS_ID
	INNER JOIN TD_MATRIX mtr
		ON rls.RLS_ID = mtr.MTR_RLS_ID
			AND mtr.MTR_DELETE_FLAG = 0
			AND rls.RLS_DELETE_FLAG = 0
			AND VRN_MTR_ID = mtr.MTR_ID
	INNER JOIN TD_GROUP
		ON RLS_GRP_ID = GRP_ID
			AND GRP_DELETE_FLAG = 0
	INNER JOIN TS_LANGUAGE 
		on MTR_LNG_ID=LNG_ID
		and LNG_DELETE_FLAG=0 
	LEFT JOIN TD_COMMENT
		ON CMM_ID = RLS_CMM_ID
			AND CMM_DELETE_FLAG = 0
	LEFT JOIN TD_PRODUCT
		ON RLS_PRC_ID = PRC_ID
			AND PRC_DELETE_FLAG = 0
	LEFT JOIN TD_SUBJECT
		ON SBJ_ID = PRC_SBJ_ID
			AND SBJ_DELETE_FLAG = 0

	WHERE mtr.MTR_CODE = (
			SELECT DISTINCT MTR_CODE
			FROM TD_MATRIX mtr2
			INNER JOIN TD_RELEASE rls2
				ON rls2.RLS_ID = mtr2.MTR_RLS_ID
					AND rls2.RLS_DELETE_FLAG = 0
					AND mtr2.MTR_DELETE_FLAG = 0
			INNER JOIN TS_LANGUAGE
				ON mtr2.MTR_LNG_ID = LNG_ID
					AND LNG_DELETE_FLAG = 0
			WHERE (
					(
						@MtrCode IS NULL
						AND @RlsCode IS NOT NULL
						AND rls2.RLS_CODE = @RlsCode
						)
					OR (
						@RlsCode IS NULL
						AND @MtrCode IS NOT NULL
						AND mtr2.MTR_CODE = @MtrCode
						)
					)
				
			)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CONTACT_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CONTACT_PHONE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CONTACT_EMAIL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Live_Now].[@MtrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Live_Now].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Live_Now].[@RlsCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Live_Now].[@MtrCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Live_Now].[@LngIsoCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="472" />
				<Property Name="Length" Value="2657" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 20/11/2018&#xD;&#xA;-- Description:&#x9;Gets the Live Current Release for a Release Code. &#xD;&#xA;-- This is where the current data is after the start date and (before the end date or the end date is null)&#xD;&#xA;-- The returned release entry must have the same Matrix Code as that of the input RlsCode&#xD;&#xA;-- exec Data_Release_Live_Now null,'HH1','pl'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_Live_Now @RlsCode INT = NULL&#xD;&#xA;&#x9;,@MtrCode NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_Live_Previous]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @MtrCode NVARCHAR(20)

	SET @MtrCode = (
			SELECT DISTINCT MTR_CODE
			FROM TD_MATRIX
			INNER JOIN TD_RELEASE
				ON RLS_ID = MTR_RLS_ID
					AND MTR_DELETE_FLAG = 0
					AND RLS_DELETE_FLAG = 0
			WHERE RLS_CODE = @RlsCode
			)

	IF @MtrCode IS NULL
	BEGIN
		RETURN
	END

	SELECT rlsPrevious.RLS_CODE AS RlsCode
		,rlsPrevious.RLS_VERSION AS RlsVersion
		,rlsPrevious.RLS_REVISION AS RlsRevision
		,rlsPrevious.RLS_LIVE_FLAG AS RlsLiveFlag
		,rlsPrevious.RLS_LIVE_DATETIME_FROM AS RlsLiveDatetimeFrom
		,rlsPrevious.RLS_LIVE_DATETIME_TO AS RlsLiveDatetimeTo
		,rlsPrevious.RLS_EXCEPTIONAL_FLAG AS RlsExceptionalFlag
		,rlsPrevious.RLS_RESERVATION_FLAG AS RlsReservationFlag
		,rlsPrevious.RLS_ARCHIVE_FLAG AS RlsArchiveFlag
		,rlsPrevious.RLS_ANALYTICAL_FLAG AS RlsAnalyticalFlag
		,rlsPrevious.RLS_EXPERIMENTAL_FLAG AS RlsExperimentalFlag
		,@MtrCode AS MtrCode
		,GRP_CODE GrpCode
		,GRP_NAME GrpName
		,CMM_CODE CmmCode
		,CMM_VALUE CmmValue
		,SBJ_CODE SbjCode
		,SBJ_VALUE SbjValue
		,PRC_CODE PrcCode
		,PRC_VALUE PrcValue
	FROM VW_RELEASE_LIVE_NOW vrn
	INNER JOIN TD_RELEASE rlsNow
		ON vrn.VRN_RLS_ID = rlsNow.RLS_ID
	INNER JOIN TD_MATRIX mtrNow
		ON rlsNow.RLS_ID = mtrNow.MTR_RLS_ID
	INNER JOIN TD_MATRIX mtrPrevious
		ON mtrPrevious.MTR_CODE = mtrNow.MTR_CODE
	INNER JOIN TD_RELEASE rlsPrevious
		ON mtrPrevious.MTR_RLS_ID = rlsPrevious.RLS_ID
	INNER JOIN VW_RELEASE_LIVE_PREVIOUS vrp
		ON mtrPrevious.MTR_RLS_ID = vrp.VRP_RLS_ID
			AND mtrPrevious.MTR_ID = vrp.VRP_MTR_ID
	INNER JOIN TD_GROUP
		ON rlsPrevious.RLS_GRP_ID = GRP_ID
			AND GRP_DELETE_FLAG = 0
	LEFT JOIN TD_COMMENT
		ON CMM_ID = rlsPrevious.RLS_CMM_ID
			AND CMM_DELETE_FLAG = 0
	LEFT JOIN TD_PRODUCT
		ON rlsPrevious.RLS_PRC_ID = PRC_ID
			AND PRC_DELETE_FLAG = 0
	LEFT JOIN TD_SUBJECT
		ON SBJ_ID = PRC_SBJ_ID
			AND SBJ_DELETE_FLAG = 0
	where mtrPrevious.MTR_CODE=@MtrCode 
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Live_Previous].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_PREVIOUS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_PREVIOUS].[VRP_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_PREVIOUS].[VRP_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Live_Previous].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="365" />
				<Property Name="Length" Value="2391" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 14/11/2018&#xD;&#xA;-- Description:&#x9;Read the previous live release based on the current RlsCode&#xD;&#xA;-- The returned release entry must have the same Ma trix Code as that of the input RlsCode&#xD;&#xA;-- exec Data_Release_Live_Previous 70&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_Live_Previous @RlsCode INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_Pending_Live]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT rls.RLS_CODE AS RlsCode
		,rls.RLS_VERSION AS RlsVersion
		,rls.RLS_REVISION AS RlsRevision
		,rls.RLS_LIVE_FLAG AS RlsLiveFlag
		,rls.RLS_LIVE_DATETIME_FROM AS RlsLiveDatetimeFrom
		,rls.RLS_LIVE_DATETIME_TO AS RlsLiveDatetimeTo
		,rls.RLS_EXCEPTIONAL_FLAG AS RlsExceptionalFlag
		,rls.RLS_RESERVATION_FLAG AS RlsReservationFlag
		,rls.RLS_ARCHIVE_FLAG AS RlsArchiveFlag
		,rls.RLS_ANALYTICAL_FLAG AS RlsAnalyticalFlag
		,rls.RLS_EXPERIMENTAL_FLAG AS RlsExperimentalFlag
		,mtr.MTR_CODE AS MtrCode
		,GRP_CODE GrpCode
		,GRP_NAME GrpName
		,GRP_CONTACT_NAME GrpContactName
		,GRP_CONTACT_PHONE GrpContactPhone
		,GRP_CONTACT_EMAIL GrpContactEmail
		,CMM_CODE CmmCode
		,CMM_VALUE CmmValue
		,SBJ_CODE SbjCode
		,SBJ_VALUE SbjValue
		,PRC_CODE PrcCode
		,PRC_VALUE PrcValue
		,LNG_ISO_CODE LngIsoCode
	FROM TD_RELEASE rls
	INNER JOIN VW_RELEASE_LIVE_NEXT ON VRX_RLS_ID = rls.RLS_ID
	INNER JOIN TD_MATRIX mtr ON rls.RLS_ID = mtr.MTR_RLS_ID
		AND mtr.MTR_DELETE_FLAG = 0
		AND rls.RLS_DELETE_FLAG = 0
		AND VRX_MTR_ID = mtr.MTR_ID
	INNER JOIN TD_GROUP ON RLS_GRP_ID = GRP_ID
		AND GRP_DELETE_FLAG = 0
	INNER JOIN TS_LANGUAGE ON MTR_LNG_ID = LNG_ID
		AND LNG_DELETE_FLAG = 0
	LEFT JOIN TD_COMMENT ON CMM_ID = RLS_CMM_ID
		AND CMM_DELETE_FLAG = 0
	LEFT JOIN TD_PRODUCT ON RLS_PRC_ID = PRC_ID
		AND PRC_DELETE_FLAG = 0
	LEFT JOIN TD_SUBJECT ON SBJ_ID = PRC_SBJ_ID
		AND SBJ_DELETE_FLAG = 0
	WHERE mtr.MTR_CODE = (
			SELECT DISTINCT MTR_CODE
			FROM TD_MATRIX mtr2
			INNER JOIN TD_RELEASE rls2 ON rls2.RLS_ID = mtr2.MTR_RLS_ID
				AND rls2.RLS_DELETE_FLAG = 0
				AND mtr2.MTR_DELETE_FLAG = 0
			INNER JOIN TS_LANGUAGE ON mtr2.MTR_LNG_ID = LNG_ID
				AND LNG_DELETE_FLAG = 0
			WHERE (
					(
						@MtrCode IS NULL
						AND @RlsCode IS NOT NULL
						AND rls2.RLS_CODE = @RlsCode
						)
					OR (
						@RlsCode IS NULL
						AND @MtrCode IS NOT NULL
						AND mtr2.MTR_CODE = @MtrCode
						)
					)
			)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NEXT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NEXT].[VRX_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NEXT].[VRX_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CONTACT_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CONTACT_PHONE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CONTACT_EMAIL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Pending_Live].[@MtrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Pending_Live].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Pending_Live].[@RlsCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Pending_Live].[@MtrCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Pending_Live].[@LngIsoCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="474" />
				<Property Name="Length" Value="2616" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 20/11/2018&#xD;&#xA;-- Description:&#x9;Gets the Live Current Release for a Release Code. &#xD;&#xA;-- This is where the current data is after the start date and (before the end date or the end date is null)&#xD;&#xA;-- The returned release entry must have the same Matrix Code as that of the input RlsCode&#xD;&#xA;-- exec Data_Release_Pending_Live 168,null,'en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_Pending_Live @RlsCode INT = NULL&#xD;&#xA;&#x9;,@MtrCode NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	IF @RlsCode IS NULL
		AND @RlsID IS NULL
	BEGIN
		RETURN
	END

	DECLARE @GroupUserHasAccess TABLE (GRP_ID INT NOT NULL);

	INSERT INTO @GroupUserHasAccess
	EXEC Security_Group_AccessList @CcnUsername

	--Test if data exists for our preferred language
	DECLARE @TestLngIsoCode CHAR(2)

	SET @TestLngIsoCode =
	(SELECT LNG_ISO_CODE 
	FROM TS_LANGUAGE 
	INNER JOIN TD_MATRIX
	ON MTR_LNG_ID=LNG_ID 
	AND LNG_DELETE_FLAG=0
	AND MTR_DELETE_FLAG=0
	INNER JOIN TD_RELEASE 
	ON RLS_DELETE_FLAG=0
	AND MTR_RLS_ID=RLS_ID
	WHERE MTR_DELETE_FLAG = 0
		AND (
			@RlsCode IS NULL
			OR @RlsCode = RLS_CODE
			)
		AND (
			@RlsID IS NULL
			OR @RlsID = RLS_ID
			)
		AND (LNG_ISO_CODE=@LngIsoCode 
		)
		)

	IF @TestLngIsoCode IS NOT NULL
	BEGIN
		SET @LngIsoCode=@TestLngIsoCode
	END
	ELSE
	BEGIN
		SET @LngIsoCode=@LngIsoCodeDefault 
	END
	


	SELECT MTR_CODE MtrCode
		,RLS_CODE RlsCode
		,RLS_VERSION RlsVersion
		,RLS_REVISION RlsRevision
		,RLS_LIVE_FLAG RlsLiveFlag
		,RLS_LIVE_DATETIME_FROM RlsLiveDatetimeFrom
		,RLS_LIVE_DATETIME_TO RlsLiveDatetimeTo
		,RLS_EXCEPTIONAL_FLAG RlsExceptionalFlag
		,RLS_RESERVATION_FLAG RlsReservationFlag
		,RLS_ARCHIVE_FLAG RlsArchiveFlag
		,RLS_ANALYTICAL_FLAG RlsAnalyticalFlag
		,RLS_EXPERIMENTAL_FLAG RlsExperimentalFlag
		,GRP_CODE GrpCode
		,GRP_NAME GrpName
		,CMM_CODE CmmCode
		,CMM_VALUE CmmValue
		,SBJ_CODE SbjCode
		,COALESCE(SLG_VALUE,SBJ_VALUE) AS  SbjValue
		,PRC_CODE PrcCode
		,COALESCE(PLG_VALUE,PRC_VALUE) AS PrcValue
		,RQS_CODE RqsCode
		,RQS_VALUE RqsValue
		,RSP_CODE RspCode
		,RSP_VALUE RspValue
		,SGN_CODE SgnCode
		,SGN_VALUE SgnValue
		,WRQ_DATETIME WrqDatetime
		,WRQ_EXCEPTIONAL_FLAG WrqExceptionalFlag
		,WRQ_RESERVATION_FLAG WrqReservationFlag
		,WRQ_ARCHIVE_FLAG WrqArchiveFlag
		,WRQ_EXPERIMENTAL_FLAG WrqExperimentalFlag
	FROM TD_MATRIX
	INNER JOIN TS_LANGUAGE 
	ON MTR_LNG_ID=LNG_ID
	INNER JOIN TD_RELEASE
		ON RLS_ID = MTR_RLS_ID
			AND RLS_DELETE_FLAG = 0
	INNER JOIN TD_GROUP
		ON RLS_GRP_ID = GRP_ID
			AND GRP_DELETE_FLAG = 0
	INNER JOIN @GroupUserHasAccess g
		ON g.GRP_ID = RLS_GRP_ID
	LEFT JOIN TD_COMMENT
		ON CMM_ID = RLS_CMM_ID
			AND CMM_DELETE_FLAG = 0
	LEFT JOIN TD_PRODUCT
		ON RLS_PRC_ID = PRC_ID
			AND PRC_DELETE_FLAG = 0
	LEFT JOIN TD_SUBJECT
		ON SBJ_ID = PRC_SBJ_ID
			AND SBJ_DELETE_FLAG = 0
	LEFT JOIN TD_WORKFLOW_REQUEST 
	ON RLS_ID=WRQ_RLS_ID 
	AND WRQ_DELETE_FLAG=0
	AND WRQ_CURRENT_FLAG=1
	LEFT JOIN TS_REQUEST 
	ON WRQ_RQS_ID =RQS_ID 
	LEFT JOIN TD_WORKFLOW_RESPONSE 
	ON WRS_WRQ_ID=WRQ_ID 
	LEFT JOIN TS_RESPONSE 
	ON WRS_RSP_ID=RSP_ID
	LEFT JOIN TD_WORKFLOW_SIGNOFF 
	ON WSG_WRS_ID=WRS_ID 
	LEFT JOIN TS_SIGNOFF 
	ON WSG_SGN_ID=SGN_ID 
	LEFT JOIN TD_PRODUCT_LANGUAGE 
	ON PLG_PRC_ID=PRC_ID
	AND PLG_LNG_ID=LNG_ID 
	LEFT JOIN TD_SUBJECT_LANGUAGE 
	ON SLG_SBJ_ID =SBJ_ID
	AND SLG_LNG_ID=LNG_ID
	WHERE MTR_DELETE_FLAG = 0
		AND (
			@RlsCode IS NULL
			OR @RlsCode = RLS_CODE
			)
		AND (
			@RlsID IS NULL
			OR @RlsID = RLS_ID
			)
		AND (LNG_ISO_CODE=@LngIsoCode )

	GROUP BY MTR_CODE
		,RLS_CODE
		,RLS_VERSION
		,RLS_REVISION
		,RLS_LIVE_FLAG
		,RLS_LIVE_DATETIME_FROM
		,RLS_LIVE_DATETIME_TO
		,RLS_EXCEPTIONAL_FLAG
		,RLS_RESERVATION_FLAG
		,RLS_ARCHIVE_FLAG
		,RLS_ANALYTICAL_FLAG
		,RLS_EXPERIMENTAL_FLAG
		,GRP_CODE
		,GRP_NAME
		,CMM_CODE
		,CMM_VALUE
		,SBJ_CODE
		,SBJ_VALUE
		,PRC_CODE
		,PRC_VALUE
		,RQS_CODE 
		,RQS_VALUE
		,RSP_CODE 
		,RSP_VALUE
		,SGN_CODE  
		,SGN_VALUE 
		,WRQ_DATETIME 
		,WRQ_EXCEPTIONAL_FLAG 
		,WRQ_RESERVATION_FLAG 
		,WRQ_ARCHIVE_FLAG 
		,WRQ_EXPERIMENTAL_FLAG 
		,PLG_VALUE 
		,SLG_VALUE 
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Read].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Read].[@RlsID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_AccessList]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Read].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Read].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Read].[@LngIsoCodeDefault]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Read].[@GroupUserHasAccess].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CURRENT_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RQS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_RSP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_WRS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_SGN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_EXPERIMENTAL_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Data_Release_Read].[@GroupUserHasAccess]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Release_Read].[@GroupUserHasAccess].[GRP_ID]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Read].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Read].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Read].[@LngIsoCodeDefault]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Read].[@RlsCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Read].[@RlsID]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="300" />
				<Property Name="Length" Value="4197" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Read date: 22 Oct 2018&#xD;&#xA;-- Description:&#x9;Reads record(s) from the TD_Release &amp; dependent tables&#xD;&#xA;-- exec Data_Release_Read 'okeeffene','GA',1414,null,'en' --1403 1414&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_Read @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@LngIsoCodeDefault CHAR(2)&#xD;&#xA;&#x9;,@RlsCode INT = NULL&#xD;&#xA;&#x9;,@RlsID INT = NULL&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_ReadByGroup]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @IsLive BIT
	DECLARE @IsNotLive BIT

	SET @IsLive=1
	SET @IsNotLive=0

	DECLARE @LngId INT
	DECLARE @LngDefaultId INT

	SET @LngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)
	SET @LngDefaultId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCodeDefault
				AND LNG_DELETE_FLAG = 0
			)
	
	SELECT DISTINCT mtr.MTR_CODE MtrCode
	,coalesce(mtrLng.MTR_TITLE, mtr.MTR_TITLE) MtrTitle,RLS_CODE RlsCode
	,CASE WHEN VRN_MTR_ID IS NOT NULL THEN @IsLive ELSE @IsNotLive END AS IsLive
	FROM TD_MATRIX mtr
	LEFT JOIN (
			SELECT MTR_CODE
				,MTR_TITLE
				,MTR_RLS_ID
			FROM TD_MATRIX
			WHERE MTR_DELETE_FLAG = 0
				AND MTR_LNG_ID = @LngId
			) mtrLng
			ON mtr.MTR_CODE = mtrLng.MTR_CODE
				AND MTR.MTR_RLS_ID = mtrLng.MTR_RLS_ID
	INNER JOIN TD_RELEASE
		ON mtr.MTR_RLS_ID = RLS_ID
			AND MTR_DELETE_FLAG = 0
			AND RLS_DELETE_FLAG = 0
	INNER JOIN TD_GROUP
	ON RLS_GRP_ID=GRP_ID
	AND GRP_CODE=@GrpCode 
	AND GRP_DELETE_FLAG=0
	LEFT JOIN VW_RELEASE_LIVE_NOW 
	ON MTR_ID=VRN_MTR_ID 
	ORDER BY mtr.MTR_CODE
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadByGroup].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadByGroup].[@LngIsoCodeDefault]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadByGroup].[@GrpCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_ReadByGroup].[@GrpCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_ReadByGroup].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_ReadByGroup].[@LngIsoCodeDefault]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="311" />
				<Property Name="Length" Value="1615" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 07/02/2020&#xD;&#xA;-- Description:&#x9;Returns a list of individual Matrix codes that are associated with a given group&#xD;&#xA;-- EXEC Data_Matrix_ReadByGroup 'GROUPCODE1','en','en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_ReadByGroup @GrpCode NVARCHAR(32)&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@LngIsoCodeDefault CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_ReadCollection]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @PrcID INT
	DECLARE @ClsId INT
	DECLARE @FrqId INT
	DECLARE @SttId INT

	SET @ClsId = (
			SELECT DMR_ID
			FROM TS_DIMENSION_ROLE
			WHERE DMR_CODE = 'CLASSIFICATION'
			)
	SET @FrqId = (
			SELECT DMR_ID
			FROM TS_DIMENSION_ROLE
			WHERE DMR_CODE = 'TIME'
			)
	SET @SttId = (
			SELECT DMR_ID
			FROM TS_DIMENSION_ROLE
			WHERE DMR_CODE = 'STATISTIC'
			)

	IF @PrcCode IS NOT NULL
	BEGIN
		SET @PrcID = (
				SELECT PRC_ID
				FROM TD_PRODUCT
				WHERE PRC_CODE = @PrcCode
					AND PRC_DELETE_FLAG = 0
				)
	END

	DECLARE @Matrix TABLE (
		MTR_ID INT
		,MTR_CODE NVARCHAR(20)
		,LNG_ISO_CODE CHAR(2)
		,RLS_ID INT
		,CPR_ID INT
		,MTR_TITLE NVARCHAR(256)
		,LNG_ISO_NAME NVARCHAR(32)
		)

	SELECT MTR_ID
		,MTR_CODE
		,LNG_ISO_CODE
		,RLS_ID
		,MTR_CPR_ID AS CPR_ID
		,MTR_TITLE
		,LNG_ISO_NAME
	INTO #DefaultMatrix
	FROM TD_RELEASE
	INNER JOIN VW_RELEASE_LIVE_NOW ON RLS_ID = VRN_RLS_ID
		AND RLS_DELETE_FLAG = 0
		AND (
			RLS_LIVE_DATETIME_FROM > @DateFrom
			OR @DateFrom IS NULL
			)
		AND (
			@PrcCode IS NULL
			OR RLS_PRC_ID = @PrcID
			)
	INNER JOIN TD_MATRIX ON MTR_RLS_ID = RLS_ID
		AND MTR_ID = VRN_MTR_ID
		AND MTR_DELETE_FLAG = 0
	INNER JOIN TS_LANGUAGE ON MTR_LNG_ID = LNG_ID
		AND LNG_DELETE_FLAG = 0
		AND LNG_ISO_CODE = @LngIsoCodeDefault
	WHERE (
			@PrcID IS NULL
			OR RLS_PRC_ID = @PrcID
			)
		AND (
			@DateFrom IS NULL
			OR RLS_LIVE_DATETIME_FROM >= @DateFrom
			)

	IF @LngIsoCodeDefault <> @LngIsoCodeRead
	BEGIN
		SELECT MTR_ID
			,MTR_CODE
			,LNG_ISO_CODE
			,RLS_ID
			,MTR_CPR_ID AS CPR_ID
			,MTR_TITLE
			,LNG_ISO_NAME
		INTO #ReadMatrix
		FROM TD_RELEASE
		INNER JOIN VW_RELEASE_LIVE_NOW ON RLS_ID = VRN_RLS_ID
			AND RLS_DELETE_FLAG = 0
			AND (
				RLS_LIVE_DATETIME_FROM > @DateFrom
				OR @DateFrom IS NULL
				)
			AND (
				@PrcCode IS NULL
				OR RLS_PRC_ID = @PrcID
				)
		INNER JOIN TD_MATRIX ON MTR_RLS_ID = RLS_ID
			AND MTR_ID = VRN_MTR_ID
			AND MTR_DELETE_FLAG = 0
		INNER JOIN TS_LANGUAGE ON MTR_LNG_ID = LNG_ID
			AND LNG_DELETE_FLAG = 0
			AND LNG_ISO_CODE = @LngIsoCodeRead
		WHERE (
				@PrcID IS NULL
				OR RLS_PRC_ID = @PrcID
				)
			AND (
				@DateFrom IS NULL
				OR RLS_LIVE_DATETIME_FROM >= @DateFrom
				)

		INSERT INTO @Matrix
		SELECT coalesce(#ReadMatrix.MTR_ID, #DefaultMatrix.MTR_ID) AS MTR_ID
			,#DefaultMatrix.MTR_CODE
			,coalesce(#ReadMatrix.LNG_ISO_CODE, #DefaultMatrix.LNG_ISO_CODE) AS LNG_ISO_CODE
			,#DefaultMatrix.RLS_ID
			,#DefaultMatrix.CPR_ID
			,coalesce(#ReadMatrix.MTR_TITLE, #DefaultMatrix.MTR_TITLE)
			,coalesce(#ReadMatrix.LNG_ISO_NAME, #DefaultMatrix.LNG_ISO_NAME) AS LNG_ISO_NAME
		FROM #DefaultMatrix
		LEFT JOIN #ReadMatrix ON #DefaultMatrix.MTR_CODE = #ReadMatrix.MTR_CODE
	END
	ELSE
	BEGIN
		INSERT INTO @Matrix
		SELECT MTR_ID
			,MTR_CODE
			,LNG_ISO_CODE
			,RLS_ID
			,CPR_ID
			,MTR_TITLE
			,LNG_ISO_NAME
		FROM #DefaultMatrix
	END

	SELECT RLS_CODE AS RlsCode
		,MTR_CODE AS MtrCode
		,LNG_ISO_CODE AS LngIsoCode
		,LNG_ISO_NAME AS LngIsoName
		,MTR_TITLE AS MtrTitle
		,CPR_VALUE AS CprValue
		,CPR_URL AS CprUrl
		,CPR_CODE AS CprCode
		,RLS_LIVE_DATETIME_FROM AS RlsLiveDatetimeFrom
		,RLS_LIVE_DATETIME_TO AS RlsLiveDatetimeTo
		,RLS_EXCEPTIONAL_FLAG AS ExceptionalFlag
		,mdFrq.MDM_CODE AS FrqCode
		,mdFrq.MDM_VALUE AS FrqValue
		,diPrd.DMT_CODE AS PrdCode
		,diPrd.DMT_VALUE AS PrdValue
		,mdStt.MDM_CODE AS SttCode
		,mdStt.MDM_VALUE AS SttValue
		,mdCls.MDM_CODE AS ClsCode
		,mdCls.MDM_VALUE AS ClsValue
	FROM TD_RELEASE
	INNER JOIN VW_RELEASE_LIVE_NOW ON RLS_ID = VRN_RLS_ID
		AND RLS_DELETE_FLAG = 0
		AND (
			RLS_LIVE_DATETIME_FROM > @DateFrom
			OR @DateFrom IS NULL
			)
		AND (
			@PrcCode IS NULL
			OR RLS_PRC_ID = @PrcID
			)
	INNER JOIN @Matrix m ON m.RLS_ID = TD_RELEASE.RLS_ID
		AND MTR_ID = VRN_MTR_ID
	INNER JOIN TD_MATRIX_DIMENSION mdCls ON MTR_ID = mdCls.MDM_MTR_ID
		AND mdCls.MDM_DMR_ID = @ClsId
	INNER JOIN TD_MATRIX_DIMENSION mdFrq ON MTR_ID = mdFrq.MDM_MTR_ID
		AND mdFrq.MDM_DMR_ID = @FrqId
	INNER JOIN TD_MATRIX_DIMENSION mdStt ON MTR_ID = mdStt.MDM_MTR_ID
		AND mdStt.MDM_DMR_ID = @SttId
	INNER JOIN TD_DIMENSION_ITEM diPrd ON DMT_MDM_ID = mdFrq.MDM_ID
	INNER JOIN TS_COPYRIGHT ON m.CPR_ID = TS_COPYRIGHT.CPR_ID
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[@DateFrom]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[@LngIsoCodeDefault]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[@LngIsoCodeRead]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[#DefaultMatrix]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[#ReadMatrix]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[#DefaultMatrix].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[#ReadMatrix].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[#ReadMatrix].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[#DefaultMatrix].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[#ReadMatrix].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[#DefaultMatrix].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[#DefaultMatrix].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[#DefaultMatrix].[CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[#ReadMatrix].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[#DefaultMatrix].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[#ReadMatrix].[LNG_ISO_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[#DefaultMatrix].[LNG_ISO_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[#DefaultMatrix].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[#DefaultMatrix].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[#DefaultMatrix].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[#DefaultMatrix].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[#DefaultMatrix].[CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[#DefaultMatrix].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[#DefaultMatrix].[LNG_ISO_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[@Matrix].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[@Matrix].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[@Matrix].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[@Matrix].[CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[@Matrix].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[@Matrix].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[@Matrix].[LNG_ISO_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadCollection].[@Matrix].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_URL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_VALUE]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Data_Release_ReadCollection].[@Matrix]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Release_ReadCollection].[@Matrix].[MTR_ID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Release_ReadCollection].[@Matrix].[MTR_CODE]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="20" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Release_ReadCollection].[@Matrix].[LNG_ISO_CODE]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="2" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Release_ReadCollection].[@Matrix].[RLS_ID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Release_ReadCollection].[@Matrix].[CPR_ID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Release_ReadCollection].[@Matrix].[MTR_TITLE]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="256" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Release_ReadCollection].[@Matrix].[LNG_ISO_NAME]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="32" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Data_Release_ReadCollection].[#DefaultMatrix]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Data_Release_ReadCollection].[#DefaultMatrix].[MTR_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Data_Release_ReadCollection].[#DefaultMatrix].[MTR_CODE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Data_Release_ReadCollection].[#DefaultMatrix].[LNG_ISO_CODE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Data_Release_ReadCollection].[#DefaultMatrix].[RLS_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Data_Release_ReadCollection].[#DefaultMatrix].[CPR_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_MATRIX].[MTR_CPR_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Data_Release_ReadCollection].[#DefaultMatrix].[MTR_TITLE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Data_Release_ReadCollection].[#DefaultMatrix].[LNG_ISO_NAME]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_NAME]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Data_Release_ReadCollection].[#ReadMatrix]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Data_Release_ReadCollection].[#ReadMatrix].[MTR_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Data_Release_ReadCollection].[#ReadMatrix].[MTR_CODE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Data_Release_ReadCollection].[#ReadMatrix].[LNG_ISO_CODE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Data_Release_ReadCollection].[#ReadMatrix].[RLS_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Data_Release_ReadCollection].[#ReadMatrix].[CPR_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_MATRIX].[MTR_CPR_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Data_Release_ReadCollection].[#ReadMatrix].[MTR_TITLE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Data_Release_ReadCollection].[#ReadMatrix].[LNG_ISO_NAME]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_NAME]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_ReadCollection].[@LngIsoCodeDefault]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_ReadCollection].[@LngIsoCodeRead]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_ReadCollection].[@DateFrom]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_ReadCollection].[@PrcCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="343" />
				<Property Name="Length" Value="4885" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 02/01/2020&#xD;&#xA;-- Rewritten : 19/04/2021 Neil O'Keeffe&#xD;&#xA;-- Description:&#x9;Reads current releases, referencing metadata&#xD;&#xA;-- exec Data_Release_ReadMetaCollection_NewStructure 'en','en','2021-01-01','API'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_ReadCollection @LngIsoCodeDefault CHAR(2)&#xD;&#xA;&#x9;,@LngIsoCodeRead CHAR(2)&#xD;&#xA;&#x9;,@DateFrom DATE = NULL&#xD;&#xA;&#x9;,@PrcCode NVARCHAR(32) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_ReadLatest]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT MTR_CODE MtrCode
		,RLS_CODE RlsCode
		,RLS_VERSION RlsVersion
		,RLS_REVISION RlsRevision
		,RLS_LIVE_FLAG RlsLiveFlag
		,RLS_LIVE_DATETIME_FROM RlsLiveDatetimeFrom
		,RLS_LIVE_DATETIME_TO RlsLiveDatetimeTo
		,RLS_EXCEPTIONAL_FLAG RlsExceptionalFlag
		,RLS_RESERVATION_FLAG RlsReservationFlag
		,RLS_ARCHIVE_FLAG RlsArchiveFlag
		,RLS_ANALYTICAL_FLAG RlsAnalyticalFlag
		,RLS_EXPERIMENTAL_FLAG RlsExperimentalFlag
		,GRP_CODE GrpCode
		,GRP_NAME GrpName
		,CMM_CODE CmmCode
		,CMM_VALUE CmmValue
		,SBJ_CODE SbjCode
		,SBJ_VALUE SbjValue
		,PRC_CODE PrcCode
		,PRC_VALUE PrcValue
	FROM TD_MATRIX
	INNER JOIN TD_RELEASE
		ON RLS_ID = MTR_RLS_ID
			AND RLS_DELETE_FLAG = 0
	INNER JOIN VW_RELEASE_LATEST
		ON VRL_RLS_ID = RLS_ID
			AND VRL_MTR_ID = MTR_ID
	INNER JOIN TD_GROUP
		ON RLS_GRP_ID = GRP_ID
			AND GRP_DELETE_FLAG = 0
	LEFT JOIN TD_COMMENT
		ON CMM_ID = RLS_CMM_ID
			AND CMM_DELETE_FLAG = 0
	LEFT JOIN TD_PRODUCT
		ON RLS_PRC_ID = PRC_ID
			AND PRC_DELETE_FLAG = 0
	LEFT JOIN TD_SUBJECT
		ON SBJ_ID = PRC_SBJ_ID
			AND SBJ_DELETE_FLAG = 0
	WHERE MTR_DELETE_FLAG = 0
		AND @MtrCode = MTR_CODE
	AND RLS_LIVE_DATETIME_FROM IS NOT NULL
		AND (RLS_LIVE_DATETIME_TO IS NULL OR( DATEDIFF(s, RLS_LIVE_DATETIME_FROM,RLS_LIVE_DATETIME_TO) >0))
	GROUP BY MTR_CODE
		,RLS_CODE
		,RLS_VERSION
		,RLS_REVISION
		,RLS_LIVE_FLAG
		,RLS_LIVE_DATETIME_FROM
		,RLS_LIVE_DATETIME_TO
		,RLS_EXCEPTIONAL_FLAG
		,RLS_RESERVATION_FLAG
		,RLS_ARCHIVE_FLAG
		,RLS_ANALYTICAL_FLAG
		,RLS_EXPERIMENTAL_FLAG
		,GRP_CODE
		,GRP_NAME
		,CMM_CODE
		,CMM_VALUE
		,SBJ_CODE
		,SBJ_VALUE
		,PRC_CODE
		,PRC_VALUE
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LATEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LATEST].[VRL_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LATEST].[VRL_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadLatest].[@MtrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_ReadLatest].[@MtrCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="270" />
				<Property Name="Length" Value="2035" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Read date: 22 Oct 2018&#xD;&#xA;-- Description:&#x9;Reads record(s) from the TD_Release &amp; dependant tables&#xD;&#xA;-- exec Data_Release_ReadLatest 'FSA26'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_ReadLatest @MtrCode NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_ReadLatestIgnoreCancelled]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT MTR_CODE MtrCode
		,RLS_CODE RlsCode
		,RLS_VERSION RlsVersion
		,RLS_REVISION RlsRevision
		,RLS_LIVE_FLAG RlsLiveFlag
		,RLS_LIVE_DATETIME_FROM RlsLiveDatetimeFrom
		,RLS_LIVE_DATETIME_TO RlsLiveDatetimeTo
		,RLS_EXCEPTIONAL_FLAG RlsExceptionalFlag
		,RLS_RESERVATION_FLAG RlsReservationFlag
		,RLS_ARCHIVE_FLAG RlsArchiveFlag
		,RLS_ANALYTICAL_FLAG RlsAnalyticalFlag
		,RLS_EXPERIMENTAL_FLAG RlsExperimentalFlag
		,GRP_CODE GrpCode
		,GRP_NAME GrpName
		,CMM_CODE CmmCode
		,CMM_VALUE CmmValue
		,SBJ_CODE SbjCode
		,SBJ_VALUE SbjValue
		,PRC_CODE PrcCode
		,PRC_VALUE PrcValue
	FROM TD_MATRIX
	INNER JOIN TD_RELEASE
		ON RLS_ID = MTR_RLS_ID
			AND RLS_DELETE_FLAG = 0
	INNER JOIN VW_RELEASE_LATEST
		ON VRL_RLS_ID = RLS_ID
			AND VRL_MTR_ID = MTR_ID
	INNER JOIN TD_GROUP
		ON RLS_GRP_ID = GRP_ID
			AND GRP_DELETE_FLAG = 0
	LEFT JOIN TD_COMMENT
		ON CMM_ID = RLS_CMM_ID
			AND CMM_DELETE_FLAG = 0
	LEFT JOIN TD_PRODUCT
		ON RLS_PRC_ID = PRC_ID
			AND PRC_DELETE_FLAG = 0
	LEFT JOIN TD_SUBJECT
		ON SBJ_ID = PRC_SBJ_ID
			AND SBJ_DELETE_FLAG = 0
	WHERE MTR_DELETE_FLAG = 0
		AND @MtrCode = MTR_CODE
		AND (RLS_LIVE_DATETIME_TO IS NULL OR( DATEDIFF(s, RLS_LIVE_DATETIME_TO,GETDATE()) >0))
	GROUP BY MTR_CODE
		,RLS_CODE
		,RLS_VERSION
		,RLS_REVISION
		,RLS_LIVE_FLAG
		,RLS_LIVE_DATETIME_FROM
		,RLS_LIVE_DATETIME_TO
		,RLS_EXCEPTIONAL_FLAG
		,RLS_RESERVATION_FLAG
		,RLS_ARCHIVE_FLAG
		,RLS_ANALYTICAL_FLAG
		,RLS_EXPERIMENTAL_FLAG
		,GRP_CODE
		,GRP_NAME
		,CMM_CODE
		,CMM_VALUE
		,SBJ_CODE
		,SBJ_VALUE
		,PRC_CODE
		,PRC_VALUE
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LATEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LATEST].[VRL_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LATEST].[VRL_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadLatestIgnoreCancelled].[@MtrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_ReadLatestIgnoreCancelled].[@MtrCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1730" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[Data_Release_ReadLatestIgnoreCancelled] &#xD;&#xA;&#x9;@MtrCode NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_ReadLatestIncludingCancelled]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT MTR_CODE MtrCode
		,RLS_CODE RlsCode
		,RLS_VERSION RlsVersion
		,RLS_REVISION RlsRevision
		,RLS_LIVE_FLAG RlsLiveFlag
		,RLS_LIVE_DATETIME_FROM RlsLiveDatetimeFrom
		,RLS_LIVE_DATETIME_TO RlsLiveDatetimeTo
		,RLS_EXCEPTIONAL_FLAG RlsExceptionalFlag
		,RLS_RESERVATION_FLAG RlsReservationFlag
		,RLS_ARCHIVE_FLAG RlsArchiveFlag
		,RLS_ANALYTICAL_FLAG RlsAnalyticalFlag
		,RLS_EXPERIMENTAL_FLAG RlsExperimentalFlag
		,GRP_CODE GrpCode
		,GRP_NAME GrpName
		,CMM_CODE CmmCode
		,CMM_VALUE CmmValue
		,SBJ_CODE SbjCode
		,SBJ_VALUE SbjValue
		,PRC_CODE PrcCode
		,PRC_VALUE PrcValue
	FROM TD_MATRIX
	INNER JOIN TD_RELEASE
		ON RLS_ID = MTR_RLS_ID
			AND RLS_DELETE_FLAG = 0
	INNER JOIN VW_RELEASE_LATEST
		ON VRL_RLS_ID = RLS_ID
			AND VRL_MTR_ID = MTR_ID
	INNER JOIN TD_GROUP
		ON RLS_GRP_ID = GRP_ID
			AND GRP_DELETE_FLAG = 0
	LEFT JOIN TD_COMMENT
		ON CMM_ID = RLS_CMM_ID
			AND CMM_DELETE_FLAG = 0
	LEFT JOIN TD_PRODUCT
		ON RLS_PRC_ID = PRC_ID
			AND PRC_DELETE_FLAG = 0
	LEFT JOIN TD_SUBJECT
		ON SBJ_ID = PRC_SBJ_ID
			AND SBJ_DELETE_FLAG = 0
	WHERE MTR_DELETE_FLAG = 0
		AND @MtrCode = MTR_CODE
	GROUP BY MTR_CODE
		,RLS_CODE
		,RLS_VERSION
		,RLS_REVISION
		,RLS_LIVE_FLAG
		,RLS_LIVE_DATETIME_FROM
		,RLS_LIVE_DATETIME_TO
		,RLS_EXCEPTIONAL_FLAG
		,RLS_RESERVATION_FLAG
		,RLS_ARCHIVE_FLAG
		,RLS_ANALYTICAL_FLAG
		,RLS_EXPERIMENTAL_FLAG
		,GRP_CODE
		,GRP_NAME
		,CMM_CODE
		,CMM_VALUE
		,SBJ_CODE
		,SBJ_VALUE
		,PRC_CODE
		,PRC_VALUE
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LATEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LATEST].[VRL_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LATEST].[VRL_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadLatestIncludingCancelled].[@MtrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_ReadLatestIncludingCancelled].[@MtrCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="270" />
				<Property Name="Length" Value="1909" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Read date: 22 Oct 2018&#xD;&#xA;-- Description:&#x9;Reads record(s) from the TD_Release &amp; dependant tables&#xD;&#xA;-- exec Data_Release_ReadLatest 'FSA26'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_ReadLatestIncludingCancelled @MtrCode NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_ReadLatestLive]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT MTR_CODE MtrCode
		,RLS_CODE RlsCode
		,RLS_VERSION RlsVersion
		,RLS_REVISION RlsRevision
		,RLS_LIVE_FLAG RlsLiveFlag
		,RLS_LIVE_DATETIME_FROM RlsLiveDatetimeFrom
		,RLS_LIVE_DATETIME_TO RlsLiveDatetimeTo
		,RLS_EXCEPTIONAL_FLAG RlsExceptionalFlag
		,RLS_RESERVATION_FLAG RlsReservationFlag
		,RLS_ARCHIVE_FLAG RlsArchiveFlag
		,RLS_ANALYTICAL_FLAG RlsAnalyticalFlag
		,RLS_EXPERIMENTAL_FLAG RlsExperimentalFlag
		,GRP_CODE GrpCode
		,GRP_NAME GrpName
		,CMM_CODE CmmCode
		,CMM_VALUE CmmValue
		,SBJ_CODE SbjCode
		,SBJ_VALUE SbjValue
		,PRC_CODE PrcCode
		,PRC_VALUE PrcValue
	FROM TD_MATRIX
	INNER JOIN TD_RELEASE
		ON RLS_ID = MTR_RLS_ID
			AND RLS_DELETE_FLAG = 0
	INNER JOIN VW_RELEASE_LATEST
		ON VRL_RLS_ID = RLS_ID
			AND VRL_MTR_ID = MTR_ID
	INNER JOIN TD_GROUP
		ON RLS_GRP_ID = GRP_ID
			AND GRP_DELETE_FLAG = 0
	LEFT JOIN TD_COMMENT
		ON CMM_ID = RLS_CMM_ID
			AND CMM_DELETE_FLAG = 0
	LEFT JOIN TD_PRODUCT
		ON RLS_PRC_ID = PRC_ID
			AND PRC_DELETE_FLAG = 0
	LEFT JOIN TD_SUBJECT
		ON SBJ_ID = PRC_SBJ_ID
			AND SBJ_DELETE_FLAG = 0
	WHERE MTR_DELETE_FLAG = 0
		AND @MtrCode = MTR_CODE
	GROUP BY MTR_CODE
		,RLS_CODE
		,RLS_VERSION
		,RLS_REVISION
		,RLS_LIVE_FLAG
		,RLS_LIVE_DATETIME_FROM
		,RLS_LIVE_DATETIME_TO
		,RLS_EXCEPTIONAL_FLAG
		,RLS_RESERVATION_FLAG
		,RLS_ARCHIVE_FLAG
		,RLS_ANALYTICAL_FLAG
		,RLS_EXPERIMENTAL_FLAG
		,GRP_CODE
		,GRP_NAME
		,CMM_CODE
		,CMM_VALUE
		,SBJ_CODE
		,SBJ_VALUE
		,PRC_CODE
		,PRC_VALUE
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LATEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LATEST].[VRL_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LATEST].[VRL_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadLatestLive].[@MtrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_ReadLatestLive].[@MtrCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="274" />
				<Property Name="Length" Value="1899" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Read date: 22 Oct 2018&#xD;&#xA;-- Description:&#x9;Reads record(s) from the TD_Release &amp; dependant tables&#xD;&#xA;-- exec Data_Release_ReadLatestLive 'PVR01'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_ReadLatestLive @MtrCode NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_ReadList]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @GroupUserHasAccess TABLE (GRP_ID INT NOT NULL);

	INSERT INTO @GroupUserHasAccess
	EXEC Security_Group_AccessList @CcnUsername

	DECLARE @LngId INT
	DECLARE @LngIdDefault INT

	SET @LngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)
	SET @LngIdDefault = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCodeDefault
				AND LNG_DELETE_FLAG = 0
			)

	SELECT DISTINCT q.MtrCode
		,q.RlsCode
		,q.RlsAnalyticalFlag
		,q.RlsArchiveFlag
		,q.RlsExperimentalFlag 
		,q.RlsLiveFlag
		,q.RlsLiveDatetimeTo
		,q.RlsReservationFlag
		,q.RlsVersion
		,q.RlsRevision
		,q.RlsExceptionalFlag
		,q.RlsLiveDatetimeFrom
		,q.MtrTitle
		,q.RqsValue
		,q.RqsCode
		,q.RspValue
		,q.RspCode
		,q.SgnValue
		,q.SgnCode
	FROM (
		SELECT mtr.MTR_CODE MtrCode
			,RLS_CODE RlsCode
			,RLS_ANALYTICAL_FLAG RlsAnalyticalFlag
			,RLS_ARCHIVE_FLAG RlsArchiveFlag
			,RLS_EXPERIMENTAL_FLAG RlsExperimentalFlag
			,RLS_LIVE_FLAG RlsLiveFlag
			,RLS_LIVE_DATETIME_TO RlsLiveDatetimeTo
			,RLS_RESERVATION_FLAG RlsReservationFlag
			,RLS_REVISION RlsRevision
			,RLS_VERSION RlsVersion
			,RLS_EXCEPTIONAL_FLAG RlsExceptionalFlag
			,RLS_LIVE_DATETIME_FROM RlsLiveDatetimeFrom
			,coalesce(mtrLng.MTR_TITLE, mtr.MTR_TITLE) MtrTitle
			,RQS_VALUE RqsValue
			,mtr.MTR_LNG_ID
			,RSP_VALUE RspValue
			,SGN_VALUE SgnValue
			,RQS_CODE RqsCode
			,RSP_CODE RspCode
			,SGN_CODE SgnCode
		FROM TD_MATRIX mtr
		LEFT JOIN (
			SELECT MTR_CODE
				,MTR_TITLE
				,MTR_RLS_ID
			FROM TD_MATRIX
			WHERE MTR_DELETE_FLAG = 0
				AND MTR_LNG_ID = @LngId
			) mtrLng
			ON mtr.MTR_CODE = mtrLng.MTR_CODE
				AND MTR.MTR_RLS_ID = mtrLng.MTR_RLS_ID
		INNER JOIN TD_RELEASE
			ON RLS_ID = mtr.MTR_RLS_ID
				AND RLS_DELETE_FLAG = 0
		LEFT JOIN TD_WORKFLOW_REQUEST
			ON WRQ_RLS_ID = RLS_ID
			and WRQ_CURRENT_FLAG=1
			and WRQ_DELETE_FLAG=0
		LEFT JOIN TS_REQUEST
			ON WRQ_RQS_ID = RQS_ID
		LEFT JOIN TD_WORKFLOW_RESPONSE
			ON WRQ_ID = WRS_WRQ_ID
		LEFT JOIN TS_RESPONSE
			ON WRS_RSP_ID = RSP_ID
		LEFT JOIN TD_WORKFLOW_SIGNOFF
			ON WRS_ID = WSG_WRS_ID
		LEFT JOIN TS_SIGNOFF
			ON WSG_SGN_ID = SGN_ID
		INNER JOIN @GroupUserHasAccess g
			ON g.GRP_ID = RLS_GRP_ID
		WHERE MTR_DELETE_FLAG = 0
			AND mtr.MTR_CODE = @MtrCode
			AND mtr.MTR_LNG_ID IN (
				@LngId
				,@LngIdDefault
				)

		) q
	ORDER BY q.RlsVersion
		,q.RlsRevision
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_AccessList]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadList].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadList].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadList].[@LngIsoCodeDefault]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CURRENT_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RQS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_RSP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_WRS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_SGN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadList].[@GroupUserHasAccess].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadList].[@MtrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Data_Release_ReadList].[@GroupUserHasAccess]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Release_ReadList].[@GroupUserHasAccess].[GRP_ID]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_ReadList].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_ReadList].[@MtrCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_ReadList].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_ReadList].[@LngIsoCodeDefault]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="298" />
				<Property Name="Length" Value="2974" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Create date: 9 Nov 2018&#xD;&#xA;-- Description:&#x9;Reads a list of releases for a given matrix code and username&#xD;&#xA;--exec Data_Release_ReadList 'okeeffene','AHM04X','en','en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_ReadList @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@MtrCode NVARCHAR(256)&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@LngIsoCodeDefault CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_ReadListLive]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @LngIdDefault INT
	DECLARE @LngIdRead INT
	DECLARE @SbjId INT
	DECLARE @PrcId INT

	SET @LngIdDefault = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCodeDefault
				AND LNG_DELETE_FLAG = 0
			)

	IF @LngIsoCodeRead IS NOT NULL
	BEGIN
		SET @LngIdRead = (
				SELECT LNG_ID
				FROM TS_LANGUAGE
				WHERE LNG_ISO_CODE = @LngIsoCodeRead
					AND LNG_DELETE_FLAG = 0
				)
	END
	ELSE
	BEGIN
		SET @LngIdRead = 0
	END

	IF @LngIsoCodeDefault = @LngIsoCodeRead
	BEGIN
		SET @LngIdRead = 0
	END

	BEGIN
		SET @SbjId = (
				SELECT SBJ_ID
				FROM TD_SUBJECT
				WHERE SBJ_CODE = @SbjCode
					AND SBJ_DELETE_FLAG = 0
				)
	END

	BEGIN
		SET @PrcId = (
				SELECT PRC_ID
				FROM TD_PRODUCT
				WHERE PRC_CODE = @PrcCode
					AND PRC_DELETE_FLAG = 0
				)
	END

	SELECT RLS_CODE AS RlsCode
	    ,mtr.MTR_ID AS MtrId
		,mtr.MTR_CODE AS MtrCode
		,coalesce(lngMTR.LNG_ISO_CODE, TS_LANGUAGE.LNG_ISO_CODE) AS LngIsoCode
		,coalesce(lngMtr.LNG_ISO_NAME, TS_LANGUAGE.LNG_ISO_NAME) AS LngIsoName
		,coalesce(lngMTR.MTR_TITLE, mtr.MTR_TITLE) AS MtrTitle
		,CPR_VALUE AS CprValue
		,CPR_URL AS CprUrl
		,CPR_CODE AS CprCode
		,RLS_LIVE_DATETIME_FROM AS RlsLiveDatatimeFrom
		,RLS_LIVE_DATETIME_TO AS RlsLiveDatatimeTo
		,RLS_EXCEPTIONAL_FLAG AS ExceptionalFlag
		,MDM_CODE  AS FrqCode
		,MDM_VALUE  AS FrqValue
	FROM TD_RELEASE rls
	INNER JOIN VW_RELEASE_LIVE_NOW
		ON VRN_RLS_ID = RLS_ID
			AND (
				@DateFrom IS NULL
				OR RLS_LIVE_DATETIME_FROM >= @DateFrom
				)
	INNER JOIN (
		SELECT *
		FROM TD_MATRIX
		WHERE MTR_LNG_ID = @LngIdDefault
		) mtr
		ON RLS_ID = MTR_RLS_ID
			AND MTR_DELETE_FLAG = 0
			AND RLS_DELETE_FLAG = 0
			AND MTR_ID = VRN_MTR_ID
	INNER JOIN TS_COPYRIGHT
		ON CPR_ID = MTR_CPR_ID
			AND CPR_DELETE_FLAG = 0
	INNER JOIN TS_LANGUAGE
		ON LNG_ID = MTR_LNG_ID
			AND LNG_DELETE_FLAG = 0
	INNER JOIN TD_MATRIX_DIMENSION 
	ON MDM_MTR_ID =MTR_ID
	INNER JOIN TS_DIMENSION_ROLE 
	ON MDM_DMR_ID=DMR_ID 
	AND DMR_CODE='TIME'


	INNER JOIN TD_PRODUCT
		ON RLS_PRC_ID = PRC_ID
			AND PRC_ID = @PrcId
			AND PRC_SBJ_ID = @SbjId
	LEFT JOIN (
		SELECT MTR_CODE
			,MTR_ID
			,MTR_TITLE
			,MTR_RLS_ID
			,LNG_ISO_CODE
			,LNG_ISO_NAME
		FROM TD_MATRIX
		INNER JOIN TS_LANGUAGE
			ON MTR_LNG_ID = LNG_ID
				AND LNG_DELETE_FLAG = 0
		WHERE Mtr_Lng_ID = @LngIdRead
			AND MTR_DELETE_FLAG = 0
		) lngMtr
		ON lngMtr.MTR_CODE = mtr.MTR_CODE
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadListLive].[@LngIsoCodeDefault]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadListLive].[@LngIsoCodeRead]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadListLive].[@SbjCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadListLive].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadListLive].[@DateFrom]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_URL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_VALUE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_ReadListLive].[@LngIsoCodeDefault]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_ReadListLive].[@LngIsoCodeRead]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_ReadListLive].[@DateFrom]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_ReadListLive].[@SbjCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_ReadListLive].[@PrcCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="687" />
				<Property Name="Length" Value="3380" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Create date: 5 Feb 2019&#xD;&#xA;-- Description:&#x9;Lists all the live releases. The @LngIsoCodeDefault parameter is the default language for the system&#xD;&#xA;-- The optional parameter @LngIsoCodeRead is the preferred language for reading. If this is supplied it will return the matrix in the requested&#xD;&#xA;-- language if it exists. If the matrix doesn't exist in that language, then it returns the default language version of that matrix.&#xD;&#xA;--EXEC Data_Release_ReadListLive 'en','en','2019-12-01',1,'AG3'&#xD;&#xA;--EXEC Data_Release_ReadListLive 'en','ga','2019-12-01','C2016P3'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_ReadListLive @LngIsoCodeDefault CHAR(2)&#xD;&#xA;&#x9;,@LngIsoCodeRead CHAR(2) = NULL&#xD;&#xA;&#x9;,@DateFrom DATE = NULL&#xD;&#xA;&#x9;,@SbjCode INT&#xD;&#xA;&#x9;,@PrcCode NVARCHAR(32)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_ReadNext]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @PrcID INT

	IF @PrcCode IS NOT NULL
	BEGIN
		SET @PrcID = (
				SELECT PRC_ID
				FROM TD_PRODUCT
				WHERE PRC_CODE = @PrcCode
					AND PRC_DELETE_FLAG = 0
				)
	END

	IF @PrcID IS NULL
		AND @PrcCode IS NOT NULL
	BEGIN
		SELECT NULL AS NextRelease
	END
	ELSE
	BEGIN
		SELECT 
				min(RLS_LIVE_DATETIME_FROM)
				
				AS NextRelease
		FROM TD_RELEASE
		INNER JOIN VW_RELEASE_LIVE_NEXT
			ON VRX_RLS_ID = RLS_ID
		WHERE RLS_LIVE_DATETIME_FROM >= @ReleaseDate
			AND RLS_LIVE_DATETIME_TO IS NULL
			AND (@PrcCode IS NULL OR @PrcID=RLS_PRC_ID)
	END
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadNext].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NEXT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NEXT].[VRX_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadNext].[@ReleaseDate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_ReadNext].[@ReleaseDate]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_ReadNext].[@PrcCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="300" />
				<Property Name="Length" Value="1023" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 08/04/2019&#xD;&#xA;-- Description:&#x9;Reads the next release date/time after the supplied release date&#xD;&#xA;-- exec Data_Release_ReadNext '2020-02-04T10:58:00','CODE2'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_ReadNext @ReleaseDate DATETIME&#xD;&#xA;&#x9;,@PrcCode NVARCHAR(32) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_ReadNextReleaseDate]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT min(RLS_LIVE_DATETIME_FROM) AS RlsDatetimeNext
	FROM td_release
	WHERE RLS_LIVE_DATETIME_FROM > getdate()
	AND RLS_DELETE_FLAG=0
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="211" />
				<Property Name="Length" Value="444" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 07/12/2020&#xD;&#xA;-- Description:&#x9;Gets the next scheduled release date&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_ReadNextReleaseDate&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_ReadPrevious]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @MtrCode NVARCHAR(20)

	SELECT @MtrCode = MTR_CODE
	FROM TD_RELEASE
	INNER JOIN TD_MATRIX
		ON MTR_RLS_ID = RLS_ID
			AND MTR_DELETE_FLAG = 0
			AND RLS_DELETE_FLAG = 0
	WHERE RLS_CODE = @RlsCode
	GROUP BY MTR_CODE

	SELECT TOP 1 RLS_CODE as RlsCode

	FROM TD_RELEASE
	INNER JOIN TD_MATRIX
		ON MTR_RLS_ID = RLS_ID
			AND MTR_DELETE_FLAG = 0
			AND RLS_DELETE_FLAG = 0
	WHERE MTR_CODE = @MtrCode
		AND RLS_CODE < @RlsCode
	AND RLS_LIVE_DATETIME_FROM IS NOT NULL
		AND (RLS_LIVE_DATETIME_TO IS NULL OR( DATEDIFF(s, RLS_LIVE_DATETIME_FROM,RLS_LIVE_DATETIME_TO) >0))
		
	ORDER BY MTR_CODE ASC
		,RLS_CODE DESC
		,RLS_VERSION DESC
		,RLS_REVISION DESC

END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadPrevious].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_ReadPrevious].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="279" />
				<Property Name="Length" Value="1063" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Read date: 22 Oct 2018&#xD;&#xA;-- Description:&#x9;Returns the previous release for comparison given one release code&#xD;&#xA;-- exec Data_Release_ReadPrevious 66&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_ReadPrevious @RlsCode INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_ReadPreviousForUser]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;



	DECLARE @GroupUserHasAccess TABLE (GRP_ID INT NOT NULL);

	INSERT INTO @GroupUserHasAccess
	EXEC Security_Group_AccessList @CcnUsername



	DECLARE @MtrCode NVARCHAR(20)

	SELECT @MtrCode = MTR_CODE
	FROM TD_RELEASE
	INNER JOIN TD_MATRIX
		ON MTR_RLS_ID = RLS_ID
			AND MTR_DELETE_FLAG = 0
			AND RLS_DELETE_FLAG = 0
	WHERE RLS_CODE = @RlsCode
	GROUP BY MTR_CODE

	SELECT TOP 1 RLS_CODE as RlsCode

	FROM TD_RELEASE
	INNER JOIN TD_MATRIX
		ON MTR_RLS_ID = RLS_ID
			AND MTR_DELETE_FLAG = 0
			AND RLS_DELETE_FLAG = 0
	INNER JOIN @GroupUserHasAccess
	ON GRP_ID=RLS_GRP_ID 
	WHERE MTR_CODE = @MtrCode
		AND RLS_CODE < @RlsCode
		AND RLS_LIVE_DATETIME_FROM IS NOT NULL
		AND (RLS_LIVE_DATETIME_TO IS NULL OR( DATEDIFF(s, RLS_LIVE_DATETIME_FROM,RLS_LIVE_DATETIME_TO) >0))
	ORDER BY MTR_CODE ASC
		,RLS_CODE DESC
		,RLS_VERSION DESC
		,RLS_REVISION DESC

END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_AccessList]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadPreviousForUser].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadPreviousForUser].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_ReadPreviousForUser].[@GroupUserHasAccess].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Data_Release_ReadPreviousForUser].[@GroupUserHasAccess]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Data_Release_ReadPreviousForUser].[@GroupUserHasAccess].[GRP_ID]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_ReadPreviousForUser].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_ReadPreviousForUser].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="334" />
				<Property Name="Length" Value="1359" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 15/04/2021&#xD;&#xA;-- Description:&#x9;Returns the previous release for comparison given one release code only if the user has viewing rights&#xD;&#xA;-- exec Data_Release_ReadPreviousForUser 10,'okeeffene'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_ReadPreviousForUser @RlsCode INT&#xD;&#xA;,@CcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    DECLARE @DtgID AS INT;
    DECLARE @eMessage AS VARCHAR (256);
    DECLARE @updateCount AS INT;
    DECLARE @PrcID AS INT;
    SET @PrcID = (SELECT PRC_ID
                  FROM   TD_PRODUCT
                  WHERE  PRC_CODE = @PrcCode
                         AND PRC_DELETE_FLAG = 0);
    SET @DtgID = (SELECT RLS_DTG_ID
                  FROM   TD_RELEASE
                  WHERE  RLS_CODE = @RlsCode
                         AND RLS_DELETE_FLAG = 0);
    DECLARE @RlsCmmId AS INT
    SET @RlsCmmId=NULL
    IF @RlsCmmCode IS NOT NULL AND @RlsCode>0
    BEGIN
        SET @RlsCmmId=(SELECT TOP 1 CMM_ID FROM TD_COMMENT WHERE CMM_CODE=@RlsCmmCode )
    END
    IF @DtgID = 0
       OR @DtgID IS NULL
        BEGIN
            RETURN 0;
        END
    UPDATE TD_RELEASE
    SET    RLS_VERSION            = @RlsVersion,
           RLS_REVISION           = @RlsRevision,
           RLS_LIVE_FLAG          = @RlsLiveFlag,
           RLS_LIVE_DATETIME_FROM = @RlsLiveDatetimeFrom,
           RLS_LIVE_DATETIME_TO   = @RlsLiveDatetimeTo,
           RLS_EXCEPTIONAL_FLAG   = @RlsExceptionalFlag,
           RLS_RESERVATION_FLAG   = @RlsReservationFlag,
           RLS_ARCHIVE_FLAG       = @RlsArchiveFlag,
           RLS_ANALYTICAL_FLAG    = @RlsAnalyticalFlag,
           RLS_EXPERIMENTAL_FLAG  = @RlsExperimentalFlag,
           RLS_PRC_ID             = CASE WHEN @PrcID > 0 THEN @PrcID ELSE NULL END,
           RLS_CMM_ID             = CASE WHEN @RlsCmmId IS NOT NULL THEN @RlsCmmId ELSE RLS_CMM_ID END
    WHERE  RLS_CODE = @RlsCode
           AND RLS_DELETE_FLAG = 0;
    SET @updateCount = @@ROWCOUNT;
    IF @updateCount > 0
        BEGIN
            DECLARE @AuditUpdateCount AS INT;
            EXECUTE @AuditUpdateCount = Security_Auditing_Update @DtgID, @CcnUsername;
            IF @AuditUpdateCount = 0
                BEGIN
                    SET @eMessage = 'Error creating entry in TD_AUDITING for Release update:' + CAST (isnull(@RlsCode, 0) AS VARCHAR) + ' DTG ID: ' + @DtgID;
                    RAISERROR (@eMessage, 16, 1);
                    RETURN;
                END
        END
    IF @PrcCode IS NOT NULL
        BEGIN
            DECLARE @ReleaseId AS INT;
            DECLARE @ProductId AS INT;
            DECLARE @Count AS INT;
            SELECT @ReleaseId = RLS_ID
            FROM   TD_RELEASE
            WHERE  RLS_CODE = @RlsCode;
            SELECT @ProductId = PRC_ID
            FROM   TD_PRODUCT
            WHERE  PRC_CODE = @PrcCode;
            SELECT @Count = COUNT(*)
            FROM   TM_RELEASE_PRODUCT
            WHERE  RPR_RLS_ID = @ReleaseId
                   AND RPR_PRC_ID = @ProductId
                   AND RPR_DELETE_FLAG = 0;
            IF @Count > 0
                BEGIN
                    DECLARE @auditId AS INT = NULL;
                    EXECUTE @auditId = Security_Auditing_Create @CcnUsername;
                    IF @auditId IS NULL
                       OR @auditId = 0
                        BEGIN
                            RAISERROR ('SP: Security_Auditing_Create has failed!', 16, 1);
                            RETURN 0;
                        END
                    UPDATE TM_RELEASE_PRODUCT
                    SET    RPR_DELETE_FLAG = 1,
                           RPR_DTG_ID      = @auditId
                    WHERE  RPR_RLS_ID = @ReleaseId
                           AND RPR_PRC_ID = @ProductId
                           AND RPR_DELETE_FLAG = 0;
                END
        END
    RETURN @updateCount;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Update].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Update].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Update].[@RlsCmmCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Update].[@RlsVersion]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Update].[@RlsRevision]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Update].[@RlsLiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Update].[@RlsLiveDatetimeFrom]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Update].[@RlsLiveDatetimeTo]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Update].[@RlsExceptionalFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Update].[@RlsReservationFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Update].[@RlsArchiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Update].[@RlsAnalyticalFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Update].[@RlsExperimentalFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_Update].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Update].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Update].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Update].[@RlsVersion]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Update].[@RlsRevision]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Update].[@RlsLiveFlag]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Update].[@RlsLiveDatetimeFrom]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Update].[@RlsLiveDatetimeTo]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Update].[@RlsExceptionalFlag]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Update].[@RlsReservationFlag]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Update].[@RlsArchiveFlag]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Update].[@RlsExperimentalFlag]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Update].[@RlsAnalyticalFlag]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Update].[@PrcCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_Update].[@RlsCmmCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="3994" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE Data_Release_Update&#xD;&#xA;@CcnUsername NVARCHAR (256), @RlsCode INT, @RlsVersion INT, @RlsRevision INT, @RlsLiveFlag BIT, @RlsLiveDatetimeFrom DATETIME=NULL, @RlsLiveDatetimeTo DATETIME=NULL, @RlsExceptionalFlag BIT, @RlsReservationFlag BIT, @RlsArchiveFlag BIT, @RlsExperimentalFlag BIT, @RlsAnalyticalFlag BIT, @PrcCode NVARCHAR (32)=NULL, @RlsCmmCode INT=NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_Release_WIP]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT rls.RLS_CODE AS RlsCode
		,rls.RLS_VERSION AS RlsVersion
		,rls.RLS_REVISION AS RlsRevision
		,rls.RLS_LIVE_FLAG AS RlsLiveFlag
		,rls.RLS_LIVE_DATETIME_FROM AS RlsLiveDatetimeFrom
		,rls.RLS_LIVE_DATETIME_TO AS RlsLiveDatetimeTo
		,rls.RLS_EXCEPTIONAL_FLAG AS RlsExceptionalFlag
		,rls.RLS_RESERVATION_FLAG AS RlsReservationFlag
		,rls.RLS_ARCHIVE_FLAG AS RlsArchiveFlag
		,rls.RLS_EXPERIMENTAL_FLAG AS RlsExperimentalFlag
		,rls.RLS_ANALYTICAL_FLAG AS RlsAnalyticalFlag
		,mtrView_mtrRls.MTR_CODE AS MtrCode
	FROM (
		SELECT mtrRls.*
			,mtrView.VRW_RLS_ID
		FROM (
			SELECT mtr.MTR_CODE
				,mtr.MTR_ID
				,mtr.MTR_RLS_ID
				,rls.RLS_CODE
			FROM TD_RELEASE rls
			INNER JOIN TD_MATRIX mtr
				ON rls.RLS_ID = mtr.MTR_RLS_ID
					AND mtr.MTR_DELETE_FLAG = 0
					AND rls.RLS_DELETE_FLAG = 0
			) mtrRls
		INNER JOIN (
			SELECT wip.VRW_MTR_ID
				,wip.VRW_RLS_ID
				,mtr.MTR_CODE
			FROM VW_RELEASE_WIP wip
			INNER JOIN TD_MATRIX mtr
				ON mtr.MTR_ID = wip.VRW_MTR_ID
			) mtrView
			ON mtrRls.MTR_CODE = mtrView.MTR_CODE
		) mtrView_mtrRls
	INNER JOIN TD_RELEASE rls
		ON rls.RLS_ID = mtrView_mtrRls.MTR_RLS_ID
	WHERE rls.RLS_CODE = @RlsCode
		AND rls.RLS_DELETE_FLAG = 0
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_WIP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_WIP].[VRW_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_WIP].[VRW_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_WIP].[VRW_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_Release_WIP].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_Release_WIP].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="425" />
				<Property Name="Length" Value="1744" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 29/11/2018&#xD;&#xA;-- Description:&#x9;Gets the Live Current Release for a Release Code. &#xD;&#xA;-- This is where the current data is after the start date and (before the end date or the end date is null)&#xD;&#xA;-- The returned release entry must have the same Matrix Code as that of the input RlsCode&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Data_Release_WIP @RlsCode INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_ReleaseProduct_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
	DECLARE @ReleaseId int
	DECLARE @ProductId int
	DECLARE @ReleaseProductId int
	DECLARE @Count int
	DECLARE @auditId AS INT = NULL;

	SELECT @ReleaseId = RLS_ID, @ReleaseProductId = RLS_PRC_ID from TD_RELEASE
	WHERE RLS_CODE = @ReleaseCode
	AND RLS_DELETE_FLAG = 0

	IF @ReleaseId IS NULL
	BEGIN
	    RETURN -3
	END

	SELECT @ProductId = PRC_ID
    FROM   TD_PRODUCT
    WHERE  PRC_CODE = @ProductCode
	AND PRC_DELETE_FLAG = 0

	IF @ProductId IS NULL
	BEGIN
		RETURN -2
	END

	--If you are trying to associate the Product with the core Product, this is a duplicate, return -1
	IF @ProductId = @ReleaseProductId
	BEGIN
		RETURN -1
	END
	SELECT @Count = COUNT(*) FROM TM_RELEASE_PRODUCT
	WHERE RPR_RLS_ID = @ReleaseId
	AND RPR_PRC_ID = @ProductId
	AND RPR_DELETE_FLAG = 0

	-- If the Product is associated with the Release already i.e. a duplicate, return -1
	IF @Count > 0
	BEGIN
		RETURN -1
	END

	EXECUTE @auditId = Security_Auditing_Create @userName;
    IF @auditId IS NULL
       OR @auditId = 0
    BEGIN
        RAISERROR ('SP: Security_Auditing_Create has failed!', 16, 1);
        RETURN 0;
    END
    INSERT INTO TM_RELEASE_PRODUCT (RPR_RLS_ID, RPR_PRC_ID, RPR_DTG_ID, RPR_DELETE_FLAG)
    VALUES(@ReleaseID, @ProductID, @auditId, 0);
    RETURN @@IDENTITY;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_ReleaseProduct_Create].[@ReleaseCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_ReleaseProduct_Create].[@ProductCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_ReleaseProduct_Create].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_ReleaseProduct_Create].[@ReleaseCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_ReleaseProduct_Create].[@ProductCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_ReleaseProduct_Create].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="1497" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE     PROCEDURE [dbo].[Data_ReleaseProduct_Create]&#xD;&#xA;@ReleaseCode NVARCHAR (256), @ProductCode NVARCHAR (256), @userName NVARCHAR (256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_ReleaseProduct_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @auditId AS INT = NULL;
	SELECT @auditId = RPR_DTG_ID FROM TM_RELEASE_PRODUCT
	WHERE RPR_RLS_ID = (
			SELECT RLS_ID
			FROM TD_RELEASE
			WHERE RLS_CODE = @ReleaseCode
			AND RLS_DELETE_FLAG=0
			)
		AND RPR_PRC_ID = (
			SELECT PRC_ID
			FROM TD_PRODUCT
			WHERE PRC_CODE = @ProductCode
			AND PRC_DELETE_FLAG =0 
			)
		AND RPR_DELETE_FLAG = 0

	EXECUTE @auditId = Security_Auditing_Delete @auditId, @userName;

	IF @auditId IS NULL
		OR @auditId = 0
	BEGIN
		RAISERROR (
				'SP: Security_Auditing_Delete has failed!'
				,16
				,1
				);

		RETURN 0;
	END

	UPDATE TM_RELEASE_PRODUCT
	SET RPR_DELETE_FLAG = 1
		,RPR_DTG_ID = @auditId
	WHERE RPR_RLS_ID = (
			SELECT RLS_ID
			FROM TD_RELEASE
			WHERE RLS_CODE = @ReleaseCode
			AND RLS_DELETE_FLAG=0
			)
		AND RPR_PRC_ID = (
			SELECT PRC_ID
			FROM TD_PRODUCT
			WHERE PRC_CODE = @ProductCode
			AND PRC_DELETE_FLAG =0 
			)
		AND RPR_DELETE_FLAG = 0

	RETURN @@ROWCOUNT;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_ReleaseProduct_Delete].[@ReleaseCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_ReleaseProduct_Delete].[@ProductCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Delete]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_ReleaseProduct_Delete].[@userName]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_ReleaseProduct_Delete].[@ReleaseCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_ReleaseProduct_Delete].[@ProductCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_ReleaseProduct_Delete].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="1157" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[Data_ReleaseProduct_Delete] @ReleaseCode INT&#xD;&#xA;&#x9;,@ProductCode NVARCHAR(256)&#xD;&#xA;&#x9;,@userName NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Data_ReleaseProduct_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;

	SELECT   PRC_CODE AS PrcCode,
             PRC_VALUE AS PrcValue,
             SBJ_CODE AS SbjCode,
             SBJ_VALUE AS SbjValue
    FROM     (SELECT TD_PRODUCT.PRC_ID, TD_PRODUCT.PRC_CODE,
                     SBJ_CODE,
                     COALESCE (PLG_Value, PRC_VALUE) AS PRC_VALUE,
                     COALESCE (SLG_VALUE, SBJ_VALUE) AS SBJ_VALUE,
                     PRC_DELETE_FLAG,
                     RLS_DELETE_FLAG
              FROM   TD_PRODUCT
                     INNER JOIN
                     [TD_SUBJECT]
                     ON SBJ_ID = PRC_SBJ_ID
                        AND SBJ_DELETE_FLAG = 0
                     LEFT OUTER JOIN
                     (SELECT   PRC_CODE,
                               COUNT(*) AS mtrCount
                      FROM     (SELECT DISTINCT PRC_CODE,
                                                MTR_CODE
                                FROM   TD_PRODUCT
                                       INNER JOIN
                                       TD_RELEASE
                                       ON PRC_ID = RLS_PRC_ID
                                          AND PRC_DELETE_FLAG = 0
                                          AND RLS_DELETE_FLAG = 0
                                       INNER JOIN
                                       TD_MATRIX
                                       ON MTR_RLS_ID = RLS_ID
                                          AND MTR_DELETE_FLAG = 0) AS prcInner
                     GROUP BY PRC_CODE) AS prcMtrCounter
                     ON TD_PRODUCT.PRC_CODE = prcMtrCounter.PRC_CODE
                     LEFT OUTER JOIN
                     (SELECT SLG_SBJ_ID,
                             SLG_VALUE
                      FROM   TD_SUBJECT_LANGUAGE
                             INNER JOIN
                             TS_LANGUAGE
                             ON SLG_LNG_ID = LNG_ID
                                AND LNG_DELETE_FLAG = 0
                                AND LNG_ISO_CODE = @LngIsoCode) AS INNER_SLG
                     ON SBJ_ID = INNER_SLG.SLG_SBJ_ID
                     LEFT OUTER JOIN
                     (SELECT prg.PLG_PRC_ID,
                             prg.PLG_VALUE
                      FROM   TD_PRODUCT_LANGUAGE AS prg
                             INNER JOIN
                             TS_LANGUAGE
                             ON prg.PLG_LNG_ID = LNG_ID
                                AND LNG_DELETE_FLAG = 0
                                AND LNG_ISO_CODE = @LngIsoCode) AS INNER_PRG
                     ON PRC_ID = INNER_PRG.PLG_PRC_ID
                     LEFT OUTER JOIN
                     TD_RELEASE
                     ON RLS_PRC_ID = PRC_ID
                        AND RLS_DELETE_FLAG = 0
                        AND RLS_id IN (SELECT VRN_RLS_ID
                                       FROM   VW_RELEASE_LIVE_NOW)) AS INNER_SELECT
					LEFT OUTER JOIN
					TD_MATRIX
					ON MTR_RLS_ID = (SELECT RLS_ID FROM TD_RELEASE WHERE RLS_CODE = @ReleaseCode)

    WHERE    PRC_ID IN (SELECT RPR_PRC_ID FROM TM_RELEASE_PRODUCT WHERE RPR_RLS_ID = (SELECT RLS_ID FROM TD_RELEASE WHERE RLS_CODE = @ReleaseCode) 
	AND RPR_DELETE_FLAG = 0)
	group by MTR_CODE, PRC_CODE, PRC_VALUE, SBJ_CODE, SBJ_VALUE 
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_ReleaseProduct_Read].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Data_ReleaseProduct_Read].[@ReleaseCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_ReleaseProduct_Read].[@ReleaseCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Data_ReleaseProduct_Read].[@LngIsoCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="3433" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE   PROCEDURE [dbo].[Data_ReleaseProduct_Read]&#xD;&#xA;@ReleaseCode INT, @LngIsoCode CHAR (2)=NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_ACCOUNT_CCN_DELETE_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="37" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_ACCOUNT_CCN_NOTIFICATION_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_NOTIFICATION_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="38" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_ALERT_LRT_DELETE_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_ALERT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="39" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_ANALYTIC_NLT_BOT_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_BOT_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="40" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_ANALYTIC_NLT_M2M]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_M2M_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="41" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_ANALYTIC_NLT_USER_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_USER_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="42" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_ANALYTIC_NTL_DATE]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="43" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_CLASSIFICATION_CLS_GEO_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_CLASSIFICATION]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_CLASSIFICATION].[CLS_GEO_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="44" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_COMMENT_CMM_DELETE_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="45" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_DIMENSION_ITEM_DMT_DECIMAL]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_DECIMAL]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="46" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_DIMENSION_ITEM_DMT_ELIMINATION_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_ELIMINATION_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="47" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_GEOLAYER_DELETE_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="48" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_GEOMAP_GMP_DELETE_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_GEOMAP]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="49" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_GEOMAP_GMP_FEATURE_COUNT]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_GEOMAP]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_FEATURE_COUNT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="50" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_GROUP_GRP_CONTACT_NAME]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(NULL)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CONTACT_NAME]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="51" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_GROUP_GRP_CONTACT_PHONE]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(NULL)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CONTACT_PHONE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="52" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_GROUP_GRP_DELETE_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="53" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_KEYWORD_PRODUCT_KPR_MADATORY_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_MANDATORY_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="54" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_KEYWORD_PRODUCT_KPR_SINGULARISED_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_SINGULARISED_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="55" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_KEYWORD_RELEASE_KRL_MANDATORY_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_MANDATORY_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="56" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_KEYWORD_RELEASE_KRL_SINGULARISED_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_SINGULARISED_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="57" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_KEYWORD_SUBJECT_KSB_MANDATORY_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_MANDATORY_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="58" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_KEYWORD_SUBJECT_KSB_SINGULARISED_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_SINGULARISED_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="59" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_MATRIX_DATA_MTD_DECIMAL]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DATA]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DATA].[MTD_DECIMAL]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="60" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_MATRIX_DIMENSION_MDM_GEO_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_GEO_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="61" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_MATRIX_MTR_DATA_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DATA_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="62" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_MATRIX_MTR_DELETE_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="63" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_MATRIX_MTR_OFFICIAL_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_OFFICIAL_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="64" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_PRODUCT_PRC_DELETE_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="65" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_RELEASE_RLS_ANALYTICAL_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="66" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_RELEASE_RLS_ARCHIVE_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="67" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_RELEASE_RLS_CMM_ID]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(NULL)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CMM_ID]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="68" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_RELEASE_RLS_DELETE_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="69" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_RELEASE_RLS_EXCEPTIONAL_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="70" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_RELEASE_RLS_EXPERIMENTAL_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="71" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_RELEASE_RLS_LIVE_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="72" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_RELEASE_RLS_RESERVATION_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="73" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_STATISTIC_STT_DECIMAL]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_STATISTIC]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_STATISTIC].[STT_DECIMAL]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="74" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_SUBJECT_SBJ_DELETE_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="75" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_THEME_THM_DELETE_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_THEME]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="76" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_WORKFLOW_REQUEST_WRQ_CURRENT_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CURRENT_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="77" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_WORKFLOW_REQUEST_WRQ_DELETE_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="78" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TD_WORKFLOW_REQUEST_WRQ_EXPERIMENTAL_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_EXPERIMENTAL_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="79" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TM_GROUP_ACCOUNT_GCC_APPROVE_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_APPROVE_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="80" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TM_GROUP_ACCOUNT_GCC_DELETE_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="81" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TM_REASON_RELEASE_RSR_DELETE_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="82" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TR_MATRIX_ANALYTIC_MNL_BOT]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_BOT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="83" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TR_MATRIX_ANALYTIC_MNL_M2M]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_M2M]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="84" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TR_MATRIX_ANALYTIC_MNL_TOTAL]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_TOTAL]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="85" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TR_MATRIX_ANALYTIC_MNL_USER]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_USER]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="86" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TR_MATRIX_ANALYTIC_MNL_WIDGET]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_WIDGET]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="87" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TS_COPYRIGHT_CPR_DELETE_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="88" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TS_LANGUAGE_LNG_DELETE_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="89" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TS_REASON_RSN_DELETE_FLAG]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_REASON]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="90" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_ACCOUNT_TD_AUDITING]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="91" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_ACCOUNT_TD_USER]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="92" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_ACCOUNT_TS_PRIVILEGE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_PRV_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="93" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_ALERT_LANGUAGE_TD_ALERT]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_ALERT_LANGUAGE].[LLN_LRT_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_ALERT_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_ALERT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="94" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_ALERT_LANGUAGE_TS_LANGUAGE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_ALERT_LANGUAGE].[LLN_LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_ALERT_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="95" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_ALERT_TD_AUDITING]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_ALERT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="96" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_ANALYTIC_TD_MATRIX]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MTR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="97" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_CHANNEL_SUBSCRIPTION_TD_USER]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_USR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="98" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_CLASSIFICATION_TD_MATRIX]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_CLASSIFICATION].[CLS_MTR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_CLASSIFICATION]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="99" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_COMMENT_TD_AUDITING]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="100" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_DIMENSION_ITEM_TD_MATRIX_DIMENSION]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_MDM_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="101" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_FREQUENCY_TD_MATRIX]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_FREQUENCY].[FRQ_MTR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_FREQUENCY]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="102" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_GEOLAYER_TD_AUDITING]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="103" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_GEOMAP_TD_AUDITING]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_GEOMAP]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="104" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_GEOMAP_TD_GEOLAYER]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_GEOMAP].[GMP_GLR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_GEOMAP]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER].[GLR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="105" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_GROUP_TD_AUDITING]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="106" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_KEYWORD_PRODUCT_TD_PRODUCT]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_PRC_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="107" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_KEYWORD_RELEASE_TD_RELEASE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_RLS_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="108" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_KEYWORD_SUBJECT_TD_SUBJECT]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_SBJ_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="109" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_LOGIN_TD_ACCOUNT]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_CCN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="110" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_MATRIX_DATA_TD_MATRIX]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DATA].[MTD_MTR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DATA]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="111" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_MATRIX_DIMENSION_TD_MATRIX]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="112" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_MATRIX_DIMENSION_TS_DIMENSION_ROLE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_DMR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="113" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_MATRIX_TD_AUDITING]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="114" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_MATRIX_TD_RELEASE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="115" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_MATRIX_TS_COPYRIGHT]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CPR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="116" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_MATRIX_TS_FORMAT]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_FRM_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_FORMAT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="117" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_MATRIX_TS_LANGUAGE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="118" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_PRODUCT_LANGUAGE_TD_PRODUCT]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_PRC_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="119" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_PRODUCT_LANGUAGE_TS_LANGUAGE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="120" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_PRODUCT_TD_AUDITING]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="121" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_PRODUCT_TS_LANGUAGE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="122" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_PRODUCT_TS_SUBJECT]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="123" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_RELEASE_TD_AUDITING]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="124" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_RELEASE_TD_COMMENT]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CMM_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="125" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_RELEASE_TD_GROUP]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="126" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_RELEASE_TD_PRODUCT]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="127" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_STATISTIC_TD_MATRIX]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_STATISTIC].[STT_MTR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_STATISTIC]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="128" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_SUBJECT_LANGUAGE_TD_SUBJECT]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_SBJ_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="129" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_SUBJECT_LANGUAGE_TS_LANGUAGE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="130" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_SUBJECT_TD_THEME]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_THM_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_THEME]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="131" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_SUBJECT_TS_LANGUAGE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="132" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_SUBSCRIBER_TD_USER]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_USR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="133" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_THEME_LANGUAGE_TD_THEME]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE].[TLG_THM_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_THEME]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="134" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_THEME_LANGUAGE_TS_LANGUAGE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE].[TLG_LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="135" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_THEME_TD_AUDITING]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_THEME]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="136" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_THEME_TS_LANGUAGE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_THEME]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="137" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_USER_TS_LANGUAGE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="138" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_WORKFLOW_REQUEST_TD_AUDITING]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="139" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_WORKFLOW_REQUEST_TD_COMMENT]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CMM_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="140" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_WORKFLOW_REQUEST_TD_RELEASE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="141" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_WORKFLOW_REQUEST_TS_REQUEST]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RQS_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_REQUEST]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="142" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_WORKFLOW_RESPONSE_TD_AUDITING]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="143" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_WORKFLOW_RESPONSE_TD_COMMENT]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_CMM_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="144" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_WORKFLOW_RESPONSE_TD_WORKFLOW_REQUEST]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_WRQ_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="145" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_WORKFLOW_RESPONSE_TS_RESPONSE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_RSP_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_RESPONSE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="146" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_WORKFLOW_SIGNOFF_TD_AUDITING]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="147" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_WORKFLOW_SIGNOFF_TD_COMMENT]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_CMM_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="148" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_WORKFLOW_SIGNOFF_TD_WORKFLOW_RESPONSE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_WRS_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="149" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TD_WORKFLOW_SIGNOFF_TS_SIGNOFF]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_SGN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="150" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TM_APP_SETTING_CONFIG_VERSION_TS_CONFIG_SETTING_TYPE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_CST_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="151" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TM_AUDITING_HISTORY_TD_ACCOUNT]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_CCN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="152" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TM_AUDITING_HISTORY_TD_AUDITING]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="153" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TM_AUDITING_HISTORY_TS_AUDITING_TYPE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTP_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="154" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TM_CHANNEL_SUBSCRIPTION_TS_CHANNEL]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_CHN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_CHANNEL].[CHN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_CHANNEL]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="155" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TM_GROUP_ACCOUNT_TD_ACCOUNT]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_CCN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="156" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TM_GROUP_ACCOUNT_TD_AUDITING]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="157" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TM_GROUP_ACCOUNT_TD_GROUP]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_GRP_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="158" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TM_HISTORY_APP_SETTING_CONFIG_VERSION_DEPLOY_TM_HISTORY_APP_SETTING_CONFIG_VERSION]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION_DEPLOY].[HCD_HSV_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION_DEPLOY]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION].[HSV_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="159" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TM_HISTORY_APP_SETTING_CONFIG_VERSION_TM_APP_SETTING_CONFIG_VERSION]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION].[HSV_ASV_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="160" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TM_HISTORY_APP_SETTING_CONFIG_VERSION_TS_CONFIG_SETTING_TYPE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION].[HSV_CST_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="161" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TM_REASON_RELEASE_TD_AUDITING]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="162" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TM_REASON_RELEASE_TD_COMMENT]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_CMM_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="163" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TM_REASON_RELEASE_TD_RELEASE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_RLS_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="164" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TM_REASON_RELEASE_TS_REASON]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_RSN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_REASON]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="165" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TM_RELEASE_PRODUCT_TD_AUDITING]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="166" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TM_RELEASE_PRODUCT_TD_PRODUCT]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_PRC_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="167" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TM_RELEASE_PRODUCT_TD_RELEASE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_RLS_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="168" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TM_TABLE_SUBSCRIPTION_TD_USER]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_USR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="169" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TS_API_SETTING_APP_SETTING_VERSION]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_ASV_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_API_SETTING]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="170" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TS_APP_SETTING_APP_SETTING_VERSION]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_ASV_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="171" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TS_CHANNEL_LANGUAGE_TS_CHANNEL]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TS_CHANNEL_LANGUAGE].[CHL_CHN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_CHANNEL_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_CHANNEL].[CHN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_CHANNEL]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="172" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TS_CHANNEL_LANGUAGE_TS_LANGUAGE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TS_CHANNEL_LANGUAGE].[CHL_LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_CHANNEL_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="173" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TS_COPYRIGHT_TD_AUDITING]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="174" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TS_HISTORY_API_SETTING_APP_SETTING]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TS_HISTORY_API_SETTING].[HPI_API_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_HISTORY_API_SETTING]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_API_SETTING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="175" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TS_HISTORY_API_SETTING_APP_SETTING_VERSION]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TS_HISTORY_API_SETTING].[HPI_ASV_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_HISTORY_API_SETTING]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="176" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TS_HISTORY_APP_SETTING_APP_SETTING]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TS_HISTORY_APP_SETTING].[HPP_APP_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_HISTORY_APP_SETTING]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="177" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TS_HISTORY_APP_SETTING_APP_SETTING_VERSION]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TS_HISTORY_APP_SETTING].[HPP_ASV_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_HISTORY_APP_SETTING]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="178" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TS_LANGUAGE_TD_AUDITING]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="179" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TS_REASON_LANGUAGE_TS_LANGUAGE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TS_REASON_LANGUAGE].[RLG_LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_REASON_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="180" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TS_REASON_LANGUAGE_TS_REASON]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TS_REASON_LANGUAGE].[RLG_RSN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_REASON_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_REASON]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="181" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TS_REASON_TD_AUDITING]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_REASON]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="182" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TS_REASON_TS_LANGUAGE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_REASON]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="183" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TS_SUBJECT_TD_AUDITING]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="184" />
		</Element>
		<Element Type="SqlTableType" Name="[dbo].[KeyValueVarchar]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[KeyValueVarchar].[Key]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[KeyValueVarchar].[Value]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[dbo].[KeyValueVarcharAttribute]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[KeyValueVarcharAttribute].[Key]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[KeyValueVarcharAttribute].[Value]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[KeyValueVarcharAttribute].[Attribute]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="185" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Constraints">
				<Entry>
					<Element Type="SqlTableTypeDefaultConstraint">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[((1))]]></Value>
						</Property>
						<Relationship Name="ForColumn">
							<Entry>
								<References Name="[dbo].[KeyValueVarcharAttribute].[Attribute]" />
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="185" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlSequence" Name="[dbo].[KPR_CODE_seq]">
			<Property Name="HasNoMinValue" Value="False" />
			<Property Name="MinValue" Value="1" />
			<Property Name="Increment" Value="1" />
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="TypeSpecifier">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[int]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[KPR_CODE_SEQUENCE]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(NEXT VALUE FOR [dbo].[KPR_CODE_seq])]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ExpressionDependencies">
				<Entry>
					<References Name="[dbo].[KPR_CODE_seq]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_CODE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="186" />
		</Element>
		<Element Type="SqlSequence" Name="[dbo].[KRL_CODE_seq]">
			<Property Name="HasNoMinValue" Value="False" />
			<Property Name="MinValue" Value="1" />
			<Property Name="Increment" Value="1" />
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="TypeSpecifier">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[int]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[KRL_CODE_SEQUENCE]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(NEXT VALUE FOR [dbo].[KRL_CODE_seq])]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ExpressionDependencies">
				<Entry>
					<References Name="[dbo].[KRL_CODE_seq]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_CODE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="187" />
		</Element>
		<Element Type="SqlSequence" Name="[dbo].[KSB_CODE_seq]">
			<Property Name="HasNoMinValue" Value="False" />
			<Property Name="MinValue" Value="1" />
			<Property Name="Increment" Value="1" />
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="TypeSpecifier">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[int]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[KSB_CODE_SEQUENCE]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(NEXT VALUE FOR [dbo].[KSB_CODE_seq])]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ExpressionDependencies">
				<Entry>
					<References Name="[dbo].[KSB_CODE_seq]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_CODE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="188" />
		</Element>
		<Element Type="SqlSequence" Name="[dbo].[LRT_CODE_seq]">
			<Property Name="HasNoMinValue" Value="False" />
			<Property Name="MinValue" Value="1" />
			<Property Name="Increment" Value="1" />
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="TypeSpecifier">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[int]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[LRT_CODE_SEQUENCE]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(NEXT VALUE FOR [LRT_CODE_seq])]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_ALERT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ExpressionDependencies">
				<Entry>
					<References Name="[dbo].[LRT_CODE_seq]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_CODE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="189" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_DTT_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_DATASET].[DTT_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_DATASET]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="190" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_ACCOUNT]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="191" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_ALERT]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ALERT].[LRT_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_ALERT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="192" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_ALERT_LANGUAGE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ALERT_LANGUAGE].[LLN_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_ALERT_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="193" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_ANALYTIC]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ANALYTIC].[NLT_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="194" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_AUDITING]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="195" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_CHANNEL_SUBSCRIPTION]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="196" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_CLASSIFICATION]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_CLASSIFICATION].[CLS_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_CLASSIFICATION]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="197" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_COMMENT]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="198" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_DATA]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_DATA].[TDT_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_DATA]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="199" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_DIMENSION_ITEM]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="200" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_DIMENSION_ROLE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="201" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_FREQUENCY]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_FREQUENCY].[FRQ_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_FREQUENCY]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="202" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_GEOLAYER]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_GEOLAYER].[GLR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="203" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_GEOMAP]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_GEOMAP].[GMP_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_GEOMAP]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="204" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_GROUP]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="205" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_KEYWORD_PRODUCT]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="206" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_KEYWORD_RELEASE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="207" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_KEYWORD_SUBJECT]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="208" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_LOGGING]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_LOGGING].[LGG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_LOGGING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="209" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_LOGIN]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_LOGIN].[LGN_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="210" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_MATRIX]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="211" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_MATRIX_DATA]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_MATRIX_DATA].[MTD_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DATA]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="212" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_MATRIX_DIMENSION]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="213" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_PERFORMANCE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_PERFORMANCE].[PRF_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_PERFORMANCE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="214" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_PERIOD]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_PERIOD].[PRD_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_PERIOD]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="215" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_PRODUCT]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="216" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_PRODUCT_LANGUAGE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="217" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_RELEASE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="218" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_STATISTIC]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_STATISTIC].[STT_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_STATISTIC]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="219" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_SUBJECT_LANGUAGE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="220" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_SUBSCRIBER]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_SUBSCRIBER].[SBR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="221" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_TABLE_SUBSCRIPTION]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="222" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_THEME]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_THEME].[THM_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_THEME]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="223" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_THEME_LANGUAGE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_THEME_LANGUAGE].[TLG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="224" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_TRACE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_TRACE].[TRC_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_TRACE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="225" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_USER]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_USER].[USR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="226" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_USER_QUERY]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_USER_QUERY].[SQR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="227" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_VARIABLE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_VARIABLE].[VRB_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_VARIABLE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="228" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_WORKFLOW_REQUEST]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="229" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_WORKFLOW_RESPONSE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="230" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TD_WORKFLOW_SIGNOFF]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="231" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TM_AUDITING_HISTORY]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="232" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TM_GROUP_ACCOUNT]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="233" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TM_MATRIX_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_MATRIX_FLAG].[MFG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_MATRIX_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="234" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TM_REASON_RELEASE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_REASON_RELEASE].[RSR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="235" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TM_RELEASE_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_RELEASE_FLAG].[RFG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_RELEASE_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="236" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TM_RELEASE_PRODUCT]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="237" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TM_WORKFLOW_REQUEST_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_WORKFLOW_REQUEST_FLAG].[WFG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TM_WORKFLOW_REQUEST_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="238" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TS_AUDITING_TYPE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="239" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TS_CHANNEL]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_CHANNEL].[CHN_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_CHANNEL]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="240" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TS_CHANNEL_LANGUAGE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_CHANNEL_LANGUAGE].[CHL_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_CHANNEL_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="241" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TS_COPYRIGHT]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_COPYRIGHT].[CPR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="242" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TS_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_FLAG].[FLG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_FLAG]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="243" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TS_FORMAT_TYPE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_FORMAT].[FRM_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_FORMAT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="244" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TS_LANGUAGE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="245" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TS_PRIVILEGE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_PRIVILEGE].[PRV_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="246" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TS_REASON]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_REASON].[RSN_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_REASON]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="247" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TS_REASON_LANGUAGE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_REASON_LANGUAGE].[RLG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_REASON_LANGUAGE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="248" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TS_REQUEST]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_REQUEST].[RQS_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_REQUEST]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="249" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TS_RESPONSE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_RESPONSE].[RSP_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_RESPONSE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="250" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TS_SIGNOFF]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_SIGNOFF].[SGN_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="251" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TS_SUBJECT]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="252" />
		</Element>
		<Element Type="SqlSequence" Name="[dbo].[PRC_CODE_seq]">
			<Property Name="HasNoMinValue" Value="False" />
			<Property Name="MinValue" Value="1" />
			<Property Name="Increment" Value="1" />
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="TypeSpecifier">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[int]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Report_TableAudit]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @GroupTable TABLE (Groupie NVARCHAR(MAX));
	DECLARE @ReasonTable TABLE (Reason NVARCHAR(MAX));

	IF @GrpCode IS NOT NULL
	BEGIN
		INSERT INTO @GroupTable (Groupie) (SELECT value FROM STRING_SPLIT(@GrpCode, ','));
	END

	IF @RsnCode IS NOT NULL
	BEGIN
		INSERT INTO @ReasonTable (Reason) (SELECT value FROM STRING_SPLIT(@RsnCode, ','));
	END

	SELECT DISTINCT RSN_CODE AS RsnCode
		,RSN_VALUE_EXTERNAL AS RsnValueExternal
		,RSN_VALUE_INTERNAL AS RsnValueInternal
		,GRP_CODE AS GrpCode
		,GRP_NAME AS GrpName
		,TD_MATRIX.MTR_CODE AS MtrCode
		,TD_MATRIX.MTR_TITLE AS MtrTitle
		,MDM_CODE AS FrqCode
		,MDM_VALUE AS FrqValue
		,RLS_VERSION AS RlsVersion
		,RLS_REVISION AS RlsRevision
		,MTR_NOTE AS MtrNote
		,RLS_EXCEPTIONAL_FLAG AS RlsExceptionalFlag
		,RLS_LIVE_DATETIME_FROM AS RlsLiveDatetimeFrom
		,RLS_LIVE_DATETIME_To AS RlsLiveDatetimeTo
	FROM TD_RELEASE
	LEFT JOIN TM_REASON_RELEASE ON RSR_RLS_ID = RLS_ID
		AND RSR_DELETE_FLAG = 0
	LEFT JOIN TS_REASON ON RSR_RSN_ID = RSN_ID
	INNER JOIN TD_MATRIX ON MTR_RLS_ID = RLS_ID
	INNER JOIN TS_LANGUAGE ON MTR_LNG_ID = LNG_ID
		AND LNG_ISO_CODE = @LngIsoCode
	INNER JOIN TD_GROUP ON RLS_GRP_ID = GRP_ID
	INNER JOIN TD_MATRIX_DIMENSION ON MDM_MTR_ID = MTR_ID
	INNER JOIN TS_DIMENSION_ROLE ON MDM_DMR_ID = DMR_ID
	WHERE (
			@GrpCode IS NULL
			OR (
				GRP_CODE IN (
					SELECT Groupie
					FROM @GroupTable
					)
				)
			)
		AND (
			@RsnCode IS NULL
			OR (
				RSN_CODE IN (
					SELECT Reason
					FROM @ReasonTable
					)
				)
			)
		AND (
			RLS_LIVE_DATETIME_FROM BETWEEN @StartDate
				AND @EndDate
			)
		AND DMR_CODE = 'TIME'
		AND RLS_LIVE_FLAG = 1;

	RETURN;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[Report_TableAudit].[@GrpCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Report_TableAudit].[@GroupTable].[Groupie]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[Report_TableAudit].[@RsnCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Report_TableAudit].[@ReasonTable].[Reason]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_RSN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Report_TableAudit].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_VALUE_EXTERNAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_VALUE_INTERNAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_NOTE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Report_TableAudit].[@GroupTable].[Groupie]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Report_TableAudit].[@ReasonTable].[Reason]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Report_TableAudit].[@StartDate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Report_TableAudit].[@EndDate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Report_TableAudit].[@GroupTable]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Report_TableAudit].[@GroupTable].[Groupie]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Report_TableAudit].[@ReasonTable]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Report_TableAudit].[@ReasonTable].[Reason]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Report_TableAudit].[@StartDate]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Report_TableAudit].[@EndDate]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Report_TableAudit].[@GrpCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Report_TableAudit].[@RsnCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Report_TableAudit].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="359" />
				<Property Name="Length" Value="2288" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:        Liam Millar&#xD;&#xA;-- Create date: Revised 28/10/2022&#xD;&#xA;-- Description:    Gets the ever live releases that were public in a particluar time period based on group and reason&#xD;&#xA;-- exec Report_Release_Audit '2022-10-13','2022-11-10',NULL,NULL,'en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[Report_TableAudit] @StartDate DATETIME = NULL&#xD;&#xA;&#x9;,@EndDate DATETIME = NULL&#xD;&#xA;&#x9;,@GrpCode NVARCHAR(MAX) = NULL&#xD;&#xA;&#x9;,@RsnCode NVARCHAR(MAX) = NULL&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlSequence" Name="[dbo].[RLS_CODE_seq]">
			<Property Name="HasNoMinValue" Value="False" />
			<Property Name="MinValue" Value="1" />
			<Property Name="Increment" Value="1" />
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="TypeSpecifier">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[int]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[RLS_CODE_SEQUENCE]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(NEXT VALUE FOR [dbo].[RLS_CODE_seq])]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ExpressionDependencies">
				<Entry>
					<References Name="[dbo].[RLS_CODE_seq]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="253" />
		</Element>
		<Element Type="SqlSequence" Name="[dbo].[SBJ_CODE_seq]">
			<Property Name="HasNoMinValue" Value="False" />
			<Property Name="MinValue" Value="1" />
			<Property Name="Increment" Value="1" />
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="TypeSpecifier">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[int]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[SBJ_CODE_SEQUENCE]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(NEXT VALUE FOR [dbo].[SBJ_CODE_seq])]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
			</Relationship>
			<Relationship Name="ExpressionDependencies">
				<Entry>
					<References Name="[dbo].[SBJ_CODE_seq]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="254" />
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Account_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT = NULL
	DECLARE @PrivilegeID INT = NULL
	DECLARE @errorMessage VARCHAR(256)
	DECLARE @LngId INT
	DECLARE @UserId INT

	-- Do the create Audit and get the new DtgID from the stored procedure
	EXEC @DtgID = Security_Auditing_Create @CcnUsernameCreator

	-- Check for problems with the audit stored procedure
	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		RAISERROR (
				'Error in calling Security_Auditing_Create'
				,16
				,1
				)

		RETURN 0
	END

	--Get the Privilege ID corresponding to the supplied @PrvCode
	SET @PrivilegeID = (
			SELECT PRV_ID
			FROM TS_PRIVILEGE
			WHERE PRV_CODE = @PrvCode
			)

	IF @PrivilegeID IS NULL
	BEGIN
		SET @errorMessage = 'No Privilege entry found for Privilege code: ' + cast(isnull(@PrvCode, 0) AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				)

		RETURN 0
	END

	IF @CcnNotificationFlag IS NULL
	BEGIN
		SET @CcnNotificationFlag = 1
	END

	SET @LngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)

	IF @LngId IS NULL
	BEGIN
		RETURN 0
	END

	INSERT INTO TD_USER (USR_LNG_ID)
	VALUES (@LngId)

	SET @UserId=@@IDENTITY

	INSERT INTO TD_ACCOUNT (
		CCN_USERNAME
		,CCN_PRV_ID
		,CCN_NOTIFICATION_FLAG
		,CCN_DTG_ID
		,CCN_DELETE_FLAG
		,CCN_LOCKED_FLAG
		,CCN_AD_FLAG
		,CCN_DISPLAYNAME
		,CCN_EMAIL
		,CCN_USR_ID 
		)
	VALUES (
		@CcnUsernameNewAccount
		,@PrivilegeID
		,@CcnNotificationFlag
		,@DtgID
		,0
		,@CcnLockedFlag
		,@CcnADFlag
		,@CcnDisplayName
		,@CcnEmail
		,@UserId 
		)

	RETURN @@IDENTITY
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_Create].[@CcnUsernameCreator]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_Create].[@PrvCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_Create].[@CcnNotificationFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_Create].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_NOTIFICATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_LOCKED_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_AD_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DISPLAYNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_EMAIL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_Create].[@CcnUsernameNewAccount]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_Create].[@CcnLockedFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_Create].[@CcnADFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_Create].[@CcnDisplayName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_Create].[@CcnEmail]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_Create].[@CcnUsernameCreator]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_Create].[@CcnUsernameNewAccount]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_Create].[@PrvCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_Create].[@CcnNotificationFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_Create].[@CcnLockedFlag]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_Create].[@CcnADFlag]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_Create].[@CcnDisplayName]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_Create].[@CcnEmail]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_Create].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="189" />
				<Property Name="Length" Value="2181" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 03/10/2018&#xD;&#xA;-- Description:&#x9;Create Account&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Account_Create @CcnUsernameCreator NVARCHAR(256)&#xD;&#xA;&#x9;,@CcnUsernameNewAccount NVARCHAR(256)&#xD;&#xA;&#x9;,@PrvCode NVARCHAR(32)&#xD;&#xA;&#x9;,@CcnNotificationFlag BIT = NULL&#xD;&#xA;&#x9;,@CcnLockedFlag BIT&#xD;&#xA;&#x9;,@CcnADFlag BIT&#xD;&#xA;&#x9;,@CcnDisplayName NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@CcnEmail NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Account_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT
	DECLARE @eMessage VARCHAR(256)
	DECLARE @updateCount INT

	-- check record exists
	SET @DtgID = (
			SELECT CCN_DTG_ID
			FROM TD_ACCOUNT
			WHERE CCN_USERNAME = @CcnUsernameToBeDeleted
				AND CCN_DELETE_FLAG = 0
			)

	IF @DtgID IS NULL
	BEGIN
		--This record doesn't exist
		RETURN 0
	END

	-- do the soft delete
	UPDATE TD_ACCOUNT
	SET CCN_DELETE_FLAG = 1
	WHERE CCN_USERNAME = @CcnUsernameToBeDeleted
		AND CCN_DELETE_FLAG = 0

	SET @updateCount = @@ROWCOUNT

	IF @updateCount > 0
	BEGIN
		-- do the auditing 
		-- Update the Record in the TD_AUDITING table
		DECLARE @AuditUpdateCount INT

		EXEC @AuditUpdateCount = Security_Auditing_Delete @DtgID
			,@CcnUsernameDeleter

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error creating entry in TD_AUDITING for Account delete:' + cast(isnull(@CcnUsernameToBeDeleted, 0) AS VARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN
		END
	END

	-- Return the number of rows deleted
	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_Delete].[@CcnUsernameToBeDeleted]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Delete]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_Delete].[@CcnUsernameDeleter]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_Delete].[@CcnUsernameDeleter]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_Delete].[@CcnUsernameToBeDeleted]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="197" />
				<Property Name="Length" Value="1462" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 03/10/2018&#xD;&#xA;-- Description:&#x9;To delete an account. &#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Account_Delete @CcnUsernameDeleter NVARCHAR(256)&#xD;&#xA;&#x9;,@CcnUsernameToBeDeleted NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Account_PrivilegeCount]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @Count INT
	DECLARE @PrvID INT = NULL
	DECLARE @errorMessage VARCHAR(256)

	SET @errorMessage = 'Privilege code for ' + cast(isnull(@PrvCode, 0) AS VARCHAR) + ' not found'
	SET @PrvID = (
			SELECT PRV_ID
			FROM TS_PRIVILEGE
			WHERE PRV_CODE = @PrvCode
			)

	IF @PrvID IS NULL
	BEGIN
		RAISERROR (
				@errorMessage
				,16
				,1
				)

		RETURN 0
	END

	--Get a count of the Privilege code we are querying
	SET @Count = (
			SELECT count(*)
			FROM TD_ACCOUNT
			WHERE CCN_PRV_ID = @PrvID
				AND CCN_DELETE_FLAG = 0
			)

	--return whether or not there are more than one values for that Privilege code in the account table
	RETURN @Count
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_PrivilegeCount].[@PrvCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_PrivilegeCount].[@PrvCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="232" />
				<Property Name="Length" Value="1030" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 17/10/2018&#xD;&#xA;-- Description:&#x9;To return the count of accounts with a specific privilege&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Account_PrivilegeCount @PrvCode NVARCHAR(32)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Account_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT ccn.CCN_USERNAME AS CcnUsername
		,prv.PRV_CODE AS PrvCode
		,prv.PRV_VALUE AS PrvValue
		,ccn.CCN_NOTIFICATION_FLAG as CcnNotificationFlag
		,ccn.CCN_DISPLAYNAME as CcnDisplayName
		,ccn.CCN_EMAIL as CcnEmail
		,CCN_ID as CcnId
		,CCN_AD_FLAG as CcnAdFlag
		,CCN_LOCKED_FLAG as CcnLockedFlag
		,LGN_2FA as Lgn2Fa
		,LNG_ISO_CODE as LngIsoCode
		,CASE WHEN @IsMe =1 THEN CCN_API_TOKEN ELSE null END AS CcnApiToken
	FROM TD_ACCOUNT ccn
	INNER JOIN TS_PRIVILEGE prv
		ON ccn.CCN_PRV_ID = prv.PRV_ID
			AND ccn.CCN_DELETE_FLAG = 0
	INNER JOIN TD_USER
	ON CCN_USR_ID=USR_ID 
	INNER JOIN TS_LANGUAGE 
	ON USR_LNG_ID=LNG_ID
	LEFT JOIN TD_LOGIN
	ON CCN_ID=LGN_CCN_ID 
	WHERE (
			@CcnUsername IS NULL
			OR ccn.CCN_USERNAME = @CcnUsername
			)
		AND (
			@PrvCode IS NULL
			OR prv.PRV_CODE = @PrvCode
			)
		AND
		(
			@AdFlag IS NULL
			OR CCN_AD_FLAG=@AdFlag 
		)
		AND
		(
			@CcnEmail IS NULL
			OR CCN_EMAIL=@CcnEmail 
		)
	ORDER BY ccn.CCN_USERNAME 
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_NOTIFICATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DISPLAYNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_EMAIL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_AD_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_LOCKED_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_2FA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_Read].[@IsMe]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_API_TOKEN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_Read].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_Read].[@PrvCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_Read].[@AdFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_AD_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_Read].[@CcnEmail]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_EMAIL]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_Read].[@CcnUsername]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_Read].[@PrvCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_Read].[@AdFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_Read].[@CcnEmail]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_Read].[@IsMe]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="238" />
				<Property Name="Length" Value="1456" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 02/10/2018&#xD;&#xA;-- Description:&#x9;Read Account details&#xD;&#xA;-- exec Security_Account_Read 'okeeffene'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Account_Read @CcnUsername NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@PrvCode NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@AdFlag BIT=NULL&#xD;&#xA;&#x9;,@CcnEmail NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@IsMe BIT=NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Account_ReadByTokenAndCcnUsername]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT ccn.CCN_USERNAME AS CcnUsername
		,prv.PRV_CODE AS PrvCode
		,prv.PRV_VALUE AS PrvValue
		,ccn.CCN_NOTIFICATION_FLAG AS CcnNotificationFlag
		,ccn.CCN_DISPLAYNAME AS CcnDisplayName
		,ccn.CCN_EMAIL AS CcnEmail
		,CCN_ID AS CcnId
		,CCN_AD_FLAG AS CcnAdFlag
		,CCN_LOCKED_FLAG AS CcnLockedFlag
		,LGN_2FA AS Lgn2Fa
		,LNG_ISO_CODE AS LngIsoCode
	FROM TD_ACCOUNT ccn
	INNER JOIN TS_PRIVILEGE prv ON ccn.CCN_PRV_ID = prv.PRV_ID
		AND ccn.CCN_DELETE_FLAG = 0
	INNER JOIN TD_USER ON CCN_USR_ID = USR_ID
	INNER JOIN TS_LANGUAGE ON USR_LNG_ID = LNG_ID
	LEFT JOIN TD_LOGIN ON CCN_ID = LGN_CCN_ID
	WHERE @CcnUsername = ccn.CCN_USERNAME
		AND @CcnApiToken = ccn.CCN_API_TOKEN
		AND CCN_DELETE_FLAG=0
		AND CCN_LOCKED_FLAG=0
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_NOTIFICATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DISPLAYNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_EMAIL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_AD_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_LOCKED_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_2FA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_ReadByTokenAndCcnUsername].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_ReadByTokenAndCcnUsername].[@CcnApiToken]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_API_TOKEN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_LOCKED_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_ReadByTokenAndCcnUsername].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_ReadByTokenAndCcnUsername].[@CcnApiToken]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="368" />
				<Property Name="Length" Value="1270" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 14/05/2024&#xD;&#xA;-- Description:&#x9;Read Account details when an API token is available&#xD;&#xA;-- exec Security_Account_ReadByTokenAndCcnUsername 'dissemination@cso.ie','b62b34ff3c798c6fda2282dbfc37f2b94afc90d363cf28ae03b3c31b2ae566b1'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Account_ReadByTokenAndCcnUsername @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@CcnApiToken NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Account_ReadMinimumPrivilege]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @PrvId INT

	SET @PrvID = (
			SELECT PRV_ID
			FROM TS_PRIVILEGE
			WHERE PRV_CODE = @PrvCode
			)

	SELECT ccn.CCN_USERNAME AS CcnUsername
		,prv.PRV_CODE AS PrvCode
		,prv.PRV_VALUE AS PrvValue
		,ccn.CCN_NOTIFICATION_FLAG as CcnNotificationFlag
	FROM TD_ACCOUNT ccn
	INNER JOIN TS_PRIVILEGE prv
		ON ccn.CCN_PRV_ID = prv.PRV_ID
			AND ccn.CCN_DELETE_FLAG = 0
	WHERE (
			(
				@ReadHigherPrivileges = 1
				AND prv.PRV_ID <= @PrvId
				)
			OR (
				@ReadHigherPrivileges = 0
				AND prv.PRV_ID = @PrvId
				)
			)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_ReadMinimumPrivilege].[@PrvCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_NOTIFICATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_ReadMinimumPrivilege].[@ReadHigherPrivileges]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_ReadMinimumPrivilege].[@PrvCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_ReadMinimumPrivilege].[@ReadHigherPrivileges]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="357" />
				<Property Name="Length" Value="1063" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 19/08/2019&#xD;&#xA;-- Description:&#x9;Read Account details for the privilege code and for higher privileges&#xD;&#xA;-- Get users of the specified privilege and higher&#xD;&#xA;-- exec Security_Account_ReadMinimumPrivilege 'MODERATOR',1&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Account_ReadMinimumPrivilege @PrvCode NVARCHAR(32)&#xD;&#xA;&#x9;,@ReadHigherPrivileges BIT = 0&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Account_ReadReleaseApprovers]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;



	DECLARE @PrvId int

	if @PrvCode is not null
	begin
		set @PrvId=(SELECT PRV_ID FROM TS_PRIVILEGE WHERE PRV_CODE=@PrvCode )
	end


	SELECT RLS_CODE as RlsCode
		,CCN_USERNAME as CcnUsername
		,GRP_NAME as GrpName
		,CCN_NOTIFICATION_FLAG as CcnNotificationFlag
	FROM TD_ACCOUNT
	INNER JOIN TM_GROUP_ACCOUNT
		ON CCN_ID = GCC_CCN_ID
			AND CCN_DELETE_FLAG = 0
			AND GCC_DELETE_FLAG = 0
	INNER JOIN TD_GROUP
		ON GCC_GRP_ID = GRP_ID
			AND GRP_DELETE_FLAG = 0
	INNER JOIN TD_RELEASE
		ON RLS_GRP_ID = GRP_ID
			AND RLS_DELETE_FLAG = 0
	
	inner join TS_PRIVILEGE 
		on CCN_PRV_ID=PRV_ID 
		and (@PrvCode is null or(PRV_ID<=@PrvId))
		WHERE  RLS_CODE = @RlsCode
		AND (
			@CcnUsername IS NULL
			OR @CcnUsername = CCN_USERNAME
			)
		AND (@GccApproveFlag is null and 
		GCC_APPROVE_FLAG = 1 or (@GccApproveFlag =GCC_APPROVE_FLAG))
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_ReadReleaseApprovers].[@PrvCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_NOTIFICATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_ReadReleaseApprovers].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_ReadReleaseApprovers].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_ReadReleaseApprovers].[@GccApproveFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_APPROVE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_ReadReleaseApprovers].[@CcnUsername]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_ReadReleaseApprovers].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_ReadReleaseApprovers].[@GccApproveFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_ReadReleaseApprovers].[@PrvCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="300" />
				<Property Name="Length" Value="1372" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 17/01/2019&#xD;&#xA;-- Description:&#x9;Get a list of users who are approvers for a given Release&#xD;&#xA;-- exec Security_Account_ReadReleaseApprovers NULL,6,1,'MODERATOR'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Account_ReadReleaseApprovers @CcnUsername NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@RlsCode INT&#xD;&#xA;&#x9;,@GccApproveFlag bit=null&#xD;&#xA;&#x9;,@PrvCode varchar(32)=null&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Account_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT
	DECLARE @PrvID INT
	DECLARE @eMessage VARCHAR(256)
	DECLARE @updateCount INT
	DECLARE @LngId INT

	SET @DtgID = (
			SELECT CCN_DTG_ID
			FROM TD_ACCOUNT
			WHERE CCN_USERNAME = @UpdatedCcnUsername
				AND CCN_DELETE_FLAG = 0
			)

	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		-- the requested record doesn't exist
		RETURN 0
	END

	IF @LngIsoCode IS NOT NULL
	BEGIN
		SET @LngId = (
				SELECT LNG_ID
				FROM TS_LANGUAGE
				WHERE LNG_ISO_CODE = @LngIsoCode
					AND LNG_DELETE_FLAG = 0
				)

		IF @LngId = 0
			OR @LngId IS NULL
		BEGIN
			RETURN 0
		END
	END

	IF @CcnNotificationFlag IS NULL
	BEGIN
		SET @CcnNotificationFlag = 1
	END

	IF @PrvCode IS NOT NULL
	BEGIN
		SET @PrvID = (
				SELECT PRV_ID
				FROM TS_PRIVILEGE
				WHERE PRV_CODE = @PrvCode
				)

		IF @PrvID = 0
			OR @PrvID IS NULL
		BEGIN
			--the requested Privilege Code does not exist
			RETURN 0
		END
	END

	IF @LngIsoCode IS NOT NULL
	BEGIN
	--Update the language preference in the TD_USER table
	UPDATE TD_USER
		SET USR_LNG_ID = @LngId
		FROM TD_USER
		INNER JOIN TD_ACCOUNT ON CCN_USERNAME = @UpdatedCcnUsername
			AND CCN_USR_ID = USR_ID
	END

	UPDATE TD_ACCOUNT
	SET CCN_PRV_ID =CASE WHEN @PrvCode IS NOT NULL THEN @PrvID ELSE CCN_PRV_ID END
		,CCN_NOTIFICATION_FLAG = Coalesce(@CcnNotificationFlag, CCN_NOTIFICATION_FLAG)
		,CCN_LOCKED_FLAG = Coalesce(@CcnLockedFlag, CCN_LOCKED_FLAG)
	WHERE CCN_USERNAME = @UpdatedCcnUsername
		AND CCN_DELETE_FLAG = 0

	SET @updateCount = @@ROWCOUNT

	IF @CcnLockedFlag = 1
	BEGIN
		UPDATE TD_LOGIN
		SET LGN_SESSION = NULL
			,LGN_SESSION_EXPIRY = NULL
			,LGN_TOKEN_1FA = NULL
			,LGN_TOKEN_2FA = NULL
		FROM TD_LOGIN
		INNER JOIN TD_ACCOUNT ON LGN_CCN_ID = CCN_ID
			AND CCN_USERNAME = @UpdatedCcnUsername
			AND CCN_DELETE_FLAG = 0
	END

	IF @updateCount > 0
	BEGIN
		-- Auditing:
		DECLARE @AuditUpdateCount INT

		EXEC @AuditUpdateCount = Security_Auditing_Update @DtgID
			,@CcnUsernameUpdater

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error creating entry in TD_AUDITING for Account update:' + cast(isnull(@UpdatedCcnUsername, 0) AS VARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN
		END
	END

	--Return the number of rows updated
	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_Update].[@UpdatedCcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_Update].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_Update].[@CcnNotificationFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_Update].[@PrvCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_NOTIFICATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_LOCKED_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_Update].[@CcnLockedFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_SESSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_SESSION_EXPIRY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_TOKEN_1FA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_TOKEN_2FA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_Update].[@CcnUsernameUpdater]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_Update].[@CcnUsernameUpdater]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_Update].[@UpdatedCcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_Update].[@PrvCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_Update].[@CcnNotificationFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_Update].[@CcnLockedFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_Update].[@LngIsoCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="204" />
				<Property Name="Length" Value="2888" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 01/10/2018&#xD;&#xA;-- Description:&#x9;To update an account entity. &#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Account_Update @CcnUsernameUpdater NVARCHAR(256)&#xD;&#xA;&#x9;,@UpdatedCcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@PrvCode NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@CcnNotificationFlag BIT = NULL&#xD;&#xA;&#x9;,@CcnLockedFlag BIT = NULL&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)=NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Account_UpdateApiToken]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	UPDATE TD_ACCOUNT
	SET CCN_API_TOKEN = @CcnToken
	WHERE CCN_USERNAME = @CcnUsername
		AND CCN_DELETE_FLAG = 0

	RETURN @@ROWCOUNT
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_API_TOKEN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_UpdateApiToken].[@CcnToken]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_UpdateApiToken].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_UpdateApiToken].[@CcnToken]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_UpdateApiToken].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="203" />
				<Property Name="Length" Value="465" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 28/05/2024&#xD;&#xA;-- Description:&#x9;Update an accounts api token&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Account_UpdateApiToken @CcnToken NVARCHAR(256)&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Account_Usage]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @CcnId INT = NULL
	DECLARE @IsInUse INT

	SET @CcnId = (
			SELECT CCN_ID
			FROM TD_ACCOUNT
			WHERE CCN_USERNAME = @CcnUsername
				AND CCN_DELETE_FLAG = 0
			)

	IF @CcnId IS NULL
	BEGIN
		RETURN 0
	END

	SET @IsInUse = (
			SELECT (
					iif(EXISTS (
							SELECT NULL
							FROM TM_GROUP_ACCOUNT
							WHERE GCC_CCN_ID = @CcnId
								AND GCC_DELETE_FLAG = 0
							), 1, 0)
					)
			)

	RETURN @IsInUse
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Account_Usage].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Account_Usage].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="262" />
				<Property Name="Length" Value="821" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 03/10/2018&#xD;&#xA;-- Description: To check whether or not an account has associated entries in the TM_GROUP_ACCOUNT table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Account_Usage @CcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Analytic_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @MtrID AS INT;
	DECLARE @FrmID AS INT;

	SELECT @MtrID = MTR_ID
	FROM TD_MATRIX
	INNER JOIN VW_RELEASE_LIVE_NOW
		ON MTR_ID = VRN_MTR_ID
	INNER JOIN TS_LANGUAGE
		ON LNG_ID = MTR_LNG_ID
			AND LNG_DELETE_FLAG = 0
			AND LNG_ISO_CODE = @LngIsoCode
			AND MTR_CODE = @matrix;

	IF @MtrID IS NULL
	BEGIN
		RETURN 0
	END

	SELECT @FrmID = FRM_ID
	FROM TS_FORMAT
	WHERE @FrmType IS NOT NULL
		AND @FrmVersion IS NOT NULL
		AND FRM_DIRECTION = 'DOWNLOAD'
		AND FRM_TYPE = @FrmType
		AND FRM_VERSION = @FrmVersion;

	IF @FrmID IS NULL
	BEGIN
		RETURN 0
	END

	INSERT INTO TD_ANALYTIC (
		NLT_MTR_ID
		,NLT_MASKED_IP
		,NLT_OS
		,NLT_BROWSER
		,NLT_BOT_FLAG
		,NLT_REFERER
		,NLT_M2M_FLAG
		,NLT_WIDGET 
		,NLT_DATE
		,NLT_USER_FLAG
		,NLT_FRM_ID
		,NLT_LNG_ISO_CODE 
		)
	VALUES (
		@MtrID
		,@NltMaskedIp
		,@NltOs
		,@NltBrowser
		,@NltBotFlag
		,@NltReferer
		,@NltM2m
		,coalesce(@NltWidget,0) 
		,@NltDate
		,@NltUser 
		,@FrmID
		,@EnvironmentLngIsoCode
		);

	RETURN @@identity;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Create].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Create].[@matrix]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Create].[@FrmType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Create].[@FrmVersion]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_DIRECTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MASKED_IP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_OS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_BROWSER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_BOT_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_REFERER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_M2M_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_WIDGET]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_USER_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Create].[@NltMaskedIp]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Create].[@NltOs]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Create].[@NltBrowser]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Create].[@NltBotFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Create].[@NltReferer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Create].[@NltM2m]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Create].[@NltWidget]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Create].[@NltDate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Create].[@NltUser]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Create].[@EnvironmentLngIsoCode]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_Create].[@matrix]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_Create].[@NltMaskedIp]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="11" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_Create].[@NltOs]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_Create].[@NltBrowser]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_Create].[@NltBotFlag]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_Create].[@NltReferer]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_Create].[@NltM2m]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_Create].[@NltWidget]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_Create].[@NltDate]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_Create].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_Create].[@FrmType]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_Create].[@FrmVersion]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_Create].[@EnvironmentLngIsoCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_Create].[@NltUser]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="210" />
				<Property Name="Length" Value="1715" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 16/01/2019&#xD;&#xA;-- Description:&#x9;Adds an entry to the analytic table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Analytic_Create @matrix NVARCHAR(20)&#xD;&#xA;&#x9;,@NltMaskedIp NVARCHAR(11)&#xD;&#xA;&#x9;,@NltOs NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@NltBrowser NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@NltBotFlag BIT&#xD;&#xA;&#x9;,@NltReferer NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@NltM2m BIT&#xD;&#xA;&#x9;,@NltWidget BIT=NULL&#xD;&#xA;&#x9;,@NltDate DATE&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@FrmType NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@FrmVersion NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@EnvironmentLngIsoCode CHAR(2)=NULL&#xD;&#xA;&#x9;,@NltUser BIT=0&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Analytic_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	 DECLARE @LngId INT
	 SET @LngId=(SELECT LNG_ID FROM TS_LANGUAGE WHERE LNG_ISO_CODE=@LngIsoCode AND LNG_DELETE_FLAG=0)




	--Create a language variant temp table of product values where they exist
	SELECT PRC_CODE,PRC_ID,PLG_VALUE,PLG_ID,LNG_ISO_CODE 
	INTO #tmpPrc
	FROM TD_PRODUCT 
	INNER JOIN TD_PRODUCT_LANGUAGE 
	ON PRC_ID=PLG_PRC_ID 
	INNER JOIN TS_LANGUAGE
	ON PLG_LNG_ID=LNG_ID
	AND LNG_DELETE_FLAG=0
	AND LNG_ISO_CODE=@LngIsoCode 

	--Create a language variant temp table of subject values where they exist
	SELECT DISTINCT SBJ_CODE,SBJ_ID, SLG_VALUE,SLG_LNG_ID,LNG_ISO_CODE   
	INTO #tmpSbj
	FROM TD_SUBJECT 
	INNER JOIN TD_SUBJECT_LANGUAGE 
	ON SBJ_ID=SLG_SBJ_ID 
	INNER JOIN TS_LANGUAGE 
	ON SLG_LNG_ID=LNG_ID 
	AND LNG_DELETE_FLAG=0
	AND LNG_ISO_CODE=@LngIsoCode 

	SELECT MtrCode
	,PrcCode
	,SbjCode
	,max(PublishDate) as PublishDate
	,PrcValue
	,SbjValue
	,sum(NltBot) as NltBot
	,sum(NltM2m) as NltM2m
	,sum(NltUser) as NltUser
	,sum(NltWidget) as NltWidget
	,sum(Total) as Total
	from
	(
	SELECT RLS_LIVE_DATETIME_FROM as PublishDate
		,Convert(INT, NLT_BOT_FLAG) AS NltBot
		,Convert(INT, NLT_M2M_FLAG) AS NltM2m
		,Convert(INT, NLT_USER_FLAG) AS NltUser
		,Convert(INT, NLT_WIDGET) AS NltWidget
		,TD_MATRIX.MTR_CODE AS MtrCode
		,TD_PRODUCT.PRC_CODE AS PrcCode
		, COALESCE(#tmpPrc.PLG_VALUE,PRC_VALUE) AS PrcValue
		,TD_SUBJECT.SBJ_CODE AS SbjCode
		, COALESCE (#tmpSbj.SLG_VALUE,SBJ_VALUE) AS SbjValue
		,Convert(INT, NLT_BOT_FLAG) + Convert(INT, NLT_M2M_FLAG) + Convert(INT, NLT_USER_FLAG) + Convert(INT, NLT_WIDGET) AS Total
 


	FROM TD_PRODUCT
	INNER JOIN TD_RELEASE ON RLS_PRC_ID = PRC_ID
	INNER JOIN TD_SUBJECT ON PRC_SBJ_ID = SBJ_ID
	INNER JOIN TD_MATRIX ON MTR_RLS_ID = RLS_ID
	INNER JOIN TD_GROUP ON RLS_GRP_ID = GRP_ID
	INNER JOIN TS_LANGUAGE AS mtrLNG ON MTR_LNG_ID = mtrLng.LNG_ID
		AND mtrLng.LNG_DELETE_FLAG = 0

	INNER JOIN TD_ANALYTIC ON MTR_ID = NLT_MTR_ID

	
	
	LEFT JOIN TS_LANGUAGE AS nltLng ON nltLng.LNG_ISO_CODE = NLT_LNG_ISO_CODE
		AND nltLng.LNG_DELETE_FLAG = 0

	left join #tmpPrc on TD_PRODUCT.PRC_CODE=#tmpPrc.PRC_CODE 

	left join #tmpSbj on TD_SUBJECT.SBJ_CODE=#tmpSbj.SBJ_CODE 

	WHERE NLT_DATE >= @DateFrom
		AND NLT_DATE <= @DateTo
		AND (
			@MtrCode IS NULL
			OR MTR_CODE = @MtrCode
			)
		AND (
			@PrcCode IS NULL
			OR TD_PRODUCT.PRC_CODE = @PrcCode
			)
		AND (
			@SbjCode IS NULL
			OR TD_SUBJECT.SBJ_CODE = @SbjCode
			)
		AND (
			@NltMaskedIp IS NULL
			OR NLT_MASKED_IP <> @NltMaskedIp
			)

			) q
	GROUP BY 
	 MtrCode
	,PrcCode
	,SbjCode
	,PrcValue
	,SbjValue
		

END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Read].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Read].[#tmpPrc]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Read].[#tmpPrc].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Read].[#tmpSbj]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Read].[#tmpSbj].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_BOT_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_M2M_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_USER_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_WIDGET]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Read].[#tmpPrc].[PLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Read].[#tmpSbj].[SLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Read].[@DateFrom]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Read].[@DateTo]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Read].[@MtrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Read].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Read].[@SbjCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Read].[@NltMaskedIp]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MASKED_IP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Security_Analytic_Read].[#tmpPrc]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_Read].[#tmpPrc].[PRC_CODE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_Read].[#tmpPrc].[PRC_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_Read].[#tmpPrc].[PLG_VALUE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_VALUE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_Read].[#tmpPrc].[PLG_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_Read].[#tmpPrc].[LNG_ISO_CODE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Security_Analytic_Read].[#tmpSbj]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_Read].[#tmpSbj].[SBJ_CODE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_Read].[#tmpSbj].[SBJ_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_Read].[#tmpSbj].[SLG_VALUE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_VALUE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_Read].[#tmpSbj].[SLG_LNG_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_LNG_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_Read].[#tmpSbj].[LNG_ISO_CODE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_Read].[@DateFrom]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_Read].[@DateTo]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_Read].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_Read].[@MtrCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_Read].[@PrcCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_Read].[@SbjCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_Read].[@NltMaskedIp]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="11" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="268" />
				<Property Name="Length" Value="3265" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 17/07/2023&#xD;&#xA;-- Analytic - read a summary for each Mtr Code&#xD;&#xA;--EXEC Security_Analytic_Read '2023-08-01','2023-08-08', 'en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Analytic_Read @DateFrom DATE&#xD;&#xA;&#x9;,@DateTo DATE&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@MtrCode NVARCHAR(20) = NULL&#xD;&#xA;&#x9;,@PrcCode NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@SbjCode INT = NULL&#xD;&#xA;&#x9;,@NltMaskedIp VARCHAR(11) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Analytic_ReadBrowser]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	DECLARE @LngId INT

	SET @LngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)


	SELECT 
		CASE 
			WHEN NLT_BROWSER IS NULL
				OR NLT_BROWSER = ''
				THEN '-'
			ELSE NLT_BROWSER
			END AS NltBrowser,
			COUNT(*) as NltCount
	FROM TD_PRODUCT
	INNER JOIN TD_RELEASE ON RLS_PRC_ID = PRC_ID
	INNER JOIN TD_SUBJECT ON PRC_SBJ_ID = SBJ_ID
	INNER JOIN TD_MATRIX ON MTR_RLS_ID = RLS_ID
	INNER JOIN TD_ANALYTIC ON MTR_ID = NLT_MTR_ID
	WHERE NLT_DATE >= @DateFrom
		AND NLT_DATE <= @DateTo
		AND (
			@MtrCode IS NULL
			OR MTR_CODE = @MtrCode
			)
		AND (
			@PrcCode IS NULL
			OR PRC_CODE = @PrcCode
			)
		AND (
			@SbjCode IS NULL
			OR SBJ_CODE = @SbjCode
			)
		AND (
			@NltMaskedIp IS NULL
			OR NLT_MASKED_IP <> @NltMaskedIp
			)
		GROUP BY NLT_BROWSER
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadBrowser].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_BROWSER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadBrowser].[@DateFrom]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadBrowser].[@DateTo]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadBrowser].[@MtrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadBrowser].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadBrowser].[@SbjCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadBrowser].[@NltMaskedIp]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MASKED_IP]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadBrowser].[@DateFrom]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadBrowser].[@DateTo]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadBrowser].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadBrowser].[@MtrCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadBrowser].[@PrcCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadBrowser].[@SbjCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadBrowser].[@NltMaskedIp]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="11" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="267" />
				<Property Name="Length" Value="1497" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 27/07/2023&#xD;&#xA;-- Read Browser analytic data&#xD;&#xA;--EXEC Security_Analytic_ReadBrowser '2023-06-22','2023-06-29', 'en','FY006B'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Analytic_ReadBrowser @DateFrom DATE&#xD;&#xA;&#x9;,@DateTo DATE&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@MtrCode NVARCHAR(20) = NULL&#xD;&#xA;&#x9;,@PrcCode NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@SbjCode INT = NULL&#xD;&#xA;&#x9;,@NltMaskedIp VARCHAR(11) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Analytic_ReadBrowserReport]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    SELECT   BRW_BROWSER AS NltBrowser,
             SUM(BRW_TOTAL) AS NltCount
    FROM     TR_BROWSER_ANALYTIC
    WHERE    BRW_NLT_DATE >= @DateFrom
             AND BRW_NLT_DATE <= @DateTo
    GROUP BY BRW_BROWSER;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TR_BROWSER_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_BROWSER_ANALYTIC].[BRW_BROWSER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_BROWSER_ANALYTIC].[BRW_TOTAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_BROWSER_ANALYTIC].[BRW_NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadBrowserReport].[@DateFrom]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadBrowserReport].[@DateTo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadBrowserReport].[@DateFrom]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadBrowserReport].[@DateTo]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="346" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE Security_Analytic_ReadBrowserReport&#xD;&#xA;@DateFrom DATE, @DateTo DATE&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Analytic_ReadEnvironmentLanguage]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	 DECLARE @LngId INT
	 SET @LngId=(SELECT LNG_ID FROM TS_LANGUAGE WHERE LNG_ISO_CODE=@LngIsoCode AND LNG_DELETE_FLAG=0)



	SELECT COUNT(*) AS lngCount
		
		,CASE 
			WHEN NLT_LNG_ISO_CODE  IS NULL
				OR NLT_LNG_ISO_CODE = ''
				THEN '-'
			ELSE NLT_LNG_ISO_CODE
			END AS nltLngIsoCode
		
		
		
 


	FROM TD_PRODUCT
	INNER JOIN TD_RELEASE ON RLS_PRC_ID = PRC_ID
	INNER JOIN TD_SUBJECT ON PRC_SBJ_ID = SBJ_ID
	INNER JOIN TD_MATRIX ON MTR_RLS_ID = RLS_ID
	INNER JOIN TD_GROUP ON RLS_GRP_ID = GRP_ID
	

	INNER JOIN TD_ANALYTIC ON MTR_ID = NLT_MTR_ID
	INNER JOIN TS_FORMAT ON NLT_FRM_ID = FRM_ID
	
	
	


	WHERE NLT_DATE >= @DateFrom
		AND NLT_DATE <= @DateTo
		AND (
			@MtrCode IS NULL
			OR MTR_CODE = @MtrCode
			)
		AND (
			@PrcCode IS NULL
			OR PRC_CODE = @PrcCode
			)
		AND (
			@SbjCode IS NULL
			OR SBJ_CODE = @SbjCode
			)
		AND (
			@NltMaskedIp IS NULL
			OR NLT_MASKED_IP <> @NltMaskedIp
			)
		GROUP BY NLT_LNG_ISO_CODE
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadEnvironmentLanguage].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadEnvironmentLanguage].[@DateFrom]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadEnvironmentLanguage].[@DateTo]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadEnvironmentLanguage].[@MtrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadEnvironmentLanguage].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadEnvironmentLanguage].[@SbjCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadEnvironmentLanguage].[@NltMaskedIp]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MASKED_IP]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadEnvironmentLanguage].[@DateFrom]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadEnvironmentLanguage].[@DateTo]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadEnvironmentLanguage].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadEnvironmentLanguage].[@MtrCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadEnvironmentLanguage].[@PrcCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadEnvironmentLanguage].[@SbjCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadEnvironmentLanguage].[@NltMaskedIp]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="11" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="289" />
				<Property Name="Length" Value="1655" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 27/07/2023&#xD;&#xA;-- Read environment langauge data from analytics&#xD;&#xA;--EXEC Security_Analytic_ReadEnvironmentLanguage '2023-06-22','2023-06-29', 'en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Analytic_ReadEnvironmentLanguage @DateFrom DATE&#xD;&#xA;&#x9;,@DateTo DATE&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@MtrCode NVARCHAR(20) = NULL&#xD;&#xA;&#x9;,@PrcCode NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@SbjCode INT = NULL&#xD;&#xA;&#x9;,@NltMaskedIp VARCHAR(11) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Analytic_ReadEnvironmentLanguageReport]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    SELECT q.* from
    (
    SELECT   NVL_LNG_ISO_CODE AS nltLngIsoCode,
             SUM(NVL_TOTAL) AS lngCount
    FROM     TR_ENVIRONMENT_LANGUAGE_ANALYTIC
    WHERE    NVL_NLT_DATE >= @DateFrom
             AND NVL_NLT_DATE <= @DateTo
    GROUP BY NVL_LNG_ISO_CODE) q
    ORDER BY Q.lngCount DESC

END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TR_ENVIRONMENT_LANGUAGE_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_ENVIRONMENT_LANGUAGE_ANALYTIC].[NVL_LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_ENVIRONMENT_LANGUAGE_ANALYTIC].[NVL_TOTAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_ENVIRONMENT_LANGUAGE_ANALYTIC].[NVL_NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadEnvironmentLanguageReport].[@DateFrom]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadEnvironmentLanguageReport].[@DateTo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadEnvironmentLanguageReport].[@DateFrom]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadEnvironmentLanguageReport].[@DateTo]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="446" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE Security_Analytic_ReadEnvironmentLanguageReport&#xD;&#xA;@DateFrom DATE, @DateTo DATE&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Analytic_ReadForAll]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	 DECLARE @LngId INT
	 SET @LngId=(SELECT LNG_ID FROM TS_LANGUAGE WHERE LNG_ISO_CODE=@LngIsoCode AND LNG_DELETE_FLAG=0)

	 --Create a language variant temp table of matrix titles where they exist
	SELECT 
	 MTR_CODE  as MtrCode,max(MTR_TITLE) as MtrTitle,LNG_ISO_CODE as MtrLngIsoCode, LNG_ID AS mtrLngId
	into #tmpMtr
	FROM TD_MATRIX
	INNER JOIN TS_LANGUAGE
	ON LNG_ID=MTR_LNG_ID 
	AND LNG_DELETE_FLAG=0
	GROUP BY MTR_CODE,LNG_ISO_CODE,LNG_ID 


	--Create a language variant temp table of product values where they exist
	SELECT PRC_CODE,PRC_ID,PLG_VALUE,PLG_ID,LNG_ISO_CODE 
	INTO #tmpPrc
	FROM TD_PRODUCT 
	INNER JOIN TD_PRODUCT_LANGUAGE 
	ON PRC_ID=PLG_PRC_ID 
	INNER JOIN TS_LANGUAGE
	ON PLG_LNG_ID=LNG_ID
	AND LNG_DELETE_FLAG=0
	AND LNG_ISO_CODE=@LngIsoCode 

	--Create a language variant temp table of subject values where they exist
	SELECT DISTINCT SBJ_CODE,SBJ_ID, SLG_VALUE,SLG_LNG_ID,LNG_ISO_CODE   
	INTO #tmpSbj
	FROM TD_SUBJECT 
	INNER JOIN TD_SUBJECT_LANGUAGE 
	ON SBJ_ID=SLG_SBJ_ID 
	INNER JOIN TS_LANGUAGE 
	ON SLG_LNG_ID=LNG_ID 
	AND LNG_DELETE_FLAG=0
	AND LNG_ISO_CODE=@LngIsoCode 

	SELECT NLT_ID AS NltId
		,RLS_LIVE_DATETIME_FROM as NltPublishedDate
		,NLT_MASKED_IP AS NltMaskedIp
		,CASE 
			WHEN NLT_OS IS NULL
				OR NLT_OS = ''
				THEN '-'
			ELSE NLT_OS
			END AS NltOs
		,CASE 
			WHEN NLT_BROWSER IS NULL
				OR NLT_BROWSER = ''
				THEN '-'
			ELSE NLT_BROWSER
			END AS NltBrowser
		,Convert(INT, NLT_BOT_FLAG) AS NltBotFlag
		,CASE 
			WHEN NLT_REFERER IS NULL
				OR NLT_REFERER = ''
				THEN '-'
			ELSE NLT_REFERER
			END AS NltReferer
		,Convert(INT, NLT_M2M_FLAG) AS NltM2mFlag
		,NLT_DATE AS [date]
		,Convert(INT, NLT_USER_FLAG) AS NltUserFlag
		,Convert(INT, NLT_WIDGET) AS NltWidget
		,TD_MATRIX.MTR_CODE AS MtrCode
		,COALESCE(#tmpMtr.MtrTitle,TD_MATRIX.MTR_TITLE) AS MtrTitle
		,mtrLng.LNG_ISO_CODE AS mtrLngIsoCode
		,mtrLng.LNG_ISO_NAME AS mtrLngName
		,CASE 
			WHEN nltLng.LNG_ISO_CODE IS NULL
				OR nltLng.LNG_ISO_CODE = ''
				THEN '-'
			ELSE nltLng.LNG_ISO_CODE
			END AS nltLngIsoCode
		,CASE 
			WHEN nltLng.LNG_ISO_NAME IS NULL
				OR nltLng.LNG_ISO_NAME = ''
				THEN '-'
			ELSE nltLng.LNG_ISO_NAME
			END AS nltLngName
		,RLS_CODE AS RlsCode
		,GRP_CODE AS GrpCode
		,TD_PRODUCT.PRC_CODE AS PrcCode
		, COALESCE(#tmpPrc.PLG_VALUE,PRC_VALUE) AS PrcValue
		,TD_SUBJECT.SBJ_CODE AS SbjCode
		, COALESCE (#tmpSbj.SLG_VALUE,SBJ_VALUE) AS SbjValue
		,FRM_TYPE AS FrmType
		,FRM_VERSION AS FrmVersion
		,FRM_TYPE + ' ' + FRM_VERSION AS FrmTypeVersion
		,Convert(INT, NLT_BOT_FLAG) + Convert(INT, NLT_M2M_FLAG) + Convert(INT, NLT_USER_FLAG) + Convert(INT, NLT_WIDGET) AS total
 


	FROM TD_PRODUCT
	INNER JOIN TD_RELEASE ON RLS_PRC_ID = PRC_ID
	INNER JOIN TD_SUBJECT ON PRC_SBJ_ID = SBJ_ID
	INNER JOIN TD_MATRIX ON MTR_RLS_ID = RLS_ID
	INNER JOIN TD_GROUP ON RLS_GRP_ID = GRP_ID
	INNER JOIN TS_LANGUAGE AS mtrLNG ON MTR_LNG_ID = mtrLng.LNG_ID
		AND mtrLng.LNG_DELETE_FLAG = 0

	INNER JOIN TD_ANALYTIC ON MTR_ID = NLT_MTR_ID
	INNER JOIN TS_FORMAT ON NLT_FRM_ID = FRM_ID
	
	
	LEFT JOIN TS_LANGUAGE AS nltLng ON nltLng.LNG_ISO_CODE = NLT_LNG_ISO_CODE
		AND nltLng.LNG_DELETE_FLAG = 0
	LEFT JOIN #tmpMtr ON MTR_CODE=MtrCode
	AND #tmpMtr.MtrLngIsoCode=@LngIsoCode 

	left join #tmpPrc on TD_PRODUCT.PRC_CODE=#tmpPrc.PRC_CODE 
	and #tmpMtr.MtrLngIsoCode=#tmpPrc.LNG_ISO_CODE 

	left join #tmpSbj on TD_SUBJECT.SBJ_CODE=#tmpSbj.SBJ_CODE 
	AND #tmpMtr.MtrLngIsoCode=#tmpSbj.LNG_ISO_CODE 

	WHERE NLT_DATE >= @DateFrom
		AND NLT_DATE <= @DateTo
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadForAll].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadForAll].[#tmpMtr]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadForAll].[#tmpMtr].[MtrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadForAll].[#tmpMtr].[MtrLngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadForAll].[#tmpPrc]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadForAll].[#tmpPrc].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadForAll].[#tmpMtr].[MtrLngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadForAll].[#tmpPrc].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadForAll].[#tmpSbj]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadForAll].[#tmpSbj].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadForAll].[#tmpMtr].[MtrLngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadForAll].[#tmpSbj].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MASKED_IP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_OS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_BROWSER]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_BOT_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_REFERER]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_M2M_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_USER_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_WIDGET]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadForAll].[#tmpMtr].[MtrTitle]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadForAll].[#tmpPrc].[PLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadForAll].[#tmpSbj].[SLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_VERSION]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadForAll].[@DateFrom]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadForAll].[@DateTo]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Security_Analytic_ReadForAll].[#tmpMtr]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_ReadForAll].[#tmpMtr].[MtrCode]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_ReadForAll].[#tmpMtr].[MtrTitle]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_ReadForAll].[#tmpMtr].[MtrLngIsoCode]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_ReadForAll].[#tmpMtr].[mtrLngId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Security_Analytic_ReadForAll].[#tmpPrc]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_ReadForAll].[#tmpPrc].[PRC_CODE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_ReadForAll].[#tmpPrc].[PRC_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_ReadForAll].[#tmpPrc].[PLG_VALUE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_VALUE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_ReadForAll].[#tmpPrc].[PLG_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_ReadForAll].[#tmpPrc].[LNG_ISO_CODE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Security_Analytic_ReadForAll].[#tmpSbj]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_ReadForAll].[#tmpSbj].[SBJ_CODE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_ReadForAll].[#tmpSbj].[SBJ_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_ReadForAll].[#tmpSbj].[SLG_VALUE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_VALUE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_ReadForAll].[#tmpSbj].[SLG_LNG_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_LNG_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_ReadForAll].[#tmpSbj].[LNG_ISO_CODE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadForAll].[@DateFrom]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadForAll].[@DateTo]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadForAll].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="484" />
				<Property Name="Length" Value="4332" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 17/07/2023&#xD;&#xA;-- Description:&#x9;Once off read for analytics. The result will be cached for the given parameters and re-used for all analytics API calls&#xD;&#xA;-- We are NOT excluding deleted matrixes,groups, products or subjects as they may have been valid at the time of access&#xD;&#xA;--EXEC Security_Analytic_ReadForAll '2023-06-22','2023-06-29', 'en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Analytic_ReadForAll @DateFrom DATE&#xD;&#xA;&#x9;,@DateTo DATE&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Analytic_ReadFormat]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	 DECLARE @LngId INT
	 SET @LngId=(SELECT LNG_ID FROM TS_LANGUAGE WHERE LNG_ISO_CODE=@LngIsoCode AND LNG_DELETE_FLAG=0)



	SELECT COUNT(*) AS NltCount	
		,FRM_TYPE + ' ' + FRM_VERSION AS FrmTypeVersion
 


	FROM TD_PRODUCT
	INNER JOIN TD_RELEASE ON RLS_PRC_ID = PRC_ID
	INNER JOIN TD_SUBJECT ON PRC_SBJ_ID = SBJ_ID
	INNER JOIN TD_MATRIX ON MTR_RLS_ID = RLS_ID
	INNER JOIN TD_GROUP ON RLS_GRP_ID = GRP_ID
	INNER JOIN TS_LANGUAGE AS mtrLNG ON MTR_LNG_ID = mtrLng.LNG_ID
		AND mtrLng.LNG_DELETE_FLAG = 0

	INNER JOIN TD_ANALYTIC ON MTR_ID = NLT_MTR_ID
	INNER JOIN TS_FORMAT ON NLT_FRM_ID = FRM_ID
	
	
	WHERE NLT_DATE >= @DateFrom
		AND NLT_DATE <= @DateTo
		AND NLT_DATE <= @DateTo
		AND (
			@MtrCode IS NULL
			OR MTR_CODE = @MtrCode
			)
		AND (
			@PrcCode IS NULL
			OR PRC_CODE = @PrcCode
			)
		AND (
			@SbjCode IS NULL
			OR SBJ_CODE = @SbjCode
			)
		AND (
			@NltMaskedIp IS NULL
			OR NLT_MASKED_IP <> @NltMaskedIp
			)
	GROUP BY FRM_TYPE,FRM_VERSION
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadFormat].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadFormat].[@DateFrom]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadFormat].[@DateTo]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadFormat].[@MtrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadFormat].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadFormat].[@SbjCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadFormat].[@NltMaskedIp]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MASKED_IP]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadFormat].[@DateFrom]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadFormat].[@DateTo]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadFormat].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadFormat].[@MtrCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadFormat].[@PrcCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadFormat].[@SbjCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadFormat].[@NltMaskedIp]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="11" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="252" />
				<Property Name="Length" Value="1620" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 17/07/2023&#xD;&#xA;-- Read Format analytics&#xD;&#xA;--EXEC Security_Analytic_ReadFormat '2022-06-29','2023-06-29', 'en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Analytic_ReadFormat @DateFrom DATE&#xD;&#xA;&#x9;,@DateTo DATE&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@MtrCode NVARCHAR(20) = NULL&#xD;&#xA;&#x9;,@PrcCode NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@SbjCode INT = NULL&#xD;&#xA;&#x9;,@NltMaskedIp VARCHAR(11) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Analytic_ReadFormatReport]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    SELECT   SUM(FNL_TOTAL) AS NltCount,
             FNL_FORMAT AS FrmTypeVersion
    FROM     TR_FORMAT_ANALYTIC
    WHERE    FNL_NLT_DATE >= @DateFrom
             AND FNL_NLT_DATE <= @DateTo
    GROUP BY FNL_FORMAT;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TR_FORMAT_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_FORMAT_ANALYTIC].[FNL_TOTAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_FORMAT_ANALYTIC].[FNL_FORMAT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_FORMAT_ANALYTIC].[FNL_NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadFormatReport].[@DateFrom]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadFormatReport].[@DateTo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadFormatReport].[@DateFrom]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadFormatReport].[@DateTo]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="346" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE Security_Analytic_ReadFormatReport&#xD;&#xA;@DateFrom DATE, @DateTo DATE&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Analytic_ReadLanguage]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	 DECLARE @LngId INT
	 SET @LngId=(SELECT LNG_ID FROM TS_LANGUAGE WHERE LNG_ISO_CODE=@LngIsoCode AND LNG_DELETE_FLAG=0)


	SELECT COUNT(*) AS lngCount
		
		,LNG_ISO_CODE AS mtrLngIsoCode
		,LNG_ISO_NAME AS mtrLngName
		

	FROM TD_PRODUCT
	INNER JOIN TD_RELEASE ON RLS_PRC_ID = PRC_ID
	INNER JOIN TD_SUBJECT ON PRC_SBJ_ID = SBJ_ID
	INNER JOIN TD_MATRIX ON MTR_RLS_ID = RLS_ID
	INNER JOIN TD_GROUP ON RLS_GRP_ID = GRP_ID
	INNER JOIN TS_LANGUAGE ON MTR_LNG_ID = LNG_ID
		AND LNG_DELETE_FLAG = 0

	INNER JOIN TD_ANALYTIC ON MTR_ID = NLT_MTR_ID
	
	


	WHERE NLT_DATE >= @DateFrom
		AND NLT_DATE <= @DateTo
		AND (
			@MtrCode IS NULL
			OR MTR_CODE = @MtrCode
			)
		AND (
			@PrcCode IS NULL
			OR PRC_CODE = @PrcCode
			)
		AND (
			@SbjCode IS NULL
			OR SBJ_CODE = @SbjCode
			)
		AND (
			@NltMaskedIp IS NULL
			OR NLT_MASKED_IP <> @NltMaskedIp
			)
		GROUP BY LNG_ISO_CODE, LNG_ISO_NAME 
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadLanguage].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadLanguage].[@DateFrom]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadLanguage].[@DateTo]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadLanguage].[@MtrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadLanguage].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadLanguage].[@SbjCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadLanguage].[@NltMaskedIp]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MASKED_IP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_NAME]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadLanguage].[@DateFrom]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadLanguage].[@DateTo]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadLanguage].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadLanguage].[@MtrCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadLanguage].[@PrcCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadLanguage].[@SbjCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadLanguage].[@NltMaskedIp]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="11" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="277" />
				<Property Name="Length" Value="1576" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 17/07/2023&#xD;&#xA;-- Read analytic for the language of the matrix&#xD;&#xA;--EXEC Security_Analytic_ReadLanguage '2023-06-22','2023-06-29', 'en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Analytic_ReadLanguage @DateFrom DATE&#xD;&#xA;&#x9;,@DateTo DATE&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@MtrCode NVARCHAR(20) = NULL&#xD;&#xA;&#x9;,@PrcCode NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@SbjCode INT = NULL&#xD;&#xA;&#x9;,@NltMaskedIp VARCHAR(11) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Analytic_ReadLanguageReport]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    SELECT   DSL_LNG_ISO_CODE AS mtrLngIsoCode,
             DSL_LNG_ISO_NAME AS mtrLngName,
             SUM(DSL_TOTAL) AS lngCount
    FROM     TR_DATASET_LANGUAGE_ANALYTIC
    WHERE    DSL_NLT_DATE >= @DateFrom
             AND DSL_NLT_DATE <= @DateTo
    GROUP BY DSL_LNG_ISO_CODE, DSL_LNG_ISO_NAME;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TR_DATASET_LANGUAGE_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_DATASET_LANGUAGE_ANALYTIC].[DSL_LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_DATASET_LANGUAGE_ANALYTIC].[DSL_LNG_ISO_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_DATASET_LANGUAGE_ANALYTIC].[DSL_TOTAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_DATASET_LANGUAGE_ANALYTIC].[DSL_NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadLanguageReport].[@DateFrom]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadLanguageReport].[@DateTo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadLanguageReport].[@DateFrom]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadLanguageReport].[@DateTo]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="433" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE Security_Analytic_ReadLanguageReport&#xD;&#xA;@DateFrom DATE, @DateTo DATE&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Analytic_ReadOs]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	 DECLARE @LngId INT
	 SET @LngId=(SELECT LNG_ID FROM TS_LANGUAGE WHERE LNG_ISO_CODE=@LngIsoCode AND LNG_DELETE_FLAG=0)
 

	SELECT COUNT(*) AS NltCount
		
		,CASE 
			WHEN NLT_OS IS NULL
				OR NLT_OS = ''
				THEN '-'
			ELSE NLT_OS
			END AS NltOs
		


	FROM TD_PRODUCT
	INNER JOIN TD_RELEASE ON RLS_PRC_ID = PRC_ID
	INNER JOIN TD_SUBJECT ON PRC_SBJ_ID = SBJ_ID
	INNER JOIN TD_MATRIX ON MTR_RLS_ID = RLS_ID
	INNER JOIN TD_GROUP ON RLS_GRP_ID = GRP_ID
	INNER JOIN TS_LANGUAGE AS mtrLNG ON MTR_LNG_ID = mtrLng.LNG_ID
		AND mtrLng.LNG_DELETE_FLAG = 0

	INNER JOIN TD_ANALYTIC ON MTR_ID = NLT_MTR_ID
	INNER JOIN TS_FORMAT ON NLT_FRM_ID = FRM_ID
	


	WHERE NLT_DATE >= @DateFrom
		AND NLT_DATE <= @DateTo
		AND (
			@MtrCode IS NULL
			OR MTR_CODE = @MtrCode
			)
		AND (
			@PrcCode IS NULL
			OR PRC_CODE = @PrcCode
			)
		AND (
			@SbjCode IS NULL
			OR SBJ_CODE = @SbjCode
			)
		AND (
			@NltMaskedIp IS NULL
			OR NLT_MASKED_IP <> @NltMaskedIp
			)
		GROUP BY NLT_OS
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadOs].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_OS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadOs].[@DateFrom]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadOs].[@DateTo]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadOs].[@MtrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadOs].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadOs].[@SbjCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadOs].[@NltMaskedIp]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MASKED_IP]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadOs].[@DateFrom]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadOs].[@DateTo]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadOs].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadOs].[@MtrCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadOs].[@PrcCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadOs].[@SbjCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadOs].[@NltMaskedIp]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="11" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="247" />
				<Property Name="Length" Value="1625" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 17/07/2023&#xD;&#xA;-- Analytic read for OS&#xD;&#xA;--EXEC Security_Analytic_ReadOs '2023-06-22','2023-06-29', 'en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Analytic_ReadOs @DateFrom DATE&#xD;&#xA;&#x9;,@DateTo DATE&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@MtrCode NVARCHAR(20) = NULL&#xD;&#xA;&#x9;,@PrcCode NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@SbjCode INT = NULL&#xD;&#xA;&#x9;,@NltMaskedIp VARCHAR(11) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Analytic_ReadOsReport]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    SELECT   SNL_OS AS NltOs,
             SUM(SNL_TOTAL) AS NltCount
    FROM     TR_OS_ANALYTIC
    WHERE    SNL_NLT_DATE >= @DateFrom
             AND SNL_NLT_DATE <= @DateTo
    GROUP BY SNL_OS;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TR_OS_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_OS_ANALYTIC].[SNL_OS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_OS_ANALYTIC].[SNL_TOTAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_OS_ANALYTIC].[SNL_NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadOsReport].[@DateFrom]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadOsReport].[@DateTo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadOsReport].[@DateFrom]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadOsReport].[@DateTo]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="321" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE Security_Analytic_ReadOsReport&#xD;&#xA;@DateFrom DATE, @DateTo DATE&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Analytic_ReadReferers]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	 DECLARE @LngId INT
	 SET @LngId=(SELECT LNG_ID FROM TS_LANGUAGE WHERE LNG_ISO_CODE=@LngIsoCode AND LNG_DELETE_FLAG=0)



	SELECT COUNT(*) AS NltCount, NltReferer
	from
	(
		SELECT
		CASE 
			WHEN NLT_REFERER IS NULL
				OR NLT_REFERER = ''
				THEN '-'
			ELSE NLT_REFERER
			END AS NltReferer
		
 


	FROM TD_PRODUCT
	INNER JOIN TD_RELEASE ON RLS_PRC_ID = PRC_ID
	INNER JOIN TD_SUBJECT ON PRC_SBJ_ID = SBJ_ID
	INNER JOIN TD_MATRIX ON MTR_RLS_ID = RLS_ID
	INNER JOIN TD_GROUP ON RLS_GRP_ID = GRP_ID
	INNER JOIN TS_LANGUAGE AS mtrLNG ON MTR_LNG_ID = mtrLng.LNG_ID
		AND mtrLng.LNG_DELETE_FLAG = 0

	INNER JOIN TD_ANALYTIC ON MTR_ID = NLT_MTR_ID
	INNER JOIN TS_FORMAT ON NLT_FRM_ID = FRM_ID
	
	
	LEFT JOIN TS_LANGUAGE AS nltLng ON nltLng.LNG_ISO_CODE = NLT_LNG_ISO_CODE
		AND nltLng.LNG_DELETE_FLAG = 0


	WHERE NLT_DATE >= @DateFrom
		AND NLT_DATE <= @DateTo
	AND (
			@MtrCode IS NULL
			OR MTR_CODE = @MtrCode
			)
		AND (
			@PrcCode IS NULL
			OR PRC_CODE = @PrcCode
			)
		AND (
			@SbjCode IS NULL
			OR SBJ_CODE = @SbjCode
			)
		AND (
			@NltMaskedIp IS NULL
			OR NLT_MASKED_IP <> @NltMaskedIp
			)
			) Q
		GROUP BY Q.NltReferer
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadReferers].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_REFERER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadReferers].[@DateFrom]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadReferers].[@DateTo]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadReferers].[@MtrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadReferers].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadReferers].[@SbjCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadReferers].[@NltMaskedIp]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MASKED_IP]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadReferers].[@DateFrom]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadReferers].[@DateTo]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadReferers].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadReferers].[@MtrCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadReferers].[@PrcCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadReferers].[@SbjCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadReferers].[@NltMaskedIp]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="11" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="260" />
				<Property Name="Length" Value="1822" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 17/07/2023&#xD;&#xA;-- Read analytic for referrers&#xD;&#xA;--EXEC Security_Analytic_ReadReferers '2024-01-09','2024-02-16', 'en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Analytic_ReadReferers @DateFrom DATE&#xD;&#xA;&#x9;,@DateTo DATE&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@MtrCode NVARCHAR(20) = NULL&#xD;&#xA;&#x9;,@PrcCode NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@SbjCode INT = NULL&#xD;&#xA;&#x9;,@NltMaskedIp VARCHAR(11) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Analytic_ReadReferersReport]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    SELECT   RFR_REFERER AS NltReferer,
             SUM(RFR_TOTAL) AS NltCount
    FROM     TR_REFERER_ANALYTIC
    WHERE    RFR_NLT_DATE >= @DateFrom
             AND RFR_NLT_DATE <= @DateTo
    GROUP BY RFR_REFERER;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TR_REFERER_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_REFERER_ANALYTIC].[RFR_REFERER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_REFERER_ANALYTIC].[RFR_TOTAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_REFERER_ANALYTIC].[RFR_NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadReferersReport].[@DateFrom]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadReferersReport].[@DateTo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadReferersReport].[@DateFrom]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadReferersReport].[@DateTo]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="347" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE Security_Analytic_ReadReferersReport&#xD;&#xA;@DateFrom DATE, @DateTo DATE&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Analytic_ReadReport]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    SELECT   MNL_MTR_CODE AS MtrCode,
             MNL_PRC_CODE AS PrcCode,
             MNL_SBJ_CODE AS SbjCode,
             MNL_PRC_VALUE AS PrcValue,
             MNL_SBJ_VALUE AS SbjValue,
             SUM(MNL_BOT) AS NltBot,
             SUM(MNL_M2M) AS NltM2m,
             SUM(MNL_USER) AS NltUser,
             SUM(MNL_WIDGET) AS NltWidget,
             SUM(MNL_TOTAL) AS Total
    FROM     TR_MATRIX_ANALYTIC
    WHERE    MNL_NLT_DATE >= @DateFrom
             AND MNL_NLT_DATE <= @DateTo
             AND (@MtrCode IS NULL
                  OR @MtrCode = MNL_MTR_CODE)
             AND (@PrcCode IS NULL
                  OR @PrcCode = MNL_PRC_CODE)
             AND ((@SbjCode IS NULL
                   OR @SbjCode = 0)
                  OR @SbjCode = MNL_SBJ_CODE)
    GROUP BY MNL_MTR_CODE, MNL_PRC_CODE, MNL_SBJ_CODE, MNL_PRC_VALUE, MNL_SBJ_VALUE;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_BOT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_M2M]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_WIDGET]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_TOTAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadReport].[@DateFrom]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadReport].[@DateTo]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadReport].[@MtrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadReport].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadReport].[@SbjCode]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadReport].[@DateFrom]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadReport].[@DateTo]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadReport].[@MtrCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadReport].[@PrcCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadReport].[@SbjCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1076" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE Security_Analytic_ReadReport&#xD;&#xA;@DateFrom DATE, @DateTo DATE, @MtrCode NVARCHAR (20)=NULL, @PrcCode NVARCHAR (32)=NULL, @SbjCode INT=NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Analytic_ReadTimeline]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	 DECLARE @LngId INT
	 SET @LngId=(SELECT LNG_ID FROM TS_LANGUAGE WHERE LNG_ISO_CODE=@LngIsoCode AND LNG_DELETE_FLAG=0)

	 --Create a language variant temp table of matrix titles where they exist
	SELECT 
	 MTR_CODE  as MtrCode,max(MTR_TITLE) as MtrTitle,LNG_ISO_CODE as MtrLngIsoCode, LNG_ID AS mtrLngId
	into #tmpMtr
	FROM TD_MATRIX
	INNER JOIN TS_LANGUAGE
	ON LNG_ID=MTR_LNG_ID 
	AND LNG_DELETE_FLAG=0
	GROUP BY MTR_CODE,LNG_ISO_CODE,LNG_ID 




	SELECT NLT_DATE AS [date]
		,sum(Convert(INT, NLT_BOT_FLAG)) AS NltBot

		,sum(Convert(INT, NLT_M2M_FLAG)) AS NltM2m
		
		,sum(Convert(INT, NLT_USER_FLAG)) AS NltUser
		,sum(Convert(INT, NLT_WIDGET)) AS NltWidget

		,sum(Convert(INT, NLT_BOT_FLAG) + Convert(INT, NLT_M2M_FLAG) + Convert(INT, NLT_USER_FLAG) + Convert(INT, NLT_WIDGET)) AS total
 


	FROM TD_PRODUCT
	INNER JOIN TD_RELEASE ON RLS_PRC_ID = PRC_ID
	INNER JOIN TD_SUBJECT ON PRC_SBJ_ID = SBJ_ID
	INNER JOIN TD_MATRIX ON MTR_RLS_ID = RLS_ID
	INNER JOIN TD_GROUP ON RLS_GRP_ID = GRP_ID
	INNER JOIN TS_LANGUAGE AS mtrLNG ON MTR_LNG_ID = mtrLng.LNG_ID
		AND mtrLng.LNG_DELETE_FLAG = 0

	INNER JOIN TD_ANALYTIC ON MTR_ID = NLT_MTR_ID
	INNER JOIN TS_FORMAT ON NLT_FRM_ID = FRM_ID
	
	
	LEFT JOIN TS_LANGUAGE AS nltLng ON nltLng.LNG_ISO_CODE = NLT_LNG_ISO_CODE
		AND nltLng.LNG_DELETE_FLAG = 0


	WHERE NLT_DATE >= @DateFrom
		AND NLT_DATE <= @DateTo
		AND (
			@MtrCode IS NULL
			OR MTR_CODE = @MtrCode
			)
		AND (
			@PrcCode IS NULL
			OR PRC_CODE = @PrcCode
			)
		AND (
			@SbjCode IS NULL
			OR SBJ_CODE = @SbjCode
			)
		AND (
			@NltMaskedIp IS NULL
			OR NLT_MASKED_IP <> @NltMaskedIp
			)
		GROUP BY NLT_DATE
		ORDER BY NLT_DATE
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadTimeline].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_BOT_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_M2M_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_USER_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_WIDGET]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadTimeline].[@DateFrom]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadTimeline].[@DateTo]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadTimeline].[@MtrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadTimeline].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadTimeline].[@SbjCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadTimeline].[@NltMaskedIp]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MASKED_IP]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Security_Analytic_ReadTimeline].[#tmpMtr]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_ReadTimeline].[#tmpMtr].[MtrCode]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_ReadTimeline].[#tmpMtr].[MtrTitle]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_ReadTimeline].[#tmpMtr].[MtrLngIsoCode]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_ReadTimeline].[#tmpMtr].[mtrLngId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadTimeline].[@DateFrom]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadTimeline].[@DateTo]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadTimeline].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadTimeline].[@MtrCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadTimeline].[@PrcCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadTimeline].[@SbjCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadTimeline].[@NltMaskedIp]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="11" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="322" />
				<Property Name="Length" Value="2398" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 17/07/2023&#xD;&#xA;-- Read Timeline for analytic. This is a total of flagged items under a number of categories&#xD;&#xA;--EXEC Security_Analytic_ReadTimeline '2023-06-22','2023-06-29', 'en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Analytic_ReadTimeline @DateFrom DATE&#xD;&#xA;&#x9;,@DateTo DATE&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@MtrCode NVARCHAR(20) = NULL&#xD;&#xA;&#x9;,@PrcCode NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@SbjCode INT = NULL&#xD;&#xA;&#x9;,@NltMaskedIp VARCHAR(11) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Analytic_ReadTimelineReport]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    SELECT q.DATE,
           q.NltBot,
           q.NltM2m,
           q.NltUser,
           q.NltWidget,
           NltBot + NltM2m + NltUser + NltWidget AS total
    FROM   (SELECT   MNL_NLT_DATE AS DATE,
                     SUM(MNL_BOT) AS NltBot,
                     SUM(MNL_M2M) AS NltM2m,
                     SUM(MNL_USER) AS NltUser,
                     SUM(MNL_WIDGET) AS NltWidget
            FROM     TR_MATRIX_ANALYTIC
            WHERE    MNL_NLT_DATE >= @DateFrom
                     AND MNL_NLT_DATE <= @DateTo
                     AND (@MtrCode IS NULL
                          OR @MtrCode = MNL_MTR_CODE)
                     AND (@PrcCode IS NULL
                          OR @PrcCode = MNL_PRC_CODE)
                     AND ((@SbjCode IS NULL
                           OR @SbjCode = 0)
                          OR @SbjCode = MNL_SBJ_CODE)
            GROUP BY MNL_NLT_DATE) AS q;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_BOT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_M2M]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_WIDGET]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadTimelineReport].[@DateFrom]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadTimelineReport].[@DateTo]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadTimelineReport].[@MtrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadTimelineReport].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_ReadTimelineReport].[@SbjCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_SBJ_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadTimelineReport].[@DateFrom]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadTimelineReport].[@DateTo]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadTimelineReport].[@MtrCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadTimelineReport].[@PrcCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_ReadTimelineReport].[@SbjCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1129" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE Security_Analytic_ReadTimelineReport&#xD;&#xA;@DateFrom DATE, @DateTo DATE, @MtrCode NVARCHAR (20)=NULL, @PrcCode NVARCHAR (32)=NULL, @SbjCode INT=NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Analytic_Update_BrowserReport]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    BEGIN TRY
        DECLARE @minDate AS DATE;
        SET @minDate = (SELECT MAX(BRW_NLT_DATE)
                        FROM   TR_BROWSER_ANALYTIC);
        IF @minDate IS NULL
            BEGIN
                SET @minDate = '2018-01-01';
            END
        SET @minDate = DATEADD(DAY, 1, @minDate);
        INSERT INTO TR_BROWSER_ANALYTIC (BRW_BROWSER, BRW_NLT_DATE, BRW_TOTAL)
        SELECT   COALESCE (NLT_BROWSER, '-') AS NLT_BROWSER,
                 NLT_DATE,
                 COUNT(*) AS rcount
        FROM     TD_ANALYTIC
        WHERE    NLT_DATE >= @minDate
                 AND NLT_DATE <= dateadd(DAY, -1, (CONVERT (DATE, getdate())))
        GROUP BY NLT_BROWSER, NLT_DATE;
        INSERT  INTO TD_LOGGING (LGG_DATETIME, LGG_THREAD, LGG_LEVEL, LGG_CLASS, LGG_METHOD, LGG_MESSAGE)
        VALUES                 (GETDATE(), '0', 'INFO', 'SECURITY_ANALYTIC_UPDATE', 'Update_BrowserReport', 'Rows inserted: ' + CAST (@@rowcount AS NVARCHAR));
    END TRY
    BEGIN CATCH
        INSERT  INTO TD_LOGGING (LGG_DATETIME, LGG_THREAD, LGG_LEVEL, LGG_CLASS, LGG_METHOD, LGG_MESSAGE)
        VALUES                 (GETDATE(), '0', 'ERROR', 'SECURITY_ANALYTIC_UPDATE', 'Update_BrowserReport', error_message());
    END CATCH
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_BROWSER_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_BROWSER_ANALYTIC].[BRW_NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_BROWSER_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_BROWSER_ANALYTIC].[BRW_BROWSER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_BROWSER_ANALYTIC].[BRW_NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_BROWSER_ANALYTIC].[BRW_TOTAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_BROWSER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_THREAD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_LEVEL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_CLASS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_METHOD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_MESSAGE]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1355" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE Security_Analytic_Update_BrowserReport&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Analytic_Update_DatasetLanguage]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    BEGIN TRY
        DECLARE @minDate AS DATE;
        SET @minDate = (SELECT MAX(DSL_NLT_DATE)
                        FROM   TR_DATASET_LANGUAGE_ANALYTIC);
        IF @minDate IS NULL
            BEGIN
                SET @minDate = '2018-01-01';
            END
        SET @minDate = DATEADD(DAY, 1, @minDate);
        INSERT INTO TR_DATASET_LANGUAGE_ANALYTIC (DSL_NLT_DATE, DSL_TOTAL, DSL_LNG_ISO_NAME, DSL_LNG_ISO_CODE)
        SELECT   NLT_DATE,
                 COUNT(*) AS lngCount,
                 LNG_ISO_NAME,
                 LNG_ISO_CODE
        FROM     TD_PRODUCT
                 INNER JOIN
                 TD_RELEASE
                 ON RLS_PRC_ID = PRC_ID
                 INNER JOIN
                 TD_SUBJECT
                 ON PRC_SBJ_ID = SBJ_ID
                 INNER JOIN
                 TD_MATRIX
                 ON MTR_RLS_ID = RLS_ID
                 INNER JOIN
                 TD_GROUP
                 ON RLS_GRP_ID = GRP_ID
                 INNER JOIN
                 TS_LANGUAGE
                 ON MTR_LNG_ID = LNG_ID
                    AND LNG_DELETE_FLAG = 0
                 INNER JOIN
                 TD_ANALYTIC
                 ON MTR_ID = NLT_MTR_ID
        WHERE    NLT_DATE >= @minDate
                 AND NLT_DATE <= dateadd(DAY, -1, (CONVERT (DATE, getdate())))
        GROUP BY NLT_DATE, LNG_ISO_NAME, LNG_ISO_CODE;
        INSERT  INTO TD_LOGGING (LGG_DATETIME, LGG_THREAD, LGG_LEVEL, LGG_CLASS, LGG_METHOD, LGG_MESSAGE)
        VALUES                 (GETDATE(), '0', 'INFO', 'SECURITY_ANALYTIC_UPDATE', 'Update_DatasetLanguage', 'Rows inserted: ' + CAST (@@rowcount AS NVARCHAR));
    END TRY
    BEGIN CATCH
        INSERT  INTO TD_LOGGING (LGG_DATETIME, LGG_THREAD, LGG_LEVEL, LGG_CLASS, LGG_METHOD, LGG_MESSAGE)
        VALUES                 (GETDATE(), '0', 'ERROR', 'SECURITY_ANALYTIC_UPDATE', 'Update_DatasetLanguage ', error_message());
    END CATCH
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_DATASET_LANGUAGE_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_DATASET_LANGUAGE_ANALYTIC].[DSL_NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_DATASET_LANGUAGE_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_DATASET_LANGUAGE_ANALYTIC].[DSL_NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_DATASET_LANGUAGE_ANALYTIC].[DSL_TOTAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_DATASET_LANGUAGE_ANALYTIC].[DSL_LNG_ISO_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_DATASET_LANGUAGE_ANALYTIC].[DSL_LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_THREAD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_LEVEL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_CLASS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_METHOD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_MESSAGE]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2059" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE Security_Analytic_Update_DatasetLanguage&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Analytic_Update_EnvironmentLanguage]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    BEGIN TRY
        DECLARE @minDate AS DATE;
        SET @minDate = (SELECT MAX(NVL_NLT_DATE)
                        FROM   TR_ENVIRONMENT_LANGUAGE_ANALYTIC);
        IF @minDate IS NULL
            BEGIN
                SET @minDate = '2018-01-01';
            END
        SET @minDate = DATEADD(DAY, 1, @minDate);
        INSERT INTO TR_ENVIRONMENT_LANGUAGE_ANALYTIC (NVL_NLT_DATE, NVL_LNG_ISO_CODE, NVL_TOTAL)
        SELECT   NLT_DATE,
                 COALESCE (NLT_LNG_ISO_CODE, '-') AS NLT_LNG_ISO_CODE,
                 COUNT(*) AS rcount
        FROM     TD_ANALYTIC
        WHERE    NLT_DATE >= @minDate
                 AND NLT_DATE <= dateadd(DAY, -1, (CONVERT (DATE, getdate())))
        GROUP BY nlt_date, NLT_LNG_ISO_CODE;
        INSERT  INTO TD_LOGGING (LGG_DATETIME, LGG_THREAD, LGG_LEVEL, LGG_CLASS, LGG_METHOD, LGG_MESSAGE)
        VALUES                 (GETDATE(), '0', 'INFO', 'SECURITY_ANALYTIC_UPDATE', 'Update_EnvironmentLanguage', 'Rows inserted: ' + CAST (@@rowcount AS NVARCHAR));
    END TRY
    BEGIN CATCH
        INSERT  INTO TD_LOGGING (LGG_DATETIME, LGG_THREAD, LGG_LEVEL, LGG_CLASS, LGG_METHOD, LGG_MESSAGE)
        VALUES                 (GETDATE(), '0', 'ERROR', 'SECURITY_ANALYTIC_UPDATE', 'Update_EnvironmentLanguage', error_message());
    END CATCH
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_ENVIRONMENT_LANGUAGE_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_ENVIRONMENT_LANGUAGE_ANALYTIC].[NVL_NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_ENVIRONMENT_LANGUAGE_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_ENVIRONMENT_LANGUAGE_ANALYTIC].[NVL_NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_ENVIRONMENT_LANGUAGE_ANALYTIC].[NVL_LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_ENVIRONMENT_LANGUAGE_ANALYTIC].[NVL_TOTAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_THREAD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_LEVEL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_CLASS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_METHOD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_MESSAGE]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1419" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE Security_Analytic_Update_EnvironmentLanguage&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Analytic_Update_Format]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    BEGIN TRY
        DECLARE @minDate AS DATE;
        SET @minDate = (SELECT MAX(FNL_NLT_DATE)
                        FROM   TR_FORMAT_ANALYTIC);
        IF @minDate IS NULL
            BEGIN
                SET @minDate = '2018-01-01';
            END
        SET @minDate = DATEADD(DAY, 1, @minDate);
        INSERT INTO TR_FORMAT_ANALYTIC (FNL_NLT_DATE, FNL_TOTAL, FNL_FORMAT)
        SELECT   nlt_date,
                 COUNT(*) AS NltCount,
                 FRM_TYPE + ' ' + FRM_VERSION AS FrmTypeVersion
        FROM     TD_PRODUCT
                 INNER JOIN
                 TD_RELEASE
                 ON RLS_PRC_ID = PRC_ID
                 INNER JOIN
                 TD_SUBJECT
                 ON PRC_SBJ_ID = SBJ_ID
                 INNER JOIN
                 TD_MATRIX
                 ON MTR_RLS_ID = RLS_ID
                 INNER JOIN
                 TD_GROUP
                 ON RLS_GRP_ID = GRP_ID
                 INNER JOIN
                 TS_LANGUAGE AS mtrLNG
                 ON MTR_LNG_ID = mtrLng.LNG_ID
                    AND mtrLng.LNG_DELETE_FLAG = 0
                 INNER JOIN
                 TD_ANALYTIC
                 ON MTR_ID = NLT_MTR_ID
                 INNER JOIN
                 TS_FORMAT
                 ON NLT_FRM_ID = FRM_ID
        WHERE    NLT_DATE >= @minDate
                 AND NLT_DATE <= dateadd(DAY, -1, (CONVERT (DATE, getdate())))
        GROUP BY nlt_date, frm_type, frm_version;
        INSERT  INTO TD_LOGGING (LGG_DATETIME, LGG_THREAD, LGG_LEVEL, LGG_CLASS, LGG_METHOD, LGG_MESSAGE)
        VALUES                 (GETDATE(), '0', 'INFO', 'SECURITY_ANALYTIC_UPDATE', 'Update_Format', 'Rows inserted: ' + CAST (@@rowcount AS NVARCHAR));
    END TRY
    BEGIN CATCH
        INSERT  INTO TD_LOGGING (LGG_DATETIME, LGG_THREAD, LGG_LEVEL, LGG_CLASS, LGG_METHOD, LGG_MESSAGE)
        VALUES                 (GETDATE(), '0', 'ERROR', 'SECURITY_ANALYTIC_UPDATE', 'Update_Format', error_message());
    END CATCH
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_FORMAT_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_FORMAT_ANALYTIC].[FNL_NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_FORMAT_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_FORMAT_ANALYTIC].[FNL_NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_FORMAT_ANALYTIC].[FNL_TOTAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_FORMAT_ANALYTIC].[FNL_FORMAT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_THREAD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_LEVEL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_CLASS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_METHOD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_MESSAGE]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2106" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE Security_Analytic_Update_Format&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Analytic_Update_OS]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    BEGIN TRY
        DECLARE @minDate AS DATE;
        SET @minDate = (SELECT MAX(SNL_NLT_DATE)
                        FROM   TR_OS_ANALYTIC);
        IF @minDate IS NULL
            BEGIN
                SET @minDate = '2018-01-01';
            END
        INSERT INTO TR_OS_ANALYTIC (SNL_TOTAL, SNL_OS, SNL_NLT_DATE)
        SELECT   COUNT(*) AS NltCount,
                 CASE WHEN NLT_OS IS NULL
                           OR NLT_OS = '' THEN '-' ELSE NLT_OS END AS NltOs,
                 NLT_DATE
        FROM     TD_PRODUCT
                 INNER JOIN
                 TD_RELEASE
                 ON RLS_PRC_ID = PRC_ID
                 INNER JOIN
                 TD_SUBJECT
                 ON PRC_SBJ_ID = SBJ_ID
                 INNER JOIN
                 TD_MATRIX
                 ON MTR_RLS_ID = RLS_ID
                 INNER JOIN
                 TD_GROUP
                 ON RLS_GRP_ID = GRP_ID
                 INNER JOIN
                 TS_LANGUAGE AS mtrLNG
                 ON MTR_LNG_ID = mtrLng.LNG_ID
                    AND mtrLng.LNG_DELETE_FLAG = 0
                 INNER JOIN
                 TD_ANALYTIC
                 ON MTR_ID = NLT_MTR_ID
                 INNER JOIN
                 TS_FORMAT
                 ON NLT_FRM_ID = FRM_ID
        WHERE    NLT_DATE >= @minDate
                 AND NLT_DATE <= dateadd(DAY, -1, (CONVERT (DATE, getdate())))
        GROUP BY NLT_OS, nlt_date;
        INSERT  INTO TD_LOGGING (LGG_DATETIME, LGG_THREAD, LGG_LEVEL, LGG_CLASS, LGG_METHOD, LGG_MESSAGE)
        VALUES                 (GETDATE(), '0', 'INFO', 'SECURITY_ANALYTIC_UPDATE', 'Update_OS', 'Rows inserted: ' + CAST (@@rowcount AS NVARCHAR));
    END TRY
    BEGIN CATCH
        INSERT  INTO TD_LOGGING (LGG_DATETIME, LGG_THREAD, LGG_LEVEL, LGG_CLASS, LGG_METHOD, LGG_MESSAGE)
        VALUES                 (GETDATE(), '0', 'ERROR', 'SECURITY_ANALYTIC_UPDATE', 'Update_OS', error_message());
    END CATCH
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_OS_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_OS_ANALYTIC].[SNL_NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_OS_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_OS_ANALYTIC].[SNL_TOTAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_OS_ANALYTIC].[SNL_OS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_OS_ANALYTIC].[SNL_NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_OS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_THREAD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_LEVEL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_CLASS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_METHOD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_MESSAGE]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2071" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE Security_Analytic_Update_OS&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Analytic_Update_ReadReport]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    BEGIN TRY
        DECLARE @minDate AS DATE;
        SET @minDate = (SELECT MAX(MNL_NLT_DATE)
                        FROM   TR_MATRIX_ANALYTIC);
        IF @minDate IS NULL
            BEGIN
                SET @minDate = '2018-01-01';
            END
        SET @minDate = DATEADD(DAY, 1, @minDate);
        DROP TABLE IF EXISTS #tmpPrc;
        DROP TABLE IF EXISTS #tmpSbj;
        SELECT PRC_CODE,
               PRC_ID,
               PLG_VALUE,
               PLG_ID,
               LNG_ISO_CODE
        INTO   #tmpPrc
        FROM   TD_PRODUCT
               INNER JOIN
               TD_PRODUCT_LANGUAGE
               ON PRC_ID = PLG_PRC_ID
               INNER JOIN
               TS_LANGUAGE
               ON PLG_LNG_ID = LNG_ID
                  AND LNG_DELETE_FLAG = 0
                  AND LNG_ISO_CODE = @DefaultLngIsoCode;
        SELECT DISTINCT SBJ_CODE,
                        SBJ_ID,
                        SLG_VALUE,
                        SLG_LNG_ID,
                        LNG_ISO_CODE
        INTO   #tmpSbj
        FROM   TD_SUBJECT
               INNER JOIN
               TD_SUBJECT_LANGUAGE
               ON SBJ_ID = SLG_SBJ_ID
               INNER JOIN
               TS_LANGUAGE
               ON SLG_LNG_ID = LNG_ID
                  AND LNG_DELETE_FLAG = 0
                  AND LNG_ISO_CODE = @DefaultLngIsoCode;
        INSERT INTO TR_MATRIX_ANALYTIC (MNL_MTR_CODE, MNL_PRC_CODE, MNL_PRC_VALUE, MNL_SBJ_CODE, MNL_SBJ_VALUE, MNL_BOT, MNL_M2M, MNL_USER, MNL_WIDGET, MNL_TOTAL, MNL_NLT_DATE)
        SELECT   MtrCode,
                 PrcCode,
                 PrcValue,
                 SbjCode,
                 SbjValue,
                 sum(COALESCE (NltBot, 0)) AS NltBot,
                 sum(COALESCE (NltM2m, 0)) AS NltM2m,
                 sum(COALESCE (NltUser, 0)) AS NltUser,
                 sum(COALESCE (NltWidget, 0)) AS NltWidget,
                 sum(COALESCE (Total, 0)) AS Total,
                 NltDate
        FROM     (SELECT CONVERT (INT, NLT_BOT_FLAG) AS NltBot,
                         CONVERT (INT, NLT_M2M_FLAG) AS NltM2m,
                         CONVERT (INT, NLT_USER_FLAG) AS NltUser,
                         CONVERT (INT, NLT_WIDGET) AS NltWidget,
                         TD_MATRIX.MTR_CODE AS MtrCode,
                         TD_PRODUCT.PRC_CODE AS PrcCode,
                         COALESCE (#tmpPrc.PLG_VALUE, PRC_VALUE) AS PrcValue,
                         TD_SUBJECT.SBJ_CODE AS SbjCode,
                         COALESCE (#tmpSbj.SLG_VALUE, SBJ_VALUE) AS SbjValue,
                         CONVERT (INT, NLT_BOT_FLAG) + CONVERT (INT, NLT_M2M_FLAG) + CONVERT (INT, NLT_USER_FLAG) + CONVERT (INT, NLT_WIDGET) AS Total,
                         NLT_DATE AS NltDate
                  FROM   TD_PRODUCT
                         INNER JOIN
                         TD_RELEASE
                         ON RLS_PRC_ID = PRC_ID
                         INNER JOIN
                         TD_SUBJECT
                         ON PRC_SBJ_ID = SBJ_ID
                         INNER JOIN
                         TD_MATRIX
                         ON MTR_RLS_ID = RLS_ID
                         INNER JOIN
                         TD_GROUP
                         ON RLS_GRP_ID = GRP_ID
                         INNER JOIN
                         TS_LANGUAGE AS mtrLNG
                         ON MTR_LNG_ID = mtrLng.LNG_ID
                            AND mtrLng.LNG_DELETE_FLAG = 0
                         INNER JOIN
                         TD_ANALYTIC
                         ON MTR_ID = NLT_MTR_ID
                         LEFT OUTER JOIN
                         TS_LANGUAGE AS nltLng
                         ON nltLng.LNG_ISO_CODE = NLT_LNG_ISO_CODE
                            AND nltLng.LNG_DELETE_FLAG = 0
                         LEFT OUTER JOIN
                         #tmpPrc
                         ON TD_PRODUCT.PRC_CODE = #tmpPrc.PRC_CODE
                         LEFT OUTER JOIN
                         #tmpSbj
                         ON TD_SUBJECT.SBJ_CODE = #tmpSbj.SBJ_CODE
                  WHERE  NLT_DATE >= @minDate
                         AND NLT_DATE <= dateadd(DAY, -1, (CONVERT (DATE, getdate())))) AS q
        WHERE    SbjCode > 0
                 AND PrcCode IS NOT NULL
        GROUP BY MtrCode, SbjCode, SbjValue, PrcCode, PrcValue, SbjValue, NltDate
        ORDER BY NltDate;
        DECLARE @RowCount AS INT;
        SET @RowCount = @@rowcount;
        DROP TABLE IF EXISTS #tmpPrc;
        DROP TABLE IF EXISTS #tmpSbj;
        INSERT  INTO TD_LOGGING (LGG_DATETIME, LGG_THREAD, LGG_LEVEL, LGG_CLASS, LGG_METHOD, LGG_MESSAGE)
        VALUES                 (GETDATE(), '0', 'INFO', 'SECURITY_ANALYTIC_UPDATE', 'Update_ReadReport', 'Rows inserted: ' + CAST (@RowCount AS NVARCHAR));
    END TRY
    BEGIN CATCH
        INSERT  INTO TD_LOGGING (LGG_DATETIME, LGG_THREAD, LGG_LEVEL, LGG_CLASS, LGG_METHOD, LGG_MESSAGE)
        VALUES                 (GETDATE(), '0', 'ERROR', 'SECURITY_ANALYTIC_UPDATE', 'Update_ReadReport', error_message());
    END CATCH
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Update_ReadReport].[#tmpPrc]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Update_ReadReport].[#tmpSbj]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Update_ReadReport].[@DefaultLngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_BOT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_M2M]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_WIDGET]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_TOTAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Update_ReadReport].[#tmpPrc].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Update_ReadReport].[#tmpSbj].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_BOT_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_M2M_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_USER_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_WIDGET]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Update_ReadReport].[#tmpPrc].[PLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Analytic_Update_ReadReport].[#tmpSbj].[SLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_THREAD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_LEVEL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_CLASS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_METHOD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_MESSAGE]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Security_Analytic_Update_ReadReport].[#tmpPrc]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_Update_ReadReport].[#tmpPrc].[PRC_CODE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_Update_ReadReport].[#tmpPrc].[PRC_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_Update_ReadReport].[#tmpPrc].[PLG_VALUE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_VALUE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_Update_ReadReport].[#tmpPrc].[PLG_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_Update_ReadReport].[#tmpPrc].[LNG_ISO_CODE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Security_Analytic_Update_ReadReport].[#tmpSbj]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_Update_ReadReport].[#tmpSbj].[SBJ_CODE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_Update_ReadReport].[#tmpSbj].[SBJ_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_Update_ReadReport].[#tmpSbj].[SLG_VALUE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_VALUE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_Update_ReadReport].[#tmpSbj].[SLG_LNG_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_LNG_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Security_Analytic_Update_ReadReport].[#tmpSbj].[LNG_ISO_CODE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Analytic_Update_ReadReport].[@DefaultLngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="5304" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE Security_Analytic_Update_ReadReport&#xD;&#xA;@DefaultLngIsoCode CHAR (2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Analytic_Update_Referer]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    BEGIN TRY
        DECLARE @minDate AS DATE;
        SET @minDate = (SELECT MAX(RFR_NLT_DATE)
                        FROM   TR_REFERER_ANALYTIC);
        IF @minDate IS NULL
            BEGIN
                SET @minDate = '2018-01-01';
            END
        INSERT INTO TR_REFERER_ANALYTIC (RFR_TOTAL, RFR_REFERER, RFR_NLT_DATE)
        SELECT   COUNT(*) AS NltCount,
                 NltReferer,
                 NLT_DATE
        FROM     (SELECT CASE WHEN NLT_REFERER IS NULL
                                   OR NLT_REFERER = '' THEN '-' ELSE NLT_REFERER END AS NltReferer,
                         NLT_DATE
                  FROM   TD_PRODUCT
                         INNER JOIN
                         TD_RELEASE
                         ON RLS_PRC_ID = PRC_ID
                         INNER JOIN
                         TD_SUBJECT
                         ON PRC_SBJ_ID = SBJ_ID
                         INNER JOIN
                         TD_MATRIX
                         ON MTR_RLS_ID = RLS_ID
                         INNER JOIN
                         TD_GROUP
                         ON RLS_GRP_ID = GRP_ID
                         INNER JOIN
                         TS_LANGUAGE AS mtrLNG
                         ON MTR_LNG_ID = mtrLng.LNG_ID
                            AND mtrLng.LNG_DELETE_FLAG = 0
                         INNER JOIN
                         TD_ANALYTIC
                         ON MTR_ID = NLT_MTR_ID
                         INNER JOIN
                         TS_FORMAT
                         ON NLT_FRM_ID = FRM_ID
                         LEFT OUTER JOIN
                         TS_LANGUAGE AS nltLng
                         ON nltLng.LNG_ISO_CODE = NLT_LNG_ISO_CODE
                            AND nltLng.LNG_DELETE_FLAG = 0
                  WHERE  NLT_DATE >= @minDate
                         AND NLT_DATE <= dateadd(DAY, -1, (CONVERT (DATE, getdate())))) AS Q
        GROUP BY Q.NltReferer, q.NLT_DATE;
        INSERT  INTO TD_LOGGING (LGG_DATETIME, LGG_THREAD, LGG_LEVEL, LGG_CLASS, LGG_METHOD, LGG_MESSAGE)
        VALUES                 (GETDATE(), '0', 'INFO', 'SECURITY_ANALYTIC_UPDATE', 'Update_Referer', 'Rows inserted: ' + CAST (@@rowcount AS NVARCHAR));
    END TRY
    BEGIN CATCH
        INSERT  INTO TD_LOGGING (LGG_DATETIME, LGG_THREAD, LGG_LEVEL, LGG_CLASS, LGG_METHOD, LGG_MESSAGE)
        VALUES                 (GETDATE(), '0', 'ERROR', 'SECURITY_ANALYTIC_UPDATE', 'Update_Referer', error_message());
    END CATCH
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_REFERER_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_REFERER_ANALYTIC].[RFR_NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_REFERER_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_REFERER_ANALYTIC].[RFR_TOTAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_REFERER_ANALYTIC].[RFR_REFERER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TR_REFERER_ANALYTIC].[RFR_NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_REFERER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_THREAD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_LEVEL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_CLASS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_METHOD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_MESSAGE]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2634" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE Security_Analytic_Update_Referer&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Api_Trace_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    IF @AuthenticationType IS NULL
        BEGIN
            SET @AuthenticationType = @Const_ANY;
        END
    SELECT   t.TRC_USERNAME AS TrcCcnUsername,
             a.PRV_VALUE AS TrcPrvValue,
             t.trc_ip AS TrcIp,
             t.TRC_METHOD AS TrcMethod,
             t.trc_params AS TrcParams,
             t.trc_useragent AS TrcUserAgent,
             t.trc_datetime AS TrcDatetime,
             t.TRC_STARTTIME AS TrcStartTime,
             t.TRC_DURATION AS TrcDuration,
             t.TRC_STATUSCODE AS TrcStatusCode,
             t.TRC_REQUEST_TYPE AS TrcRequestType,
             t.TRC_REQUEST_VERB AS TrcRequestVerb,
             t.TRC_MACHINENAME AS TrcMachinename,
             t.TRC_CORRELATION_ID AS TrcCorrelationId,
             t.TRC_ERROR_PATH AS TrcErrorPath,
             t.TRC_CONTENT_LENGTH AS TrcContentLength,
             t.TRC_REFERER AS TrcReferer
    FROM     TD_API_TRACE AS t
             LEFT OUTER JOIN
             (SELECT ac.CCN_USERNAME,
                     ac.CCN_PRV_ID,
                     ac.CCN_ID,
                     pr.PRV_VALUE
              FROM   TD_ACCOUNT AS ac
                     INNER JOIN
                     TS_PRIVILEGE AS pr
                     ON ac.CCN_PRV_ID = pr.PRV_ID
                        AND ac.CCN_DELETE_FLAG = 0
              WHERE  ccn_delete_flag = 0) AS a
             ON t.TRC_USERNAME = a.CCN_USERNAME
    WHERE    t.TRC_DATETIME >= @StartDate
             AND t.TRC_DATETIME <= @EndDate
             AND ((@AuthenticationType = @Const_REGISTERED
                   AND a.CCN_USERNAME IS NOT NULL)
                  OR (@AuthenticationType = @Const_ANONYMOUS
                      AND a.CCN_USERNAME IS NULL
                      AND t.TRC_USERNAME IS NULL)
                  OR (@AuthenticationType = @Const_AUTHENTICATED
                      AND t.TRC_USERNAME IS NOT NULL
                      AND a.CCN_USERNAME IS NULL)
                  OR (@AuthenticationType = @Const_ANY))
             AND (@TrcUsername IS NULL
                  OR t.TRC_USERNAME = @TrcUsername)
             AND (@TrcIp IS NULL
                  OR t.TRC_IP = @TrcIp)
    ORDER BY t.TRC_DATETIME;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[Security_Api_Trace_Read].[@AuthenticationType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Api_Trace_Read].[@Const_ANY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_IP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_METHOD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_PARAMS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_USERAGENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_STARTTIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_DURATION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_STATUSCODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_REQUEST_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_REQUEST_VERB]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_MACHINENAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_CORRELATION_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_ERROR_PATH]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_CONTENT_LENGTH]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_REFERER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Api_Trace_Read].[@StartDate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Api_Trace_Read].[@EndDate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Api_Trace_Read].[@Const_REGISTERED]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Api_Trace_Read].[@Const_ANONYMOUS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Api_Trace_Read].[@Const_AUTHENTICATED]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Api_Trace_Read].[@TrcUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Api_Trace_Read].[@TrcIp]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_IP]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Api_Trace_Read].[@StartDate]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Api_Trace_Read].[@EndDate]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Api_Trace_Read].[@Const_AUTHENTICATED]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Api_Trace_Read].[@Const_REGISTERED]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Api_Trace_Read].[@Const_ANONYMOUS]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Api_Trace_Read].[@Const_ANY]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Api_Trace_Read].[@AuthenticationType]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Api_Trace_Read].[@TrcUsername]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Api_Trace_Read].[@TrcIp]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="15" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2564" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE Security_Api_Trace_Read&#xD;&#xA;@StartDate DATETIME, @EndDate DATETIME, @Const_AUTHENTICATED NVARCHAR (32), @Const_REGISTERED NVARCHAR (32), @Const_ANONYMOUS NVARCHAR (32), @Const_ANY NVARCHAR (32), @AuthenticationType VARCHAR (32)=NULL, @TrcUsername NVARCHAR (256)=NULL, @TrcIp VARCHAR (15)=NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Auditing_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    DECLARE @CcnId AS INT = NULL;
    DECLARE @errorMessage AS VARCHAR (256) = NULL;
    DECLARE @DtgId AS INT = NULL;
    SELECT @CcnId = CCN_ID
    FROM   TD_ACCOUNT
    WHERE  CCN_USERNAME = @userName
           AND CCN_DELETE_FLAG = 0;
    IF @CcnId IS NULL
        BEGIN
            SET @errorMessage = 'SP: Security_Auditing_Create - userName not found: ' + CAST (@userName AS VARCHAR);
            RAISERROR (@errorMessage, 16, 1);
            RETURN 0;
        END
    INSERT  INTO TD_AUDITING
    DEFAULT VALUES;
    SET @DtgId = @@IDENTITY;
    BEGIN TRY
        INSERT  INTO TM_AUDITING_HISTORY (DHT_DTG_ID, DHT_DTP_ID, DHT_CCN_ID, DHT_DATETIME)
        VALUES                          (@DtgId, (SELECT DTP_ID
                                                  FROM   TS_AUDITING_TYPE
                                                  WHERE  DTP_CODE = 'CREATED'), @CcnId, GETDATE());
    END TRY
    BEGIN CATCH
        RETURN NULL;
    END CATCH
    RETURN @DtgId;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Auditing_Create].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1109" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE Security_Auditing_Create&#xD;&#xA;@userName NVARCHAR (256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Auditing_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    DECLARE @eMessage AS VARCHAR (256);
    DECLARE @recordCount AS INT;
    DECLARE @DeleteCcnID AS INT = NULL;
    SET @DeleteCcnID = (SELECT CCN_ID
                        FROM   TD_ACCOUNT
                        WHERE  CCN_USERNAME = @DeleteCcnUsername
                               AND CCN_DELETE_FLAG = 0);
    IF @DeleteCcnID IS NULL
       OR @DeleteCcnID = 0
        BEGIN
            SET @eMessage = 'Error amending audit record - no account record found for @DeleteCcnUsername: ' + CAST (isnull(@DeleteCcnUsername, 0) AS VARCHAR);
            RAISERROR (@eMessage, 16, 1);
            RETURN 0;
        END
    SET @recordCount = (SELECT count(*)
                        FROM   TD_AUDITING
                        WHERE  DTG_ID = @DtgID);
    IF @recordCount IS NULL
       OR @recordCount = 0
        BEGIN
            SET @eMessage = 'Error amending audit record - no create audit record found for DtgID: ' + CAST (isnull(@DtgID, 0) AS VARCHAR);
            RAISERROR (@eMessage, 16, 1);
            RETURN 0;
        END
    INSERT  INTO TM_AUDITING_HISTORY (DHT_DTG_ID, DHT_DTP_ID, DHT_CCN_ID, DHT_DATETIME)
    VALUES                          (@DtgID, (SELECT DTP_ID
                                              FROM   TS_AUDITING_TYPE
                                              WHERE  DTP_CODE = 'DELETED'), @DeleteCcnID, GETDATE());
    RETURN @@ROWCOUNT;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Delete].[@DeleteCcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Delete].[@DtgID]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Auditing_Delete].[@DtgID]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Auditing_Delete].[@DeleteCcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1536" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE Security_Auditing_Delete&#xD;&#xA;@DtgID INT, @DeleteCcnUsername NVARCHAR (256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Auditing_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    DECLARE @eMessage AS VARCHAR (256);
    DECLARE @recordCount AS INT;
    DECLARE @UpdateCcnID AS INT = NULL;
    DECLARE @DhtId AS INT = NULL;
    SET @UpdateCcnID = (SELECT CCN_ID
                        FROM   TD_ACCOUNT
                        WHERE  CCN_USERNAME = @UpdateCcnUsername
                               AND CCN_DELETE_FLAG = 0);
    IF @UpdateCcnID IS NULL
       OR @UpdateCcnID = 0
        BEGIN
            SET @eMessage = 'Error amending audit record - no account record found for @UpdateCcnID: ' + CAST (isnull(@UpdateCcnUsername, 0) AS VARCHAR);
            RAISERROR (@eMessage, 16, 1);
            RETURN 0;
        END
    SET @DhtId = (SELECT count(*)
                  FROM   TD_AUDITING
                  WHERE  DTG_ID = @DtgID);
    IF @DhtId IS NULL
       OR @recordCount = 0
        BEGIN
            SET @DhtId = 'Error amending audit record - no create audit record found for DtgID: ' + CAST (isnull(@DtgID, 0) AS VARCHAR);
            RAISERROR (@eMessage, 16, 1);
            RETURN 0;
        END
    INSERT  INTO TM_AUDITING_HISTORY (DHT_DTG_ID, DHT_DTP_ID, DHT_CCN_ID, DHT_DATETIME)
    VALUES                          (@DtgID, (SELECT DTP_ID
                                              FROM   TS_AUDITING_TYPE
                                              WHERE  DTP_CODE = 'UPDATED'), @UpdateCcnID, GETDATE());
    RETURN @@ROWCOUNT;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Update].[@UpdateCcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Update].[@DtgID]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Auditing_Update].[@DtgID]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Auditing_Update].[@UpdateCcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1537" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE Security_Auditing_Update&#xD;&#xA;@DtgID INT, @UpdateCcnUsername VARCHAR (256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Database_ReadStatistic]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	IF @TableName IS NULL
	BEGIN
		SELECT OBJECT_NAME(ips.OBJECT_ID) AS 'table'
			,i.NAME AS 'index'
			,ips.index_type_desc AS 'type'
			,ips.record_count AS 'rows'
			,ROUND(ips.avg_record_size_in_bytes * ips.record_count, 0) AS 'size'
			,ROUND(ips.avg_fragmentation_in_percent, 0) AS 'fragmentation'
		FROM sys.dm_db_index_physical_stats(DB_ID(), NULL, NULL, NULL, 'SAMPLED') ips
		INNER JOIN sys.indexes i ON ips.object_id = i.object_id
			AND ips.index_id = i.index_id
	END
	ELSE
	BEGIN
		SELECT OBJECT_NAME(ips.OBJECT_ID) AS 'table'
			,i.NAME AS 'index'
			,ips.index_type_desc AS 'type'
			,ips.record_count AS 'rows'
			,ROUND(ips.avg_record_size_in_bytes * ips.record_count, 0) AS 'size'
			,ROUND(ips.avg_fragmentation_in_percent, 0) AS 'fragmentation'
		FROM sys.dm_db_index_physical_stats(DB_ID(), NULL, NULL, NULL, 'SAMPLED') ips
		INNER JOIN sys.indexes i ON ips.object_id = i.object_id
			AND ips.index_id = i.index_id
			AND OBJECT_NAME(ips.OBJECT_ID) = @TableName
	END
END]]></Value>
			</Property>
			<Property Name="IsCaller" Value="False" />
			<Property Name="IsOwner" Value="True" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[Security_Database_ReadStatistic].[@TableName]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Database_ReadStatistic].[@TableName]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="293" />
				<Property Name="Length" Value="1459" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Liam Millar&#xD;&#xA;-- Create date: 08/03/2021&#xD;&#xA;-- Description:&#x9;Returns details of fragmentation for Indices of a specific table or all tables&#xD;&#xA;-- exec Security_Database_ReadStatistic &#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[Security_Database_ReadStatistic] @TableName NVARCHAR(128) = NULL&#xD;&#xA;&#x9;WITH EXECUTE AS OWNER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Database_ReadTableList]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT TABLE_NAME
	FROM Information_Schema.tables
	WHERE TABLE_TYPE = 'BASE TABLE';
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry />
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="269" />
				<Property Name="Length" Value="456" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Liam Millar&#xD;&#xA;-- Create date: 08/03/2021&#xD;&#xA;-- Description:&#x9;Returns a list of all Base Type Tables in the Database&#xD;&#xA;-- exec Security_Database_ReadTableList &#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[Security_Database_ReadTableList]&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Database_ReorganizeFragmented]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @FRAGMENTATION_LIMIT AS INT;
	DECLARE @TableName AS NVARCHAR(128);
	DECLARE @MIN_ROW_COUNT AS INT;

	SET @FRAGMENTATION_LIMIT = 51;

	INSERT INTO TD_LOGGING (
		LGG_DATETIME
		,LGG_THREAD
		,LGG_LEVEL
		,LGG_CLASS
		,LGG_METHOD
		,LGG_MESSAGE
		)
	VALUES (
		getdate()
		,'0'
		,'INFO'
		,'SQL SERVER AGENT'
		,'Security_Database_ReorganizeFragmented'
		,'Starting defragmentation'
		);

	DECLARE table_cursor CURSOR
	FOR
	SELECT DISTINCT OBJECT_NAME(ips.OBJECT_ID) AS 'table'
	FROM sys.dm_db_index_physical_stats(DB_ID(), NULL, NULL, NULL, 'SAMPLED') AS ips
	INNER JOIN sys.indexes AS i
		ON ips.object_id = i.object_id
			AND ips.index_id = i.index_id
			AND ips.avg_fragmentation_in_percent > @FRAGMENTATION_LIMIT;

	OPEN table_cursor;

	FETCH NEXT
	FROM table_cursor
	INTO @TableName;

	INSERT INTO TD_LOGGING (
		LGG_DATETIME
		,LGG_THREAD
		,LGG_LEVEL
		,LGG_CLASS
		,LGG_METHOD
		,LGG_MESSAGE
		)
	VALUES (
		getdate()
		,'0'
		,'INFO'
		,'SQL SERVER AGENT'
		,'Security_Database_ReorganizeFragmented'
		,'Starting index defragmentation for ' + CONVERT(VARCHAR(256), @@CURSOR_ROWS) + ' tables'
		);

	WHILE @@FETCH_STATUS = 0
	BEGIN
		BEGIN TRY
			EXECUTE Security_Database_UpdateStatistic @TableName;

			INSERT INTO TD_LOGGING (
				LGG_DATETIME
				,LGG_THREAD
				,LGG_LEVEL
				,LGG_CLASS
				,LGG_METHOD
				,LGG_MESSAGE
				)
			VALUES (
				getdate()
				,'0'
				,'INFO'
				,'SQL SERVER AGENT'
				,'Security_Database_ReorganizeFragmented'
				,'INDEXES DEFRAGMENTED for ' + @TableName
				);

			SELECT @TableName;

			FETCH NEXT
			FROM table_cursor
			INTO @TableName;
		END TRY

		BEGIN CATCH
			INSERT INTO TD_LOGGING (
				LGG_DATETIME
				,LGG_THREAD
				,LGG_LEVEL
				,LGG_CLASS
				,LGG_METHOD
				,LGG_MESSAGE
				)
			VALUES (
				getdate()
				,'0'
				,'INFO'
				,'SQL SERVER AGENT'
				,'Security_Database_ReorganizeFragmented'
				,'Error amending indexes for ' + @TableName + ' ' + ERROR_MESSAGE()
				);
		END CATCH
	END

	CLOSE table_cursor;

	DEALLOCATE table_cursor;

	EXECUTE sp_updatestats;

	INSERT INTO TD_LOGGING (
		LGG_DATETIME
		,LGG_THREAD
		,LGG_LEVEL
		,LGG_CLASS
		,LGG_METHOD
		,LGG_MESSAGE
		)
	VALUES (
		getdate()
		,'0'
		,'INFO'
		,'SQL SERVER AGENT'
		,'Security_Database_ReorganizeFragmented'
		,'Statistics Updated'
		);
END]]></Value>
			</Property>
			<Property Name="IsCaller" Value="False" />
			<Property Name="IsOwner" Value="True" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_THREAD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_LEVEL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_CLASS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_METHOD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_MESSAGE]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Database_UpdateStatistic]" />
				</Entry>
				<Entry />
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="245" />
				<Property Name="Length" Value="2791" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date:10/03/2021&#xD;&#xA;-- Description:&#x9;Checks index fragmentation and automatically reorganizes any indexes with more than a set percentage amount of fragmenation&#xD;&#xA;-- exec Security_Database_ReorganizeFragmented&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[Security_Database_ReorganizeFragmented]&#xD;&#xA;&#x9;WITH EXECUTE AS OWNER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Database_UpdateIndexes]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	DECLARE @FRAGMENTATION_LIMIT INT
	DECLARE @TableName NVARCHAR(128)
	DECLARE @MIN_ROW_COUNT INT

	SET @FRAGMENTATION_LIMIT = 51

	DECLARE table_cursor CURSOR
	FOR
	SELECT DISTINCT OBJECT_NAME(ips.OBJECT_ID) AS 'table'
	FROM sys.dm_db_index_physical_stats(DB_ID(), NULL, NULL, NULL, 'SAMPLED') ips
	INNER JOIN sys.indexes i
		ON ips.object_id = i.object_id
			AND ips.index_id = i.index_id
			AND ips.avg_fragmentation_in_percent > @FRAGMENTATION_LIMIT

	OPEN table_cursor

	INSERT INTO TD_LOGGING (
		LGG_DATETIME
		,LGG_THREAD
		,LGG_LEVEL
		,LGG_CLASS
		,LGG_METHOD
		,LGG_MESSAGE
		)
	VALUES (
		getdate()
		,'0'
		,'INFO'
		,'SQL SERVER AGENT'
		,'Security_Database_UpdateIndexes'
		,convert(VARCHAR(256), @@CURSOR_ROWS) + ' tables to update Indexes/Statistics'
		)

	FETCH NEXT
	FROM table_cursor
	INTO @TableName

	WHILE @@FETCH_STATUS = 0
	BEGIN
		BEGIN TRY
			EXEC Security_Database_UpdateStatistic @TableName

			INSERT INTO TD_LOGGING (
				LGG_DATETIME
				,LGG_THREAD
				,LGG_LEVEL
				,LGG_CLASS
				,LGG_METHOD
				,LGG_MESSAGE
				)
			VALUES (
				getdate()
				,'0'
				,'INFO'
				,'SQL SERVER AGENT'
				,'Security_Database_UpdateIndexes'
				,'Indexes/Statistics updated for table ' + @TableName
				)

			FETCH NEXT
			FROM table_cursor
			INTO @TableName
		END TRY

		BEGIN CATCH
			INSERT INTO TD_LOGGING (
				LGG_DATETIME
				,LGG_THREAD
				,LGG_LEVEL
				,LGG_CLASS
				,LGG_METHOD
				,LGG_MESSAGE
				)
			VALUES (
				getdate()
				,'0'
				,'INFO'
				,'SQL SERVER AGENT'
				,'Security_Database_UpdateIndexes'
				,'Error updating Indexes/Statistics for table ' + @TableName + ': ' + ERROR_MESSAGE()
				)
		END CATCH
	END

	CLOSE table_cursor

	DEALLOCATE table_cursor
END]]></Value>
			</Property>
			<Property Name="IsCaller" Value="False" />
			<Property Name="IsOwner" Value="True" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[TD_LOGGING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_THREAD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_LEVEL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_CLASS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_METHOD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_MESSAGE]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Database_UpdateStatistic]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="338" />
				<Property Name="Length" Value="2345" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date:10/03/2021&#xD;&#xA;-- Description:&#x9;Checks index fragmentation and automatically reorganizes any indexes with more than a set percentage amount of fragmenation&#xD;&#xA;-- exec Security_Database_UpdateIndexes&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Database_UpdateIndexes&#xD;&#xA;&#x9;WITH EXECUTE AS OWNER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Database_UpdateStatistic]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @counter INT

	SET @counter = (
			SELECT COUNT(*)
			FROM Information_Schema.tables
			WHERE TABLE_TYPE = 'BASE TABLE'
				AND TABLE_NAME = @TableName
			)

	IF @counter > 0
	BEGIN
		EXEC ('ALTER INDEX ALL ON ' + @TableName + ' REORGANIZE')
		EXEC ('UPDATE STATISTICS ' + @TableName )
	END
END]]></Value>
			</Property>
			<Property Name="IsCaller" Value="False" />
			<Property Name="IsOwner" Value="True" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[Security_Database_UpdateStatistic].[@TableName]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Database_UpdateStatistic].[@TableName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="257" />
				<Property Name="Length" Value="721" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Liam Millar&#xD;&#xA;-- Create date: 08/03/2021&#xD;&#xA;-- Description:&#x9;Reorganize indexes for a specific table &#xD;&#xA;-- exec Security_Database_UpdateStatistic &#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[Security_Database_UpdateStatistic] @TableName NVARCHAR(128)&#xD;&#xA;&#x9;WITH EXECUTE AS OWNER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Group_AccessList]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	IF EXISTS (
			SELECT 1
			FROM TD_ACCOUNT
			INNER JOIN TS_PRIVILEGE
				ON CCN_PRV_ID = PRV_ID
					AND (
						PRV_CODE = 'ADMINISTRATOR'
						OR PRV_CODE = 'POWER_USER'
						)
					AND CCN_DELETE_FLAG = 0
			WHERE CCN_USERNAME = @CcnUsername
			)
	BEGIN
		SELECT GRP_ID
		FROM TD_GROUP
		WHERE GRP_DELETE_FLAG = 0
	END
	ELSE
	BEGIN
		SELECT GCC_GRP_ID
		FROM TM_GROUP_ACCOUNT
		INNER JOIN TD_ACCOUNT
			ON GCC_CCN_ID = CCN_ID
		WHERE CCN_USERNAME = @CcnUsername
			AND GCC_DELETE_FLAG = 0
			AND CCN_DELETE_FLAG = 0
		GROUP BY GCC_GRP_ID
	END
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_AccessList].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Group_AccessList].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="206" />
				<Property Name="Length" Value="896" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Read date:&#x9;07 Dec 2018&#xD;&#xA;-- Description:&#x9;Lists groups user has access to&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Group_AccessList @CcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Group_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT = NULL

	-- Do the create Audit and get the new DtgID from the stored procedure
	EXEC @DtgID = Security_Auditing_Create @CcnUsername

	-- Check for problems with the audit stored procedure
	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		RAISERROR (
				'Error in calling Security_Auditing_Create'
				,16
				,1
				)

		RETURN 0
	END

	INSERT INTO TD_GROUP (
		GRP_NAME
		,GRP_CONTACT_NAME
		,GRP_CONTACT_PHONE
		,GRP_CONTACT_EMAIL
		,GRP_CODE
		,GRP_DTG_ID
		,GRP_DELETE_FLAG
		)
	VALUES (
		@GrpName
		,@GrpContactName
		,@GrpContactPhone
		,@GrpContactEmail
		,@GrpCode
		,@DtgID
		,0
		)

	RETURN @@IDENTITY
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_Create].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CONTACT_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CONTACT_PHONE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CONTACT_EMAIL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_Create].[@GrpName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_Create].[@GrpContactName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_Create].[@GrpContactPhone]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_Create].[@GrpContactEmail]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_Create].[@GrpCode]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Group_Create].[@GrpCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Group_Create].[@GrpName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Group_Create].[@GrpContactName]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Group_Create].[@GrpContactPhone]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Group_Create].[@GrpContactEmail]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Group_Create].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="202" />
				<Property Name="Length" Value="1150" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 01/10/2018&#xD;&#xA;-- Description:&#x9;To create a new Group entry&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Group_Create @GrpCode NVARCHAR(32)&#xD;&#xA;&#x9;,@GrpName NVARCHAR(256)&#xD;&#xA;&#x9;,@GrpContactName NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@GrpContactPhone NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@GrpContactEmail NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Group_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT
	DECLARE @eMessage VARCHAR(256)
	DECLARE @updateCount INT

	-- Check record exists 
	SET @DtgID = (
			SELECT GRP_DTG_ID
			FROM TD_GROUP
			WHERE GRP_CODE = @GrpCode
				AND GRP_DELETE_FLAG = 0
			)

	IF @DtgID IS NULL
	BEGIN
		--This record doesn't exist
		RETURN 0
	END

	--We may now do the soft delete
	UPDATE TD_GROUP
	SET GRP_DELETE_FLAG = 1
	WHERE GRP_CODE = @GrpCode
		AND GRP_DELETE_FLAG = 0

	SET @updateCount = @@ROWCOUNT

	IF @updateCount > 0
	BEGIN
		-- do the auditing 
		-- Update the entry in the TD_AUDITING table
		DECLARE @AuditUpdateCount INT

		EXEC @AuditUpdateCount = Security_Auditing_Delete @DtgID
			,@DeleteCcnUsername

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error creating entry in TD_AUDITING for Group delete:' + cast(isnull(@GrpCode, 0) AS VARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN
		END
	END

	-- Return the number of rows deleted
	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_Delete].[@GrpCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Delete]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_Delete].[@DeleteCcnUsername]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Group_Delete].[@GrpCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Group_Delete].[@DeleteCcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="201" />
				<Property Name="Length" Value="1397" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 01/10/2018&#xD;&#xA;-- Description:&#x9;To delete a Group entity. &#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Group_Delete @GrpCode NVARCHAR(32)&#xD;&#xA;&#x9;,@DeleteCcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Group_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT grp.GRP_CODE AS GrpCode
		,grp.GRP_NAME AS GrpName
		,grp.GRP_CONTACT_NAME AS GrpContactName
		,grp.GRP_CONTACT_PHONE AS GrpContactPhone
		,grp.GRP_CONTACT_EMAIL AS GrpContactEmail
		,GroupUserCount.CcnCount
		,GroupReleaseCount.RlsLiveCount
		,coalesce(mtrCount,0) AS MtrCount
	FROM TD_GROUP grp
	INNER JOIN (
		SELECT grp.GRP_ID
			,count(gcc.GCC_ID) AS CcnCount
		FROM TD_GROUP grp
		LEFT JOIN TM_GROUP_ACCOUNT gcc
			ON grp.GRP_ID = gcc.GCC_GRP_ID
				AND grp.GRP_DELETE_FLAG = 0
				AND gcc.GCC_DELETE_FLAG = 0
		GROUP BY grp.GRP_ID
		) GroupUserCount
		ON grp.GRP_ID = GroupUserCount.GRP_ID
	INNER JOIN (
		SELECT grp.GRP_ID
			,count(rls.RLS_ID) AS RlsLiveCount
		FROM TD_GROUP grp
		LEFT JOIN TD_RELEASE rls
			ON grp.GRP_ID = rls.RLS_GRP_ID
				AND grp.GRP_DELETE_FLAG = 0
				AND rls.RLS_DELETE_FLAG = 0
				AND RLS_id IN (
					SELECT VRN_RLS_ID
					FROM VW_RELEASE_LIVE_NOW
					)
		GROUP BY grp.GRP_ID
		) GroupReleaseCount
		ON grp.GRP_ID = GroupReleaseCount.GRP_ID

		LEFT JOIN (
			SELECT GRP_CODE
				,COUNT(*) AS mtrCount
			FROM (
				SELECT DISTINCT GRP_CODE, MTR_CODE
				FROM TD_GROUP
				INNER JOIN TD_RELEASE
				ON GRP_ID=RLS_GRP_ID 
				AND GRP_DELETE_FLAG=0
				AND RLS_DELETE_FLAG=0
				INNER JOIN TD_MATRIX
				ON RLS_ID=MTR_RLS_ID
				AND RLS_DELETE_FLAG=0 
				AND MTR_DELETE_FLAG=0
				) prcInner
			GROUP BY GRP_CODE
			) 
			 grpMtrCounter
			ON grp.GRP_CODE = grpMtrCounter.GRP_CODE


	WHERE (
			@GrpCode IS NULL
			OR (@GrpCode = grp.GRP_CODE)
			)
		AND grp.GRP_DELETE_FLAG = 0
	ORDER BY grp.GRP_CODE
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CONTACT_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CONTACT_PHONE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CONTACT_EMAIL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_Read].[@GrpCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Group_Read].[@GrpCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="260" />
				<Property Name="Length" Value="1979" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 28/09/2018&#xD;&#xA;-- Description:&#x9;Read Groups including Acount and release counts&#xD;&#xA;-- exec Security_Group_Read 'RPTEST'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Group_Read @GrpCode NVARCHAR(32) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Group_ReadAccess]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT grp.GRP_NAME AS GrpName
		,grp.GRP_CONTACT_NAME AS GrpContactName
		,grp.GRP_CONTACT_PHONE AS GrpContactPhone
		,grp.GRP_CONTACT_EMAIL AS GrpContactEmail
		,grp.GRP_CODE AS GrpCode
	FROM TD_GROUP grp
	INNER JOIN TM_GROUP_ACCOUNT gcc
		ON grp.GRP_ID = gcc.GCC_GRP_ID
			AND grp.GRP_DELETE_FLAG = 0
			AND gcc.GCC_DELETE_FLAG = 0
	INNER JOIN TD_ACCOUNT ccn
		ON gcc.GCC_CCN_ID = ccn.CCN_ID
			AND ccn.CCN_DELETE_FLAG = 0
	WHERE ccn.CCN_USERNAME = @CcnUsername
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CONTACT_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CONTACT_PHONE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CONTACT_EMAIL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_ReadAccess].[@CcnUsername]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Group_ReadAccess].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="270" />
				<Property Name="Length" Value="862" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 05/11/2018&#xD;&#xA;-- Description:&#x9;Read Groups for which the CcnUsername has access&#xD;&#xA;-- exec Security_Group_ReadAccess 'okeeffene'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Group_ReadAccess @CcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Group_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT
	DECLARE @eMessage NVARCHAR(256)
	DECLARE @updateCount INT

	SET @DtgID = (
			SELECT GRP_DTG_ID
			FROM TD_GROUP
			WHERE GRP_CODE = @GrpCodeOld
				AND GRP_DELETE_FLAG = 0
			)

	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		-- the requested record doesn't exist
		RETURN 0
	END

	-- update Table
	UPDATE TD_GROUP
	SET GRP_CODE = @GrpCodeNew
		,GRP_NAME = @GrpName
		,GRP_CONTACT_NAME = @GrpContactName
		,GRP_CONTACT_PHONE = @GrpContactPhone
		,GRP_CONTACT_EMAIL = @GrpContactEmail
	WHERE GRP_CODE = @GrpCodeOld
		AND GRP_DELETE_FLAG = 0

	SET @updateCount = @@ROWCOUNT

	IF @updateCount > 0
	BEGIN
		-- Auditing:
		-- update record on auditing table
		DECLARE @AuditUpdateCount INT

		EXEC @AuditUpdateCount = Security_Auditing_Update @DtgID
			,@UpdateCcnUsername

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error creating entry in TD_AUDITING for Group update:' + cast(isnull(@GrpCodeOld, 0) AS NVARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN
		END
	END

	--Return the number of rows updated
	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_Update].[@GrpCodeOld]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_Update].[@GrpCodeNew]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_Update].[@GrpName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CONTACT_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_Update].[@GrpContactName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CONTACT_PHONE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_Update].[@GrpContactPhone]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CONTACT_EMAIL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_Update].[@GrpContactEmail]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_Update].[@UpdateCcnUsername]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Group_Update].[@GrpCodeOld]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Group_Update].[@GrpCodeNew]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Group_Update].[@GrpName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Group_Update].[@GrpContactName]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Group_Update].[@GrpContactPhone]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Group_Update].[@GrpContactEmail]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Group_Update].[@UpdateCcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="201" />
				<Property Name="Length" Value="1693" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 01/10/2018&#xD;&#xA;-- Description:&#x9;To update a group entity. &#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Group_Update @GrpCodeOld NVARCHAR(32)&#xD;&#xA;&#x9;,@GrpCodeNew NVARCHAR(32)&#xD;&#xA;&#x9;,@GrpName NVARCHAR(256)&#xD;&#xA;&#x9;,@GrpContactName NVARCHAR(256)=NULL &#xD;&#xA;&#x9;,@GrpContactPhone NVARCHAR(256)=NULL&#xD;&#xA;&#x9;,@GrpContactEmail NVARCHAR(256) &#xD;&#xA;&#x9;,@UpdateCcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Group_Usage]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @GrpId INT
	DECLARE @IsInUse INT

	SET @GrpId = (
			SELECT GRP_ID
			FROM TD_GROUP
			WHERE GRP_CODE = @GrpCode
				AND GRP_DELETE_FLAG = 0
			)

	IF @GrpId IS NULL
		OR @GrpId = 0
	BEGIN
		-- No error to be returned, just the fact that there are no related records
		RETURN 0
	END

	SET @IsInUse = (
			SELECT (
					iif(EXISTS (
							SELECT NULL
							FROM TM_GROUP_ACCOUNT
							WHERE GCC_GRP_ID = @GrpID
								AND GCC_DELETE_FLAG = 0
							)
						OR EXISTS (
							SELECT NULL
							FROM TD_RELEASE
							WHERE RLS_GRP_ID = @GrpID
								AND RLS_DELETE_FLAG = 0
							), 1, 0)
					)
			)

	RETURN @IsInUse
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_Usage].[@GrpCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Group_Usage].[@GrpCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="314" />
				<Property Name="Length" Value="1085" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 01/10/2018&#xD;&#xA;-- Description:&#x9;To check whether or not the Group has associated entries in the TM_GROUP_ACCOUNT or TD_RELEASE tables&#xD;&#xA;-- exec Security_Group_Usage '43535'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Group_Usage @GrpCode NVARCHAR(32)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_GroupAccount_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT = NULL
	DECLARE @CcnID INT = NULL
	DECLARE @GroupId INT = NULL

	-- Get the CcnID for the @CcnUsernameAddedUser parameter
	SET @CcnID = (
			SELECT CCN_ID
			FROM TD_ACCOUNT
			WHERE CCN_USERNAME = @CcnUsernameAddedUser
				AND TD_ACCOUNT.CCN_DELETE_FLAG = 0
			)

	IF @CcnID IS NULL
	BEGIN
		--user not found: exit
		RETURN 0
	END

	SET @GroupId = (
			SELECT GRP_ID
			FROM TD_GROUP
			WHERE GRP_CODE = @GrpCode
				AND TD_GROUP.GRP_DELETE_FLAG = 0
			)

	IF @GroupId IS NULL
	BEGIN
		--group not found: exit
		RETURN 0
	END

	-- Do the create Audit and get the new DtgID from the stored procedure
	EXEC @DtgID = Security_Auditing_Create @CcnUsernameAdder

	-- Check for problems with the audit stored procedure
	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		RAISERROR (
				'Error in calling Security_GroupAccount_Create'
				,16
				,1
				)

		RETURN 0
	END

	INSERT INTO TM_GROUP_ACCOUNT (
		GCC_GRP_ID
		,GCC_CCN_ID
		,GCC_APPROVE_FLAG
		,GCC_DTG_ID
		,GCC_DELETE_FLAG
		)
	VALUES (
		@GroupId
		,@CcnID
		,@GrpApproveFlag
		,@DtgID
		,0
		)

	RETURN @@IDENTITY
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_GroupAccount_Create].[@CcnUsernameAddedUser]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_GroupAccount_Create].[@GrpCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_GroupAccount_Create].[@CcnUsernameAdder]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_APPROVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_GroupAccount_Create].[@GrpApproveFlag]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_GroupAccount_Create].[@CcnUsernameAdder]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_GroupAccount_Create].[@CcnUsernameAddedUser]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_GroupAccount_Create].[@GrpCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_GroupAccount_Create].[@GrpApproveFlag]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="226" />
				<Property Name="Length" Value="1582" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 03/10/2018&#xD;&#xA;-- Description: Add a user to a Group in the TM_GROUP_ACCOUNT table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_GroupAccount_Create @CcnUsernameAdder NVARCHAR(256)&#xD;&#xA;&#x9;,@CcnUsernameAddedUser NVARCHAR(256)&#xD;&#xA;&#x9;,@GrpCode NVARCHAR(32)&#xD;&#xA;&#x9;,@GrpApproveFlag BIT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_GroupAccount_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT = NULL
	DECLARE @eMessage VARCHAR(256)
	DECLARE @updateCount INT
	DECLARE @GrpID INT = NULL
	DECLARE @CcnDeletedUserID INT = NULL
	DECLARE @AuditUpdateCount INT

	SET @GrpID = (
			SELECT grp_id
			FROM td_group
			WHERE grp_code = @GrpCode
				AND grp_delete_flag = 0
			)

	IF @GrpId IS NULL
	BEGIN
		--we requested a group id but it was not found - exit
		RETURN 0
	END

	SET @CcnDeletedUserID = (
			SELECT ccn_id
			FROM td_account
			WHERE ccn_username = @CcnUsernameDeletedUser
				AND CCN_DELETE_FLAG = 0
			)

	IF @CcnDeletedUserID IS NULL
	BEGIN
		-- Requested user not found - exit
		RETURN 0
	END

	SET @DtgID = (
			SELECT GCC_DTG_ID
			FROM TM_GROUP_ACCOUNT
			WHERE GCC_CCN_ID = @CcnDeletedUserID
				AND GCC_GRP_ID = @GrpID
				AND GCC_DELETE_FLAG = 0
			)

	IF @DtgID IS NULL
	BEGIN
		-- Requested Group Account entity doesn't exist - exit
		RETURN 0
	END

	--We may now do the soft delete
	UPDATE TM_GROUP_ACCOUNT
	SET GCC_DELETE_FLAG = 1
	WHERE GCC_GRP_ID = @GrpID
		AND GCC_CCN_ID = @CcnDeletedUserID
		AND GCC_DELETE_FLAG = 0

	SET @updateCount = @@ROWCOUNT

	IF @updateCount > 0
	BEGIN
		EXEC @AuditUpdateCount = Security_Auditing_Delete @DtgID
			,@CcnUsernameDeleter

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error creating entry in TD_AUDITING for GroupAccount delete - GroupCode:' + cast(isnull(@GrpCode, 0) AS VARCHAR) + ', CcnUsername: ' + cast(isnull(@CcnUsernameDeletedUser, 0) AS VARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN
		END
	END

	-- Return the number of rows deleted
	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_GroupAccount_Delete].[@GrpCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_GroupAccount_Delete].[@CcnUsernameDeletedUser]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Delete]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_GroupAccount_Delete].[@CcnUsernameDeleter]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_GroupAccount_Delete].[@CcnUsernameDeleter]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_GroupAccount_Delete].[@CcnUsernameDeletedUser]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_GroupAccount_Delete].[@GrpCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="269" />
				<Property Name="Length" Value="2177" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 08/10/2018&#xD;&#xA;-- Description:&#x9;Deletes a GroupAccount entity (i.e. removes a user from a group) on the TM_GROUP_ACCOUNT Table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_GroupAccount_Delete @CcnUsernameDeleter NVARCHAR(256)&#xD;&#xA;&#x9;,@CcnUsernameDeletedUser NVARCHAR(256)&#xD;&#xA;&#x9;,@GrpCode NVARCHAR(32)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_GroupAccount_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @CcnID INT = NULL
	DECLARE @GrpID INT = NULL

	IF @CcnUsername IS NOT NULL
	BEGIN
		SET @CcnID = (
				SELECT CCN_ID
				FROM TD_ACCOUNT
				WHERE CCN_USERNAME = @CcnUsername
					AND TD_ACCOUNT.CCN_DELETE_FLAG = 0
				)

		IF @CcnID IS NULL
		BEGIN
			-- we have sent in a @CcnUsername parameter but there is no corresponding entry in the TD_ACCOUNT table, so we return nothing
			RETURN 0
		END
	END

	IF @GrpCode IS NOT NULL
	BEGIN
		SET @GrpID = (
				SELECT GRP_ID
				FROM TD_GROUP
				WHERE GRP_CODE = @GrpCode
					AND TD_GROUP.GRP_DELETE_FLAG = 0
				)

		IF @GrpID IS NULL
		BEGIN
			-- we have sent in a @GrpCode parameter but there is no corresponding entry int the TD_GRP table, so we return nothing
			RETURN 0
		END
	END

	SELECT acc_inner.CCN_USERNAME AS CcnUsername
		,grp_inner.GRP_CODE AS GrpCode
		,grp_inner.GRP_NAME AS GrpName
		,gra_inner.GCC_APPROVE_FLAG AS GccApproveFlag
		,acc_inner.CCN_DISPLAYNAME AS CcnDisplayName
	FROM (
		SELECT *
		FROM TD_ACCOUNT
		WHERE CCN_DELETE_FLAG = 0
		) acc_inner
	INNER JOIN (
		SELECT *
		FROM TM_GROUP_ACCOUNT
		WHERE GCC_DELETE_FLAG = 0
		) gra_inner
		ON acc_inner.CCN_ID = gra_inner.GCC_CCN_ID
	INNER JOIN (
		SELECT *
		FROM td_group
		WHERE GRP_DELETE_FLAG = 0
		) grp_inner
		ON gra_inner.GCC_GRP_ID = grp_inner.GRP_ID
	WHERE (
			@GrpID IS NULL
			OR gra_inner.GCC_GRP_ID = @GrpID
			)
		AND (
			@CcnID IS NULL
			OR gra_inner.GCC_CCN_ID = @CcnID
			)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_GroupAccount_Read].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_GroupAccount_Read].[@GrpCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_APPROVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DISPLAYNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_CCN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_GroupAccount_Read].[@CcnUsername]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_GroupAccount_Read].[@GrpCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="347" />
				<Property Name="Length" Value="1995" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 04/10/2018&#xD;&#xA;-- Description:&#x9;To read a Group Account entry. The output will be restricted depending on what parameters are or are not passed in&#xD;&#xA;--exec Security_GroupAccount_Read 'dissemination@cso.ie'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_GroupAccount_Read @CcnUsername NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@GrpCode NVARCHAR(32) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_GroupAccount_ReadMultiple]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @ReadAllGroups BIT

	IF (
			SELECT count(*)
			FROM @GroupList
			) = 0
	BEGIN
		SET @ReadAllGroups = 1
	END
	ELSE
	BEGIN
		SET @ReadAllGroups = 0
	END

	SELECT DISTINCT acc_inner.CCN_USERNAME AS CcnUsername
		,CCN_NOTIFICATION_FLAG AS CcnNotificationFlag
	FROM (
		SELECT *
		FROM TD_ACCOUNT
		WHERE CCN_DELETE_FLAG = 0
		) acc_inner
	INNER JOIN (
		SELECT *
		FROM TM_GROUP_ACCOUNT
		WHERE GCC_DELETE_FLAG = 0
		) gra_inner
		ON acc_inner.CCN_ID = gra_inner.GCC_CCN_ID
	INNER JOIN (
		SELECT *
		FROM td_group
		WHERE GRP_DELETE_FLAG = 0
			AND GRP_CODE IN (
				SELECT [value]
				FROM @GroupList
				)
			OR @ReadAllGroups = 1
		) grp_inner
		ON gra_inner.GCC_GRP_ID = grp_inner.GRP_ID
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_GroupAccount_ReadMultiple].[@GroupList]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_GroupAccount_ReadMultiple].[@GroupList].[Value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_NOTIFICATION_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Security_GroupAccount_ReadMultiple].[@GroupList]" Disambiguator="7">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Security_GroupAccount_ReadMultiple].[@GroupList].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="256" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_GroupAccount_ReadMultiple].[@GroupList]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[dbo].[ValueVarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="356" />
				<Property Name="Length" Value="1221" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 04/10/2018&#xD;&#xA;-- Description:&#x9;To read a Group Account entry. A list of GroupCodes is passed in as a parameter.&#xD;&#xA;-- If Group codes is empty then we read from all Groups&#xD;&#xA;-- exec Security_GroupAccount_ReadMultiple&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_GroupAccount_ReadMultiple @GroupList ValueVarchar READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_GroupAccount_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT
	DECLARE @eMessage VARCHAR(256)
	DECLARE @updateCount INT
	DECLARE @GrpID INT = NULL
	DECLARE @CcnAmendedID INT = NULL

	SET @CcnAmendedID = (
			SELECT CCN_ID
			FROM TD_ACCOUNT
			WHERE CCN_USERNAME = @CcnUsernameUpdatedUser
				AND TD_ACCOUNT.CCN_DELETE_FLAG = 0
			)

	IF @CcnAmendedID IS NULL
	BEGIN
		RETURN 0
	END

	SET @GrpID = (
			SELECT GRP_ID
			FROM TD_GROUP
			WHERE GRP_CODE = @Grpcode
				AND TD_GROUP.GRP_DELETE_FLAG = 0
			)

	IF @GrpID IS NULL
	BEGIN
		RETURN 0
	END

	SET @DtgID = (
			SELECT GCC_DTG_ID
			FROM TM_GROUP_ACCOUNT
			WHERE GCC_GRP_ID = @GrpID
				AND GCC_CCN_ID = @CcnAmendedID
				AND GCC_DELETE_FLAG = 0
			)

	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		-- the requested record doesn't exist
		RETURN 0
	END

	-- we may now do the update
	UPDATE TM_GROUP_ACCOUNT
	SET GCC_APPROVE_FLAG = @GrpApproveFlag
	WHERE GCC_GRP_ID = @GrpID
		AND GCC_CCN_ID = @CcnAmendedID
		AND GCC_DELETE_FLAG = 0

	SET @updateCount = @@ROWCOUNT

	IF @updateCount > 0
	BEGIN
		-- Auditing:
		DECLARE @AuditUpdateCount INT

		EXEC @AuditUpdateCount = Security_Auditing_Update @DtgID
			,@CcnUsernameUpdater

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error amending entry in TD_AUDITING for GroupAccount update, Group:' + cast(isnull(@GrpCode, 0) AS VARCHAR) + ' user:' + cast(isnull(@CcnUsernameUpdater, 0) AS VARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN
		END
	END

	--Return the number of rows updated
	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_GroupAccount_Update].[@CcnUsernameUpdatedUser]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_GroupAccount_Update].[@GrpCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_APPROVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_GroupAccount_Update].[@GrpApproveFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_GroupAccount_Update].[@CcnUsernameUpdater]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_GroupAccount_Update].[@CcnUsernameUpdater]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_GroupAccount_Update].[@CcnUsernameUpdatedUser]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_GroupAccount_Update].[@GrpCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_GroupAccount_Update].[@GrpApproveFlag]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="292" />
				<Property Name="Length" Value="2132" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 15/10/2018&#xD;&#xA;-- Description:&#x9;To update a GroupAccount, i.e. to change the GrpApproverFlag to true or false&#xD;&#xA;-- Moderator can be Editor or Approver&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_GroupAccount_Update @CcnUsernameUpdater NVARCHAR(256)&#xD;&#xA;&#x9;,@CcnUsernameUpdatedUser NVARCHAR(256)&#xD;&#xA;&#x9;,@GrpCode NVARCHAR(32)&#xD;&#xA;&#x9;,@GrpApproveFlag BIT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Logging_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	INSERT INTO TD_LOGGING (
		LGG_DATETIME
		,LGG_THREAD
		,LGG_LEVEL
		,LGG_CLASS
		,LGG_METHOD
		,LGG_LINE
		,LGG_MESSAGE
		,LGG_EXCEPTION
		)
	VALUES (
		GETDATE()
		,@LggThread
		,@LggLevel
		,@LggClass
		,@LggMethod
		,@LggLine
		,@LggMessage
		,@LggException
		)

	RETURN @@rowcount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_LOGGING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_THREAD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_LEVEL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_CLASS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_METHOD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_LINE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_MESSAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_EXCEPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Logging_Create].[@LggThread]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Logging_Create].[@LggLevel]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Logging_Create].[@LggClass]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Logging_Create].[@LggMethod]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Logging_Create].[@LggLine]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Logging_Create].[@LggMessage]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Logging_Create].[@LggException]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Logging_Create].[@LggThread]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="8" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Logging_Create].[@LggLevel]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="8" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Logging_Create].[@LggClass]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Logging_Create].[@LggMethod]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Logging_Create].[@LggLine]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="8" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Logging_Create].[@LggMessage]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Logging_Create].[@LggException]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="194" />
				<Property Name="Length" Value="803" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 13/06/2022&#xD;&#xA;-- Description:&#x9;Creates log entries&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Logging_Create @LggThread VARCHAR(8)&#xD;&#xA;&#x9;,@LggLevel VARCHAR(8)&#xD;&#xA;&#x9;,@LggClass VARCHAR(256) = NULL&#xD;&#xA;&#x9;,@LggMethod VARCHAR(256) = NULL&#xD;&#xA;&#x9;,@LggLine VARCHAR(8) = NULL&#xD;&#xA;&#x9;,@LggMessage NVARCHAR(MAX) = NULL&#xD;&#xA;&#x9;,@LggException NVARCHAR(MAX) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Logging_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    SELECT LGG_DATETIME AS LggDatetime,
           LGG_THREAD AS LggThread,
           LGG_LEVEL AS LggLevel,
           LGG_CLASS AS LggClass,
           LGG_METHOD AS LggMethod,
           LGG_LINE AS LggLine,
           LGG_MESSAGE AS LggMessage,
           LGG_EXCEPTION AS LggException,
           LGG_MACHINENAME AS LggMachinename,
           LGG_CORRELATION_ID AS LggCorrelationID
    FROM   TD_LOGGING
    WHERE  LGG_DATETIME >= @LggDatetimeStart
           AND LGG_DATETIME <= @LggDatetimeEnd;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_LOGGING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_THREAD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_LEVEL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_CLASS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_METHOD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_LINE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_MESSAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_EXCEPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_MACHINENAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGGING].[LGG_CORRELATION_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Logging_Read].[@LggDatetimeStart]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Logging_Read].[@LggDatetimeEnd]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Logging_Read].[@LggDatetimeStart]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Logging_Read].[@LggDatetimeEnd]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="647" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE Security_Logging_Read&#xD;&#xA;@LggDatetimeStart DATETIME, @LggDatetimeEnd DATETIME&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Login_Authenticate1FA]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;


	SELECT CCN_USERNAME as CcnUsername, CCN_LOCKED_FLAG as CcnLockedFlag
	FROM TD_ACCOUNT
	INNER JOIN TD_LOGIN
		ON CCN_ID = LGN_CCN_ID
			AND CCN_DELETE_FLAG = 0
			AND CCN_USERNAME = @CcnUsername
			AND CCN_LOCKED_FLAG=0
			AND LGN_1FA = @Lgn1FA
			
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_Authenticate1FA].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_LOCKED_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_1FA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_Authenticate1FA].[@Lgn1FA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_LOCKED_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_Authenticate1FA].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_Authenticate1FA].[@Lgn1FA]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="218" />
				<Property Name="Length" Value="620" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 20/10/2020&#xD;&#xA;-- Description:&#x9;Returns a CcnUsername if the 1FA is correct&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Login_Authenticate1FA @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@Lgn1FA NVARCHAR(MAX)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Login_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @CcnId INT
	DECLARE @errorMessage VARCHAR(256)
	DECLARE @DtgID INT

	-- Do the create Audit and get the new DtgID from the stored procedure
	EXEC @DtgID = Security_Auditing_Create @CcnUsernameCreator

	-- Check for problems with the audit stored procedure
	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		RAISERROR (
				'Error in calling Security_Auditing_Create'
				,16
				,1
				)

		RETURN 0
	END

	SET @CcnId = (
			SELECT CCN_ID
			FROM TD_ACCOUNT
			WHERE CCN_USERNAME = @CcnUsername
				AND CCN_DELETE_FLAG = 0
			)

	IF @CcnId = 0
		OR @CcnId IS NULL
	BEGIN
		RAISERROR (
				'User not found'
				,16
				,1
				)

		RETURN 0
	END

	IF (
			SELECT COUNT(*)
			FROM TD_LOGIN
			WHERE LGN_CCN_ID = @CcnId
			) > 0
	BEGIN
		DELETE
		FROM TD_LOGIN
		WHERE LGN_CCN_ID = @CcnId
	END

	INSERT INTO TD_LOGIN (
		LGN_TOKEN_1FA
		,LGN_CCN_ID
		)
	VALUES (
		@LgnToken1FA
		,@CcnId
		)

	RETURN @@IDENTITY
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_Create].[@CcnUsernameCreator]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_Create].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_TOKEN_1FA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_Create].[@LgnToken1FA]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_Create].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_Create].[@CcnUsernameCreator]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_Create].[@LgnToken1FA]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="269" />
				<Property Name="Length" Value="1419" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 14/10/2020&#xD;&#xA;-- Description:&#x9;Create Login&#xD;&#xA;-- exec Security_Login_Create 'mdiggums@gov.ie','okeeffene','12345','2020-10-23'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Login_Create @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@CcnUsernameCreator NVARCHAR(256)&#xD;&#xA;&#x9;,@LgnToken1FA VARCHAR(64) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Login_CreateSession]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	UPDATE TD_LOGIN
	SET LGN_SESSION = @LgnSession
		,LGN_SESSION_EXPIRY = @LgnSessionExpiry
	FROM TD_LOGIN
	INNER JOIN TD_ACCOUNT
		ON CCN_ID = LGN_CCN_ID
			AND CCN_DELETE_FLAG = 0
			AND CCN_USERNAME = @CcnUsername

	RETURN @@rowcount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_CreateSession].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_SESSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_CreateSession].[@LgnSession]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_SESSION_EXPIRY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_CreateSession].[@LgnSessionExpiry]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_CreateSession].[@LgnSession]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_CreateSession].[@LgnSessionExpiry]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_CreateSession].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="211" />
				<Property Name="Length" Value="628" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 21/10/2020&#xD;&#xA;-- Description:&#x9;Creates a new session, e.g. at login&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Login_CreateSession @LgnSession VARCHAR(64)&#xD;&#xA;&#x9;,@LgnSessionExpiry DATETIME&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Login_ExtendSession]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;
	
		UPDATE TD_LOGIN
		SET LGN_SESSION_EXPIRY = @LgnSessionExpiry
		FROM TD_LOGIN
		INNER JOIN TD_ACCOUNT ON CCN_ID = LGN_CCN_ID
			AND CCN_USERNAME=@CcnUsername
		    AND LGN_SESSION IS NOT NULL
			AND CCN_DELETE_FLAG=0


	RETURN @@rowcount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_ExtendSession].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_SESSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_SESSION_EXPIRY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_ExtendSession].[@LgnSessionExpiry]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_ExtendSession].[@CcnUsername]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_ExtendSession].[@LgnSessionExpiry]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="244" />
				<Property Name="Length" Value="646" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 21/10/2020&#xD;&#xA;-- Description:&#x9;Extends a session provided the corresponding user hasn't been deleted&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Login_ExtendSession @CcnUsername NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@LgnSessionExpiry DATETIME&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Login_Logout]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;
	UPDATE TD_LOGIN
	SET LGN_SESSION=NULL,
	LGN_SESSION_EXPIRY=NULL
	WHERE LGN_SESSION=@LgnSession 

	return @@rowcount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_SESSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_SESSION_EXPIRY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_Logout].[@LgnSession]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_Logout].[@LgnSession]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="215" />
				<Property Name="Length" Value="441" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 12/01/2020&#xD;&#xA;-- Logout a user - uses the session to identify the user&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Login_Logout @LgnSession VARCHAR(64)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Login_ReadBy1FaToken]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT CCN_USERNAME AS CcnUsername
		,CCN_DISPLAYNAME AS CcnDisplayName
		,CCN_EMAIL AS CcnEmail
		,CCN_ID AS CcnId
	FROM TD_ACCOUNT
	INNER JOIN TD_LOGIN
		ON CCN_ID = LGN_CCN_ID
			AND CCN_DELETE_FLAG = 0
			AND LGN_TOKEN_1FA = @LgnToken1Fa
			AND CCN_LOCKED_FLAG = 0
			AND CCN_USERNAME = @CcnUsername
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_TOKEN_1FA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_ReadBy1FaToken].[@LgnToken1Fa]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_LOCKED_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_ReadBy1FaToken].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DISPLAYNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_EMAIL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_ReadBy1FaToken].[@LgnToken1Fa]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_ReadBy1FaToken].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="202" />
				<Property Name="Length" Value="662" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 14/10/2020&#xD;&#xA;-- Description:&#x9;Get a user by the 1FA token&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Login_ReadBy1FaToken @LgnToken1Fa VARCHAR(64)&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Login_ReadBy2FaToken]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT CCN_USERNAME AS CcnUsername
		,CCN_DISPLAYNAME AS CcnDisplayName
		,CCN_EMAIL AS CcnEmail
		,CCN_ID AS CcnId
	FROM TD_ACCOUNT
	INNER JOIN TD_LOGIN
		ON CCN_ID = LGN_CCN_ID
			AND CCN_DELETE_FLAG = 0
			AND CCN_LOCKED_FLAG=0
			AND LGN_TOKEN_2FA = @LgnToken2Fa
			AND CCN_USERNAME =@CcnUsername 

			
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_LOCKED_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_TOKEN_2FA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_ReadBy2FaToken].[@LgnToken2Fa]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_ReadBy2FaToken].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DISPLAYNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_EMAIL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_ReadBy2FaToken].[@LgnToken2Fa]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_ReadBy2FaToken].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="325" />
				<Property Name="Length" Value="789" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 14/10/2020&#xD;&#xA;-- Description:&#x9;Get a user by the 2FA token&#xD;&#xA;-- EXEC Security_Login_ReadBy2FaToken 'cb83f17a1db3bd6b85328920a59a8628c84162e832b8505c07df2ee1cae89d05','rtharpe@abc.ie'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Login_ReadBy2FaToken @LgnToken2Fa VARCHAR(64)&#xD;&#xA;,@CcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Login_ReadBySession]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT CCN_USERNAME AS CcnUsername
		,CCN_DISPLAYNAME AS CcnDisplayName
		,CCN_EMAIL AS CcnEmail
		,CCN_ID AS CcnId
		,CCN_LOCKED_FLAG AS CcnLockedFlag
		,LNG_ISO_CODE AS LngIsoCode
	FROM TD_ACCOUNT
	INNER JOIN TD_LOGIN
		ON CCN_ID = LGN_CCN_ID
			AND CCN_DELETE_FLAG = 0
			AND LGN_SESSION_EXPIRY  > getdate()
			AND LGN_SESSION  = @LgnSession
			AND CCN_LOCKED_FLAG=0
   INNER JOIN TD_USER
	ON CCN_USR_ID=USR_ID 
	INNER JOIN TS_LANGUAGE 
	ON USR_LNG_ID=LNG_ID
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_SESSION_EXPIRY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_SESSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_ReadBySession].[@LgnSession]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_LOCKED_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DISPLAYNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_EMAIL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_LOCKED_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_ReadBySession].[@LgnSession]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="206" />
				<Property Name="Length" Value="798" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 16/10/2020&#xD;&#xA;-- Description:&#x9;Get a user by the session token&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Login_ReadBySession @LgnSession VARCHAR(64)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Login_ReadOpen1Fa]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SELECT LGN_ID AS LgnId
	FROM TD_LOGIN
	INNER JOIN TD_ACCOUNT
		ON LGN_CCN_ID = CCN_ID
			AND CCN_DELETE_FLAG = 0
			AND LGN_TOKEN_1FA IS NOT NULL
			AND CCN_EMAIL = @CcnEmail
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_TOKEN_1FA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_EMAIL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_ReadOpen1Fa].[@CcnEmail]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_ReadOpen1Fa].[@CcnEmail]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="245" />
				<Property Name="Length" Value="518" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 07/01/2021&#xD;&#xA;-- Description:&#x9;Tests if an account (defined by email) has a valid token to change 1FA&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Login_ReadOpen1Fa @CcnEmail NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Login_ReadOpen2Fa]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SELECT LGN_ID AS LgnId
	FROM TD_LOGIN
	INNER JOIN TD_ACCOUNT
		ON LGN_CCN_ID = CCN_ID
			AND CCN_DELETE_FLAG = 0
			AND LGN_TOKEN_2FA IS NOT NULL
			AND CCN_USERNAME = @CcnUsername
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_TOKEN_2FA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_ReadOpen2Fa].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_ReadOpen2Fa].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="285" />
				<Property Name="Length" Value="567" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 07/01/2021&#xD;&#xA;-- Description:&#x9;Tests if an account (defined by username) has a valid token to change 2FA&#xD;&#xA;-- exec Security_Login_ReadOpen2Fa &#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Login_ReadOpen2Fa @CcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Login_Update1FA]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @CcnId INT
	DECLARE @LgnId INT
	DECLARE @errorMessage VARCHAR(256)

	SELECT @CcnId = LGN_CCN_ID
		,@LgnId = LGN_ID
	FROM TD_LOGIN
	WHERE LGN_TOKEN_1FA = @LgnToken1FA

	IF @LgnId IS NULL
	BEGIN
		RETURN 0
	END

	
	IF (
			SELECT COUNT(*)
			FROM TD_ACCOUNT
			WHERE CCN_ID = @CcnId
				AND CCN_DELETE_FLAG = 0
			) = 0
	BEGIN
		RETURN 0
	END

	IF (
			SELECT COUNT(*)
			FROM TD_ACCOUNT
			INNER JOIN TD_LOGIN
				ON LGN_CCN_ID = CCN_ID
					AND CCN_DELETE_FLAG = 0
					AND CCN_USERNAME =@CcnEmail
					AND LGN_TOKEN_1FA = @LgnToken1FA
			) = 0
	BEGIN
		RETURN 0
	END

	UPDATE TD_LOGIN
	SET LGN_1FA = @Lgn1FA
		,LGN_TOKEN_1FA=NULL
	WHERE LGN_ID = @LgnId

	RETURN @@ROWCOUNT
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_TOKEN_1FA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_Update1FA].[@LgnToken1FA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_Update1FA].[@CcnEmail]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_TOKEN_1FA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_1FA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_Update1FA].[@Lgn1FA]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_Update1FA].[@LgnToken1FA]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_Update1FA].[@Lgn1FA]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_Update1FA].[@LgnNewToken]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_Update1FA].[@CcnEmail]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="427" />
				<Property Name="Length" Value="1341" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 14/10/2020&#xD;&#xA;-- Description:&#x9;Update Login with 1FA and associated details&#xD;&#xA; --exec Security_Login_Update1FA 'd7bd094923ce6c0ec77a09eb86498de712296c6816b4c6e3f7cabfca5a306a4e','2021-12-31','fzappass1@','8e4a91bca04790c9483450214719c2bfa882f880c2e6b8422b77093a2559b446','fzap@hse.ie'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Login_Update1FA @LgnToken1FA VARCHAR(64)&#xD;&#xA;&#x9;,@Lgn1FA VARCHAR(64)&#xD;&#xA;&#x9;,@LgnNewToken VARCHAR(64)&#xD;&#xA;&#x9;,@CcnEmail NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Login_Update2FA]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @CcnId INT

	SELECT @CcnId = CCN_ID
	FROM TD_ACCOUNT
	INNER JOIN TD_LOGIN
		ON CCN_ID = LGN_CCN_ID
			AND CCN_DELETE_FLAG = 0
			AND LGN_TOKEN_2FA = @LgnToken2FA
			AND CCN_LOCKED_FLAG=0
			AND CCN_USERNAME=@CcnUsername 

	IF @CcnId IS NOT NULL
	BEGIN
		UPDATE TD_LOGIN
		SET LGN_2FA = @Lgn2FA,
		LGN_TOKEN_2FA=NULL
		WHERE LGN_CCN_ID = @CcnId

	END
	RETURN @@ROWCOUNT
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_TOKEN_2FA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_Update2FA].[@LgnToken2FA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_LOCKED_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_Update2FA].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_2FA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_Update2FA].[@Lgn2FA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_TOKEN_2FA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_CCN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_Update2FA].[@LgnToken2FA]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_Update2FA].[@Lgn2FA]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_Update2FA].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="213" />
				<Property Name="Length" Value="775" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 16/10/2020&#xD;&#xA;-- Description:&#x9;Sets up a 2FA based on the login token&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Login_Update2FA @LgnToken2FA VARCHAR(64)&#xD;&#xA;&#x9;,@Lgn2FA NVARCHAR(MAX)&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Login_Update2FaToken]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @CcnId INT

	SELECT @CcnId = CCN_ID
	FROM TD_ACCOUNT
	INNER JOIN TD_LOGIN
		ON CCN_ID = LGN_CCN_ID
			AND CCN_DELETE_FLAG = 0
			AND CCN_USERNAME = @CcnUsername

	IF @CcnId IS NOT NULL
	BEGIN
		UPDATE TD_LOGIN
		SET LGN_TOKEN_2FA=@LgnToken2FA
		WHERE LGN_CCN_ID = @CcnId

	END

	RETURN @@ROWCOUNT
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_Update2FaToken].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_TOKEN_2FA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_Update2FaToken].[@LgnToken2FA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_CCN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_Update2FaToken].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_Update2FaToken].[@LgnToken2FA]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="234" />
				<Property Name="Length" Value="703" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 30/12/2020&#xD;&#xA;-- Description:&#x9;Create an invitation token for a user and locks the account&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Login_Update2FaToken @CcnUsername NVARCHAR(256),&#xD;&#xA;@LgnToken2FA VARCHAR(64)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Login_UpdateToken1FA]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @CcnId INT
	DECLARE @LgnId INT
	DECLARE @errorMessage VARCHAR(256)

	SELECT @CcnId = LGN_CCN_ID
		,@LgnId = LGN_ID
	FROM TD_LOGIN
	INNER JOIN TD_ACCOUNT
		ON CCN_ID = LGN_CCN_ID
			AND CCN_DELETE_FLAG = 0
			AND CCN_LOCKED_FLAG=0
	WHERE CCN_USERNAME = @CcnUsername

	IF @LgnId IS NULL
	BEGIN
		RETURN 0
	END

	UPDATE TD_LOGIN
	SET LGN_TOKEN_1FA = @LgnNewToken1FA
	WHERE LGN_ID = @LgnId

	RETURN @@ROWCOUNT
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_LOCKED_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_UpdateToken1FA].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_TOKEN_1FA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Login_UpdateToken1FA].[@LgnNewToken1FA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_UpdateToken1FA].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Login_UpdateToken1FA].[@LgnNewToken1FA]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="263" />
				<Property Name="Length" Value="848" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 27/10/2020&#xD;&#xA;-- Description:&#x9;Update Login token, e.g. to create a new token for an existing user (e.g. lost password)&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Login_UpdateToken1FA @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@LgnNewToken1FA VARCHAR(64)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Performance_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DELETE FROM TD_PERFORMANCE

	RETURN 1
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_PERFORMANCE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="306" />
				<Property Name="Length" Value="443" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Liam Millar&#xD;&#xA;-- Create date: 29/10/2020&#xD;&#xA;-- Amended 17/04/2024 Neil O'Keeffe - pxstat user does not have truncate permission, change to delete&#xD;&#xA;-- Description:&#x9;Delete performance entries&#xD;&#xA;--&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[Security_Performance_Delete]&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Performance_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT PRF_SERVER AS PrfServer
		,PRF_DATETIME AS PrfDatetime
		,AVG_PROCESSOR_PERCENTAGE AS PrfProcessor
		,AVG_MEMORY_AVAILABLE AS PrfMemory
		,AVG_REQUEST_QUEUE AS PrfQueue
		,AVG_REQUEST_PERSECOND AS PrfRequestspersecond
	FROM VW_PERFORMANCE_AVERAGES
	WHERE PRF_DATETIME >= @PrfDatetimeStart
		AND PRF_DATETIME <= @PrfDatetimeEnd
	ORDER BY PrfServer
		,PrfDatetime;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[VW_PERFORMANCE_AVERAGES]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_PERFORMANCE_AVERAGES].[PRF_SERVER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_PERFORMANCE_AVERAGES].[PRF_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_PERFORMANCE_AVERAGES].[AVG_PROCESSOR_PERCENTAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_PERFORMANCE_AVERAGES].[AVG_MEMORY_AVAILABLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_PERFORMANCE_AVERAGES].[AVG_REQUEST_QUEUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_PERFORMANCE_AVERAGES].[AVG_REQUEST_PERSECOND]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Performance_Read].[@PrfDatetimeStart]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Performance_Read].[@PrfDatetimeEnd]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Performance_Read].[@PrfDatetimeStart]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Performance_Read].[@PrfDatetimeEnd]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="263" />
				<Property Name="Length" Value="793" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Liam Millar&#xD;&#xA;-- Create date: 29/10/2020&#xD;&#xA;-- Description:&#x9;Read performance averaged entries grouped by server and minute via VW_PERFORMANCE_AVERAGES&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[Security_Performance_Read] @PrfDatetimeStart DATETIME&#xD;&#xA;&#x9;,@PrfDatetimeEnd DATETIME&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Privilege_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT PRV_CODE AS PrvCode
		,PRV_VALUE AS PrvValue
	FROM TS_PRIVILEGE
	WHERE (
			@PrvCode IS NULL
			OR (PRV_CODE = @PrvCode)
			)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Privilege_Read].[@PrvCode]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Privilege_Read].[@PrvCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="337" />
				<Property Name="Length" Value="590" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 28/09/2018&#xD;&#xA;-- Description:&#x9;Read Privileges. Null @PrvCode input parameter will result in all privileges being returned. &#xD;&#xA;-- Otherwise it returns the privilege corresponding to the @PrvCode&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Privilege_Read @PrvCode NVARCHAR(32) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Trace_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    INSERT  INTO TD_API_TRACE (TRC_METHOD, TRC_PARAMS, TRC_IP, TRC_USERAGENT, TRC_USERNAME, TRC_DATETIME, TRC_STARTTIME, TRC_DURATION, TRC_STATUSCODE, TRC_MACHINENAME, TRC_REQUEST_TYPE, TRC_REQUEST_VERB, TRC_ERROR_PATH, TRC_CORRELATION_ID, TRC_JSONRPC_ERROR_CODE, TRC_CONTENT_LENGTH, TRC_REFERER)
    VALUES                   (@TrcMethod, @TrcParams, @TrcIp, @Trcuseragent, @Username, getdate(), @TrcStartTime, @TrcDuration, @TrcStatusCode, @TrcMachineName, @TrcRequestType, @TrcRequestVerb, @TrcErrorPath, @TrcCorrelationID, @TrcJsonRpcErrorCode, @TrcContentLength, @TrcReferrer);
    RETURN 1;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_API_TRACE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_METHOD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_PARAMS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_IP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_USERAGENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_STARTTIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_DURATION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_STATUSCODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_MACHINENAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_REQUEST_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_REQUEST_VERB]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_ERROR_PATH]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_CORRELATION_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_JSONRPC_ERROR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_CONTENT_LENGTH]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_REFERER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Trace_Create].[@TrcMethod]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Trace_Create].[@TrcParams]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Trace_Create].[@TrcIp]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Trace_Create].[@TrcUseragent]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Trace_Create].[@Username]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Trace_Create].[@TrcStartTime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Trace_Create].[@TrcDuration]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Trace_Create].[@TrcStatusCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Trace_Create].[@TrcMachineName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Trace_Create].[@TrcRequestType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Trace_Create].[@TrcRequestVerb]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Trace_Create].[@TrcErrorPath]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Trace_Create].[@TrcCorrelationID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Trace_Create].[@TrcJsonRpcErrorCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Trace_Create].[@TrcContentLength]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Trace_Create].[@TrcReferrer]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Trace_Create].[@TrcMethod]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Trace_Create].[@TrcParams]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2048" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Trace_Create].[@TrcIp]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="15" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Trace_Create].[@TrcUseragent]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2048" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Trace_Create].[@Username]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Trace_Create].[@TrcStartTime]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Trace_Create].[@TrcDuration]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="3" />
									<Property Name="Precision" Value="18" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Trace_Create].[@TrcStatusCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Trace_Create].[@TrcMachineName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Trace_Create].[@TrcErrorPath]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1028" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Trace_Create].[@TrcRequestVerb]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Trace_Create].[@TrcRequestType]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Trace_Create].[@TrcCorrelationID]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1028" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Trace_Create].[@TrcJsonRpcErrorCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Trace_Create].[@TrcContentLength]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Trace_Create].[@TrcReferrer]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1167" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE Security_Trace_Create&#xD;&#xA;@TrcMethod NVARCHAR (256)=NULL, @TrcParams NVARCHAR (2048)=NULL, @TrcIp VARCHAR (15)=NULL, @TrcUseragent VARCHAR (2048)=NULL, @Username NVARCHAR (256)=NULL, @TrcStartTime DATETIME, @TrcDuration DECIMAL (18, 3), @TrcStatusCode INT, @TrcMachineName VARCHAR (256), @TrcErrorPath VARCHAR (1028)=NULL, @TrcRequestVerb VARCHAR (50), @TrcRequestType VARCHAR (50)=NULL, @TrcCorrelationID VARCHAR (1028), @TrcJsonRpcErrorCode INT=NULL, @TrcContentLength BIGINT=NULL, @TrcReferrer VARCHAR (MAX)=NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Security_Trace_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	IF @AuthenticationType IS NULL
	BEGIN
		SET @AuthenticationType=@Const_ANY
	END


	SELECT t.TRC_USERNAME AS TrcCcnUsername
		,a.PRV_VALUE AS TrcPrvValue
		,t.trc_ip AS TrcIp
		,t.TRC_METHOD AS TrcMethod
		,t.trc_params AS TrcParams
		,t.trc_useragent AS TrcUserAgent
		,t.trc_datetime AS TrcDatetime
	FROM td_trace t
	LEFT OUTER JOIN (
		SELECT ac.CCN_USERNAME
			,ac.CCN_PRV_ID
			,ac.CCN_ID
			,pr.PRV_VALUE
		FROM TD_ACCOUNT ac
		INNER JOIN TS_PRIVILEGE pr
			ON ac.CCN_PRV_ID = pr.PRV_ID
				AND ac.CCN_DELETE_FLAG = 0
		WHERE ccn_delete_flag = 0
		) a
		ON t.TRC_USERNAME = a.CCN_USERNAME
	WHERE t.TRC_DATETIME >= @StartDate
		AND t.TRC_DATETIME <= @EndDate
		AND (
			(
				@AuthenticationType = @Const_REGISTERED
				AND a.CCN_USERNAME IS NOT NULL
				)
			OR (
				@AuthenticationType = @Const_ANONYMOUS
				AND a.CCN_USERNAME IS NULL
				AND t.TRC_USERNAME IS NULL
				)
			OR (
				@AuthenticationType = @Const_AUTHENTICATED
				AND t.TRC_USERNAME IS NOT NULL
				AND a.CCN_USERNAME IS NULL
				)
			OR (@AuthenticationType = @Const_ANY)
			)
		AND (
			@TrcUsername IS NULL
			OR t.TRC_USERNAME = @TrcUsername
			)
		AND (
			@TrcIp IS NULL
			OR t.TRC_IP = @TrcIp
			)
	ORDER BY t.TRC_DATETIME
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[Security_Trace_Read].[@AuthenticationType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Trace_Read].[@Const_ANY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_TRACE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_TRACE].[TRC_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_TRACE].[TRC_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_TRACE].[TRC_IP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_TRACE].[TRC_METHOD]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_TRACE].[TRC_PARAMS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_TRACE].[TRC_USERAGENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_TRACE].[TRC_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_TRACE].[TRC_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Trace_Read].[@StartDate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Trace_Read].[@EndDate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Trace_Read].[@Const_REGISTERED]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Trace_Read].[@Const_ANONYMOUS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Trace_Read].[@Const_AUTHENTICATED]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Trace_Read].[@TrcUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Trace_Read].[@TrcIp]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_TRACE].[TRC_IP]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Trace_Read].[@StartDate]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Trace_Read].[@EndDate]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Trace_Read].[@Const_AUTHENTICATED]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Trace_Read].[@Const_REGISTERED]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Trace_Read].[@Const_ANONYMOUS]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Trace_Read].[@Const_ANY]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Trace_Read].[@AuthenticationType]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Trace_Read].[@TrcUsername]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Security_Trace_Read].[@TrcIp]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="15" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="298" />
				<Property Name="Length" Value="1921" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 10/10/2018&#xD;&#xA;-- Description:&#x9;Read Trace entries between two dates&#xD;&#xA;-- exec Security_Trace_Read '2019-06-01','2019-06-30','ANY','okeeffene','3.15.13.190'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Security_Trace_Read @StartDate DATETIME&#xD;&#xA;&#x9;,@EndDate DATETIME&#xD;&#xA;&#x9;,@Const_AUTHENTICATED NVARCHAR(32)&#xD;&#xA;&#x9;,@Const_REGISTERED NVARCHAR(32)&#xD;&#xA;&#x9;,@Const_ANONYMOUS NVARCHAR(32)&#xD;&#xA;&#x9;,@Const_ANY NVARCHAR(32)&#xD;&#xA;&#x9;,@AuthenticationType VARCHAR(32) = NULL&#xD;&#xA;&#x9;,@TrcUsername NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@TrcIp VARCHAR(15) = NULL&#xD;&#xA;&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Subscription_Channel_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @LngId INT

	SET @LngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)

	IF @LngId IS NULL
	BEGIN
		SET @LngId=0
	END

	SELECT CHN_CODE As ChnCode,
	COALESCE(CHL_CHN_NAME, CHN_NAME) AS ChnName
	FROM TS_CHANNEL
	LEFT JOIN TS_CHANNEL_LANGUAGE ON CHL_CHN_ID = CHN_ID
		AND CHL_LNG_ID = @LngId
	WHERE (
			@ChnCode IS NULL
			OR CHN_CODE = @ChnCode
			)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Channel_Read].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL_LANGUAGE].[CHL_CHN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL].[CHN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL_LANGUAGE].[CHL_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL].[CHN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL_LANGUAGE].[CHL_CHN_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL].[CHN_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Channel_Read].[@ChnCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL].[CHN_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Channel_Read].[@ChnCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Channel_Read].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="263" />
				<Property Name="Length" Value="851" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 02/12/2021&#xD;&#xA;-- Description:&#x9;Read one or all Subscription Channel&#xD;&#xA;-- EXEC Subscription_Channel_Read 'TECHNICAL','sw'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Subscription_Channel_Read&#xD;&#xA;&#xD;&#xA;&#x9;@ChnCode NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2) &#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Subscription_Channel_ReadUsers]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @LngId INT

	SET @LngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)

	IF @LngId IS NULL
	BEGIN
		SET @LngId = 0
	END

	DECLARE @Users TABLE ([uid] INT)

	INSERT INTO @Users 
	SELECT DISTINCT CSB_USR_ID AS uid
	FROM TM_CHANNEL_SUBSCRIPTION
	INNER JOIN TS_CHANNEL ON CHN_ID = CSB_CHN_ID
		AND (@ChnCode IS NULL
		OR (CHN_CODE = @ChnCode))
		AND CSB_DELETE_FLAG=0

	INNER JOIN TD_USER ON USR_ID = CSB_USR_ID
	AND (@LngId = USR_LNG_ID)
		OR (
			@SingleLanguage IS NULL
			OR @SingleLanguage = 0
			)
		
	LEFT JOIN TD_ACCOUNT ON CCN_USR_ID = USR_ID
	LEFT JOIN TD_SUBSCRIBER ON CCN_USR_ID = SBR_USR_ID
	WHERE CSB_USR_ID IS NOT NULL

	SELECT CCN_USERNAME AS CcnUsername
		,SBR_UID AS SbrUserId
		,CCN_EMAIL AS CcnEmail
		,CCN_DISPLAYNAME AS FullName
	FROM td_user
	LEFT JOIN td_account ON CCN_USR_ID = usr_id
	LEFT JOIN TD_SUBSCRIBER ON SBR_USR_ID = usr_id
	WHERE usr_id IN (
			SELECT [uid]
			FROM @Users
			)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Channel_ReadUsers].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL].[CHN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_CHN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Channel_ReadUsers].[@ChnCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL].[CHN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Channel_ReadUsers].[@SingleLanguage]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_UID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_EMAIL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DISPLAYNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Channel_ReadUsers].[@Users].[uid]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Subscription_Channel_ReadUsers].[@Users]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Subscription_Channel_ReadUsers].[@Users].[uid]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Channel_ReadUsers].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Channel_ReadUsers].[@SingleLanguage]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Channel_ReadUsers].[@ChnCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Channel_ReadUsers].[@SbrUid]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="271" />
				<Property Name="Length" Value="1496" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 08/02/2022&#xD;&#xA;-- Description:&#x9;Get all subcribers for a channel&#xD;&#xA;-- EXEC Subscription_Channel_ReadUsers null,0,'TECHNICAL',NULL&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Subscription_Channel_ReadUsers @LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@SingleLanguage BIT&#xD;&#xA;&#x9;,@ChnCode NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@SbrUid NVARCHAR(256) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Subscription_ChannelSubscription_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	IF @SubscriberUserId IS NULL
		AND @CcnUsername IS NULL
	BEGIN
		RETURN 0
	END

	DECLARE @UserId INT
	DECLARE @ChnId INT

	IF @SubscriberUserId IS NOT NULL
	BEGIN
		SET @UserId = (
				SELECT USR_ID
				FROM TD_USER
				INNER JOIN TD_SUBSCRIBER ON SBR_USR_ID = USR_ID
					AND SBR_UID = @SubscriberUserId
					AND SBR_DELETE_FLAG = 0
				)
	END
	ELSE
	BEGIN
		SET @UserId = (
				SELECT USR_ID
				FROM TD_USER
				INNER JOIN TD_ACCOUNT ON CCN_USR_ID = USR_ID
					AND CCN_USERNAME = @CcnUsername
					AND CCN_DELETE_FLAG = 0
				)
	END

	IF @UserId IS NULL
	BEGIN
		RETURN 0;
	END

	SET @ChnId = (
			SELECT CHN_ID
			FROM TS_CHANNEL
			WHERE CHN_CODE = @ChnCode
			)

	IF @ChnId IS NULL
	BEGIN
		RETURN 0
	END

	--Ensure this subscription doesn't exist already
	IF (
			SELECT COUNT(*)
			FROM TM_CHANNEL_SUBSCRIPTION
			WHERE CSB_CHN_ID = @ChnId
				AND CSB_USR_ID = @UserId
				AND CSB_DELETE_FLAG = 0
			) > 0
	BEGIN
		RETURN 0
	END

	INSERT INTO TM_CHANNEL_SUBSCRIPTION (
		CSB_CHN_ID
		,CSB_USR_ID
		,CSB_DELETE_FLAG
		)
	VALUES (
		@ChnId
		,@UserId
		,0
		)

	RETURN @@ROWCOUNT
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_ChannelSubscription_Create].[@SubscriberUserId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_ChannelSubscription_Create].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_UID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL].[CHN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL].[CHN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_ChannelSubscription_Create].[@ChnCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_CHN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_CHN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_ChannelSubscription_Create].[@ChnCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_ChannelSubscription_Create].[@SubscriberUserId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_ChannelSubscription_Create].[@CcnUsername]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="220" />
				<Property Name="Length" Value="1680" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 28/092021&#xD;&#xA;-- Description:&#x9;Creates a subscription for a user to a channel&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Subscription_ChannelSubscription_Create @ChnCode NVARCHAR(256)&#xD;&#xA;&#x9;,@SubscriberUserId NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Subscription_ChannelSubscription_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	IF @SubscriberUserId IS NULL
		AND @CcnUsername IS NULL
	BEGIN
		RETURN 0
	END

	DECLARE @UserId INT
	DECLARE @ChnId INT

	IF @SubscriberUserId IS NOT NULL
	BEGIN
		SET @UserId = (
				SELECT USR_ID
				FROM TD_USER
				INNER JOIN TD_SUBSCRIBER ON SBR_USR_ID = USR_ID
					AND SBR_UID = @SubscriberUserId
					AND SBR_DELETE_FLAG = 0
				)
	END
	ELSE
	BEGIN
		SET @UserId = (
				SELECT USR_ID
				FROM TD_USER
				INNER JOIN TD_ACCOUNT ON CCN_USR_ID = USR_ID
					AND CCN_USERNAME = @CcnUsername
					AND CCN_DELETE_FLAG = 0
				)
	END

	IF @UserId IS NULL
	BEGIN
		RETURN 0;
	END

	SET @ChnId = (
			SELECT CHN_ID
			FROM TS_CHANNEL
			WHERE CHN_CODE = @ChnCode
			)

	IF @ChnId IS NULL
	BEGIN
		RETURN 0
	END



	UPDATE TM_CHANNEL_SUBSCRIPTION 
	SET CSB_DELETE_FLAG=1
	WHERE CSB_USR_ID=@UserId 
	AND CSB_CHN_ID =@ChnId 


	RETURN @@ROWCOUNT
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_ChannelSubscription_Delete].[@SubscriberUserId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_ChannelSubscription_Delete].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_UID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL].[CHN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL].[CHN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_ChannelSubscription_Delete].[@ChnCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_CHN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_ChannelSubscription_Delete].[@ChnCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_ChannelSubscription_Delete].[@SubscriberUserId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_ChannelSubscription_Delete].[@CcnUsername]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="220" />
				<Property Name="Length" Value="1422" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 28/092021&#xD;&#xA;-- Description:&#x9;Deletes a subscription for a user to a channel&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Subscription_ChannelSubscription_Delete @ChnCode NVARCHAR(256)&#xD;&#xA;&#x9;,@SubscriberUserId NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Subscription_ChannelSubscription_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	-- Insert statements for procedure here
	IF @SubscriberUserId IS NULL
		AND @CcnUsername IS NULL
	BEGIN
		RETURN
	END

	DECLARE @LngId INT
	DECLARE @IsTrue BIT
	DECLARE @IsFalse BIT

	SET @IsTrue = 1
	SET @IsFalse = 0
	SET @LngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)

	IF @LngId IS NULL
	BEGIN
		SET @LngId = 0
	END

	DECLARE @UserId INT

	IF @SubscriberUserId IS NOT NULL
	BEGIN
		SET @UserId = (
				SELECT USR_ID
				FROM TD_USER
				INNER JOIN TD_SUBSCRIBER ON SBR_USR_ID = USR_ID
					AND SBR_UID = @SubscriberUserId
					AND SBR_DELETE_FLAG = 0
				)
	END
	ELSE
	BEGIN
		SET @UserId = (
				SELECT USR_ID
				FROM TD_USER
				INNER JOIN TD_ACCOUNT ON CCN_USR_ID = USR_ID
					AND CCN_USERNAME = @CcnUsername
					AND CCN_DELETE_FLAG = 0
				)
	END

	IF @UserId IS NULL
	BEGIN
		RETURN
	END

	SELECT chn.CHN_CODE AS ChnCode
		,chn.CHN_NAME AS ChnName
		,CASE 
			WHEN CSB_CHN_ID IS NULL
				THEN @IsFalse
			ELSE @IsTrue
			END AS ChnSubscribed
	FROM (
		SELECT CHN_ID
			,COALESCE(CHL_CHN_NAME, CHN_NAME) AS CHN_NAME
			,CHN_CODE
		FROM TS_CHANNEL
		LEFT JOIN TS_CHANNEL_LANGUAGE ON CHN_ID = CHL_CHN_ID
			AND CHL_LNG_ID = @LngId
		) chn
	LEFT JOIN (
		SELECT CSB_ID
			,CSB_CHN_ID
			,CSB_USR_ID
		FROM TM_CHANNEL_SUBSCRIPTION
		WHERE CSB_DELETE_FLAG = 0
			AND CSB_USR_ID = @UserId
		) sub ON chn.CHN_ID = CSB_CHN_ID
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_ChannelSubscription_Read].[@SubscriberUserId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_ChannelSubscription_Read].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_ChannelSubscription_Read].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_UID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL].[CHN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL_LANGUAGE].[CHL_CHN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL_LANGUAGE].[CHL_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL_LANGUAGE].[CHL_CHN_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL].[CHN_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL].[CHN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_CHN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL].[CHN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_CHN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL].[CHN_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_ChannelSubscription_Read].[@SubscriberUserId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_ChannelSubscription_Read].[@CcnUsername]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_ChannelSubscription_Read].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="351" />
				<Property Name="Length" Value="2123" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 20/01/2022&#xD;&#xA;-- Description:&#x9;For a given user list subscription channels and whether or not the user is subscribed. Language invariant.&#xD;&#xA;-- exec Subscription_ChannelSubscription_Read null, 'okeeffene','en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Subscription_ChannelSubscription_Read @SubscriberUserId NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Subscription_ChannelSubscription_ReadCurrent]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	IF @SubscriberUserId IS NULL
		AND @CcnUsername IS NULL
	BEGIN
		RETURN
	END

	DECLARE @LngId INT

	SET @LngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)

	IF @LngId IS NULL
	BEGIN
		SET @LngId=0
	END

	DECLARE @UserId INT

	IF @SubscriberUserId IS NOT NULL
	BEGIN
		SET @UserId = (
				SELECT USR_ID
				FROM TD_USER
				INNER JOIN TD_SUBSCRIBER ON SBR_USR_ID = USR_ID
					AND SBR_UID = @SubscriberUserId
					AND SBR_DELETE_FLAG = 0
				)
	END
	ELSE
	BEGIN
		SET @UserId = (
				SELECT USR_ID
				FROM TD_USER
				INNER JOIN TD_ACCOUNT ON CCN_USR_ID = USR_ID
					AND CCN_USERNAME = @CcnUsername
					AND CCN_DELETE_FLAG = 0
				)
	END

	IF @UserId IS NULL
	BEGIN
		RETURN
	END

	SELECT CHN_CODE AS ChnCode
		,COALESCE(CHL_CHN_NAME, CHN_NAME) AS ChnName
	FROM TD_USER
	INNER JOIN TM_CHANNEL_SUBSCRIPTION ON USR_ID = CSB_USR_ID
	INNER JOIN TS_CHANNEL ON CSB_CHN_ID = CHN_ID
	LEFT JOIN TS_CHANNEL_LANGUAGE ON CHL_CHN_ID = CHN_ID
		AND CHL_LNG_ID = @LngId
	WHERE USR_ID = @UserId
		AND CSB_DELETE_FLAG = 0
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_ChannelSubscription_ReadCurrent].[@SubscriberUserId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_ChannelSubscription_ReadCurrent].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_ChannelSubscription_ReadCurrent].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_UID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_CHN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL].[CHN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL_LANGUAGE].[CHL_CHN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL].[CHN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL_LANGUAGE].[CHL_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL].[CHN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL_LANGUAGE].[CHL_CHN_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_CHANNEL].[CHN_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_ChannelSubscription_ReadCurrent].[@SubscriberUserId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_ChannelSubscription_ReadCurrent].[@CcnUsername]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_ChannelSubscription_ReadCurrent].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="304" />
				<Property Name="Length" Value="1739" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 28/09/2021&#xD;&#xA;-- Description:&#x9;Reads the Channel subscriptions for the current user&#xD;&#xA;-- exec Subscription_ChannelSubscription_ReadCurrent null,'okeeffene', 'ga'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Subscription_ChannelSubscription_ReadCurrent @SubscriberUserId NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Subscription_Query_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	IF @SubscriberUserId IS NULL
		AND @CcnUsername IS NULL
	BEGIN
		RETURN 0
	END

	DECLARE @UserId INT

	IF @SubscriberUserId IS NOT NULL
	BEGIN
		SET @UserId = (
				SELECT USR_ID
				FROM TD_USER
				INNER JOIN TD_SUBSCRIBER ON SBR_USR_ID = USR_ID
					AND SBR_UID = @SubscriberUserId
					AND SBR_DELETE_FLAG = 0
				)
	END
	ELSE
	BEGIN
		SET @UserId = (
				SELECT USR_ID
				FROM TD_USER
				INNER JOIN TD_ACCOUNT ON CCN_USR_ID = USR_ID
					AND CCN_USERNAME = @CcnUsername
					AND CCN_DELETE_FLAG = 0
				)
	END

	IF @UserId IS NULL
	BEGIN
		RETURN 0;
	END

	-- Check if user has reached the query threshold
	DECLARE @CurrentThreshold INT

	SET @CurrentThreshold = (
			SELECT count(*)
			FROM TD_USER_QUERY
			WHERE SQR_USR_ID = @UserId
			)

	IF @CurrentThreshold >= @QueryThreshold
	BEGIN
		RETURN - 2
	END

	IF EXISTS (
			SELECT 1
			FROM TD_USER_QUERY
			WHERE SQR_USR_ID = @UserId
				AND SQR_SNIPPET_TAGNAME = @TagName
			)
	BEGIN
		RETURN - 1
	END

	DECLARE @SnippetQueryCompressed VARBINARY(MAX)

	SET @SnippetQueryCompressed = compress(@SnippetQuery)

	INSERT INTO TD_USER_QUERY (
		SQR_SNIPPET_TAGNAME
		,SQR_SNIPPET_MATRIX
		,SQR_USR_ID
		,SQR_SNIPPET_TYPE
		,SQR_SNIPPET_QUERY
		,SQR_FLUID_TIME
		,SQR_SNIPPET_ISOGRAM
		)
	VALUES (
		@TagName
		,@Matrix
		,@UserId
		,@SnippetType
		,@SnippetQueryCompressed
		,@FluidTime
		,@SnippetIsogram
		)

	RETURN @@IDENTITY
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varbinary]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Query_Create].[@SubscriberUserId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Query_Create].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_UID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Query_Create].[@QueryThreshold]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_SNIPPET_TAGNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Query_Create].[@TagName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Query_Create].[@SnippetQuery]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_SNIPPET_TAGNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_SNIPPET_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_SNIPPET_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_SNIPPET_QUERY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_FLUID_TIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_SNIPPET_ISOGRAM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Query_Create].[@Matrix]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Query_Create].[@SnippetType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Query_Create].[@FluidTime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Query_Create].[@SnippetIsogram]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Query_Create].[@TagName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Query_Create].[@Matrix]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Query_Create].[@SnippetType]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Query_Create].[@SnippetQuery]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Query_Create].[@FluidTime]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Query_Create].[@SnippetIsogram]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Query_Create].[@SubscriberUserId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Query_Create].[@CcnUsername]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Query_Create].[@QueryThreshold]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="190" />
				<Property Name="Length" Value="2020" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Damian Chapman&#xD;&#xA;-- Create date: 27/09/2021&#xD;&#xA;-- Description:&#x9;Create a Query&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE    &#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[Subscription_Query_Create] @TagName NVARCHAR(256)&#xD;&#xA;&#x9;,@Matrix NVARCHAR(256)&#xD;&#xA;&#x9;,@SnippetType NVARCHAR(256)&#xD;&#xA;&#x9;,@SnippetQuery NVARCHAR(MAX)&#xD;&#xA;&#x9;,@FluidTime BIT = 0&#xD;&#xA;&#x9;,@SnippetIsogram NVARCHAR(256)&#xD;&#xA;&#x9;,@SubscriberUserId NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@QueryThreshold INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Subscription_Query_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;

		IF @SubscriberUserId IS NULL
		AND @CcnUsername IS NULL
	BEGIN
		RETURN 0
	END

	DECLARE @UserId INT

	IF @SubscriberUserId IS NOT NULL
	BEGIN
		SET @UserId = (
				SELECT USR_ID
				FROM TD_USER
				INNER JOIN TD_SUBSCRIBER ON SBR_USR_ID = USR_ID
					AND SBR_UID = @SubscriberUserId
					AND SBR_DELETE_FLAG = 0
				)
	END
	ELSE
	BEGIN
		SET @UserId = (
				SELECT USR_ID
				FROM TD_USER
				INNER JOIN TD_ACCOUNT ON CCN_USR_ID = USR_ID
					AND CCN_USERNAME = @CcnUsername
					AND CCN_DELETE_FLAG = 0
				)
	END

	IF @UserId IS NULL
	BEGIN
		RETURN 0;
	END
    DELETE
    FROM   TD_USER_QUERY
    WHERE  (@UserQueryId IS NULL
            OR SQR_ID = @UserQueryId)
	AND SQR_USR_ID = @UserId
	RETURN @@ROWCOUNT
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Query_Delete].[@SubscriberUserId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Query_Delete].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_UID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Query_Delete].[@UserQueryId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_USR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Query_Delete].[@UserQueryId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Query_Delete].[@SubscriberUserId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Query_Delete].[@CcnUsername]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="190" />
				<Property Name="Length" Value="1145" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Damian Chapman&#xD;&#xA;-- Create date: 27/09/2021&#xD;&#xA;-- Description:&#x9;Delete a Query&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;PROCEDURE [dbo].[Subscription_Query_Delete] @UserQueryId int=NULL&#xD;&#xA;    ,@SubscriberUserId NVARCHAR(256)=NULL&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256) = NULL&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Subscription_Query_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;
	IF @SubscriberUserId IS NULL
		AND @CcnUsername IS NULL
	BEGIN
		RETURN 0;
	END

	DECLARE @UserId AS INT;

	IF @SubscriberUserId IS NOT NULL
	BEGIN
		SET @UserId = (
				SELECT USR_ID
				FROM TD_USER
				INNER JOIN TD_SUBSCRIBER ON SBR_USR_ID = USR_ID
					AND SBR_UID = @SubscriberUserId
					AND SBR_DELETE_FLAG = 0
				);
	END
	ELSE
	BEGIN
		SET @UserId = (
				SELECT USR_ID
				FROM TD_USER
				INNER JOIN TD_ACCOUNT ON CCN_USR_ID = USR_ID
					AND CCN_USERNAME = @CcnUsername
					AND CCN_DELETE_FLAG = 0
				);
	END

	IF @UserId IS NULL
	BEGIN
		RETURN 0;
	END

	SELECT SQR_ID AS Id
		,SQR_SNIPPET_TAGNAME AS TagName
		,SQR_SNIPPET_MATRIX AS Matrix
		,SQR_SNIPPET_TYPE AS SnippetType
		,CAST(decompress(SQR_SNIPPET_QUERY) AS NVARCHAR(MAX)) AS SnippetQueryBase64
		,SQR_FLUID_TIME AS FluidTime
		,SQR_SNIPPET_ISOGRAM AS SnippetIsogram
	FROM TD_USER_QUERY
	WHERE SQR_USR_ID = @UserId
	AND SQR_ID = @UserQueryId
END

SET ANSI_NULLS ON;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Query_Read].[@SubscriberUserId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Query_Read].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_UID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_SNIPPET_TAGNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_SNIPPET_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_SNIPPET_TYPE]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_SNIPPET_QUERY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_FLUID_TIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_SNIPPET_ISOGRAM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Query_Read].[@UserQueryId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Query_Read].[@UserQueryId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Query_Read].[@SubscriberUserId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Query_Read].[@CcnUsername]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="1183" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE  &#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[Subscription_Query_Read] @UserQueryId NVARCHAR(256)&#xD;&#xA;&#x9;,@SubscriberUserId NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Subscription_Query_ReadAll]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	IF @SubscriberUserId IS NULL
		AND @CcnUsername IS NULL
	BEGIN
		RETURN 0;
	END

	DECLARE @UserId AS INT;

	IF @SubscriberUserId IS NOT NULL
	BEGIN
		SET @UserId = (
				SELECT USR_ID
				FROM TD_USER
				INNER JOIN TD_SUBSCRIBER ON SBR_USR_ID = USR_ID
					AND SBR_UID = @SubscriberUserId
					AND SBR_DELETE_FLAG = 0
				);
	END
	ELSE
	BEGIN
		SET @UserId = (
				SELECT USR_ID
				FROM TD_USER
				INNER JOIN TD_ACCOUNT ON CCN_USR_ID = USR_ID
					AND CCN_USERNAME = @CcnUsername
					AND CCN_DELETE_FLAG = 0
				);
	END

	IF @UserId IS NULL
	BEGIN
		RETURN 0;
	END

	SELECT SQR_ID AS Id
		,SQR_SNIPPET_TAGNAME AS TagName
		,SQR_SNIPPET_MATRIX AS Matrix
		,SQR_SNIPPET_TYPE AS SnippetType
		,SQR_FLUID_TIME AS FluidTime
	FROM TD_USER_QUERY
	WHERE SQR_USR_ID = @UserId;
END

SET ANSI_NULLS ON;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Query_ReadAll].[@SubscriberUserId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Query_ReadAll].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_UID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_SNIPPET_TAGNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_SNIPPET_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_SNIPPET_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_FLUID_TIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_USR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Query_ReadAll].[@SubscriberUserId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Query_ReadAll].[@CcnUsername]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="1015" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE&#xD;&#xA;    &#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA;  PROCEDURE [dbo].[Subscription_Query_ReadAll] @SubscriberUserId NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Subscription_Subscriber_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	DECLARE @UserId INT;
	DECLARE @Uid NVARCHAR(64)
	DECLARE @LngId INT

	--The SubscriberUserId can't be already used 
	IF (
			SELECT COUNT(*)
			FROM TD_SUBSCRIBER
			WHERE SBR_UID = @SubscriberUserId
				AND SBR_DELETE_FLAG = 0
			) > 0
	BEGIN
		RETURN 0
	END

	SET @LngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)

	IF @LngId IS NULL
	BEGIN
		RETURN 0
	END

	-- Create the TD_USER entry
	INSERT TD_USER (USR_LNG_ID)
	VALUES (@LngId)

	SET @UserId = @@IDENTITY
	SET @Uid = @SubscriberUserId

	INSERT INTO TD_SUBSCRIBER (
		SBR_USR_ID
		,SBR_UID
		,SBR_PREFERENCE
		,SBR_KEY
		,SBR_DELETE_FLAG
		)
	VALUES (
		@UserId
		,@Uid
		,@Preference
		,@SbrKey
		,0
		)

	RETURN @@ROWCOUNT;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_UID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Subscriber_Create].[@SubscriberUserId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Subscriber_Create].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_UID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_PREFERENCE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_KEY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Subscriber_Create].[@Preference]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Subscriber_Create].[@SbrKey]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Subscriber_Create].[@Preference]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Subscriber_Create].[@SubscriberUserId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Subscriber_Create].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Subscriber_Create].[@SbrKey]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="238" />
				<Property Name="Length" Value="1345" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 21/09/2021&#xD;&#xA;-- Description:&#x9;Create a new subscriber entry for a CcnUsername or a FirebaseId&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Subscription_Subscriber_Create @Preference NVARCHAR(MAX) = NULL&#xD;&#xA;&#x9;,@SubscriberUserId NVARCHAR(256)&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@SbrKey NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Subscription_Subscriber_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	UPDATE TD_SUBSCRIBER
	SET SBR_DELETE_FLAG = 1
	WHERE SBR_UID = @SbrUserId

	RETURN @@ROWCOUNT
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_UID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Subscriber_Delete].[@SbrUserId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Subscriber_Delete].[@SbrUserId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="200" />
				<Property Name="Length" Value="415" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 18/10/2021&#xD;&#xA;-- Description:&#x9;Soft deletes a subscriber&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Subscription_Subscriber_Delete @SbrUserId NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Subscription_Subscriber_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	-- Insert statements for procedure here
	SELECT SBR_UID AS SbrUserId
		,SBR_PREFERENCE AS SbrPreference
		,CCN_EMAIL AS CcnEmail
		,LNG_ISO_CODE AS LngIsoCode
		,SBR_KEY AS SbrKey
	FROM TD_SUBSCRIBER
	INNER JOIN TD_USER ON SBR_USR_ID = USR_ID
		AND SBR_DELETE_FLAG = 0
	INNER JOIN TS_LANGUAGE ON USR_LNG_ID = LNG_ID
	LEFT JOIN TD_ACCOUNT ON CCN_USR_ID = USR_ID
	LEFT JOIN TD_LOGIN ON LGN_CCN_ID = CCN_ID
	WHERE (
			@SubscriberUserId IS NULL
			OR SBR_UID = @SubscriberUserId
			)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_UID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_PREFERENCE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_EMAIL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_KEY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Subscriber_Read].[@SubscriberUserId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_UID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Subscriber_Read].[@SubscriberUserId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="249" />
				<Property Name="Length" Value="975" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 21/09/2021&#xD;&#xA;-- Description:&#x9;Reads all or one specific Subscriber&#xD;&#xA;-- exec Subscription_Subscriber_Read&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Subscription_Subscriber_Read @SubscriberUserId NVARCHAR(256) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Subscription_Subscriber_ReadKeys]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT DISTINCT SBR_KEY AS SbrKey
	FROM TD_SUBSCRIBER
	WHERE SBR_DELETE_FLAG = 0;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_KEY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="188" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[Subscription_Subscriber_ReadKeys]&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Subscription_Subscriber_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	-- Insert statements for procedure here
	UPDATE TD_SUBSCRIBER
	SET SBR_PREFERENCE = @SbrPreference
	WHERE SBR_UID = @SbrUserId
		AND SBR_DELETE_FLAG = 0

	DECLARE @RowsUpdated INT 
	SET @RowsUpdated=@@ROWCOUNT

	DECLARE @LngId INT

	IF @LngIsoCode IS NOT NULL
	BEGIN
		SET @LngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)

		IF @LngId IS NOT NULL
		BEGIN
			UPDATE TD_USER
			SET USR_LNG_ID = @LngId
			WHERE USR_ID =(SELECT SBR_USR_ID  FROM TD_SUBSCRIBER WHERE SBR_UID =@SbrUserId AND SBR_DELETE_FLAG=0)
		
		END
	END

	RETURN @RowsUpdated;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_PREFERENCE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Subscriber_Update].[@SbrPreference]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_UID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Subscriber_Update].[@SbrUserId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Subscriber_Update].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_UID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Subscriber_Update].[@SbrUserId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Subscriber_Update].[@SbrPreference]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Subscriber_Update].[@LngIsoCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="195" />
				<Property Name="Length" Value="1119" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 21/09/2021&#xD;&#xA;-- Description:&#x9;Updates a Subscriber&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Subscription_Subscriber_Update @SbrUserId NVARCHAR(256)&#xD;&#xA;&#x9;,@SbrPreference NVARCHAR(MAX) = NULL&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)=NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Subscription_Subscriber_UpdateSubscriberKey]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	-- Insert statements for procedure here
	UPDATE TD_SUBSCRIBER
	SET SBR_KEY  = @SbrKey
	WHERE SBR_UID = @SbrUserId
		AND SBR_DELETE_FLAG = 0


	RETURN @@ROWCOUNT;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_KEY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Subscriber_UpdateSubscriberKey].[@SbrKey]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_UID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Subscriber_UpdateSubscriberKey].[@SbrUserId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Subscriber_UpdateSubscriberKey].[@SbrUserId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Subscriber_UpdateSubscriberKey].[@SbrKey]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="199" />
				<Property Name="Length" Value="626" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 03/12/2021&#xD;&#xA;-- Description:&#x9;Updates a Subscriber Key&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Subscription_Subscriber_UpdateSubscriberKey&#xD;&#xA; @SbrUserId NVARCHAR(256),&#xD;&#xA;&#x9;@SbrKey NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Subscription_Table_Subscription_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	IF @SubscriberUserId IS NULL
		AND @CcnUsername IS NULL
	BEGIN
		RETURN 0
	END

	DECLARE @UserId INT

	IF @SubscriberUserId IS NOT NULL
	BEGIN
		SET @UserId = (
				SELECT USR_ID
				FROM TD_USER
				INNER JOIN TD_SUBSCRIBER ON SBR_USR_ID = USR_ID
					AND SBR_UID = @SubscriberUserId
					AND SBR_DELETE_FLAG = 0
				)
	END
	ELSE
	BEGIN
		SET @UserId = (
				SELECT USR_ID
				FROM TD_USER
				INNER JOIN TD_ACCOUNT ON CCN_USR_ID = USR_ID
					AND CCN_USERNAME = @CcnUsername
					AND CCN_DELETE_FLAG = 0
				)
	END

	IF @UserId IS NULL
	BEGIN
		RETURN 0;
	END

	--Ensure this subscription doesn't exist already

	IF (SELECT COUNT(*) FROM TM_TABLE_SUBSCRIPTION WHERE TSB_TABLE=@TsbTable AND TSB_USR_ID=@UserId AND TSB_DELETE_FLAG=0) >0
	BEGIN
		RETURN 0;
	END

	INSERT INTO TM_TABLE_SUBSCRIPTION (
		TSB_TABLE
		,TSB_USR_ID
		,TSB_DELETE_FLAG
		)
	VALUES (
		@TsbTable
		,@UserId
		,0
		)

	RETURN @@IDENTITY
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Table_Subscription_Create].[@SubscriberUserId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Table_Subscription_Create].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_UID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_TABLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Table_Subscription_Create].[@TsbTable]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_TABLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Table_Subscription_Create].[@TsbTable]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Table_Subscription_Create].[@SubscriberUserId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Table_Subscription_Create].[@CcnUsername]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="207" />
				<Property Name="Length" Value="1472" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 23/09/2021&#xD;&#xA;-- Description:&#x9;Create a subscription to a table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Subscription_Table_Subscription_Create @TsbTable NVARCHAR(20)&#xD;&#xA;&#x9;,@SubscriberUserId NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Subscription_Table_Subscription_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    IF @SubscriberUserId IS NULL
       AND @CcnUsername IS NULL
        BEGIN
            RETURN 0;
        END
    DECLARE @UserId AS INT;
    IF @SubscriberUserId IS NOT NULL
        BEGIN
            SET @UserId = (SELECT USR_ID
                           FROM   TD_USER
                                  INNER JOIN
                                  TD_SUBSCRIBER
                                  ON SBR_USR_ID = USR_ID
                                     AND SBR_UID = @SubscriberUserId
                                     AND SBR_DELETE_FLAG = 0);
        END
    ELSE
        BEGIN
            SET @UserId = (SELECT USR_ID
                           FROM   TD_USER
                                  INNER JOIN
                                  TD_ACCOUNT
                                  ON CCN_USR_ID = USR_ID
                                     AND CCN_USERNAME = @CcnUsername
                                     AND CCN_DELETE_FLAG = 0);
        END
    IF @UserId IS NULL
        BEGIN
            RETURN 0;
        END
    UPDATE TM_TABLE_SUBSCRIPTION
    SET    TSB_DELETE_FLAG = 1
    WHERE  TSB_USR_ID = @UserId
           AND TSB_TABLE = @TsbTable;
    RETURN 1;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Table_Subscription_Delete].[@SubscriberUserId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Table_Subscription_Delete].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_UID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_TABLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Table_Subscription_Delete].[@TsbTable]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Table_Subscription_Delete].[@TsbTable]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Table_Subscription_Delete].[@SubscriberUserId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Table_Subscription_Delete].[@CcnUsername]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1412" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE Subscription_Table_Subscription_Delete&#xD;&#xA;@TsbTable NVARCHAR (20), @SubscriberUserId NVARCHAR (256)=NULL, @CcnUsername NVARCHAR (256)=NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Subscription_Table_Subscription_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	SELECT TSB_TABLE AS TsbTable
		,MTR_TITLE AS MtrTitle
		,CCN_USERNAME AS CcnUsername
		,SBR_UID AS SbrUserId
		,CCN_EMAIL AS CcnEmail
		,LNG_ISO_CODE AS LngIsoCode
		,RLS_LIVE_DATETIME_FROM AS RlsLiveDatetimeFrom
		,RLS_EXCEPTIONAL_FLAG AS RlsExceptionalFlag
	FROM TM_TABLE_SUBSCRIPTION
	INNER JOIN TD_USER ON USR_ID = TSB_USR_ID
	INNER JOIN TS_LANGUAGE ON USR_LNG_ID = LNG_ID
	INNER JOIN TD_MATRIX ON TSB_TABLE = MTR_CODE
	INNER JOIN VW_RELEASE_LIVE_NOW ON VRN_MTR_ID = MTR_ID
	INNER JOIN TD_RELEASE ON VRN_RLS_ID = RLS_ID
	LEFT JOIN TD_ACCOUNT ON USR_ID = CCN_USR_ID
	LEFT JOIN TD_SUBSCRIBER ON SBR_USR_ID = USR_ID
	LEFT JOIN TD_LOGIN ON LGN_CCN_ID = CCN_ID
	WHERE TSB_DELETE_FLAG = 0
		AND (
			@TsbTable IS NULL
			OR TSB_TABLE = @TsbTable
			)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_TABLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_LOGIN].[LGN_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_TABLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_UID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_EMAIL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Table_Subscription_Read].[@TsbTable]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_TABLE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Table_Subscription_Read].[@TsbTable]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="328" />
				<Property Name="Length" Value="1327" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 24/09/2021&#xD;&#xA;-- Description:&#x9;Read all user subscriptions for a table name, or if no table name, all subscriptions for all tables&#xD;&#xA;-- exec Subscription_Table_Subscription_Read 'HPM08'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Subscription_Table_Subscription_Read @TsbTable NVARCHAR(20) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Subscription_Table_Subscription_ReadCurrent]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	IF @SubscriberUserId IS NULL
		AND @CcnUsername IS NULL
	BEGIN
		RETURN
	END

	DECLARE @UserId INT

	IF @SubscriberUserId IS NOT NULL
	BEGIN
		SET @UserId = (
				SELECT USR_ID
				FROM TD_USER
				INNER JOIN TD_SUBSCRIBER ON SBR_USR_ID = USR_ID
					AND SBR_UID = @SubscriberUserId
					AND SBR_DELETE_FLAG = 0
				)
	END
	ELSE
	BEGIN
		SET @UserId = (
				SELECT USR_ID
				FROM TD_USER
				INNER JOIN TD_ACCOUNT ON CCN_USR_ID = USR_ID
					AND CCN_USERNAME = @CcnUsername
					AND CCN_DELETE_FLAG = 0
				)
	END

	IF @UserId IS NULL
	BEGIN
		RETURN
	END

	--To ensure this sp will return data in the preferred langauge (where available)...
	IF @LngIsoCode=@LngIsoCodeDefault 
	BEGIN
	-- no difference between default and preferred languages

		SELECT TSB_TABLE AS RsbTable
			,MTR_TITLE AS MtrTitle
			,RLS_LIVE_DATETIME_FROM AS RlsDatetimeFrom
			,RLS_EXCEPTIONAL_FLAG AS RlsExceptionalFlag
		FROM TM_TABLE_SUBSCRIPTION
		INNER JOIN TD_MATRIX ON TSB_TABLE = MTR_CODE
		INNER JOIN VW_RELEASE_LIVE_NOW ON VRN_MTR_ID = MTR_ID
		INNER JOIN TD_RELEASE ON VRN_RLS_ID = RLS_ID
		INNER JOIN TS_LANGUAGE 
		ON MTR_LNG_ID=LNG_ID
		AND LNG_DELETE_FLAG=0
		WHERE TSB_USR_ID = @UserId
			AND TSB_DELETE_FLAG = 0
			AND LNG_ISO_CODE=@LngIsoCode 
	END
	ELSE
	BEGIN

	--Default and preferred languages are different
	-- If the data exists in the preferred language, return that, otherwise return the version in the default language
	-- we use a subquery for each language

	SELECT  
	qDefault.RsbTable,
	COALESCE(qPreferred.MtrTitle,qDefault.MtrTitle) as MtrTitle,
	qDefault.RlsDatetimeFrom,
	qDefault.RlsExceptionalFlag 
	FROM
	(
	-- Default Language Read
		SELECT TSB_TABLE AS RsbTable
		,MTR_TITLE AS MtrTitle
		,LNG_ISO_CODE 
		,RLS_LIVE_DATETIME_FROM AS RlsDatetimeFrom
		,RLS_EXCEPTIONAL_FLAG AS RlsExceptionalFlag
		,DTT_ID
		FROM TM_TABLE_SUBSCRIPTION
		INNER JOIN TD_MATRIX ON TSB_TABLE = MTR_CODE
		INNER JOIN VW_RELEASE_LIVE_NOW ON VRN_MTR_ID = MTR_ID
		INNER JOIN TD_RELEASE ON VRN_RLS_ID = RLS_ID
		INNER JOIN TD_DATASET 
		ON MTR_CODE=DTT_MTR_CODE 
		INNER JOIN TS_LANGUAGE 
		ON MTR_LNG_ID=LNG_ID 
		AND LNG_DELETE_FLAG=0
		AND LNG_ISO_CODE=@LngIsoCodeDefault
				WHERE TSB_USR_ID =@UserId
			AND TSB_DELETE_FLAG = 0) qDefault
		
		LEFT OUTER JOIN
		(

	--Preferred Language Read
		SELECT TSB_TABLE AS RsbTable
		,MTR_TITLE AS MtrTitle
		,LNG_ISO_CODE 
		,RLS_LIVE_DATETIME_FROM AS RlsDatetimeFrom
		,RLS_EXCEPTIONAL_FLAG AS RlsExceptionalFlag
		,DTT_ID 
		FROM TM_TABLE_SUBSCRIPTION
		INNER JOIN TD_MATRIX ON TSB_TABLE = MTR_CODE
		INNER JOIN VW_RELEASE_LIVE_NOW ON VRN_MTR_ID = MTR_ID
		INNER JOIN TD_RELEASE ON VRN_RLS_ID = RLS_ID
		INNER JOIN TD_DATASET 
		ON MTR_CODE=DTT_MTR_CODE
		INNER JOIN TS_LANGUAGE 
		ON MTR_LNG_ID=LNG_ID 
		AND LNG_DELETE_FLAG=0
		AND LNG_ISO_CODE=@LngIsoCode
				WHERE TSB_USR_ID =@UserId
			AND TSB_DELETE_FLAG = 0) qPreferred

		on qPreferred.DTT_ID=qDefault.DTT_ID 

	END
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Table_Subscription_ReadCurrent].[@SubscriberUserId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Table_Subscription_ReadCurrent].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_UID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Table_Subscription_ReadCurrent].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Subscription_Table_Subscription_ReadCurrent].[@LngIsoCodeDefault]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_TABLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_TABLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_TABLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DATASET]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DATASET].[DTT_MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_TABLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DATASET].[DTT_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DATASET].[DTT_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_TABLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Table_Subscription_ReadCurrent].[@SubscriberUserId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Table_Subscription_ReadCurrent].[@CcnUsername]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Table_Subscription_ReadCurrent].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Subscription_Table_Subscription_ReadCurrent].[@LngIsoCodeDefault]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="295" />
				<Property Name="Length" Value="3653" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 24/09/2021&#xD;&#xA;-- Description:&#x9;Read all Table subscriptions for a user&#xD;&#xA;-- exec Subscription_Table_Subscription_ReadCurrent null, 'okeeffene','ga','en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Subscription_Table_Subscription_ReadCurrent @SubscriberUserId NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@LngIsoCodeDefault CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Alert_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT = NULL

	-- Do the create Audit and get the new DtgID from the stored procedure
	EXEC @DtgID = Security_Auditing_Create @CcnUsername

	-- Check for problems with the audit stored procedure
	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		RAISERROR (
				'Error in calling Security_Auditing_Create'
				,16
				,1
				)

		RETURN 0
	END

	INSERT INTO TD_ALERT (
		[LRT_MESSAGE]
		,[LRT_DATETIME]
		,[LRT_DTG_ID]
		,[LRT_DELETE_FLAG]
		)
	VALUES (
		@LrtMessage
		,@LrtDatetime
		,@DtgID
		,0
		)

	RETURN @@identity
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Alert_Create].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_MESSAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Alert_Create].[@LrtMessage]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Alert_Create].[@LrtDatetime]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Alert_Create].[@LrtMessage]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Alert_Create].[@LrtDatetime]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Alert_Create].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="293" />
				<Property Name="Length" Value="1027" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 14/12/2018&#xD;&#xA;-- Description:&#x9;Create an Alert&#xD;&#xA;-- exec System_Navigation_Alert_Create 'A big Warning','A warning message','2018-12-31',1,'OKeeffeNe'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Alert_Create @LrtMessage NVARCHAR(1024)&#xD;&#xA;&#x9;,@LrtDatetime DATETIME&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Alert_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT
	DECLARE @eMessage VARCHAR(256)
	DECLARE @updateCount INT

	--some pre-auditing work first:
	SET @DtgID = (
			SELECT LRT_DTG_ID
			FROM TD_ALERT
			WHERE LRT_CODE = @LrtCode
				AND LRT_DELETE_FLAG = 0
			)

	IF @DtgID IS NULL
	BEGIN
		RETURN 0
	END

	UPDATE TD_ALERT
	SET LRT_DELETE_FLAG = 1
	WHERE LRT_CODE = @LrtCode

	SET @updateCount = @@ROWCOUNT

	IF @updateCount > 0
	BEGIN
		-- do the auditing 
		-- Create the entry in the TD_AUDITING table
		DECLARE @AuditUpdateCount INT

		EXEC @AuditUpdateCount = Security_Auditing_Delete @DtgID
			,@CcnUsername

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error creating entry in TD_AUDITING for Alert delete:' + cast(isnull(@LrtCode, 0) AS VARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN
		END
	END

	-- Return the number of rows deleted
	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Alert_Delete].[@LrtCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Delete]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Alert_Delete].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Alert_Delete].[@LrtCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Alert_Delete].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="245" />
				<Property Name="Length" Value="1345" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 17/12/2012&#xD;&#xA;-- Description:&#x9;Deletes an Alert&#xD;&#xA;-- exec System_Navigation_Alert_Delete 1,'OKeeffeNe'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Alert_Delete @LrtCode INT&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Alert_Language_CreateOrUpdate]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @LngId INT
	DECLARE @LrtId INT
	DECLARE @eMessage VARCHAR(256)
	DECLARE @returnVal INT

	SET @LngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)

	IF @LngID IS NULL
		OR @LngID = 0
	BEGIN
		SET @eMessage = 'No ID found for Language Code ' + cast(isnull(@LngIsoCode, 0) AS VARCHAR)

		RAISERROR (
				@eMessage
				,16
				,1
				)

		RETURN 0
	END

	SET @LrtId = (
			SELECT LRT_ID
			FROM TD_ALERT
			WHERE LRT_CODE = @LrtCode
				AND LRT_DELETE_FLAG = 0
			)

	IF @LrtId IS NULL
		OR @LrtId = 0
	BEGIN
		SET @eMessage = 'No ID found for Alert Code ' + cast(isnull(@LrtCode, 0) AS VARCHAR)

		RAISERROR (
				@eMessage
				,16
				,1
				)

		RETURN 0
	END

	IF (
			SELECT COUNT(*)
			FROM TD_ALERT_LANGUAGE
			WHERE LLN_LRT_ID = @LrtId
				AND LLN_LNG_ID = @LngId
			) > 0
	BEGIN
		--This is an update
		UPDATE TD_ALERT_LANGUAGE
		SET LLN_MESSAGE = @LlnMessage
		WHERE LLN_LNG_ID = @LngId
			AND LLN_LRT_ID = @LrtId

		SET @returnVal = @@ROWCOUNT
	END
	ELSE
	BEGIN
		--This is a new entry
		INSERT INTO TD_ALERT_LANGUAGE (
			LLN_MESSAGE
			,LLN_LNG_ID
			,LLN_LRT_ID
			)
		VALUES (
			@LlnMessage
			,@LngId
			,@LrtId
			)

		SET @returnVal = @@IDENTITY
	END

	RETURN @returnVal
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Alert_Language_CreateOrUpdate].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Alert_Language_CreateOrUpdate].[@LrtCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT_LANGUAGE].[LLN_LRT_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT_LANGUAGE].[LLN_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT_LANGUAGE].[LLN_MESSAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Alert_Language_CreateOrUpdate].[@LlnMessage]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT_LANGUAGE].[LLN_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT_LANGUAGE].[LLN_LRT_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Alert_Language_CreateOrUpdate].[@LlnMessage]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Alert_Language_CreateOrUpdate].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Alert_Language_CreateOrUpdate].[@LrtCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="246" />
				<Property Name="Length" Value="1757" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 17/09/2018&#xD;&#xA;-- Description:&#x9;Creates a new entry or updates an existing entry for a translated Alert&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Alert_Language_CreateOrUpdate @LlnMessage NVARCHAR(256)&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@LrtCode INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Alert_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	declare @LngId int
	declare @eMessage nvarchar(256)

		SET @LngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)

	IF @LngID IS NULL
		OR @LngID = 0
	BEGIN
		SET @eMessage = 'No ID found for Language Code ' + cast(isnull(@LngIsoCode, 0) AS VARCHAR)

		RAISERROR (
				@eMessage
				,16
				,1
				)

		RETURN 0
	END

	SELECT lrt.LRT_CODE AS LrtCode
		,lrt.LRT_DATETIME AS LrtDatetime
		,Coalesce(LLN_MESSAGE,LRT_MESSAGE) AS LrtMessage
	FROM TD_ALERT lrt
	left join TD_ALERT_LANGUAGE 
	on lrt.LRT_ID=LLN_LRT_ID 
	and LLN_LNG_ID=@LngId
	WHERE (
			(
				@ReadLiveOnly = 1
				AND getdate() >= lrt.LRT_DATETIME
				)
			OR @ReadLiveOnly = 0
			)
		AND (
			@LrtCode IS NULL
			OR lrt.LRT_CODE = @LrtCode
			)
		AND lrt.LRT_DELETE_FLAG = 0
	ORDER BY lrt.LRT_DATETIME DESC
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Alert_Read].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT_LANGUAGE].[LLN_LRT_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT_LANGUAGE].[LLN_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT_LANGUAGE].[LLN_MESSAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_MESSAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Alert_Read].[@ReadLiveOnly]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Alert_Read].[@LrtCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Alert_Read].[@ReadLiveOnly]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Alert_Read].[@LrtCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Alert_Read].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="230" />
				<Property Name="Length" Value="1258" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 14/12/2018&#xD;&#xA;-- Description:&#x9;Read an Alert&#xD;&#xA;-- exec System_Navigation_Alert_Read 0,2&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Alert_Read @ReadLiveOnly BIT&#xD;&#xA;&#x9;,@LrtCode INT = NULL&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Alert_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT
	DECLARE @eMessage VARCHAR(256)
	DECLARE @updateCount INT

	--some pre-auditing work first:
	SET @DtgID = (
			SELECT LRT_DTG_ID
			FROM TD_ALERT
			WHERE LRT_CODE = @LrtCode
				AND LRT_DELETE_FLAG = 0
			)

	IF @DtgID IS NULL
	BEGIN
		RETURN 0
	END

	-- we may now do the update
	UPDATE TD_ALERT
	SET LRT_MESSAGE = @LrtMessage
		,LRT_DATETIME = @LrtDatetime
	WHERE LRT_CODE = @LrtCode
		AND LRT_DELETE_FLAG = 0

	SET @updateCount = @@ROWCOUNT

	IF @updateCount > 0
	BEGIN
		-- do the auditing 
		-- Create the entry in the TD_AUDITING table
		DECLARE @AuditUpdateCount INT

		EXEC @AuditUpdateCount = Security_Auditing_Update @DtgID
			,@CcnUsername

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error creating entry in TD_AUDITING for Alert update:' + cast(isnull(@LrtCode, 0) AS VARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN
		END
	END

	-- Return the number of rows updated
	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Alert_Update].[@LrtCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_MESSAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Alert_Update].[@LrtMessage]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Alert_Update].[@LrtDatetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ALERT].[LRT_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Alert_Update].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Alert_Update].[@LrtCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Alert_Update].[@LrtMessage]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Alert_Update].[@LrtDatetime]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Alert_Update].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="312" />
				<Property Name="Length" Value="1562" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 17/12/2018&#xD;&#xA;-- Description:&#x9;Updates an Alert &#xD;&#xA;-- exec System_Navigation_Alert_Update 1,'The LRT non-Title','This is not an alert message','2018-12-26',1,'OKeeffeNe'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Alert_Update @LrtCode INT&#xD;&#xA;&#x9;,@LrtMessage NVARCHAR(1024)&#xD;&#xA;&#x9;,@LrtDatetime DATETIME&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Associated_Search]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT MTR_CODE AS MtrCode
		,[Value] AS sValue
		,[key] AS sKey
		,Attribute
		,KRL_VALUE AS FoundValue
		,'Krl' AS KwrSource
		,'True' AS AssociatedFlag
	FROM @Search
	INNER JOIN TD_KEYWORD_RELEASE ON [Value] = KRL_VALUE
	INNER JOIN TD_RELEASE ON RLS_ID = KRL_RLS_ID
		AND RLS_DELETE_FLAG = 0
	INNER JOIN TD_MATRIX ON MTR_RLS_ID = RLS_ID
		AND MTR_DELETE_FLAG = 0
	INNER JOIN VW_RELEASE_LIVE_NOW ON RLS_ID = VRN_RLS_ID
		AND MTR_ID = VRN_MTR_ID
	INNER JOIN TM_RELEASE_PRODUCT ON RPR_RLS_ID = RLS_ID
		AND RPR_DELETE_FLAG = 0
	
	UNION
	
	SELECT MTR_CODE AS MtrCode
		,[Value] AS sValue
		,[key] AS sKey
		,Attribute
		,KSB_VALUE AS FoundValue
		,'Ksb' AS KwrSource
		,'True' AS AssociatedFlag
	FROM @Search
	INNER JOIN TD_KEYWORD_SUBJECT ON [Value] = KSB_VALUE
	INNER JOIN TD_SUBJECT ON KSB_SBJ_ID = SBJ_ID
		AND SBJ_DELETE_FLAG = 0
	INNER JOIN TD_PRODUCT ON PRC_SBJ_ID = SBJ_ID
		AND PRC_DELETE_FLAG = 0
	INNER JOIN TM_RELEASE_PRODUCT ON PRC_ID = RPR_PRC_ID
		AND RPR_DELETE_FLAG = 0
	INNER JOIN VW_RELEASE_LIVE_NOW ON RPR_RLS_ID = VRN_RLS_ID
	INNER JOIN TD_MATRIX ON VRN_MTR_ID = MTR_ID
	
	UNION
	
	SELECT MTR_CODE AS MtrCode
		,[Value] AS sValue
		,[key] AS sKey
		,Attribute
		,KPR_VALUE AS FoundValue
		,'Kpr' AS KwrSource
		,'True' AS AssociatedFlag
	FROM @Search
	INNER JOIN TD_KEYWORD_PRODUCT ON [Value] = KPR_VALUE
	INNER JOIN TD_PRODUCT ON KPR_PRC_ID = PRC_ID
		AND PRC_DELETE_FLAG = 0
	INNER JOIN TM_RELEASE_PRODUCT ON RPR_PRC_ID = PRC_ID
		AND RPR_DELETE_FLAG = 0
	INNER JOIN TD_RELEASE ON RLS_ID = RPR_RLS_ID
		AND RLS_DELETE_FLAG = 0
	INNER JOIN TD_MATRIX ON MTR_RLS_ID = RLS_ID
		AND MTR_DELETE_FLAG = 0
	INNER JOIN VW_RELEASE_LIVE_NOW ON VRN_MTR_ID = MTR_ID
		AND VRN_RLS_ID = RLS_ID
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[System_Navigation_Associated_Search].[@Search]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Associated_Search].[@Search].[Value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Associated_Search].[@Search].[Value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Associated_Search].[@Search].[Key]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Associated_Search].[@Search].[Attribute]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Associated_Search].[@Search].[Value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Associated_Search].[@Search].[Value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Associated_Search].[@Search].[Key]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Associated_Search].[@Search].[Attribute]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Associated_Search].[@Search].[Value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Associated_Search].[@Search].[Value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Associated_Search].[@Search].[Key]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Associated_Search].[@Search].[Attribute]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_VALUE]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[System_Navigation_Associated_Search].[@Search]" Disambiguator="8">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[System_Navigation_Associated_Search].[@Search].[Key]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="256" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[System_Navigation_Associated_Search].[@Search].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="256" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[System_Navigation_Associated_Search].[@Search].[Attribute]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Associated_Search].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Associated_Search].[@Search]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[dbo].[KeyValueVarcharAttribute]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="1931" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[System_Navigation_Associated_Search] @LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@Search KeyValueVarcharAttribute READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Entity_Associated_Search]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;



	SELECT DISTINCT MTR_CODE AS MtrCode
		,NULL AS sValue
		,NULL AS sKey
		,NULL AS Attribute
		,NULL AS FoundValue
		,'Entity' AS KwrSource
	FROM TD_RELEASE
	INNER JOIN (
		SELECT DISTINCT VRN_RLS_ID
		FROM VW_RELEASE_LIVE_NOW
		) AS LIVE_NOW ON RLS_ID = VRN_RLS_ID
		AND RLS_DELETE_FLAG = 0
	INNER JOIN TM_RELEASE_PRODUCT ON RPR_RLS_ID = RLS_ID
	AND RPR_DELETE_FLAG = 0
	INNER JOIN TD_PRODUCT ON RPR_PRC_ID=PRC_ID
	AND PRC_DELETE_FLAG=0
	INNER JOIN TD_SUBJECT ON PRC_SBJ_ID=SBJ_ID
	AND SBJ_DELETE_FLAG=0
	INNER JOIN TD_THEME ON SBJ_THM_ID=THM_ID
	AND THM_DELETE_FLAG=0
	INNER JOIN TD_MATRIX ON MTR_RLS_ID = RPR_RLS_ID		
		AND MTR_DELETE_FLAG = 0
	INNER JOIN TS_COPYRIGHT ON MTR_CPR_ID = CPR_ID
		AND CPR_DELETE_FLAG = 0
	WHERE (
			@MtrCode IS NULL
			OR @MtrCode = MTR_CODE
			)
		AND (@ThmCode IS NULL
			OR @ThmCode=THM_CODE)
		AND (@SbjCode IS NULL
			OR @SbjCode=SBJ_CODE)
		AND (@PrcCode IS NULL
			OR @PrcCode =PRC_CODE)
		AND (
			@MtrOfficialFlag IS NULL
			OR @MtrOfficialFlag = MTR_OFFICIAL_FLAG
			)
		AND (
			@CprCode IS NULL
			OR @CprCode = CPR_CODE
			)
		AND (
			@RlsExceptionalFlag IS NULL
			OR @RlsExceptionalFlag = RLS_EXCEPTIONAL_FLAG
			)
		AND (
			@RlsReservationFlag IS NULL
			OR @RlsReservationFlag = RLS_RESERVATION_FLAG
			)
		AND (
			@RlsArchiveFlag IS NULL
			OR @RlsArchiveFlag = RLS_ARCHIVE_FLAG
			)
		AND (
			@RlsAnalyticalFlag IS NULL
			OR @RlsAnalyticalFlag = RLS_ANALYTICAL_FLAG
			)
		AND (
			@RlsExperimentalFlag IS NULL
			OR @RlsExperimentalFlag = RLS_EXPERIMENTAL_FLAG
			);
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Entity_Associated_Search].[@MtrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Entity_Associated_Search].[@ThmCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Entity_Associated_Search].[@SbjCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Entity_Associated_Search].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Entity_Associated_Search].[@MtrOfficialFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_OFFICIAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Entity_Associated_Search].[@CprCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Entity_Associated_Search].[@RlsExceptionalFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Entity_Associated_Search].[@RlsReservationFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Entity_Associated_Search].[@RlsArchiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Entity_Associated_Search].[@RlsAnalyticalFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Entity_Associated_Search].[@RlsExperimentalFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Entity_Associated_Search].[@MtrCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Entity_Associated_Search].[@MtrOfficialFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Entity_Associated_Search].[@ThmCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Entity_Associated_Search].[@SbjCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Entity_Associated_Search].[@PrcCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Entity_Associated_Search].[@CprCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Entity_Associated_Search].[@RlsExceptionalFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Entity_Associated_Search].[@RlsReservationFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Entity_Associated_Search].[@RlsArchiveFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Entity_Associated_Search].[@RlsAnalyticalFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Entity_Associated_Search].[@RlsExperimentalFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="2037" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[System_Navigation_Entity_Associated_Search] @MtrCode NVARCHAR(20) = NULL&#xD;&#xA;&#x9;,@MtrOfficialFlag BIT = NULL&#xD;&#xA;&#x9;,@ThmCode INT=NULL&#xD;&#xA;&#x9;,@SbjCode INT = NULL&#xD;&#xA;&#x9;,@PrcCode NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@CprCode NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@RlsExceptionalFlag BIT = NULL&#xD;&#xA;&#x9;,@RlsReservationFlag BIT = NULL&#xD;&#xA;&#x9;,@RlsArchiveFlag BIT = NULL&#xD;&#xA;&#x9;,@RlsAnalyticalFlag BIT = NULL&#xD;&#xA;&#x9;,@RlsExperimentalFlag BIT = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_EntitySearch]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;



	SELECT DISTINCT MTR_CODE AS MtrCode
		,NULL AS sValue
		,NULL AS sKey
		,NULL AS Attribute
		,NULL FoundValue
		,'Entity' AS KwrSource
	FROM TD_RELEASE
	INNER JOIN (
		SELECT DISTINCT VRN_RLS_ID
		FROM VW_RELEASE_LIVE_NOW
		) AS LIVE_NOW ON RLS_ID = VRN_RLS_ID
	LEFT OUTER JOIN TD_PRODUCT ON RLS_PRC_ID = PRC_ID
	LEFT OUTER JOIN TD_SUBJECT ON PRC_SBJ_ID = SBJ_ID
	LEFT OUTER JOIN TD_THEME ON SBJ_THM_ID=THM_ID
	INNER JOIN TD_MATRIX ON MTR_RLS_ID = RLS_ID
		AND RLS_DELETE_FLAG = 0
		AND MTR_DELETE_FLAG = 0
	INNER JOIN TS_COPYRIGHT ON MTR_CPR_ID = CPR_ID
		AND CPR_DELETE_FLAG = 0


	WHERE 
			(@ThmCode IS NULL 
			OR @ThmCode=THM_CODE)
		AND
			(
			@PrcCode IS NULL
			OR @PrcCode = PRC_CODE
			)
		AND (
			@SbjCode IS NULL
			OR @SbjCode = SBJ_CODE
			)
		AND (
			@MtrCode IS NULL
			OR @MtrCode = MTR_CODE
			)
		AND (
			@MtrOfficialFlag IS NULL
			OR @MtrOfficialFlag = MTR_OFFICIAL_FLAG
			)
		AND (
			@CprCode IS NULL
			OR @CprCode = CPR_CODE
			)
		AND (
			@RlsExceptionalFlag IS NULL
			OR @RlsExceptionalFlag = RLS_EXCEPTIONAL_FLAG
			)
		AND (
			@RlsReservationFlag IS NULL
			OR @RlsReservationFlag = RLS_RESERVATION_FLAG
			)
		AND (
			@RlsArchiveFlag IS NULL
			OR @RlsArchiveFlag = RLS_ARCHIVE_FLAG
			)
		AND (
			@RlsAnalyticalFlag IS NULL
			OR @RlsAnalyticalFlag = RLS_ANALYTICAL_FLAG
			)
		AND (
			@RlsExperimentalFlag IS NULL
			OR @RlsExperimentalFlag = RLS_EXPERIMENTAL_FLAG
			) ;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_EntitySearch].[@ThmCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_EntitySearch].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_EntitySearch].[@SbjCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_EntitySearch].[@MtrCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_EntitySearch].[@MtrOfficialFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_OFFICIAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_EntitySearch].[@CprCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_EntitySearch].[@RlsExceptionalFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_EntitySearch].[@RlsReservationFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_EntitySearch].[@RlsArchiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_EntitySearch].[@RlsAnalyticalFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_EntitySearch].[@RlsExperimentalFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_EntitySearch].[@MtrCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_EntitySearch].[@MtrOfficialFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_EntitySearch].[@ThmCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_EntitySearch].[@SbjCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_EntitySearch].[@PrcCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_EntitySearch].[@CprCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_EntitySearch].[@RlsExceptionalFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_EntitySearch].[@RlsReservationFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_EntitySearch].[@RlsArchiveFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_EntitySearch].[@RlsAnalyticalFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_EntitySearch].[@RlsExperimentalFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="263" />
				<Property Name="Length" Value="2183" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 19/01/2021&#xD;&#xA;-- Description:&#x9;Returns the entity search details&#xD;&#xA;-- EXEC System_Navigation_EntitySearch null, null, 35&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[System_Navigation_EntitySearch] @MtrCode NVARCHAR(20) = NULL&#xD;&#xA;&#x9;,@MtrOfficialFlag BIT = NULL&#xD;&#xA;&#x9;,@ThmCode INT = NULL&#xD;&#xA;&#x9;,@SbjCode INT = NULL&#xD;&#xA;&#x9;,@PrcCode NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@CprCode NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@RlsExceptionalFlag BIT = NULL&#xD;&#xA;&#x9;,@RlsReservationFlag BIT = NULL&#xD;&#xA;&#x9;,@RlsArchiveFlag BIT = NULL&#xD;&#xA;&#x9;,@RlsAnalyticalFlag BIT = NULL&#xD;&#xA;&#x9;,@RlsExperimentalFlag BIT = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_GetMtrCodesForProduct]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	SELECT DISTINCT MTR_CODE AS MtrCode
	FROM TD_MATRIX
	INNER JOIN TD_RELEASE ON MTR_RLS_ID = RLS_ID
	INNER JOIN VW_RELEASE_LIVE_NOW ON VRN_MTR_ID = MTR_ID
		AND VRN_RLS_ID = RLS_ID
	INNER JOIN TD_PRODUCT ON PRC_ID = RLS_PRC_ID
		AND PRC_CODE = @PrcCode
		AND PRC_DELETE_FLAG = 0
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_GetMtrCodesForProduct].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_GetMtrCodesForProduct].[@PrcCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="290" />
				<Property Name="Length" Value="798" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 11/03/2022&#xD;&#xA;-- Description:&#x9;Get a list of matrix codes for releases with the product code&#xD;&#xA;-- exec System_Navigation_GetMtrCodesForProduct 'LR'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_GetMtrCodesForProduct @PrcCode NVARCHAR(32)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_GetRlsCodesForProduct]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	SELECT DISTINCT RLS_CODE AS RlsCode
	FROM TD_MATRIX
	INNER JOIN TD_RELEASE ON MTR_RLS_ID = RLS_ID
	AND RLS_DELETE_FLAG=0
	AND MTR_DELETE_FLAG=0
	
	INNER JOIN TD_PRODUCT ON PRC_ID = RLS_PRC_ID
	AND PRC_CODE=@PrcCode
		AND PRC_DELETE_FLAG = 0
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_GetRlsCodesForProduct].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_GetRlsCodesForProduct].[@PrcCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="291" />
				<Property Name="Length" Value="764" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 11/03/2022&#xD;&#xA;-- Description:&#x9;Get a list of release codes for releases with the product code&#xD;&#xA;-- exec System_Navigation_GetRlsCodesForProduct 'LR'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_GetRlsCodesForProduct @PrcCode NVARCHAR(32)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Keyword_Product_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	-- Error Message
	DECLARE @errorMessage VARCHAR(256)
	DECLARE @spName VARCHAR(100)

	SET @spName = 'System_Navigation_Keyword_Product_Create'

	DECLARE @ProductId INT = NULL

	SELECT @ProductId = p.PRC_ID
	FROM TD_Product p
	WHERE p.PRC_CODE = @PrcCode

	IF @ProductId IS NULL
	BEGIN
		SET @errorMessage = 'SP: ' + @spName + ' - Product not found: ' + cast(isnull(@PrcCode, 0) AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				);

		RETURN 0
	END

	--Prevent duplicate values in the Keyword Product table
	DECLARE @KprValueCount INT

	SET @KprValueCount = (
			SELECT COUNT(*)
			FROM TD_KEYWORD_PRODUCT
			WHERE KPR_PRC_ID = @ProductId
				AND KPR_VALUE = @KprValue
			)

	IF @KprValueCount > 0
	BEGIN
		RETURN - 1
	END

	INSERT INTO [TD_KEYWORD_PRODUCT] (
		[KPR_CODE]
		,[KPR_VALUE]
		,[KPR_PRC_ID]
		,[KPR_MANDATORY_FLAG]
		,[KPR_SINGULARISED_FLAG] 
		)
	VALUES (
		DEFAULT
		,@KprValue
		,@ProductId
		,@KprMandatoryFlag
		,@KprSingularisedFlag
		)

	RETURN @@identity
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Product_Create].[@PrcCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Product_Create].[@KprValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_MANDATORY_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_SINGULARISED_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Product_Create].[@KprMandatoryFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Product_Create].[@KprSingularisedFlag]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Product_Create].[@KprValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Product_Create].[@PrcCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Product_Create].[@KprSingularisedFlag]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Product_Create].[@KprMandatoryFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="231" />
				<Property Name="Length" Value="1482" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Create date: 16 Oct 2018&#xD;&#xA;-- Description:&#x9;Inserts a new record into the TD_Keyword_Product table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Keyword_Product_Create @KprValue NVARCHAR(256)&#xD;&#xA;&#x9;,@PrcCode NVARCHAR(32)&#xD;&#xA;&#x9;,@KprSingularisedFlag BIT&#xD;&#xA;&#x9;,@KprMandatoryFlag BIT = 0&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Keyword_Product_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	--SET NOCOUNT ON;
	IF @KprCode IS NULL
		AND @PrcCode IS NULL
	BEGIN
		RETURN 0
	END

	DECLARE @DeleteCount INT
	DECLARE @PrcID INT = NULL
	DECLARE @errorMessage VARCHAR(256)

	IF @PrcCode IS NOT NULL
	BEGIN
		SET @PrcID = (
				SELECT PRC_ID
				FROM TD_PRODUCT
				WHERE PRC_CODE = @PrcCode
					AND PRC_DELETE_FLAG = 0
				)

		IF @PrcID IS NULL
		BEGIN
			BEGIN
				BEGIN
					SET @errorMessage = 'SP: ' + OBJECT_NAME(@@PROCID) + ' - product not found: ' + cast(isnull(@PrcCode, 0) AS VARCHAR)

					RAISERROR (
							@errorMessage
							,16
							,1
							);

					RETURN 0
				END
			END
		END
	END

	DELETE
	FROM [TD_KEYWORD_PRODUCT]
	WHERE (
			KPR_CODE = @KprCode
			OR @KprCode IS NULL
			)
		AND (
			KPR_PRC_ID = @PrcID
			OR @PrcID IS NULL
			)
		AND (
			KPR_MANDATORY_FLAG = @KprMandatoryFlag
			OR @KprMandatoryFlag IS NULL
			)

	SET @DeleteCount = @@ROWCOUNT

	-- Return the number of rows Deleted
	RETURN @DeleteCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Product_Delete].[@KprCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Product_Delete].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_MANDATORY_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Product_Delete].[@KprMandatoryFlag]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Product_Delete].[@KprCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Product_Delete].[@PrcCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Product_Delete].[@KprMandatoryFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="291" />
				<Property Name="Length" Value="1454" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Create date: 16 Oct 2018&#xD;&#xA;-- Description:&#x9;Delete a record from the TD_Keyword_Product table&#xD;&#xA;-- exec System_Navigation_Keyword_Product_Delete null,'test1'&#xD;&#xA;&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Keyword_Product_Delete @KprCode INT = NULL&#xD;&#xA;&#x9;,@PrcCode NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@KprMandatoryFlag BIT = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Keyword_Product_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT [KPR_CODE] AS KprCode
		,[KPR_VALUE] AS KprValue
		,[KPR_MANDATORY_FLAG] AS KprMandatoryFlag
		,SBJ_CODE AS SbjCode
		,SBJ_VALUE AS SbjValue
		,KPR_SINGULARISED_FLAG AS KprSingularisedFlag
	FROM [TD_KEYWORD_PRODUCT]
	INNER JOIN TD_Product
		ON PRC_ID = KPR_PRC_ID
			AND PRC_DELETE_FLAG = 0
	INNER JOIN TD_SUBJECT
		ON PRC_SBJ_ID = SBJ_ID
			AND SBJ_DELETE_FLAG = 0
	WHERE (
			(
				@KprCode IS NOT NULL
				AND KPR_CODE = @KprCode
				)
			OR @KprCode IS NULL
			)
		AND (
			(
				@PrcCode IS NOT NULL
				AND PRC_CODE = @PrcCode
				)
			OR @PrcCode IS NULL
			)
		AND (
			(
				@SbjCode IS NOT NULL
				AND SBJ_CODE = @SbjCode
				)
			OR @SbjCode IS NULL
			)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_MANDATORY_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_SINGULARISED_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Product_Read].[@KprCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Product_Read].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Product_Read].[@SbjCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Product_Read].[@KprCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Product_Read].[@PrcCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Product_Read].[@SbjCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="224" />
				<Property Name="Length" Value="1106" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Create date: 16 Oct 2018&#xD;&#xA;-- Description:&#x9;Select a record on the TD_Keyword_Product table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Keyword_Product_Read @KprCode INT = NULL&#xD;&#xA;&#x9;,@PrcCode NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@SbjCode INT = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Keyword_Product_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @updateCount INT
	--Prevent duplicate values in the Keyword Product table
	DECLARE @KprValueCount INT
	DECLARE @KprPrcID INT

	SET @KprPrcID = (
			SELECT KPR_PRC_ID
			FROM TD_KEYWORD_PRODUCT
			WHERE KPR_CODE = @KprCode
			)
	SET @KprValueCount = (
			SELECT COUNT(*)
			FROM TD_KEYWORD_PRODUCT
			WHERE KPR_PRC_ID = @KprPrcID
				AND KPR_VALUE = @KprValue
				AND KPR_CODE <> @KprCode
			)

	IF @KprValueCount > 0
	BEGIN
		RETURN - 1
	END

	UPDATE [TD_KEYWORD_PRODUCT]
	SET [KPR_VALUE] = @KprValue
		,[KPR_MANDATORY_FLAG] = @KprMandatoryFlag
		,KPR_SINGULARISED_FLAG=@KprSingularisedFlag 
	WHERE KPR_CODE = @KprCode

	SET @updateCount = @@ROWCOUNT

	-- Return the number of rows Updated
	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Product_Update].[@KprCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Product_Update].[@KprValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_MANDATORY_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Product_Update].[@KprMandatoryFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_SINGULARISED_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Product_Update].[@KprSingularisedFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Product_Update].[@KprCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Product_Update].[@KprValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Product_Update].[@KprSingularisedFlag]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Product_Update].[@KprMandatoryFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="224" />
				<Property Name="Length" Value="1174" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Create date: 16 Oct 2018&#xD;&#xA;-- Description:&#x9;Update a record on the TD_Keyword_Product table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Keyword_Product_Update @KprCode INT&#xD;&#xA;&#x9;,@KprValue NVARCHAR(256)&#xD;&#xA;&#x9;,@KprSingularisedFlag BIT&#xD;&#xA;&#x9;,@KprMandatoryFlag BIT = 0&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Keyword_Release_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @eMessage VARCHAR(256)
	DECLARE @RlsID INT

	SET @RlsID = (
			SELECT rls.RLS_ID
			FROM TD_RELEASE rls
			WHERE rls.RLS_CODE = @RlsCode
			)

	IF @RlsID IS NULL
		OR @RlsID = 0
	BEGIN
		SET @eMessage = 'Error in procedure ' + (
				SELECT OBJECT_NAME(@@PROCID)
				) + ' - No release found for RlsCode ' + cast(isnull(@RlsCode, 0) AS VARCHAR)

		RAISERROR (
				@eMessage
				,16
				,1
				)

		RETURN
	END

	--Prevent duplicate values in the Keyword Release table
	DECLARE @KrlValueCount INT

	SET @KrlValueCount = (
			SELECT COUNT(*)
			FROM TD_KEYWORD_RELEASE
			WHERE KRL_RLS_ID = @RlsID
				AND KRL_VALUE = @KrlValue
			)

	IF @KrlValueCount > 0
	BEGIN
		RETURN - 1
	END

	INSERT INTO TD_KEYWORD_RELEASE (
		KRL_VALUE
		,KRL_MANDATORY_FLAG
		,KRL_RLS_ID
		,KRL_SINGULARISED_FLAG
		)
	VALUES (
		@KrlValue
		,@KrlMandatoryFlag
		,@RlsID
		,@KrlSingularisedFlag
		)

	RETURN @@Rowcount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Release_Create].[@RlsCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Release_Create].[@KrlValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_MANDATORY_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_SINGULARISED_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Release_Create].[@KrlMandatoryFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Release_Create].[@KrlSingularisedFlag]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Release_Create].[@KrlValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Release_Create].[@KrlMandatoryFlag]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Release_Create].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Release_Create].[@KrlSingularisedFlag]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="200" />
				<Property Name="Length" Value="1348" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 30/11/2018&#xD;&#xA;-- Description:&#x9;Creates a Keyword Release&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Keyword_Release_Create @KrlValue NVARCHAR(256)&#xD;&#xA;&#x9;,@KrlMandatoryFlag BIT&#xD;&#xA;&#x9;,@RlsCode INT&#xD;&#xA;&#x9;,@KrlSingularisedFlag BIT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Keyword_Release_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT OFF;

	DECLARE @RlsID INT
	DECLARE @eMessage VARCHAR(256)

	IF @RlsCode IS NULL
		AND @KrlCode IS NULL
	BEGIN
		SET @eMessage = 'You must supply either an RlsCode or a KrlCode'

		RAISERROR (
				@eMessage
				,16
				,1
				);

		RETURN 0
	END

	IF @RlsCode IS NOT NULL
	BEGIN --we want to delete all keyword releases for a given RlsCode
		SET @RlsID = (
				SELECT rls.RLS_ID
				FROM TD_RELEASE rls
				WHERE rls.RLS_DELETE_FLAG = 0
					AND rls.RLS_CODE = @RlsCode
				)

		IF @RlsID IS NULL
			OR @RlsID = 0
		BEGIN
			RETURN 0
		END
	END

	DELETE
	FROM TD_KEYWORD_RELEASE
	WHERE (
			@RlsID IS NULL
			OR KRL_RLS_ID = @RlsID
			)
		AND (
			@KrlCode IS NULL
			OR @KrlCode = KRL_CODE
			)
		AND (
			@KrlMandatoryFlag IS NULL
			OR @KrlMandatoryFlag = KRL_MANDATORY_FLAG
			)

	RETURN @@rowcount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Release_Delete].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Release_Delete].[@KrlCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Release_Delete].[@KrlMandatoryFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_MANDATORY_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Release_Delete].[@RlsCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Release_Delete].[@KrlMandatoryFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Release_Delete].[@KrlCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="262" />
				<Property Name="Length" Value="1283" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 07/12/2018&#xD;&#xA;-- Description:&#x9;Hard deletes Release Keywords for a given release or for a specific KeywordRelease code&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Keyword_Release_Delete @RlsCode INT = NULL&#xD;&#xA;&#x9;,@KrlMandatoryFlag BIT = NULL&#xD;&#xA;&#x9;,@KrlCode INT = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Keyword_Release_EliminateDupes]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	DELETE
	FROM TD_KEYWORD_RELEASE
	WHERE KRL_ID NOT IN (
			SELECT max(krl_id) AS maxId
			FROM [TD_KEYWORD_RELEASE]
			INNER JOIN td_release ON rls_id = KRL_RLS_ID
				AND RLS_DELETE_FLAG = 0
			INNER JOIN td_matrix ON MTR_RLS_ID = RLS_ID
				AND MTR_DELETE_FLAG = 0
			GROUP BY [KRL_VALUE]
				,[KRL_RLS_ID]
				,[KRL_MANDATORY_FLAG]
				,[KRL_SINGULARISED_FLAG]
			)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_MANDATORY_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_SINGULARISED_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="285" />
				<Property Name="Length" Value="877" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 09/12/2021&#xD;&#xA;-- Cleanup procedure for TD_KEYWORD_RELEASE. Eliminates any duplicate entries for a release (while retaining a single entry) .&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Keyword_Release_EliminateDupes&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Keyword_Release_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT krl.KRL_CODE AS KrlCode
		,krl.KRL_VALUE AS KrlValue
		,krl.KRL_MANDATORY_FLAG AS KrlMandatoryFlag
		,rls.RLS_CODE AS RlsCode
		,krl.KRL_SINGULARISED_FLAG as KrlSingularisedFlag
	FROM TD_KEYWORD_RELEASE krl
	INNER JOIN TD_RELEASE rls
		ON rls.RLS_ID = krl.KRL_RLS_ID
			AND rls.RLS_DELETE_FLAG = 0
	WHERE (
			@RlsCode IS NULL
			OR @RlsCode = rls.RLS_CODE
			)
		AND (
			@KrlCode IS NULL
			OR @KrlCode = krl.KRL_CODE
			)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_MANDATORY_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_SINGULARISED_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Release_Read].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Release_Read].[@KrlCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Release_Read].[@RlsCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Release_Read].[@KrlCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="209" />
				<Property Name="Length" Value="800" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 06/12/2018&#xD;&#xA;-- Description:&#x9;Reads the Keyword Release entities&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Keyword_Release_Read @RlsCode INT = NULL&#xD;&#xA;&#x9;,@KrlCode INT = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Keyword_Release_RemoveDupes]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DROP TABLE

	IF EXISTS #tempKeyword;
		SELECT DISTINCT krl_value
			,KRL_RLS_ID
			,KRL_MANDATORY_FLAG
			,KRL_SINGULARISED_FLAG
		INTO #tempKeyword
		FROM TD_KEYWORD_RELEASE
		WHERE krl_rls_id = @RlsId;

	DELETE TD_KEYWORD_RELEASE
	WHERE krl_rls_id = @RlsId;

	INSERT INTO TD_KEYWORD_RELEASE (
		krl_value
		,KRL_RLS_ID
		,KRL_MANDATORY_FLAG
		,KRL_SINGULARISED_FLAG
		)
	SELECT krl_value
		,KRL_RLS_ID
		,KRL_MANDATORY_FLAG
		,KRL_SINGULARISED_FLAG
	FROM #tempKeyword;

	DROP TABLE

	IF EXISTS #tempKeyword;END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Release_RemoveDupes].[#tempKeyword]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_MANDATORY_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_SINGULARISED_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Release_RemoveDupes].[@RlsId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Release_RemoveDupes].[#tempKeyword].[krl_value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Release_RemoveDupes].[#tempKeyword].[KRL_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Release_RemoveDupes].[#tempKeyword].[KRL_MANDATORY_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Release_RemoveDupes].[#tempKeyword].[KRL_SINGULARISED_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[System_Navigation_Keyword_Release_RemoveDupes].[#tempKeyword]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[System_Navigation_Keyword_Release_RemoveDupes].[#tempKeyword].[krl_value]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_VALUE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[System_Navigation_Keyword_Release_RemoveDupes].[#tempKeyword].[KRL_RLS_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_RLS_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[System_Navigation_Keyword_Release_RemoveDupes].[#tempKeyword].[KRL_MANDATORY_FLAG]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_MANDATORY_FLAG]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[System_Navigation_Keyword_Release_RemoveDupes].[#tempKeyword].[KRL_SINGULARISED_FLAG]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_SINGULARISED_FLAG]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Release_RemoveDupes].[@RlsId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="664" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[System_Navigation_Keyword_Release_RemoveDupes] @RlsId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Keyword_Release_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @KrlRlsID INT

	SET @KrlRlsID = (
			SELECT KRL_RLS_ID
			FROM TD_KEYWORD_RELEASE
			WHERE KRL_CODE = @KrlCode
			)

	DECLARE @KrlValueCount INT

	SET @KrlValueCount = (
			SELECT COUNT(*)
			FROM TD_KEYWORD_RELEASE
			WHERE KRL_RLS_ID = @KrlRlsID
				AND KRL_VALUE = @KrlValue
				AND KRL_CODE <> @KrlCode
			)

	IF @KrlValueCount > 0
	BEGIN
		RETURN - 1
	END

	UPDATE TD_KEYWORD_RELEASE
	SET KRL_VALUE = @KrlValue
		,KRL_SINGULARISED_FLAG = @KrlSingularisedFlag
	WHERE KRL_CODE = @KrlCode

	RETURN @@rowcount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Release_Update].[@KrlCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Release_Update].[@KrlValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_SINGULARISED_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Release_Update].[@KrlSingularisedFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Release_Update].[@KrlCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Release_Update].[@KrlValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Release_Update].[@KrlSingularisedFlag]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="200" />
				<Property Name="Length" Value="917" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 11/12/2018&#xD;&#xA;-- Description:&#x9;Updates a Keyword Release&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Keyword_Release_Update @KrlCode INT&#xD;&#xA;&#x9;,@KrlValue NVARCHAR(256)&#xD;&#xA;&#x9;,@KrlSingularisedFlag BIT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Keyword_Subject_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	-- Error Message
	DECLARE @errorMessage VARCHAR(256)
	DECLARE @spName VARCHAR(100)

	SET @spName = 'System_Navigation_Keyword_Subject_Create'

	DECLARE @subjectId INT = NULL

	SELECT @subjectId = s.SBJ_ID
	FROM TD_SUBJECT s
	WHERE s.SBJ_CODE = @SbjCode

	IF @subjectId IS NULL
	BEGIN
		SET @errorMessage = 'SP: ' + @spName + ' - subject not found: ' + cast(isnull(@SbjCode, 0) AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				);

		RETURN 0
	END

	--Prevent duplicate values in the Keyword Subject table
	DECLARE @KsbValueCount INT

	SET @KsbValueCount = (
			SELECT COUNT(*)
			FROM TD_KEYWORD_SUBJECT
			WHERE KSB_SBJ_ID = @subjectId
				AND KSB_VALUE = @KsbValue
			)

	IF @KsbValueCount > 0
	BEGIN
		RETURN - 1
	END

	INSERT INTO [TD_KEYWORD_SUBJECT] (
		[KSB_CODE]
		,[KSB_VALUE]
		,[KSB_SBJ_ID]
		,[KSB_MANDATORY_FLAG]
		,[KSB_SINGULARISED_FLAG]
		)
	VALUES (
		DEFAULT
		,@KsbValue
		,@subjectId
		,@KsbMandatoryFlag
		,@KsbSingularisedFlag 
		)

	RETURN @@identity
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Subject_Create].[@SbjCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Subject_Create].[@KsbValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_MANDATORY_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_SINGULARISED_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Subject_Create].[@KsbMandatoryFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Subject_Create].[@KsbSingularisedFlag]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Subject_Create].[@KsbValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Subject_Create].[@SbjCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Subject_Create].[@KsbSingularisedFlag]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Subject_Create].[@KsbMandatoryFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="231" />
				<Property Name="Length" Value="1476" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Create date: 16 Oct 2018&#xD;&#xA;-- Description:&#x9;Inserts a new record into the TD_Keyword_Subject table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Keyword_Subject_Create @KsbValue NVARCHAR(256)&#xD;&#xA;&#x9;,@SbjCode INT&#xD;&#xA;&#x9;,@KsbSingularisedFlag BIT&#xD;&#xA;&#x9;,@KsbMandatoryFlag BIT = 0&#xD;&#xA;&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Keyword_Subject_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	IF @KsbCode IS NULL
		AND @SbjCode IS NULL
	BEGIN
		RETURN 0
	END

	DECLARE @DeleteCount INT
	DECLARE @sbjID INT = NULL
	DECLARE @errorMessage VARCHAR(256)

	IF @SbjCode IS NOT NULL
	BEGIN
		SET @sbjID = (
				SELECT SBJ_ID
				FROM TD_SUBJECT
				WHERE SBJ_CODE = @SbjCode
					AND SBJ_DELETE_FLAG = 0
				)

		IF @sbjId IS NULL
		BEGIN
			BEGIN
				SET @errorMessage = 'SP: ' + OBJECT_NAME(@@PROCID) + ' - subject not found: ' + cast(isnull(@SbjCode, 0) AS VARCHAR)

				RAISERROR (
						@errorMessage
						,16
						,1
						);

				RETURN 0
			END
		END
	END

	DELETE
	FROM [TD_KEYWORD_SUBJECT]
	WHERE (
			[KSB_Code] = @KsbCode
			OR @KsbCode IS NULL
			)
		AND (
			KSB_SBJ_ID = @sbjID
			OR @sbjID IS NULL
			)
		AND (
			@KsbMandatoryFlag IS NULL
			OR @KsbMandatoryFlag = KSB_MANDATORY_FLAG
			)

	SET @DeleteCount = @@ROWCOUNT

	-- Return the number of rows Deleted
	RETURN @DeleteCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Subject_Delete].[@KsbCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Subject_Delete].[@SbjCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Subject_Delete].[@KsbMandatoryFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_MANDATORY_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Subject_Delete].[@KsbCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Subject_Delete].[@SbjCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Subject_Delete].[@KsbMandatoryFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="224" />
				<Property Name="Length" Value="1353" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Create date: 16 Oct 2018&#xD;&#xA;-- Description:&#x9;Delete a record on the TD_Keyword_Subject table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Keyword_Subject_Delete @KsbCode INT = NULL&#xD;&#xA;&#x9;,@SbjCode INT = NULL&#xD;&#xA;&#x9;,@KsbMandatoryFlag BIT = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Keyword_Subject_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT [KSB_CODE] AS KsbCode
		,[KSB_VALUE] AS KsbValue
		,[KSB_MANDATORY_FLAG] AS KsbMandatoryFlag
		,SBJ_CODE AS SbjCode
		,SBJ_VALUE AS SbjValue
		,KSB_SINGULARISED_FLAG as KsbSingularisedFlag
	FROM [TD_KEYWORD_SUBJECT]
	INNER JOIN TD_SUBJECT
		ON SBJ_ID = KSB_SBJ_ID
			AND SBJ_DELETE_FLAG = 0
	WHERE (
			(
				@KsbCode IS NOT NULL
				AND KSB_CODE = @KsbCode
				)
			OR @KsbCode IS NULL
			)
		AND (
			(
				@SbjCode IS NOT NULL
				AND SBJ_CODE = @SbjCode
				)
			OR @SbjCode IS NULL
			)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_MANDATORY_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_SINGULARISED_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Subject_Read].[@KsbCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Subject_Read].[@SbjCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Subject_Read].[@KsbCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Subject_Read].[@SbjCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="224" />
				<Property Name="Length" Value="889" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Create date: 16 Oct 2018&#xD;&#xA;-- Description:&#x9;Select a record on the TD_Keyword_Subject table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Keyword_Subject_Read @KsbCode INT = NULL&#xD;&#xA;&#x9;,@SbjCode INT = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Keyword_Subject_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @updateCount INT
	--Prevent duplicate values in the Keyword Subject table
	DECLARE @KsbValueCount INT
	DECLARE @KsbSbjId INT

	SET @KsbSbjId = (
			SELECT KSB_SBJ_ID
			FROM TD_KEYWORD_SUBJECT
			WHERE KSB_CODE = @KsbCode
			)
	SET @KsbValueCount = (
			SELECT COUNT(*)
			FROM TD_KEYWORD_SUBJECT
			WHERE KSB_SBJ_ID = @KsbSbjId
				AND KSB_VALUE = @KsbValue
				AND KSB_CODE <> @KsbCode
			)

	IF @KsbValueCount > 0
	BEGIN
		RETURN - 1
	END

	UPDATE [TD_KEYWORD_SUBJECT]
	SET [KSB_VALUE] = @KsbValue
		,[KSB_MANDATORY_FLAG] = @KsbMandatoryFlag
		,KSB_SINGULARISED_FLAG=@KsbSingularisedFlag 
	WHERE [KSB_Code] = @KsbCode

	SET @updateCount = @@ROWCOUNT

	-- Return the number of rows Updated
	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Subject_Update].[@KsbCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Subject_Update].[@KsbValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_MANDATORY_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Subject_Update].[@KsbMandatoryFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_SINGULARISED_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Keyword_Subject_Update].[@KsbSingularisedFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Subject_Update].[@KsbCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Subject_Update].[@KsbValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Subject_Update].[@KsbSingularisedFlag]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Keyword_Subject_Update].[@KsbMandatoryFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="224" />
				<Property Name="Length" Value="1176" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Create date: 16 Oct 2018&#xD;&#xA;-- Description:&#x9;Update a record on the TD_Keyword_Subject table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Keyword_Subject_Update @KsbCode INT&#xD;&#xA;&#x9;,@KsbValue NVARCHAR(256)&#xD;&#xA;&#x9;,@KsbSingularisedFlag BIT&#xD;&#xA;&#x9;,@KsbMandatoryFlag BIT = 0&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Navigation_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @LngId INT

	SET @LngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)

	IF @LngId = 0
		OR @LngId IS NULL
	BEGIN
		RETURN
	END

	DECLARE @LngIdDefault INT

	SET @LngIdDefault = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCodeDefault
				AND LNG_DELETE_FLAG = 0
			)

	IF @LngIdDefault = 0
		OR @LngIdDefault IS NULL
	BEGIN
		RETURN
	END
	SELECT SbjCode
	,COALESCE(SLG_VALUE,SbjValue) as SbjValue
	,PrcCode
	,COALESCE(PLG_VALUE,PrcValue) as PrcValue
	,PrcReleaseCount 
	,COALESCE(TLG_VALUE,ThmValue) as ThmValue
	,ThmCode
	from (
	SELECT sbj.SBJ_CODE AS SbjCode
		,sbj.SBJ_VALUE AS SbjValue
		,prd.PRC_CODE AS PrcCode
		,prd.PRC_VALUE AS PrcValue
		,thm.THM_ID 
		,prd.PRC_ID 
		,sbj.SBJ_ID 
		,(
			CASE 
				WHEN RelatedCountPerProduct IS NULL
					THEN 0
				ELSE RelatedCountPerProduct
				END
			) + (
			CASE 
				WHEN AssociatedReleaseCountPerProduct IS NULL
					THEN 0
				ELSE AssociatedReleaseCountPerProduct
				END
			)  AS PrcReleaseCount
		,thm.THM_VALUE AS ThmValue
		,thm.THM_CODE AS ThmCode
	FROM TD_PRODUCT prd
	INNER JOIN TD_SUBJECT sbj ON PRC_SBJ_ID = SBJ_ID
		AND SBJ_DELETE_FLAG = 0
	INNER JOIN TD_THEME thm ON SBJ_THM_ID = THM_ID
		AND THM_DELETE_FLAG = 0
	LEFT JOIN (
		SELECT PRC_ID
			,PRC_CODE
			,COUNT(*) AS RelatedCountPerProduct
		FROM TD_RELEASE
		INNER JOIN TD_PRODUCT ON RLS_PRC_ID = PRC_ID
			AND RLS_DELETE_FLAG = 0
			AND PRC_DELETE_FLAG = 0
		INNER JOIN VW_RELEASE_LIVE_NOW ON RLS_ID = VRN_RLS_ID 
		inner join td_matrix
		on mtr_id=VRN_MTR_ID 
		and MTR_LNG_ID=@LngIdDefault
		GROUP BY PRC_ID
			,PRC_CODE
		) rcp ON prd.PRC_ID = rcp.PRC_ID
		AND PRC_DELETE_FLAG = 0
	LEFT JOIN (
		SELECT PRC_CODE
			,PRC_ID 
			,PRC_VALUE
			,SBJ_CODE
			, SBJ_VALUE
			,COUNT(*) AS AssociatedReleaseCountPerProduct
			,THM_VALUE
			,THM_CODE
			,THM_ID 
			,SBJ_ID 
		FROM TD_RELEASE
		INNER JOIN TM_RELEASE_PRODUCT ON RLS_ID = RPR_RLS_ID
		INNER JOIN TD_PRODUCT ON RPR_PRC_ID = PRC_ID
		AND RLS_DELETE_FLAG = 0
		AND PRC_DELETE_FLAG = 0
		AND RPR_DELETE_FLAG = 0
		INNER JOIN (
			SELECT DISTINCT VRN_RLS_ID
			FROM VW_RELEASE_LIVE_NOW
			) dvrn ON RLS_ID = dvrn.VRN_RLS_ID
		INNER JOIN TD_SUBJECT ON PRC_SBJ_ID = SBJ_ID
			AND SBJ_DELETE_FLAG = 0
		INNER JOIN TD_THEME ON SBJ_THM_ID = THM_ID
			AND THM_DELETE_FLAG = 0

		INNER JOIN (
			--get matrix items where a language version exists, otherwise get the matrixes in the main language
			SELECT mtr.MTR_RLS_ID
				,mtrLng.MtrRlsIdLng
				,MTR_CODE
				,mtrCodeLng
				,COALESCE(mtrCodeLng, MTR_CODE) AS code
			FROM (
				SELECT Mtr_CODE
					,MTR_RLS_ID
				FROM TD_MATRIX
				WHERE MTR_DELETE_FLAG = 0
					AND MTR_LNG_ID = @LngIdDefault
				) AS mtr
			LEFT OUTER JOIN (
				SELECT MTR_CODE AS mtrCodeLng
					,MTR_RLS_ID AS MtrRlsIdLng
				FROM TD_MATRIX
				INNER JOIN VW_RELEASE_LIVE_NOW ON MTR_ID = VRN_MTR_ID
					AND MTR_RLS_ID = VRN_RLS_ID
				WHERE MTR_LNG_ID = @LngId
					AND MTR_DELETE_FLAG = 0
				) AS mtrLng ON mtr.MTR_RLS_ID = mtrLng.MtrRlsIdLng
				AND mtr.MTR_CODE = mtrLng.mtrCodeLng
			) AS mtr ON mtr.MTR_RLS_ID = RLS_ID
		GROUP BY PRC_CODE
			--,PLG_Value
			,PRC_VALUE
			,SBJ_CODE
			--,SLG_VALUE
			,SBJ_VALUE
			--,TLG_VALUE
			,THM_VALUE
			,THM_CODE
			,PRC_ID 
			,THM_ID 
			,SBJ_ID 
		) arc ON arc.PRC_ID  = prd.PRC_ID 
	GROUP BY prd.PRC_VALUE
		,prd.PRC_CODE
		,sbj.SBJ_CODE
		,sbj.SBJ_VALUE
		,thm.THM_CODE
		,thm.THM_VALUE
		,arc.AssociatedReleaseCountPerProduct
		,rcp.RelatedCountPerProduct
		,thm.THM_ID 
		,prd.PRC_ID 
		,sbj.SBJ_ID ) qry
	LEFT JOIN TD_THEME_LANGUAGE 
	ON qry.THM_ID=TLG_THM_ID
	AND TLG_LNG_ID=@LngId 
	LEFT JOIN TD_SUBJECT_LANGUAGE 
	ON qry.SBJ_ID=SLG_SBJ_ID 
	AND SLG_LNG_ID=@LngId
	LEFT JOIN TD_PRODUCT_LANGUAGE 
	on qry.PRC_ID=PLG_PRC_ID 
	AND PLG_LNG_ID=@LngId
	WHERE qry.PrcReleaseCount > 0
	ORDER BY ThmValue
		,SbjValue
		,PrcValue
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Navigation_Read].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Navigation_Read].[@LngIsoCodeDefault]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE].[TLG_THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE].[TLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE].[TLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Navigation_Read].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Navigation_Read].[@LngIsoCodeDefault]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="512" />
				<Property Name="Length" Value="4707" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Read date: 04/01/2019&#xD;&#xA;-- Description:&#x9;Reads record(s) from the TD_Product table along with Subject data&#xD;&#xA;-- The LngIso code will ensure that it will return SbjValue and PrcValue in the requested language if it exists&#xD;&#xA;-- If there are no values in the requested language, the sp will return the values in the default language&#xD;&#xA;-- exec System_Navigation_Navigation_Read 'ga','en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Navigation_Read (&#xD;&#xA;&#x9;@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@LngIsoCodeDefault CHAR(2)&#xD;&#xA;&#x9;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Product_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	-- Error Message
	DECLARE @errorMessage VARCHAR(256)
	DECLARE @subjectId INT = NULL
	DECLARE @auditId INT = NULL
	DECLARE @lngId INT = NULL

	SELECT @subjectId = s.SBJ_ID
	FROM TD_SUBJECT s
	WHERE s.SBJ_CODE = @SbjCode

	IF @subjectId IS NULL
	BEGIN
		SET @errorMessage = 'SP: ' + OBJECT_NAME(@@PROCID) + ' - subject not found: ' + cast(isnull(@SbjCode, 0) AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				);

		RETURN 0
	END

	SET @lngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)

	IF @lngId IS NULL
	BEGIN
		SET @errorMessage = 'SP: ' + OBJECT_NAME(@@PROCID) + ' - language not found: ' + cast(isnull(@LngIsoCode, 0) AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				);

		RETURN 0
	END

	EXEC @auditId = Security_Auditing_Create @userName;

	IF @auditId IS NULL
		OR @auditId = 0
	BEGIN
		RAISERROR (
				'SP: Security_Auditing_Create has failed!'
				,16
				,1
				)

		RETURN 0
	END

	INSERT INTO [dbo].[TD_PRODUCT] (
		[PRC_CODE]
		,[PRC_VALUE]
		,[PRC_SBJ_ID]
		,[PRC_LNG_ID]
		,[PRC_DTG_ID]
		,[PRC_DELETE_FLAG]
		)
	VALUES (
		@PrcCode
		,@PrcValue
		,@subjectId
		,@lngId
		,@auditId
		,0
		)

	RETURN @@identity
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Product_Create].[@SbjCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Product_Create].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Product_Create].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Product_Create].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Product_Create].[@PrcValue]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Product_Create].[@PrcValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Product_Create].[@SbjCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Product_Create].[@PrcCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Product_Create].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Product_Create].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="223" />
				<Property Name="Length" Value="1727" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Create date: 11 Oct 2018&#xD;&#xA;-- Description:&#x9;Inserts a new record into the TD_Product table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Product_Create @PrcValue NVARCHAR(256)&#xD;&#xA;&#x9;,@SbjCode INT&#xD;&#xA;&#x9;,@PrcCode NVARCHAR(32)&#xD;&#xA;&#x9;,@userName NVARCHAR(256)&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Product_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @eMessage VARCHAR(256)
	DECLARE @updateCount INT
	DECLARE @DtgID INT = NULL
	DECLARE @PrcID INT = NULL

	--check if record exists
	SELECT @PrcID = PRC_ID
		,@DtgID = PRC_DTG_ID
	FROM TD_PRODUCT
	WHERE PRC_CODE = @PrcCode
		AND PRC_DELETE_FLAG = 0

	IF @PrcID IS NULL
	BEGIN
		RETURN 0
	END

	-- check if is not being used in a release
	IF EXISTS (
			SELECT 1
			FROM TD_RELEASE
			WHERE RLS_PRC_ID = @PrcID
				AND RLS_DELETE_FLAG = 0
			)
	BEGIN
		RETURN - 1
	END

	IF EXISTS (
			SELECT 1
			FROM TM_RELEASE_PRODUCT
			WHERE RPR_PRC_ID = @PrcID
				AND RPR_DELETE_FLAG = 0
			)
	BEGIN
		RETURN - 2
	END

	UPDATE [TD_PRODUCT]
	SET [PRC_DELETE_FLAG] = 1
	WHERE PRC_ID = @PrcID
		AND PRC_DELETE_FLAG = 0

	SET @updateCount = @@ROWCOUNT

	IF @updateCount > 0
	BEGIN
		-- do the auditing 
		-- Create the entry in the TD_AUDITING table
		DECLARE @AuditUpdateCount INT

		EXEC @AuditUpdateCount = Security_Auditing_Delete @DtgID
			,@userName

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error creating entry in TD_AUDITING for Product delete:' + cast(isnull(@PrcCode, 0) AS VARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN
		END
	END

	-- Remove all entries in the TM_RELEASE_PRODUCT table that contain a reference to the product code
	DECLARE @auditId AS INT = NULL;

	EXECUTE @auditId = Security_Auditing_Delete @DtgID
		,@userName;

	IF @auditId IS NULL
		OR @auditId = 0
	BEGIN
		RAISERROR (
				'SP: Security_Auditing_Delete has failed!'
				,16
				,1
				);

		RETURN 0;
	END

	UPDATE TM_RELEASE_PRODUCT
	SET RPR_DELETE_FLAG = 1
		,RPR_DTG_ID = @auditId
	WHERE RPR_PRC_ID = (
			SELECT PRC_ID
			FROM TD_PRODUCT
			WHERE PRC_CODE = @PrcCode
				AND PRC_DELETE_FLAG = 0
			)
		AND RPR_DELETE_FLAG = 0;

	-- Return the number of rows deleted
	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Product_Delete].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Delete]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Product_Delete].[@userName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Product_Delete].[@PrcCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Product_Delete].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="220" />
				<Property Name="Length" Value="2324" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Delete date: 11 Oct 2018&#xD;&#xA;-- Description:&#x9;Deletes record(s) from the TD_Product table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Product_Delete @PrcCode NVARCHAR(32)&#xD;&#xA;&#x9;,@userName NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Product_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT PRC_CODE AS PrcCode
		,PRC_VALUE AS PrcValue
		,SBJ_CODE AS SbjCode
		,SBJ_VALUE AS SbjValue
		,sum((
				CASE 
					WHEN RLS_ID IS NOT NULL
						AND RLS_DELETE_FLAG = 0
						THEN 1
					ELSE 0
					END
				)) AS RlsLiveCount
		,coalesce(MtrCount, 0) AS MtrCount
		,coalesce(MtrAssociatedCount,0) as MtrAssociatedCount 

	FROM (
		SELECT TD_PRODUCT.PRC_CODE
			,SBJ_CODE
			,coalesce(PLG_Value, PRC_VALUE) AS PRC_VALUE
			,coalesce(SLG_VALUE, SBJ_VALUE) AS SBJ_VALUE
			,RLS_ID
			,PRC_DELETE_FLAG
			,RLS_DELETE_FLAG
			,mtrCount AS MtrCount
			,MtrAssociatedCount 
		FROM TD_PRODUCT
		INNER JOIN [TD_SUBJECT]
			ON SBJ_ID = PRC_SBJ_ID
				AND SBJ_DELETE_FLAG = 0

				LEFT JOIN
		(
			SELECT PRC_ID as PrcIdAssociated
			,PRC_SBJ_ID as SbjIdAssociated
			,COUNT(*)  AS MtrAssociatedCount
			FROM TD_PRODUCT 
			INNER JOIN TM_RELEASE_PRODUCT 
			ON PRC_ID=RPR_PRC_ID 
			AND (@PrcCode IS NULL OR @PrcCode=PRC_CODE)
			AND PRC_DELETE_FLAG=0
			AND RPR_DELETE_FLAG=0	
			INNER JOIN (select distinct VRN_RLS_ID  from VW_RELEASE_LIVE_NOW ) vrn
			ON RPR_RLS_ID=VRN_RLS_ID 
			INNER JOIN TD_SUBJECT 
			ON PRC_SBJ_ID=SBJ_ID
			AND SBJ_DELETE_FLAG=0
			AND (@SbjCode IS NULL OR @SbjCode=SBJ_CODE)			
			GROUP BY PRC_ID,PRC_SBJ_ID,PRC_VALUE 
		) AS MTR_ASSOCIATED
		on PrcIdAssociated=PRC_ID 

		LEFT JOIN (
			SELECT PRC_CODE
				,COUNT(*) AS mtrCount
			FROM (
				SELECT DISTINCT PRC_CODE
					,MTR_CODE
				FROM TD_PRODUCT
				INNER JOIN TD_RELEASE
					ON PRC_ID = RLS_PRC_ID
						AND PRC_DELETE_FLAG = 0
						AND RLS_DELETE_FLAG = 0
				INNER JOIN TD_MATRIX
					ON MTR_RLS_ID = RLS_ID
						AND MTR_DELETE_FLAG = 0
				) prcInner
			GROUP BY PRC_CODE
			) prcMtrCounter
			ON TD_PRODUCT.PRC_CODE = prcMtrCounter.PRC_CODE
		LEFT JOIN (
			SELECT SLG_SBJ_ID
				,SLG_VALUE
			FROM TD_SUBJECT_LANGUAGE
			JOIN TS_LANGUAGE
				ON SLG_LNG_ID = LNG_ID
					AND LNG_DELETE_FLAG = 0
					AND LNG_ISO_CODE = @LngIsoCode
			) INNER_SLG
			ON SBJ_ID = INNER_SLG.SLG_SBJ_ID
		LEFT JOIN (
			SELECT prg.PLG_PRC_ID
				,prg.PLG_VALUE
			FROM TD_PRODUCT_LANGUAGE prg
			JOIN TS_LANGUAGE
				ON prg.PLG_LNG_ID = LNG_ID
					AND LNG_DELETE_FLAG = 0
					AND LNG_ISO_CODE = @LngIsoCode
			) INNER_PRG
			ON PRC_ID = INNER_PRG.PLG_PRC_ID
		LEFT JOIN TD_RELEASE
			ON RLS_PRC_ID = PRC_ID
				AND RLS_DELETE_FLAG = 0
				AND RLS_id IN (
					SELECT VRN_RLS_ID
					FROM VW_RELEASE_LIVE_NOW
					)
		) INNER_SELECT
	WHERE (
			(
				@PrcCode IS NOT NULL
				AND [PRC_CODE] = @PrcCode
				)
			OR @PrcCode IS NULL
			)
		AND (
			(
				@SbjCode IS NOT NULL
				AND SBJ_CODE = @SbjCode
				)
			OR @SbjCode IS NULL
			)
		AND (
			(
				@PrcValue IS NOT NULL
				AND PRC_VALUE = @PrcValue
				)
			OR @PrcValue IS NULL
			)
		AND PRC_DELETE_FLAG = 0
	GROUP BY PRC_CODE
		,PRC_VALUE
		,SBJ_CODE
		,SBJ_VALUE
		,MtrCount
		,MtrAssociatedCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Product_Read].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Product_Read].[@SbjCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Product_Read].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Product_Read].[@PrcValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Product_Read].[@PrcCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Product_Read].[@SbjCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Product_Read].[@LngIsoCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Product_Read].[@PrcValue]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="216" />
				<Property Name="Length" Value="3377" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Read date: 11 Oct 2018&#xD;&#xA;-- Description:&#x9;Reads record(s) from the TD_Product table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Product_Read @PrcCode NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@SbjCode INT = NULL&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2) = NULL&#xD;&#xA;&#x9;,@PrcValue NVARCHAR(256) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Product_ReadAllLanguages]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    IF @PrcId IS NULL
        BEGIN
            SET @PrcId = (SELECT PRC_ID
                          FROM   TD_PRODUCT
                          WHERE  PRC_CODE = @PrcCode
                                 AND PRC_DELETE_FLAG = 0);
        END
    SELECT PRC_ID AS PrcId,
           PRC_CODE AS PrCode,
           PRC_VALUE AS PrcValue,
           LNG_ISO_CODE AS LngIsoCode
    FROM   TD_PRODUCT
           INNER JOIN
           TS_LANGUAGE
           ON LNG_ID = PRC_LNG_ID
              AND LNG_DELETE_FLAG = 0
              AND PRC_DELETE_FLAG = 0
    WHERE  PRC_ID = @PrcId
           OR (@PrcId IS NULL
               AND @PrcCode IS NULL)
    UNION
    SELECT PLG_PRC_ID AS PrcId,
           PRC_CODE AS PrcCode,
           PLG_VALUE AS PrcValue,
           LNG_ISO_CODE AS LngIsoCode
    FROM   TD_PRODUCT
           LEFT OUTER JOIN
           TD_PRODUCT_LANGUAGE
           ON PRC_ID = PLG_PRC_ID
              AND PRC_DELETE_FLAG = 0
           INNER JOIN
           TS_LANGUAGE
           ON PLG_LNG_ID = LNG_ID
              AND LNG_DELETE_FLAG = 0
    WHERE  PLG_PRC_ID = @PrcId
           OR (@PrcId IS NULL
               AND @PrcCode IS NULL);
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[System_Navigation_Product_ReadAllLanguages].[@PrcId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Product_ReadAllLanguages].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_PRC_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Product_ReadAllLanguages].[@PrcCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Product_ReadAllLanguages].[@PrcId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1341" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE System_Navigation_Product_ReadAllLanguages&#xD;&#xA;@PrcCode NVARCHAR (32)=NULL, @PrcId INT=NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Product_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @eMessage VARCHAR(256)
	DECLARE @updateCount INT
	DECLARE @PrcID INT = NULL
	DECLARE @DtgID INT = NULL
	DECLARE @SbjId INT = NULL

	--check if product record exists 
	SELECT @PrcID = PRC_ID
		,@DtgID = PRC_DTG_ID
	FROM TD_Product
	WHERE PRC_CODE = @PrcCode
		AND PRC_Delete_FLAG = 0

	IF @PrcID IS NULL
	BEGIN
		RETURN 0
	END

	--check if subject record exists 
	SELECT @SbjId = SBJ_ID
	FROM TD_SUBJECT
	WHERE SBJ_CODE = @SbjCode
		AND SBJ_DELETE_FLAG = 0

	IF @SbjId IS NULL
	BEGIN
		RETURN 0
	END

	UPDATE TD_Product
	SET PRC_SBJ_ID = @SbjId
		,PRC_CODE = @PrcCodeNew
		,PRC_VALUE = (
			CASE 
				WHEN (@IsDefault = 1)
					THEN @PrcValue
				ELSE PRC_VALUE
				END
			)
	WHERE PRC_ID = @PrcID
		AND PRC_DELETE_FLAG = 0

	SET @updateCount = @@ROWCOUNT

	IF @updateCount > 0
	BEGIN
		-- do the auditing 
		-- Create the entry in the TD_AUDITING table
		DECLARE @AuditUpdateCount INT

		EXEC @AuditUpdateCount = Security_Auditing_Update @DtgID
			,@userName

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error creating entry in TD_AUDITING for Product Update:' + cast(isnull(@PrcCode, 0) AS VARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN
		END
	END

	SET @ProductID = @PrcID

	-- Return the number of rows Updated
	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Product_Update].[@PrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Product_Update].[@SbjCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Product_Update].[@PrcCodeNew]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Product_Update].[@IsDefault]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Product_Update].[@PrcValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Product_Update].[@userName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Product_Update].[@ProductID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Product_Update].[@PrcCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Product_Update].[@PrcCodeNew]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Product_Update].[@SbjCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Product_Update].[@PrcValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Product_Update].[@IsDefault]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Product_Update].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Product_Update].[@ProductID]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="220" />
				<Property Name="Length" Value="1882" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Update date: 15 Oct 2018&#xD;&#xA;-- Description:&#x9;Updates record(s) from the TD_Product table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Product_Update @PrcCode NVARCHAR(32)&#xD;&#xA;&#x9;,@PrcCodeNew NVARCHAR(32)&#xD;&#xA;&#x9;,@SbjCode INT&#xD;&#xA;&#x9;,@PrcValue NVARCHAR(256)&#xD;&#xA;&#x9;,@IsDefault BIT = 1&#xD;&#xA;&#x9;,@userName NVARCHAR(256)&#xD;&#xA;&#x9;,@ProductID INT OUT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_ProductLanguage_CreateOrUpdate]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @LngIsoID INT
	DECLARE @PlgPrcID INT
	DECLARE @errorMessage VARCHAR(256)
	DECLARE @recordCount INT

	SET @PlgPrcID = (
			SELECT prd.PRC_ID
			FROM TD_PRODUCT prd
			WHERE prd.PRC_CODE = @PlgPrcCode
				AND prd.PRC_DELETE_FLAG = 0
			)

	IF @PlgPrcID = 0
		OR @PlgPrcID IS NULL
	BEGIN
		RETURN 0
	END

	SET @LngIsoID = (
			SELECT lng.LNG_ID
			FROM TS_LANGUAGE lng
			WHERE lng.LNG_ISO_CODE = @PlgIsoCode
				AND lng.LNG_DELETE_FLAG = 0
			)

	IF @LngIsoID IS NULL
		OR @LngIsoID = 0
	BEGIN
		SET @errorMessage = 'No ID found for Language Code code ' + cast(isnull(@PlgIsoCode, 0) AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				)

		RETURN 0
	END

	SET @recordCount = (
			SELECT count(*)
			FROM TD_PRODUCT_LANGUAGE
			WHERE PLG_LNG_ID = @LngIsoID
				AND PLG_PRC_ID = @PlgPrcID
			)

	IF @recordCount = 0
	BEGIN
		INSERT INTO TD_PRODUCT_LANGUAGE (
			PLG_VALUE
			,PLG_LNG_ID
			,PLG_PRC_ID
			)
		VALUES (
			@PlgValue
			,@LngIsoID
			,@PlgPrcID
			)
	END
	ELSE
	BEGIN
		UPDATE TD_PRODUCT_LANGUAGE
		SET PLG_VALUE = @PlgValue
		WHERE PLG_LNG_ID = @LngIsoID
			AND PLG_PRC_ID = @PlgPrcID
	END

	RETURN @@rowcount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_ProductLanguage_CreateOrUpdate].[@PlgPrcCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_ProductLanguage_CreateOrUpdate].[@PlgIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_ProductLanguage_CreateOrUpdate].[@PlgValue]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_ProductLanguage_CreateOrUpdate].[@PlgValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_ProductLanguage_CreateOrUpdate].[@PlgIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_ProductLanguage_CreateOrUpdate].[@PlgPrcCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="334" />
				<Property Name="Length" Value="1728" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 02/01/2019&#xD;&#xA;-- Description:&#x9;Creates a new entry on the ProductLanguage table if it doesn't already exist.&#xD;&#xA;-- If it already exists then it updates the PlgValue with the supplied parameter&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_ProductLanguage_CreateOrUpdate @PlgValue NVARCHAR(256)&#xD;&#xA;&#x9;,@PlgIsoCode CHAR(2)&#xD;&#xA;&#x9;,@PlgPrcCode NVARCHAR(32)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Search]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT MTR_CODE AS MtrCode
		,[Value] sValue
		,[key] sKey
		,Attribute
		,KRL_VALUE AS FoundValue
		,'Krl' AS KwrSource
	FROM @Search
	INNER JOIN TD_KEYWORD_RELEASE ON [Value] = KRL_VALUE
	INNER JOIN TD_RELEASE ON RLS_ID = KRL_RLS_ID
		AND RLS_DELETE_FLAG = 0
	INNER JOIN TD_MATRIX ON MTR_RLS_ID = RLS_ID
		AND MTR_DELETE_FLAG = 0
	INNER JOIN VW_RELEASE_LIVE_NOW ON RLS_ID = VRN_RLS_ID
	AND MTR_ID=VRN_MTR_ID 
	
	UNION
	
	SELECT MTR_CODE AS MtrCode
		,[Value] sValue
		,[key] sKey
		,Attribute
		,KSB_VALUE AS FoundValue
		,'Ksb' AS KwrSource
	FROM @Search
	INNER JOIN TD_KEYWORD_SUBJECT ON [Value] = KSB_VALUE
	INNER JOIN TD_SUBJECT ON KSB_SBJ_ID = SBJ_ID
		AND SBJ_DELETE_FLAG = 0
	INNER JOIN TD_PRODUCT ON SBJ_ID = PRC_SBJ_ID
		AND PRC_DELETE_FLAG = 0
	INNER JOIN TD_RELEASE ON RLS_PRC_ID = PRC_ID
	
	
	INNER JOIN TD_MATRIX ON MTR_RLS_ID = RLS_ID
		AND MTR_DELETE_FLAG = 0
	INNER JOIN VW_RELEASE_LIVE_NOW ON RLS_ID = VRN_RLS_ID
	AND MTR_ID=VRN_MTR_ID 
	
	UNION
	
	SELECT MTR_CODE AS MtrCode
		,[Value] sValue
		,[key] sKey
		,Attribute
		,KPR_VALUE AS FoundValue
		,'Kpr' AS KwrSource
	FROM @Search
	INNER JOIN TD_KEYWORD_PRODUCT ON [Value] = KPR_VALUE
	INNER JOIN TD_PRODUCT ON PRC_ID = KPR_PRC_ID
		AND PRC_DELETE_FLAG = 0
	INNER JOIN TD_RELEASE ON RLS_PRC_ID = PRC_ID
	INNER JOIN TD_MATRIX ON MTR_RLS_ID = RLS_ID
		AND MTR_DELETE_FLAG = 0
	INNER JOIN VW_RELEASE_LIVE_NOW ON RLS_ID = VRN_RLS_ID
	AND MTR_ID=VRN_MTR_ID 
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[System_Navigation_Search].[@Search]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search].[@Search].[Value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search].[@Search].[Value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search].[@Search].[Key]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search].[@Search].[Attribute]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search].[@Search].[Value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search].[@Search].[Value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search].[@Search].[Key]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search].[@Search].[Attribute]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search].[@Search].[Value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search].[@Search].[Value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search].[@Search].[Key]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search].[@Search].[Attribute]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_VALUE]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[System_Navigation_Search].[@Search]" Disambiguator="10">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[System_Navigation_Search].[@Search].[Key]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="256" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[System_Navigation_Search].[@Search].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="256" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[System_Navigation_Search].[@Search].[Attribute]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Search].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Search].[@Search]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[dbo].[KeyValueVarcharAttribute]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="442" />
				<Property Name="Length" Value="2071" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 19/01/2021&#xD;&#xA;-- Description:&#x9;Search Release Keywords based on a table of supplied terms. All other parameters are optional.&#xD;&#xA;-- For keywords, the results of the search are prioritised by assigning a score multiplier depending on which table the match occurs&#xD;&#xA;-- exec System_Navigation_Search 'en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Search @LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@Search KeyValueVarcharAttribute Readonly&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Search_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	DECLARE @LngID INT

	SET @LngID = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)

	IF @LngID IS NULL
		OR @LngID = 0
	BEGIN
		RETURN
	END

	DECLARE @DefaultLngId INT

	SET @DefaultLngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @DefaultLngIsoCode
				AND LNG_DELETE_FLAG = 0
			)

	IF @DefaultLngID IS NULL
		OR @DefaultLngID = 0
	BEGIN
		RETURN
	END

	--We must get a version of the Product table that is language invariant
	SELECT PRC_ID
		,PRC_CODE
		,PRC_SBJ_ID
		,COALESCE(PLG_VALUE, PRC_VALUE) AS PRC_VALUE
		,COALESCE(PLG_LNG_ID, PRC_LNG_ID) AS PRC_LNG_ID
	INTO #Product
	FROM TD_PRODUCT
	LEFT JOIN TD_PRODUCT_LANGUAGE
		ON PRC_ID = PLG_PRC_ID
			AND PRC_DELETE_FLAG = 0
			AND PLG_LNG_ID = @LngID

	--We must get a version of the Subject table that is language invariant
	SELECT SBJ_ID
		,SBJ_CODE
		,COALESCE(SLG_VALUE, SBJ_VALUE) AS SBJ_VALUE
		,SBJ_THM_ID 
	INTO #Subject
	FROM TD_SUBJECT
	LEFT JOIN TD_SUBJECT_LANGUAGE
		ON SBJ_ID = SLG_SBJ_ID
			AND SBJ_DELETE_FLAG = 0
			AND SLG_LNG_ID = @LngID



	SELECT  RLS_CODE AS RlsCode
		,m1.MTR_CODE AS MtrCode
		,coalesce(m2.MTR_TITLE,m1.mtr_title) AS MtrTitle
		,m1.MTR_OFFICIAL_FLAG AS MtrOfficialFlag
		,THM_CODE AS ThmCode
		,THM_VALUE As ThmValue
		,SBJ_CODE AS SbjCode
		,SBJ_VALUE AS SbjValue
		,PRC_CODE AS PrcCode
		,PRC_VALUE AS PrcValue
		,RLS_LIVE_DATETIME_FROM AS RlsLiveDatetimeFrom
		,RLS_EXCEPTIONAL_FLAG AS RlsExceptionalFlag
		,RLS_RESERVATION_FLAG AS RlsReservationFlag
		,RLS_ARCHIVE_FLAG AS RlsArchiveFlag
		,RLS_ANALYTICAL_FLAG AS RlsAnalyticalFlag
		,RLS_EXPERIMENTAL_FLAG AS RlsExperimentalFlag
		,CPR_CODE AS CprCode
		,CPR_VALUE AS CprValue

		,mdmCls.MDM_ID AS ClsId
		,mdmCls.MDM_CODE AS ClsCode
		,mdmCls.MDM_VALUE AS ClsValue
		,mdmCls.MDM_GEO_FLAG AS ClsGeoFlag
		,mdmCls.MDM_GEO_URL AS ClsGeoUrl

		,mdmFrq.MDM_CODE AS FrqCode
		,mdmFrq.MDM_VALUE AS FrqValue

		,dmtTime.DMT_CODE AS PrdCode
		,dmtTime.DMT_VALUE AS PrdValue
		,dmtTime.DMT_ID AS PrdId

		,m1.MTR_LNG_ID AS MtrLngID
		,LNG_ISO_CODE AS LngIsoCode
		,LNG_ISO_NAME AS LngIsoName
		,Attribute AS Score
	FROM @Result
	INNER JOIN TD_MATRIX m1
		ON [KEY] = MTR_CODE
			AND MTR_DELETE_FLAG = 0
	INNER JOIN TD_RELEASE
		ON MTR_RLS_ID = RLS_ID
			AND RLS_DELETE_FLAG = 0
	INNER JOIN VW_RELEASE_LIVE_NOW
		ON RLS_ID = VRN_RLS_ID
		AND MTR_ID=VRN_MTR_ID 
	INNER JOIN #Product
		ON RLS_PRC_ID = PRC_ID
	INNER JOIN #Subject
		ON PRC_SBJ_ID = SBJ_ID
	INNER JOIN TD_THEME
		ON SBJ_THM_ID=THM_ID
	INNER JOIN TS_COPYRIGHT
		ON MTR_CPR_ID = CPR_ID
			AND CPR_DELETE_FLAG = 0

	INNER JOIN TD_MATRIX_DIMENSION mdmCls
		ON MTR_ID = mdmCls.MDM_MTR_ID
	INNER JOIN TS_DIMENSION_ROLE 
	ON mdmCls.MDM_DMR_ID =DMR_ID
	AND DMR_CODE='CLASSIFICATION'

	INNER JOIN TD_MATRIX_DIMENSION mdmFrq
		ON MTR_ID = mdmFrq.MDM_MTR_ID
	INNER JOIN TS_DIMENSION_ROLE frqDM
	ON mdmFrq.MDM_DMR_ID =frqDM.DMR_ID
	AND frqDM.DMR_CODE='TIME'

	INNER JOIN TD_DIMENSION_ITEM dmtTime
	ON dmtTime.DMT_MDM_ID =mdmfrq.MDM_ID 

	INNER JOIN TS_LANGUAGE
		ON MTR_LNG_ID = LNG_ID
			AND LNG_DELETE_FLAG = 0
	left JOIN TD_MATRIX m2
	on m1.MTR_CODE=m2.MTR_CODE
	and m1.MTR_RLS_ID=m2.MTR_RLS_ID 
	and m1.MTR_DELETE_FLAG=0
	and m2.MTR_DELETE_FLAG=0
	and m2.MTR_LNG_ID =@LngID
	and @LngID <>@DefaultLngId
	
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search_Read].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search_Read].[@DefaultLngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search_Read].[@Result]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search_Read].[@Result].[Key]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search_Read].[#Product]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search_Read].[#Product].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search_Read].[#Subject]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search_Read].[#Product].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search_Read].[#Subject].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search_Read].[#Subject].[SBJ_THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_OFFICIAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search_Read].[#Subject].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search_Read].[#Subject].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search_Read].[#Product].[PRC_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search_Read].[#Product].[PRC_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_GEO_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_GEO_URL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Search_Read].[@Result].[Attribute]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[System_Navigation_Search_Read].[#Product]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[System_Navigation_Search_Read].[#Product].[PRC_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[System_Navigation_Search_Read].[#Product].[PRC_CODE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[System_Navigation_Search_Read].[#Product].[PRC_SBJ_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[System_Navigation_Search_Read].[#Product].[PRC_VALUE]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[System_Navigation_Search_Read].[#Product].[PRC_LNG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[System_Navigation_Search_Read].[#Subject]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[System_Navigation_Search_Read].[#Subject].[SBJ_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[System_Navigation_Search_Read].[#Subject].[SBJ_CODE]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[System_Navigation_Search_Read].[#Subject].[SBJ_VALUE]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[System_Navigation_Search_Read].[#Subject].[SBJ_THM_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[TD_SUBJECT].[SBJ_THM_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[System_Navigation_Search_Read].[@Result]" Disambiguator="9">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[System_Navigation_Search_Read].[@Result].[Key]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="256" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[System_Navigation_Search_Read].[@Result].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="256" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[System_Navigation_Search_Read].[@Result].[Attribute]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Search_Read].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Search_Read].[@Result]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[dbo].[KeyValueVarcharAttribute]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Search_Read].[@DefaultLngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="218" />
				<Property Name="Length" Value="3923" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 19/01/2021&#xD;&#xA;-- Description:&#x9;Returns the metadata for the search results&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Search_Read @LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@Result KeyValueVarcharAttribute Readonly&#xD;&#xA;&#x9;,@DefaultLngIsoCode CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Subject_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgId INT = NULL
	DECLARE @lngID INT = NULL
	DECLARE @errorMessage VARCHAR(256)
	DECLARE @ThmId INT = NULL

	EXEC @DtgId = Security_Auditing_Create @userName;

	IF @DtgId IS NULL
		OR @DtgId = 0
	BEGIN
		RAISERROR (
				'SP: Security_Auditing_Create has failed!'
				,16
				,1
				)

		RETURN 0
	END

	SET @lngID = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)

	IF @lngId IS NULL
	BEGIN
		SET @errorMessage = 'SP: ' + OBJECT_NAME(@@PROCID) + ' - language not found: ' + cast(isnull(@LngIsoCode, 0) AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				);

		RETURN 0
	END

	set @ThmId=(SELECT THM_ID FROM TD_THEME WHERE THM_CODE=@ThmCode AND THM_DELETE_FLAG=0)

	IF @ThmId IS NULL
	BEGIN
		SET @errorMessage = 'SP: ' + OBJECT_NAME(@@PROCID) + ' - theme not found: ' + cast(isnull(@ThmCode, 0) AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				);

		RETURN 0
	END

	INSERT INTO [dbo].[TD_SUBJECT] (
		[SBJ_CODE]
		,[SBJ_VALUE]
		,[SBJ_LNG_ID]
		,[SBJ_DTG_ID]
		,[SBJ_DELETE_FLAG]
		,[SBJ_THM_ID] 
		)
	VALUES (
		DEFAULT
		,@SbjValue
		,@lngID
		,@DtgId
		,0
		,@ThmId
		)

	RETURN @@identity
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Subject_Create].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Subject_Create].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Subject_Create].[@ThmCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Subject_Create].[@SbjValue]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Subject_Create].[@SbjValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Subject_Create].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Subject_Create].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Subject_Create].[@ThmCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="223" />
				<Property Name="Length" Value="1667" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Create date: 11 Oct 2018&#xD;&#xA;-- Description:&#x9;Inserts a new record into the TD_Subject table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Subject_Create @SbjValue NVARCHAR(256)&#xD;&#xA;&#x9;,@userName NVARCHAR(256)&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@ThmCode INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Subject_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @eMessage VARCHAR(256)
	DECLARE @updateCount INT
	DECLARE @DtgID INT = NULL
	DECLARE @SbgID INT = NULL

	--check if record exists
	SELECT @SbgID = SBJ_ID
		,@DtgID = SBJ_DTG_ID
	FROM TD_Subject
	WHERE SBJ_CODE = @SbjCode
		AND SBJ_Delete_FLAG = 0

	IF @SbgID IS NULL
	BEGIN
		RETURN 0
	END

	-- check if has products
	IF EXISTS (
			SELECT 1
			FROM TD_PRODUCT
			WHERE PRC_SBJ_ID = @SbgID
				AND PRC_DELETE_FLAG = 0
			)
	BEGIN
		--subject has one or more products, nothing can be deleted.

		RETURN 0
	END

	UPDATE TD_Subject
	SET SBJ_DELETE_FLAG = 1
	WHERE SBJ_ID = @SbgID
		AND SBJ_Delete_FLAG = 0

	SET @updateCount = @@ROWCOUNT

	IF @updateCount > 0
	BEGIN
		-- do the auditing 
		-- Create the entry in the TD_AUDITING table
		DECLARE @AuditUpdateCount INT

		EXEC @AuditUpdateCount = Security_Auditing_Delete @DtgID
			,@userName

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error creating entry in TD_AUDITING for Subject delete with code ' + cast(isnull(@SbjCode, 0) AS VARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN
		END
	END

	-- Return the number of rows deleted
	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Subject_Delete].[@SbjCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Delete]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Subject_Delete].[@userName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Subject_Delete].[@SbjCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Subject_Delete].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="220" />
				<Property Name="Length" Value="1613" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Delete date: 15 Oct 2018&#xD;&#xA;-- Description:&#x9;Deletes record(s) from the TD_Subject table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Subject_Delete @SbjCode INT&#xD;&#xA;&#x9;,@userName NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Subject_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @LngIsoId AS INT;

	SET @LngIsoId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			);

	SELECT SbjCode
		,SbjValue
		,ThmValue
		,ThmCode
		,sum((
				CASE 
					WHEN PRC_ID IS NOT NULL
						THEN 1
					ELSE 0
					END
				)) AS PrcCount
	FROM (
		SELECT SBJ_CODE AS SbjCode
			,COALESCE(INNER_SLG.SLG_VALUE, SBJ_VALUE) AS SbjValue
			,PRC_ID
			,COALESCE(INNER_TLG.TLG_VALUE, THM_VALUE) AS ThmValue
			,THM_CODE AS ThmCode
		FROM TD_SUBJECT
		INNER JOIN TD_THEME ON SBJ_THM_ID = THM_ID
			AND SBJ_DELETE_FLAG = 0
			AND THM_DELETE_FLAG = 0
		LEFT OUTER JOIN (
			SELECT SLG_SBJ_ID
				,SLG_VALUE
			FROM TD_SUBJECT_LANGUAGE
			INNER JOIN TS_LANGUAGE ON SLG_LNG_ID = LNG_ID
				AND LNG_DELETE_FLAG = 0
				AND LNG_ISO_CODE = @LngIsoCode
			) AS INNER_SLG ON SBJ_ID = INNER_SLG.SLG_SBJ_ID
		LEFT OUTER JOIN TD_PRODUCT ON PRC_SBJ_ID = SBJ_ID
			AND PRC_DELETE_FLAG = 0
		LEFT OUTER JOIN (
			SELECT TLG_THM_ID
				,TLG_VALUE
			FROM TD_THEME_LANGUAGE
			INNER JOIN TS_LANGUAGE ON TLG_LNG_ID = LNG_ID
				AND LNG_DELETE_FLAG = 0
				AND LNG_ISO_CODE = @LngIsoCode
			) AS INNER_TLG ON THM_ID = INNER_TLG.TLG_THM_ID
		WHERE (
				(
					@SbjCode IS NOT NULL
					AND [SBJ_CODE] = @SbjCode
					)
				OR @SbjCode IS NULL
				)
			AND (
				(
					@SbjValue IS NOT NULL
					AND [SBJ_VALUE] = @SbjValue
					)
				OR @SbjValue IS NULL
				)
			AND SBJ_DELETE_FLAG = 0
		) AS INNER_SELECT
	GROUP BY SbjCode
		,SbjValue
		,ThmValue
		,ThmCode
	ORDER BY SbjValue;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Subject_Read].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE].[TLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE].[TLG_THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE].[TLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE].[TLG_THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE].[TLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Subject_Read].[@SbjCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Subject_Read].[@SbjValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PRODUCT].[PRC_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Subject_Read].[@SbjCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Subject_Read].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Subject_Read].[@SbjValue]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="283" />
				<Property Name="Length" Value="2051" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Read date: 11 Oct 2018&#xD;&#xA;-- Description:&#x9;Reads record(s) from the TD_Subject table&#xD;&#xA;--exec [System_Navigation_Subject_Read]  null,'ga','Eachnamaoch'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[System_Navigation_Subject_Read] @SbjCode INT = NULL&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@SbjValue NVARCHAR(256) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Subject_ReadAllLanguages]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
    IF @SbjId IS NULL
        BEGIN
            SET @SbjId = (SELECT SBJ_ID
                          FROM   TD_SUBJECT
                          WHERE  SBJ_CODE = @SbjCode
                                 AND SBJ_DELETE_FLAG = 0);
        END
    SELECT SBJ_ID AS SbjId,
           SBJ_CODE AS SbjCode,
           SBJ_VALUE AS SbjValue,
           LNG_ISO_CODE AS LngIsoCode
    FROM   TD_SUBJECT
           INNER JOIN
           TS_LANGUAGE
           ON SBJ_LNG_ID = LNG_ID
              AND LNG_DELETE_FLAG = 0
              AND SBJ_DELETE_FLAG = 0
    WHERE  SBJ_ID = @SbjId
           OR (@SbjCode IS NULL
               AND @SbjId IS NULL)
    UNION
    SELECT SLG_SBJ_ID AS SbjId,
           SBJ_CODE AS SbjCode,
           SLG_VALUE AS SbjValue,
           LNG_ISO_CODE AS LngIsoCode
    FROM   TD_SUBJECT
           LEFT OUTER JOIN
           TD_SUBJECT_LANGUAGE
           ON SBJ_ID = SLG_SBJ_ID
              AND SBJ_DELETE_FLAG = 0
           INNER JOIN
           TS_LANGUAGE
           ON SLG_LNG_ID = LNG_ID
              AND LNG_DELETE_FLAG = 0
    WHERE  SLG_SBJ_ID = @SbjId
           OR (@SbjCode IS NULL
               AND @SbjId IS NULL);
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[System_Navigation_Subject_ReadAllLanguages].[@SbjId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Subject_ReadAllLanguages].[@SbjCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_SBJ_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Subject_ReadAllLanguages].[@SbjCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Subject_ReadAllLanguages].[@SbjId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1332" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE System_Navigation_Subject_ReadAllLanguages&#xD;&#xA;@SbjCode INT=NULL, @SbjId INT=NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Subject_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @eMessage VARCHAR(256)
	DECLARE @updateCount INT
	DECLARE @DtgID INT = NULL
	DECLARE @ThmID INT = NULL

	--check if record exists
	SELECT @SbjID = SBJ_ID
		,@DtgID = SBJ_DTG_ID
	FROM TD_Subject
	WHERE SBJ_CODE = @SbjCode
		AND SBJ_Delete_FLAG = 0

	IF @SbjID IS NULL
		OR @SbjID = 0
	BEGIN
		RETURN 0
	END

	SELECT @ThmID =THM_ID
	FROM TD_THEME
	WHERE THM_CODE=@ThmCode 
	AND THM_DELETE_FLAG=0

	IF @ThmID IS NULL
		OR @ThmID = 0
	BEGIN
		RETURN 0
	END

	UPDATE TD_Subject
	SET SBJ_VALUE = @SbjValue,
	SBJ_THM_ID=@ThmID 
	WHERE SBJ_ID = @SbjID
		AND SBJ_Delete_FLAG = 0

	SET @updateCount = @@ROWCOUNT

	IF @updateCount > 0
	BEGIN
		-- do the auditing 
		-- Create the entry in the TD_AUDITING table
		DECLARE @AuditUpdateCount INT

		EXEC @AuditUpdateCount = Security_Auditing_Update @DtgID
			,@userName

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error creating entry in TD_AUDITING for Subject Update with code ' + cast(isnull(@SbjCode, 0) AS VARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN
		END
	END

	-- Return the number of rows Updated
	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Subject_Update].[@SbjId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Subject_Update].[@SbjCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Subject_Update].[@ThmCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Subject_Update].[@SbjValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Subject_Update].[@userName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Subject_Update].[@SbjCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Subject_Update].[@SbjValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Subject_Update].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Subject_Update].[@ThmCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Subject_Update].[@SbjId]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="220" />
				<Property Name="Length" Value="1641" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Update date: 15 Oct 2018&#xD;&#xA;-- Description:&#x9;Updates record(s) from the TD_Subject table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Subject_Update @SbjCode INT&#xD;&#xA;&#x9;,@SbjValue NVARCHAR(256)&#xD;&#xA;&#x9;,@userName NVARCHAR(256)&#xD;&#xA;&#x9;,@ThmCode INT&#xD;&#xA;&#x9;,@SbjId INT OUT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_SubjectLanguage_CreateOrUpdate]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @LngIsoID INT
	DECLARE @SlgSbjID INT
	DECLARE @errorMessage VARCHAR(256)
	DECLARE @recordCount INT

	SET @SlgSbjID = (
			SELECT SBJ_ID
			FROM TD_SUBJECT
			WHERE SBJ_CODE = @SbjCode
				AND SBJ_DELETE_FLAG = 0
			)

	IF @SlgSbjID IS NULL
		OR @SlgSbjID = 0
	BEGIN
		RETURN 0
	END

	SET @LngIsoID = (
			SELECT lng.LNG_ID
			FROM TS_LANGUAGE lng
			WHERE lng.LNG_ISO_CODE = @SlgIsoCode
				AND lng.LNG_DELETE_FLAG = 0
			)

	IF @LngIsoID IS NULL
		OR @LngIsoID = 0
	BEGIN
		SET @errorMessage = 'No ID found for Language Code code ' + cast(isnull(@SlgIsoCode, 0) AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				)

		RETURN 0
	END

	SET @recordCount = (
			SELECT count(*)
			FROM TD_SUBJECT_LANGUAGE
			WHERE SLG_LNG_ID = @LngIsoID
				AND SLG_SBJ_ID = @SlgSbjID
			)

	IF @recordCount = 0
	BEGIN
		INSERT INTO TD_SUBJECT_LANGUAGE (
			SLG_VALUE
			,SLG_LNG_ID
			,SLG_SBJ_ID
			)
		VALUES (
			@SlgValue
			,@LngIsoID
			,@SlgSbjID
			)
	END
	ELSE
	BEGIN
		UPDATE TD_SUBJECT_LANGUAGE
		SET SLG_VALUE = @SlgValue
		WHERE SLG_LNG_ID = @LngIsoID
			AND SLG_SBJ_ID = @SlgSbjID
	END

	RETURN @@rowcount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_SubjectLanguage_CreateOrUpdate].[@SbjCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_SubjectLanguage_CreateOrUpdate].[@SlgIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_SubjectLanguage_CreateOrUpdate].[@SlgValue]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_SubjectLanguage_CreateOrUpdate].[@SbjCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_SubjectLanguage_CreateOrUpdate].[@SlgValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_SubjectLanguage_CreateOrUpdate].[@SlgIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="250" />
				<Property Name="Length" Value="1613" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 03/01/2019&#xD;&#xA;-- Description:&#x9;Creates a new SubjectLanguage entry or just updates it if it exists already&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_SubjectLanguage_CreateOrUpdate @SbjCode INT&#xD;&#xA;&#x9;,@SlgValue NVARCHAR(256)&#xD;&#xA;&#x9;,@SlgIsoCode CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Theme_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgId INT = NULL
	DECLARE @lngID INT = NULL
	DECLARE @errorMessage VARCHAR(256)

	EXEC @DtgId = Security_Auditing_Create @userName;

	IF @DtgId IS NULL
		OR @DtgId = 0
	BEGIN
		RAISERROR (
				'SP: Security_Auditing_Create has failed!'
				,16
				,1
				)

		RETURN 0
	END

	SET @lngID = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)

	IF @lngId IS NULL
	BEGIN
		SET @errorMessage = 'SP: ' + OBJECT_NAME(@@PROCID) + ' - language not found: ' + cast(isnull(@LngIsoCode, 0) AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				);

		RETURN 0
	END

	INSERT INTO TD_THEME (
		THM_CODE
		,THM_VALUE
		,THM_LNG_ID
		,THM_DTG_ID
		,THM_DELETE_FLAG
		)
	VALUES (
		DEFAULT
		,@ThmValue
		,@lngID
		,@DtgId
		,0
		)

	RETURN @@identity
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Theme_Create].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Theme_Create].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Theme_Create].[@ThmValue]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Theme_Create].[@ThmValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Theme_Create].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Theme_Create].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="219" />
				<Property Name="Length" Value="1248" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 24/03/2021&#xD;&#xA;-- Description:&#x9;Inserts a new record into the TD_THEME table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Theme_Create @ThmValue NVARCHAR(256)&#xD;&#xA;&#x9;,@userName NVARCHAR(256)&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Theme_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @eMessage VARCHAR(256)
	DECLARE @updateCount INT
	DECLARE @DtgID INT = NULL
	DECLARE @ThmID INT = NULL

	--check if record exists
	SELECT @ThmID = THM_ID
		,@DtgID = THM_DTG_ID
	FROM TD_THEME
	WHERE THM_CODE = @ThmCode
		AND THM_DELETE_FLAG = 0

	IF @ThmID IS NULL
	BEGIN
		RETURN 0
	END

	-- check if has subjects
	IF EXISTS (
			SELECT 1
			FROM TD_SUBJECT
			WHERE SBJ_THM_ID = @ThmID
				AND SBJ_DELETE_FLAG = 0
			)
	BEGIN
		--theme has one or more subjects, nothing can be deleted.

		RETURN 0
	END

	UPDATE TD_THEME
	SET THM_DELETE_FLAG = 1
	WHERE THM_ID = @ThmID
		AND THM_DELETE_FLAG = 0

	SET @updateCount = @@ROWCOUNT

	IF @updateCount > 0
	BEGIN
		-- do the auditing 
		-- Create the entry in the TD_AUDITING table
		DECLARE @AuditUpdateCount INT

		EXEC @AuditUpdateCount = Security_Auditing_Delete @DtgID
			,@userName

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error creating entry in TD_AUDITING for Theme delete with code ' + cast(isnull(@ThmCode , 0) AS VARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN
		END
	END

	-- Return the number of rows deleted
	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Theme_Delete].[@ThmCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Delete]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Theme_Delete].[@userName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Theme_Delete].[@ThmCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Theme_Delete].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="216" />
				<Property Name="Length" Value="1600" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 24/03/2021&#xD;&#xA;-- Description:&#x9;Deletes record(s) from the TD_THEME table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Theme_Delete @ThmCode INT&#xD;&#xA;&#x9;,@userName NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Theme_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @LngIsoId AS INT;

	SET @LngIsoId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			);

	SELECT ThmCode
		,ThmValue
		,sum((
				CASE 
					WHEN SBJ_ID IS NOT NULL
						THEN 1
					ELSE 0
					END
				)) AS SbjCount
	FROM (
		SELECT 
			SBJ_ID
			,COALESCE(INNER_TLG.TLG_VALUE, THM_VALUE) AS ThmValue
			,THM_CODE AS ThmCode
		FROM TD_THEME
		LEFT OUTER JOIN TD_SUBJECT ON SBJ_THM_ID = THM_ID
			AND SBJ_DELETE_FLAG = 0
			AND THM_DELETE_FLAG = 0
	
		LEFT OUTER JOIN (
			SELECT TLG_THM_ID
				,TLG_VALUE
			FROM TD_THEME_LANGUAGE
			INNER JOIN TS_LANGUAGE ON TLG_LNG_ID = LNG_ID
				AND LNG_DELETE_FLAG = 0
				AND LNG_ISO_CODE = @LngIsoCode
			) AS INNER_TLG ON THM_ID = INNER_TLG.TLG_THM_ID
		WHERE (
				(
					@ThmCode IS NOT NULL
					AND [THM_CODE]  = @ThmCode
					)
				OR @ThmCode IS NULL
				)
			AND (
				(
					@ThmValue IS NOT NULL
					AND [THM_VALUE] = @ThmValue
					)
				OR @ThmValue IS NULL
				)
			AND THM_DELETE_FLAG = 0
		)  INNER_SELECT
	GROUP BY ThmCode
		,ThmValue;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Theme_Read].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE].[TLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE].[TLG_THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE].[TLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE].[TLG_THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE].[TLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Theme_Read].[@ThmCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Theme_Read].[@ThmValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBJECT].[SBJ_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Theme_Read].[@ThmCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Theme_Read].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Theme_Read].[@ThmValue]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="270" />
				<Property Name="Length" Value="1559" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 24/03/2021&#xD;&#xA;-- Description:&#x9;Reads record(s) from the TD_Subject table&#xD;&#xA;--exec System_Navigation_Theme_Read  null,'ga','xxx'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE [dbo].[System_Navigation_Theme_Read] @ThmCode INT = NULL&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@ThmValue NVARCHAR(256) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_Theme_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @eMessage VARCHAR(256)
	DECLARE @updateCount INT
	DECLARE @DtgID INT = NULL

	--check if record exists
	SELECT @ThmID = THM_ID
		,@DtgID = THM_DTG_ID
	FROM TD_THEME
	WHERE THM_CODE = @ThmCode 
		AND THM_DELETE_FLAG  = 0

	IF @ThmID IS NULL
		OR @ThmID = 0
	BEGIN
		RETURN 0
	END



	UPDATE TD_THEME
	SET THM_VALUE = @ThmValue
	WHERE THM_ID = @ThmID
		AND THM_DELETE_FLAG = 0

	SET @updateCount = @@ROWCOUNT

	IF @updateCount > 0
	BEGIN
		-- do the auditing 
		-- Create the entry in the TD_AUDITING table
		DECLARE @AuditUpdateCount INT

		EXEC @AuditUpdateCount = Security_Auditing_Update @DtgID
			,@userName

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error creating entry in TD_AUDITING for THEME Update with code ' + cast(isnull(@ThmCode, 0) AS VARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN
		END
	END

	-- Return the number of rows Updated
	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Theme_Update].[@ThmId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Theme_Update].[@ThmCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Theme_Update].[@ThmValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_Theme_Update].[@userName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Theme_Update].[@ThmCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Theme_Update].[@ThmValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Theme_Update].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_Theme_Update].[@ThmId]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="216" />
				<Property Name="Length" Value="1411" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 24/03/2021&#xD;&#xA;-- Description:&#x9;Updates record(s) from the TD_THEME table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_Theme_Update @ThmCode INT&#xD;&#xA;&#x9;,@ThmValue NVARCHAR(256)&#xD;&#xA;&#x9;,@userName NVARCHAR(256)&#xD;&#xA;&#x9;,@ThmId INT OUT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Navigation_ThemeLanguage_CreateOrUpdate]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @LngIsoID INT
	DECLARE @TlgThmID INT
	DECLARE @errorMessage VARCHAR(256)
	DECLARE @recordCount INT

	SET @TlgThmID = (
			SELECT THM_ID
			FROM TD_THEME
			WHERE THM_CODE = @ThmCode
				AND THM_DELETE_FLAG = 0
			)

	IF @TlgThmID IS NULL
		OR @TlgThmID = 0
	BEGIN
		RETURN 0
	END

	SET @LngIsoID = (
			SELECT lng.LNG_ID
			FROM TS_LANGUAGE lng
			WHERE lng.LNG_ISO_CODE = @ThmIsoCode
				AND lng.LNG_DELETE_FLAG = 0
			)

	IF @LngIsoID IS NULL
		OR @LngIsoID = 0
	BEGIN
		SET @errorMessage = 'No ID found for Language Code code ' + cast(isnull(@ThmIsoCode, 0) AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				)

		RETURN 0
	END

	SET @recordCount = (
			SELECT count(*)
			FROM TD_THEME_LANGUAGE
			WHERE TLG_LNG_ID = @LngIsoID
				AND TLG_THM_ID = @TlgThmID
			)

	IF @recordCount = 0
	BEGIN
		INSERT INTO TD_THEME_LANGUAGE (
			TLG_VALUE
			,TLG_LNG_ID
			,TLG_THM_ID
			)
		VALUES (
			@TlgValue
			,@LngIsoID
			,@TlgThmID
			)
	END
	ELSE
	BEGIN
		UPDATE TD_THEME_LANGUAGE
		SET TLG_VALUE = @TlgValue
		WHERE TLG_LNG_ID = @LngIsoID
			AND TLG_THM_ID = @TlgThmID
	END

	RETURN @@rowcount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_ThemeLanguage_CreateOrUpdate].[@ThmCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_ThemeLanguage_CreateOrUpdate].[@ThmIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE].[TLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE].[TLG_THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE].[TLG_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE].[TLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE].[TLG_THM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Navigation_ThemeLanguage_CreateOrUpdate].[@TlgValue]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_ThemeLanguage_CreateOrUpdate].[@ThmCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_ThemeLanguage_CreateOrUpdate].[@TlgValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Navigation_ThemeLanguage_CreateOrUpdate].[@ThmIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="248" />
				<Property Name="Length" Value="1601" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 03/01/2019&#xD;&#xA;-- Description:&#x9;Creates a new ThemeLanguage entry or just updates it if it exists already&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Navigation_ThemeLanguage_CreateOrUpdate @ThmCode INT&#xD;&#xA;&#x9;,@TlgValue NVARCHAR(256)&#xD;&#xA;&#x9;,@ThmIsoCode CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Settings_Copyright_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT = NULL
	DECLARE @errorMessage VARCHAR(256)
	DECLARE @updateCount INT
	-- If there is a previously deleted copyright with this Copyright Code then we re-animate rather than create a new one
	-- This is in order to restore referential integrity with the older version of the copyright
	

	SET @DtgID = (
			SELECT max(CPR_DTG_ID)
			FROM TS_COPYRIGHT
			WHERE CPR_CODE =  @CprCode
				AND CPR_DELETE_FLAG = 1
			)

	IF @DtgID IS NOT NULL
		AND @DtgID > 0
	BEGIN
		UPDATE TS_COPYRIGHT
		SET CPR_DELETE_FLAG = 0,
		CPR_CODE=@CprCode,
		CPR_VALUE=@CprValue,
		CPR_URL=@CprUrl 
		WHERE CPR_DTG_ID = @DtgID

		

		SET @updateCount = @@ROWCOUNT

		IF @updateCount > 0
		BEGIN
			-- do the auditing 
			-- Create the entry in the TD_AUDITING table
			DECLARE @AuditUpdateCount INT

			EXEC @AuditUpdateCount = Security_Auditing_Update @DtgID
				,@CcnUsername

			-- check the previous stored procedure for error
			IF @AuditUpdateCount = 0
			BEGIN
				SET @errorMessage = 'Error creating entry in TD_AUDITING for copyright update:' + cast(isnull(@CprCode, 0) AS VARCHAR)

				RAISERROR (
						@errorMessage
						,16
						,1
						)

				RETURN
			END

			RETURN @updateCount
		END
	END
	ELSE
	BEGIN

			-- Do the create Audit and get the new DtgID from the stored procedure
		EXEC @DtgID = Security_Auditing_Create @CcnUsername

		-- Check for problems with the audit stored procedure
		IF @DtgID = 0
			OR @DtgID IS NULL
		BEGIN
			RAISERROR (
					'Error in calling Security_Auditing_Create'
					,16
					,1
					)

			RETURN 0
		END

		INSERT INTO TS_COPYRIGHT (
			CPR_CODE
			,CPR_VALUE
			,CPR_URL
			,CPR_DTG_ID
			,CPR_DELETE_FLAG
			)
		VALUES (
			@CprCode
			,@CprValue
			,@CprUrl
			,@DtgID
			,0
			)


	END

	RETURN @@IDENTITY
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Copyright_Create].[@CprCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Copyright_Create].[@CprValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_URL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Copyright_Create].[@CprUrl]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Copyright_Create].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Copyright_Create].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Copyright_Create].[@CprCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Copyright_Create].[@CprValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Copyright_Create].[@CprUrl]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2048" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="203" />
				<Property Name="Length" Value="2252" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 05/10/2018&#xD;&#xA;-- Description:&#x9;Create a new copyright entry&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Settings_Copyright_Create @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@CprCode NVARCHAR(256)&#xD;&#xA;&#x9;,@CprValue NVARCHAR(256)&#xD;&#xA;&#x9;,@CprUrl NVARCHAR(2048)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Settings_Copyright_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT
	DECLARE @eMessage VARCHAR(256)
	DECLARE @updateCount INT

	--some pre-auditing work first:
	SET @DtgID = (
			SELECT CPR_DTG_ID
			FROM TS_COPYRIGHT
			WHERE CPR_CODE = @CprCode
				AND CPR_DELETE_FLAG = 0
			)

	IF @DtgID IS NULL
	BEGIN
		--This record doesn't exist
		RETURN 0
	END

	--We may now do the soft delete
	UPDATE TS_COPYRIGHT
	SET cpr_DELETE_FLAG = 1
	WHERE CPR_CODE = @CprCode
		AND CPR_DELETE_FLAG = 0

	SET @updateCount = @@ROWCOUNT

	IF @updateCount > 0
	BEGIN
		-- do the auditing 
		-- Create the entry in the TD_AUDITING table
		DECLARE @AuditUpdateCount INT

		EXEC @AuditUpdateCount = Security_Auditing_Delete @DtgID
			,@CcnUsername

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error creating entry in TD_AUDITING for Copyright delete:' + cast(isnull(@CprCode, 0) AS VARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN
		END
	END

	-- Return the number of rows deleted
	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Copyright_Delete].[@CprCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Delete]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Copyright_Delete].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Copyright_Delete].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Copyright_Delete].[@CprCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="231" />
				<Property Name="Length" Value="1447" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 05/10/2018&#xD;&#xA;-- Description:&#x9;Deletes (soft delete) an entry in the TS_COPYRIGHT table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Settings_Copyright_Delete @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@CprCode NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Settings_Copyright_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT CPR_CODE AS CprCode
		,CPR_VALUE AS CprValue
		,CPR_URL AS CprUrl
		,coalesce(mtr.mtrCount,0) AS MtrCount
	FROM TS_COPYRIGHT
	LEFT JOIN (
		SELECT mtrInner.CPR_ID
			,count(*) AS mtrCount
		FROM (
			SELECT DISTINCT CPR_ID
				,MTR_CODE
			FROM TS_COPYRIGHT
			INNER JOIN TD_MATRIX
				ON CPR_ID =MTR_CPR_ID
					AND CPR_DELETE_FLAG = 0
					AND MTR_DELETE_FLAG = 0
			) mtrInner
			GROUP BY mtrInner.CPR_ID
		) MTR
	
		ON MTR.CPR_ID = TS_COPYRIGHT.CPR_ID
	WHERE CPR_DELETE_FLAG = 0
		AND (
			@CprCode IS NULL
			OR @CprCode = TS_COPYRIGHT.CPR_CODE
			)
		AND (
			@CprValue IS NULL
			OR @CprValue = TS_COPYRIGHT.CPR_VALUE
			)
		AND (
			@CprUrl IS NULL
			OR @CprUrl = TS_COPYRIGHT.CPR_URL
			)
			ORDER BY CPR_VALUE
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_URL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Copyright_Read].[@CprCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Copyright_Read].[@CprValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Copyright_Read].[@CprUrl]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_URL]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Copyright_Read].[@CprCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Copyright_Read].[@CprValue]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Copyright_Read].[@CprUrl]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2048" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="243" />
				<Property Name="Length" Value="1194" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 05/10/2018&#xD;&#xA;-- Description:&#x9;Read a Copyright entry&#xD;&#xA;-- exec System_Settings_Copyright_Read 'CSO'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Settings_Copyright_Read @CprCode NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@CprValue NVARCHAR(256) = NULL&#xD;&#xA;&#x9;,@CprUrl NVARCHAR(2048) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Settings_Copyright_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT
	DECLARE @eMessage NVARCHAR(256)
	DECLARE @updateCount INT

	SET @DtgID = (
			SELECT CPR_DTG_ID
			FROM TS_COPYRIGHT
			WHERE CPR_CODE = @CprCodeOld
				AND CPR_DELETE_FLAG = 0
			)

	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		-- the requested record doesn't exist
		RETURN 0
	END

	UPDATE TS_COPYRIGHT
	SET CPR_VALUE = @CprValue
		,CPR_CODE = @CprCodeNew
		,CPR_URL = @CprUrl
	WHERE CPR_CODE = @CprCodeOld
		AND CPR_DELETE_FLAG = 0

	SET @updateCount = @@ROWCOUNT

	IF @updateCount > 0
	BEGIN
		-- do the auditing 
		-- Create the entry in the TD_AUDITING table
		DECLARE @AuditUpdateCount INT

		EXEC @AuditUpdateCount = Security_Auditing_Update @DtgID
			,@CcnUsername

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error creating entry in TD_AUDITING for Copyright update:' + cast(isnull(@CprCodeOld, 0) AS NVARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN
		END
	END

	-- Return the number of rows deleted
	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Copyright_Update].[@CprCodeOld]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Copyright_Update].[@CprValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Copyright_Update].[@CprCodeNew]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_URL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Copyright_Update].[@CprUrl]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Copyright_Update].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Copyright_Update].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Copyright_Update].[@CprCodeOld]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Copyright_Update].[@CprCodeNew]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Copyright_Update].[@CprValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Copyright_Update].[@CprUrl]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2048" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="200" />
				<Property Name="Length" Value="1522" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 05/10/2018&#xD;&#xA;-- Description:&#x9;Updates a Copyright entry&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Settings_Copyright_Update @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@CprCodeOld NVARCHAR(256)&#xD;&#xA;&#x9;,@CprCodeNew NVARCHAR(256)&#xD;&#xA;&#x9;,@CprValue NVARCHAR(256)&#xD;&#xA;&#x9;,@CprUrl NVARCHAR(2048)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Settings_Copyright_Usage]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @IsInUse INT
	DECLARE @CprID INT = NULL

	SET @CprID = (
			SELECT CPR_ID
			FROM TS_COPYRIGHT
			WHERE CPR_CODE = @CprCode
				AND CPR_DELETE_FLAG = 0
			)

	IF @CprID IS NULL
	BEGIN
		-- No record found, therefore no usage
		RETURN 0
	END

	SET @IsInUse = (
			SELECT (
					iif(EXISTS (
							SELECT TOP 1 1
							FROM TD_MATRIX
							WHERE MTR_CPR_ID = @CprID
								AND MTR_DELETE_FLAG = 0
							), 1, 0)
					)
			)

	RETURN @IsInUse
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Copyright_Usage].[@CprCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT].[CPR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CPR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Copyright_Usage].[@CprCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="206" />
				<Property Name="Length" Value="802" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 08/10/2018&#xD;&#xA;-- Description:&#x9;Checks if a copyright is in use&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Settings_Copyright_Usage @CprCode NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Settings_Format_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT FRM_TYPE AS FrmType
		,FRM_VERSION AS FrmVersion
		,FRM_DIRECTION AS FrmDirection
	FROM TS_FORMAT
	WHERE (
			@FrmType IS NULL
			OR FRM_TYPE = @FrmType
			)
		AND (
			@FrmVersion IS NULL
			OR FRM_VERSION = @FrmVersion
			)
		AND (
			@FrmDirection IS NULL
			OR FRM_DIRECTION = @FrmDirection
			)

	ORDER BY FRM_TYPE ASC
		,FRM_VERSION DESC
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TS_FORMAT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_FORMAT].[FRM_DIRECTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Format_Read].[@FrmType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Format_Read].[@FrmVersion]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Format_Read].[@FrmDirection]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Format_Read].[@FrmType]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Format_Read].[@FrmVersion]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Format_Read].[@FrmDirection]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="214" />
				<Property Name="Length" Value="773" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Create date: 27 Sep 2018&#xD;&#xA;-- Description:&#x9;Returns records from the Format Table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Settings_Format_Read @FrmType NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@FrmVersion NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@FrmDirection NVARCHAR(20) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Settings_Language_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	-- If there is a previously deleted language with this LngIsoCode then we re-animate rather than create a new one
	-- This is in order to restore referential integrity with the old version of the language
	DECLARE @deletedID INT

	SET @deletedID = (
			SELECT max(LNG_ID)
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 1
			)

	DECLARE @DtgID INT = NULL


	IF (
			@deletedID IS NOT NULL
			AND @deletedID > 0
			)
	BEGIN
		SET @DtgID = (
				SELECT max(LNG_DTG_ID)
				FROM TS_LANGUAGE
				WHERE LNG_ISO_CODE = @LngIsoCode
					AND LNG_DELETE_FLAG = 1
				)

		DECLARE @updateCount INT
		DECLARE @eMessage VARCHAR(256)

		IF @DtgID IS NULL
		BEGIN
			RETURN 0
		END

		UPDATE TS_LANGUAGE
		SET LNG_ISO_NAME = @LngIsoName
			,LNG_DELETE_FLAG = 0
			,LNG_DTG_ID=@DtgID
		WHERE LNG_ID = @deletedID

		SET @updateCount = @@ROWCOUNT

		IF @updateCount > 0
		BEGIN
			-- do the auditing 
			-- Create the entry in the TD_AUDITING table
			DECLARE @AuditUpdateCount INT

			EXEC @AuditUpdateCount = Security_Auditing_Update @DtgID
				,@CcnUsername

			-- check the previous stored procedure for error
			IF @AuditUpdateCount = 0
			BEGIN
				SET @eMessage = 'Error creating entry in TD_AUDITING for language update:' + cast(isnull(@LngIsoCode, 0) AS VARCHAR)

				RAISERROR (
						@eMessage
						,16
						,1
						)

				RETURN
			END
		END

		RETURN @updateCount
	END
	ELSE
	BEGIN

		
	-- Do the create Audit and get the new DtgID from the stored procedure
	EXEC @DtgID = Security_Auditing_Create @CcnUsername

	-- Check for problems with the audit stored procedure
	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		RAISERROR (
				'Error in calling Security_Auditing_Create'
				,16
				,1
				)

		RETURN 0
	END

		-- Create the new language entry
		INSERT INTO TS_LANGUAGE (
			LNG_ISO_CODE
			,LNG_ISO_NAME
			,LNG_DTG_ID
			,LNG_DELETE_FLAG
			)
		VALUES (
			@LngIsoCode
			,@LngIsoName
			,@DtgID
			,0
			)
	END

	RETURN @@IDENTITY
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Language_Create].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Language_Create].[@LngIsoName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Language_Create].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Language_Create].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Language_Create].[@LngIsoName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Language_Create].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="274" />
				<Property Name="Length" Value="2516" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 20/09/2018&#xD;&#xA;-- Description:&#x9;To create a new Language entry&#xD;&#xA;-- exec System_Settings_Language_Create 'kk','dssdfhgf','okeeffene'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Settings_Language_Create @LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@LngIsoName NVARCHAR(32)&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Settings_Language_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT
	DECLARE @eMessage VARCHAR(256)
	DECLARE @updateCount INT

	--some pre-auditing work first:
	SET @DtgID = (
			SELECT LNG_DTG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)

	IF @DtgID IS NULL
	BEGIN
		RETURN 0
	END

	-- we may now do the soft delete by updating the LNG_DELETE_FLAG to 1
	UPDATE TS_LANGUAGE
	SET LNG_DELETE_FLAG = 1
	WHERE LNG_ISO_CODE = @LngIsoCode
		AND LNG_DELETE_FLAG = 0

	SET @updateCount = @@ROWCOUNT

	IF @updateCount > 0
	BEGIN
		-- do the auditing 
		-- Create the entry in the TD_AUDITING table
		DECLARE @AuditUpdateCount INT

		EXEC @AuditUpdateCount = Security_Auditing_Delete @DtgID
			,@DeleteCcnUsername

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error creating entry in TD_AUDITING for language delete:' + cast(isnull(@LngIsoCode, 0) AS VARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN
		END
	END

	-- Return the number of rows deleted
	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Language_Delete].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Delete]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Language_Delete].[@DeleteCcnUsername]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Language_Delete].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Language_Delete].[@DeleteCcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="194" />
				<Property Name="Length" Value="1439" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 21/09/2018&#xD;&#xA;-- Description:&#x9;Delete a language. &#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Settings_Language_Delete @LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@DeleteCcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Settings_Language_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT LNG_ISO_CODE AS LngIsoCode
		,LNG_ISO_NAME AS LngIsoName
		,coalesce(mtr.mtrCount,0) AS MtrCount
	FROM TS_LANGUAGE
	LEFT JOIN (
		SELECT mtrInner.LNG_ID
			,count(*) AS mtrCount
		FROM (
			SELECT DISTINCT LNG_ID
				,MTR_CODE
			FROM TS_LANGUAGE
			INNER JOIN TD_MATRIX
				ON LNG_ID =MTR_LNG_ID
					AND LNG_DELETE_FLAG = 0
					AND MTR_DELETE_FLAG = 0
			) mtrInner
			GROUP BY mtrInner.LNG_ID
		) MTR
	
		ON MTR.LNG_ID = TS_LANGUAGE.LNG_ID
	WHERE LNG_DELETE_FLAG = 0
		AND (
			@LngIsoCode IS NULL
			OR (LNG_ISO_CODE = @LngIsoCode)
			)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Language_Read].[@LngIsoCode]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Language_Read].[@LngIsoCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="318" />
				<Property Name="Length" Value="1009" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 20/09/2018&#xD;&#xA;-- Description:&#x9;Returns a Language entry based on its iso code. Returns all languages if an iso code isn't supplied&#xD;&#xA;-- exec System_Settings_Language_Read 'ga'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Settings_Language_Read @LngIsoCode CHAR(2) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Settings_Language_ReadListByRelease]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT LNG_ISO_CODE AS LngIsoCode
		,LNG_ISO_NAME AS LngIsoName
	FROM TS_LANGUAGE
	INNER JOIN TD_MATRIX
		ON MTR_LNG_ID = LNG_ID
			AND MTR_DELETE_FLAG = 0
	INNER JOIN TD_RELEASE
		ON MTR_RLS_ID = RLS_ID
			AND RLS_CODE = @RlsCode
			AND RLS_DELETE_FLAG = 0
	WHERE LNG_DELETE_FLAG = 0
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Language_ReadListByRelease].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Language_ReadListByRelease].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="232" />
				<Property Name="Length" Value="644" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Create date: 5 December 2019&#xD;&#xA;-- Description:&#x9;Returns a list of Languages based on a Release Code&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Settings_Language_ReadListByRelease @RlsCode INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Settings_Language_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT
	DECLARE @eMessage VARCHAR(256)
	DECLARE @updateCount INT

	--some pre-auditing work first:
	SET @DtgID = (
			SELECT LNG_DTG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)

	IF @DtgID IS NULL
	BEGIN
		RETURN 0
	END

	-- we may now do the update
	UPDATE TS_LANGUAGE
	SET LNG_ISO_NAME = @LngIsoName
	WHERE LNG_ISO_CODE = @LngIsoCode
		AND LNG_DELETE_FLAG = 0

	SET @updateCount = @@ROWCOUNT

	IF @updateCount > 0
	BEGIN
		-- do the auditing 
		-- Create the entry in the TD_AUDITING table
		DECLARE @AuditUpdateCount INT

		EXEC @AuditUpdateCount = Security_Auditing_Update @DtgID
			,@UpdateCcnUsername

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error creating entry in TD_AUDITING for language update:' + cast(isnull(@LngIsoCode, 0) AS VARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN
		END
	END

	-- Return the number of rows updated
	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Language_Update].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Language_Update].[@LngIsoName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Language_Update].[@UpdateCcnUsername]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Language_Update].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Language_Update].[@LngIsoName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Language_Update].[@UpdateCcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="194" />
				<Property Name="Length" Value="1432" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 28/09/2018&#xD;&#xA;-- Description:&#x9;Update a language. &#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Settings_Language_Update @LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@LngIsoName NVARCHAR(32)&#xD;&#xA;&#x9;,@UpdateCcnUsername NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Settings_Language_Usage]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @LngId INT
	DECLARE @IsInUse INT

	SET @LngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)

	IF @LngId IS NULL
		OR @LngId = 0
	BEGIN
		-- No error to be returned, just the fact that there are no related records
		RETURN 0
	END

	SET @IsInUse = (
			SELECT (
					iif(EXISTS (
							SELECT TOP 1 1
							FROM TD_MATRIX
							WHERE MTR_LNG_ID = @LngId
								AND MTR_DELETE_FLAG = 0
							)
						OR EXISTS (
							SELECT TOP 1 1
							FROM TD_ACCOUNT
							INNER JOIN TD_USER ON CCN_USR_ID = USR_ID
								AND USR_LNG_ID =@LngId
								AND CCN_DELETE_FLAG = 0
							)
						OR EXISTS (
							SELECT TOP 1 1
							FROM TD_SUBSCRIBER
							INNER JOIN TD_USER ON SBR_USR_ID = USR_ID
								AND USR_LNG_ID =@LngId
							), 1, 0)
					)
			)

	RETURN @IsInUse
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Language_Usage].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Language_Usage].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="266" />
				<Property Name="Length" Value="1263" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 28/09/2018&#xD;&#xA;-- Description: To check whether or not a language has associated entries in the TD_MATRIX or TD_USER table&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Settings_Language_Usage @LngIsoCode CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Settings_Reason_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT = NULL
	DECLARE @lngID INT = NULL
	DECLARE @errorMessage VARCHAR(256)

		SET @lngID = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)

	IF @lngId IS NULL
	BEGIN
		SET @errorMessage = 'SP: ' + OBJECT_NAME(@@PROCID) + ' - language not found: ' + cast(isnull(@LngIsoCode, 0) AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				);

		RETURN 0
	END

	-- Do the create Audit and get the new DtgID from the stored procedure
	EXEC @DtgID = Security_Auditing_Create @CcnUsername

	-- Check for problems with the audit stored procedure
	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		RAISERROR (
				'Error in calling Security_Auditing_Create'
				,16
				,1
				)

		RETURN 0
	END

	INSERT INTO TS_REASON (
		RSN_CODE
		,RSN_VALUE_INTERNAL
		,RSN_VALUE_EXTERNAL
		,RSN_LNG_ID 
		,RSN_DTG_ID
		,RSN_DELETE_FLAG
		)
	VALUES (
		@RsnCode
		,@RsnValueInternal
		,@RsnValueExternal
		,@lngID 
		,@DtgID
		,0
		)

	RETURN @@IDENTITY
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Reason_Create].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Reason_Create].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_VALUE_INTERNAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_VALUE_EXTERNAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Reason_Create].[@RsnCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Reason_Create].[@RsnValueInternal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Reason_Create].[@RsnValueExternal]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Reason_Create].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Reason_Create].[@RsnCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Reason_Create].[@RsnValueInternal]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Reason_Create].[@RsnValueExternal]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Reason_Create].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="202" />
				<Property Name="Length" Value="1500" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 12/10/2018&#xD;&#xA;-- Description:&#x9;Creates a new Reason entity&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Settings_Reason_Create @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@RsnCode NVARCHAR(32)&#xD;&#xA;&#x9;,@RsnValueInternal NVARCHAR(256)&#xD;&#xA;&#x9;,@RsnValueExternal NVARCHAR(256)&#xD;&#xA;&#x9;,@LngIsoCode char(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Settings_Reason_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT
	DECLARE @eMessage VARCHAR(256)
	DECLARE @updateCount INT

	--some pre-auditing work first:
	SET @DtgID = (
			SELECT RSN_DTG_ID
			FROM TS_REASON
			WHERE RSN_CODE = @RsnCode
				AND RSN_DELETE_FLAG = 0
			)

	IF @DtgID IS NULL
	BEGIN
		--This record doesn't exist
		RETURN 0
	END

	--We may now do the soft delete
	UPDATE TS_REASON
	SET RSN_DELETE_FLAG = 1
	WHERE RSN_CODE = @RsnCode
		AND RSN_DELETE_FLAG = 0

	SET @updateCount = @@ROWCOUNT

	IF @updateCount > 0
	BEGIN
		-- do the auditing 
		-- Create the entry in the TD_AUDITING table
		DECLARE @AuditUpdateCount INT

		EXEC @AuditUpdateCount = Security_Auditing_Delete @DtgID
			,@CcnUsername

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error creating entry in TD_AUDITING for Reason delete:' + cast(isnull(@RsnCode, 0) AS VARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN
		END
	END

	-- Return the number of rows deleted
	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Reason_Delete].[@RsnCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Delete]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Reason_Delete].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Reason_Delete].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Reason_Delete].[@RsnCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="201" />
				<Property Name="Length" Value="1404" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 12/10/2018&#xD;&#xA;-- Description:&#x9;Soft Delete a Reason entry&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Settings_Reason_Delete @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@RsnCode NVARCHAR(32)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Settings_Reason_Exists]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @result INT

	SET @result = (
			SELECT iif(EXISTS (
						SELECT RSN_ID
						FROM TS_REASON
						WHERE RSN_CODE = @RsnCode
							AND RSN_DELETE_FLAG = 0
						), 1, 0)
			)

	RETURN @result
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Reason_Exists].[@RsnCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Reason_Exists].[@RsnCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="218" />
				<Property Name="Length" Value="544" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 05/11/2018&#xD;&#xA;-- Description:&#x9;Check if a Reason Code exists in the system&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Settings_Reason_Exists @RsnCode NVARCHAR(32)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Settings_Reason_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	Declare @LngIsoID int
	DECLARE @eMessage VARCHAR(256)

		SET @LngIsoID = (
			SELECT lng.LNG_ID
			FROM TS_LANGUAGE lng
			WHERE lng.LNG_ISO_CODE = @LngIsoCode
				AND lng.LNG_DELETE_FLAG = 0
			)

	IF @LngIsoID IS NULL
		OR @LngIsoID = 0
	BEGIN
		SET @eMessage = 'No ID found for Language Code code ' + cast(isnull(@LngIsoCode, 0) AS VARCHAR)

		RAISERROR (
				@eMessage
				,16
				,1
				)

		RETURN 0
	END


	SELECT DISTINCT rsn.RSN_CODE AS RsnCode
		,coalesce(rlg.RLG_VALUE_EXTERNAL, rsn.RSN_VALUE_EXTERNAL) AS RsnValueExternal
		,coalesce(rlg.RLG_VALUE_INTERNAL,rsn.RSN_VALUE_INTERNAL) AS RsnValueInternal
	FROM TS_REASON rsn
	LEFT JOIN TM_REASON_RELEASE rsr
		ON rsn.RSN_ID = rsr.RSR_RSN_ID
			AND rsr.RSR_DELETE_FLAG = 0
			AND rsn.RSN_DELETE_FLAG = 0
	LEFT JOIN TD_RELEASE rls
		ON rsr.RSR_RLS_ID = rls.RLS_ID
			AND rls.RLS_DELETE_FLAG = 0
	left join TS_REASON_LANGUAGE rlg
		on rsn.RSN_ID=rlg.RLG_RSN_ID 
		and rlg.RLG_LNG_ID=@LngIsoID 
	WHERE (
			@RlsCode IS NULL
			OR rls.RLS_CODE = @RlsCode
			)
		AND (
			@RsnCode IS NULL
			OR rsn.RSN_CODE = @RsnCode
			)
		AND rsn.RSN_DELETE_FLAG = 0
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Reason_Read].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_RSN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE].[RSR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON_LANGUAGE].[RLG_RSN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON_LANGUAGE].[RLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON_LANGUAGE].[RLG_VALUE_EXTERNAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_VALUE_EXTERNAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON_LANGUAGE].[RLG_VALUE_INTERNAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_VALUE_INTERNAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Reason_Read].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Reason_Read].[@RsnCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Reason_Read].[@RlsCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Reason_Read].[@RsnCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Reason_Read].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="455" />
				<Property Name="Length" Value="1772" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 12/10/2018&#xD;&#xA;-- Description:&#x9;Reads one or all Reasons. If the @RlsCode Parameter is null then all reasons will be returned for that release&#xD;&#xA;-- If the @RsnCode is supplied, the reason for that code will be returned&#xD;&#xA;-- otherwise all Reasons will be returned&#xD;&#xA;-- exec System_Settings_Reason_Read null,null,'ga'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Settings_Reason_Read @RlsCode INT = NULL&#xD;&#xA;&#x9;,@RsnCode NVARCHAR(32) = NULL&#xD;&#xA;&#x9;,@LngIsoCode char(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Settings_Reason_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT
	DECLARE @eMessage VARCHAR(256)
	DECLARE @updateCount INT

	SET @DtgID = (
			SELECT RSN_DTG_ID
			FROM TS_REASON
			WHERE RSN_CODE = @RsnCode
				AND RSN_DELETE_FLAG = 0
			)

	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		-- the requested record doesn't exist
		RETURN 0
	END

	UPDATE TS_REASON
	SET RSN_VALUE_INTERNAL = @RsnValueInternal
		,RSN_VALUE_EXTERNAL = @RsnValueExternal
	WHERE RSN_CODE = @RsnCode
		AND RSN_DELETE_FLAG = 0

	SET @updateCount = @@ROWCOUNT

	IF @updateCount > 0
	BEGIN
		-- Auditing:
		DECLARE @AuditUpdateCount INT

		EXEC @AuditUpdateCount = Security_Auditing_Update @DtgID
			,@CcnUsername

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error creating entry in TD_AUDITING for Reason update:' + cast(isnull(@RsnCode, 0) AS VARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN
		END
	END

	--Return the number of rows updated
	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Reason_Update].[@RsnCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_VALUE_INTERNAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Reason_Update].[@RsnValueInternal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_VALUE_EXTERNAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Reason_Update].[@RsnValueExternal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_Reason_Update].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Reason_Update].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Reason_Update].[@RsnCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Reason_Update].[@RsnValueInternal]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_Reason_Update].[@RsnValueExternal]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="198" />
				<Property Name="Length" Value="1436" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 12/10/2018&#xD;&#xA;-- Description:&#x9;Updates a Reason entity&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Settings_Reason_Update @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@RsnCode NVARCHAR(32)&#xD;&#xA;&#x9;,@RsnValueInternal NVARCHAR(256)&#xD;&#xA;&#x9;,@RsnValueExternal NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[System_Settings_ReasonLanguage_CreateOrUpdate]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @LngIsoID INT
	DECLARE @RsnID INT
	DECLARE @eMessage VARCHAR(256)
	DECLARE @recordCount INT

	SET @LngIsoID = (
			SELECT lng.LNG_ID
			FROM TS_LANGUAGE lng
			WHERE lng.LNG_ISO_CODE = @LngIsoCode
				AND lng.LNG_DELETE_FLAG = 0
			)

	IF @LngIsoID IS NULL
		OR @LngIsoID = 0
	BEGIN
		SET @eMessage = 'No ID found for Language Code code ' + cast(isnull(@LngIsoCode, 0) AS VARCHAR)

		RAISERROR (
				@eMessage
				,16
				,1
				)

		RETURN 0
	END

	SET @RsnID = (
			SELECT RSN_ID
			FROM TS_REASON
			WHERE RSN_CODE = @RsnCode
				AND RSN_DELETE_FLAG = 0
			)

	IF @RsnID IS NULL
		OR @RsnID = 0
	BEGIN
		SET @eMessage = 'No ID found for Reason Code code ' + cast(isnull(@RsnCode, 0) AS VARCHAR)

		RAISERROR (
				@eMessage
				,16
				,1
				)

		RETURN 0
	END

	SET @recordCount = (
			SELECT count(*)
			FROM TS_REASON_LANGUAGE
			WHERE RLG_LNG_ID = @LngIsoID
				AND RLG_RSN_ID = @RsnID
			)

	IF @recordCount = 0 -- We need to create a new entry
	BEGIN
		INSERT INTO TS_REASON_LANGUAGE (
			RLG_VALUE_INTERNAL
			,RLG_VALUE_EXTERNAL
			,RLG_LNG_ID
			,RLG_RSN_ID
			)
		VALUES (
			@RlgValueInternal
			,@RlgValueExternal
			,@LngIsoID
			,@RsnID
			)
	END
	ELSE
	BEGIN --This is an update
		UPDATE TS_REASON_LANGUAGE
		SET RLG_VALUE_INTERNAL = @RlgValueInternal
			,RLG_VALUE_EXTERNAL = @RlgValueExternal
		WHERE RLG_RSN_ID = @RsnID
			AND RLG_LNG_ID = @LngIsoID
	END

	RETURN @@rowcount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_ReasonLanguage_CreateOrUpdate].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_ReasonLanguage_CreateOrUpdate].[@RsnCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON].[RSN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON_LANGUAGE].[RLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON_LANGUAGE].[RLG_RSN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON_LANGUAGE].[RLG_VALUE_INTERNAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON_LANGUAGE].[RLG_VALUE_EXTERNAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON_LANGUAGE].[RLG_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REASON_LANGUAGE].[RLG_RSN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_ReasonLanguage_CreateOrUpdate].[@RlgValueInternal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[System_Settings_ReasonLanguage_CreateOrUpdate].[@RlgValueExternal]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_ReasonLanguage_CreateOrUpdate].[@RsnCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_ReasonLanguage_CreateOrUpdate].[@RlgValueInternal]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_ReasonLanguage_CreateOrUpdate].[@RlgValueExternal]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[System_Settings_ReasonLanguage_CreateOrUpdate].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="318" />
				<Property Name="Length" Value="2023" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 14/08/2019&#xD;&#xA;-- Description:&#x9;Creates a value in Reason_Language (when a language other than the main one is specified).&#xD;&#xA;-- Updates the Reason_Language if it exists already&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE System_Settings_ReasonLanguage_CreateOrUpdate @RsnCode NVARCHAR(32)&#xD;&#xA;&#x9;,@RlgValueInternal NVARCHAR(256)&#xD;&#xA;&#x9;,@RlgValueExternal NVARCHAR(256)&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_ACCOUNT]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ACCOUNT].[CCN_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ACCOUNT].[CCN_PRV_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ACCOUNT].[CCN_NOTIFICATION_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="38" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ACCOUNT].[CCN_DISPLAYNAME]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ACCOUNT].[CCN_EMAIL]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ACCOUNT].[CCN_LOCKED_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="19" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ACCOUNT].[CCN_AD_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="20" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ACCOUNT].[CCN_DTG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="37" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ACCOUNT].[CCN_USR_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ACCOUNT].[CCN_API_TOKEN]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="191" />
			<AttachedAnnotation Disambiguator="91" />
			<AttachedAnnotation Disambiguator="92" />
			<AttachedAnnotation Disambiguator="93" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ACCOUNT].[IX_CCN_AD_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ACCOUNT].[CCN_AD_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ACCOUNT].[IX_CCN_API_TOKEN]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ACCOUNT].[CCN_API_TOKEN]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ACCOUNT].[IX_CCN_EMAIL]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ACCOUNT].[CCN_EMAIL]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ACCOUNT].[IX_CCN_LOCKED_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ACCOUNT].[CCN_LOCKED_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ACCOUNT].[IX_CCN_USER_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ACCOUNT].[CCN_USR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ACCOUNT].[IX_CNN_DELETE_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ACCOUNT].[IX_CNN_DTG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ACCOUNT].[CCN_DTG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ACCOUNT].[IX_CNN_NOTIFICATION_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ACCOUNT].[CCN_NOTIFICATION_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ACCOUNT].[IX_CNN_PRV_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ACCOUNT].[CCN_PRV_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ACCOUNT].[IX_CNN_USERNAME]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_ALERT]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ALERT].[LRT_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ALERT].[LRT_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="189" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ALERT].[LRT_MESSAGE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ALERT].[LRT_DATETIME]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ALERT].[LRT_DTG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ALERT].[LRT_DELETE_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="39" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="192" />
			<AttachedAnnotation Disambiguator="96" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ALERT].[IX_LRT_CODE]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ALERT].[LRT_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ALERT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ALERT].[IX_LRT_DELETE_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ALERT].[LRT_DELETE_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ALERT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ALERT].[IX_LRT_DTG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ALERT].[LRT_DTG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ALERT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_ALERT_LANGUAGE]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ALERT_LANGUAGE].[LLN_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ALERT_LANGUAGE].[LLN_MESSAGE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ALERT_LANGUAGE].[LLN_LNG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ALERT_LANGUAGE].[LLN_LRT_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="193" />
			<AttachedAnnotation Disambiguator="94" />
			<AttachedAnnotation Disambiguator="95" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ALERT_LANGUAGE].[IX_LLN_LNG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ALERT_LANGUAGE].[LLN_LNG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ALERT_LANGUAGE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ALERT_LANGUAGE].[IX_LLN_LRT_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ALERT_LANGUAGE].[LLN_LRT_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ALERT_LANGUAGE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_ANALYTIC]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ANALYTIC].[NLT_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ANALYTIC].[NLT_MTR_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ANALYTIC].[NLT_FRM_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ANALYTIC].[NLT_MASKED_IP]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="11" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ANALYTIC].[NLT_OS]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ANALYTIC].[NLT_BROWSER]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ANALYTIC].[NLT_BOT_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="40" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ANALYTIC].[NLT_REFERER]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ANALYTIC].[NLT_M2M_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="41" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ANALYTIC].[NLT_DATE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="43" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ANALYTIC].[NLT_USER_FLAG]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="42" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ANALYTIC].[NLT_LNG_ISO_CODE]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_ANALYTIC].[NLT_WIDGET]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="194" />
			<AttachedAnnotation Disambiguator="97" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ANALYTIC].[IX_NLT_BOT_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ANALYTIC].[NLT_BOT_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ANALYTIC].[IX_NLT_BROWSER]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ANALYTIC].[NLT_BROWSER]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ANALYTIC].[IX_NLT_LNG_ISO_CODE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ANALYTIC].[NLT_LNG_ISO_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ANALYTIC].[IX_NLT_M2M_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ANALYTIC].[NLT_M2M_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ANALYTIC].[IX_NLT_MTR_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ANALYTIC].[NLT_MTR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ANALYTIC].[IX_NLT_OS]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ANALYTIC].[NLT_OS]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ANALYTIC].[IX_NLT_REFERER]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ANALYTIC].[NLT_REFERER]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ANALYTIC].[IX_NLT_USER_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ANALYTIC].[NLT_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ANALYTIC].[IX_NLT_WIDGET]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ANALYTIC].[NLT_WIDGET]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ANALYTIC].[IX_NTL_DATE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ANALYTIC].[NLT_DATE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_ANALYTIC].[IX_NTL_FRM_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_ANALYTIC].[NLT_FRM_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_ANALYTIC]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_API_CACHE_TRACE]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_CACHE_TRACE].[CCH_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_CACHE_TRACE].[CCH_CORRELATION_ID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_CACHE_TRACE].[CCH_OBJECT]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_CACHE_TRACE].[CCH_START_TIME]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_CACHE_TRACE].[CCH_DURATION]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="3" />
									<Property Name="Precision" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_CACHE_TRACE].[CCH_ACTION]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2048" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_CACHE_TRACE].[CCH_SUCCESS]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_CACHE_TRACE].[CCH_COMPRESSED_SIZE]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_CACHE_TRACE].[CCH_EXPIRES_AT]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="33" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_API_TRACE]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_TRACE].[TRC_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_TRACE].[TRC_METHOD]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_TRACE].[TRC_PARAMS]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2048" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_TRACE].[TRC_IP]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="15" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_TRACE].[TRC_USERAGENT]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2048" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_TRACE].[TRC_USERNAME]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_TRACE].[TRC_DATETIME]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_TRACE].[TRC_STARTTIME]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_TRACE].[TRC_DURATION]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="3" />
									<Property Name="Precision" Value="18" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_TRACE].[TRC_STATUSCODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_TRACE].[TRC_MACHINENAME]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_TRACE].[TRC_REQUEST_TYPE]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_TRACE].[TRC_REQUEST_VERB]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_TRACE].[TRC_ERROR_PATH]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_TRACE].[TRC_CORRELATION_ID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="400" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_TRACE].[TRC_JSONRPC_ERROR_CODE]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_TRACE].[TRC_CONTENT_LENGTH]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_API_TRACE].[TRC_REFERER]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="25" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_AUDITING]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_AUDITING].[DTG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="195" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_CLASSIFICATION]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_CLASSIFICATION].[CLS_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_CLASSIFICATION].[CLS_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_CLASSIFICATION].[CLS_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_CLASSIFICATION].[CLS_GEO_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="44" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_CLASSIFICATION].[CLS_GEO_URL]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2048" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_CLASSIFICATION].[CLS_MTR_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="197" />
			<AttachedAnnotation Disambiguator="99" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_CLASSIFICATION].[IX_CLS_CODE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_CLASSIFICATION].[CLS_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_CLASSIFICATION]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_CLASSIFICATION].[IX_CLS_GEO_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_CLASSIFICATION].[CLS_GEO_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_CLASSIFICATION]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_CLASSIFICATION].[IX_CLS_MTR_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_CLASSIFICATION].[CLS_MTR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_CLASSIFICATION]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_COMMENT]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_COMMENT].[CMM_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_COMMENT].[CMM_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="36" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_COMMENT].[CMM_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_COMMENT].[CMM_DTG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="45" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="198" />
			<AttachedAnnotation Disambiguator="100" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_COMMENT].[IX_CMM_CODE]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_COMMENT].[IX_CMM_DELETE_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_COMMENT].[IX_CMM_DTG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_COMMENT].[CMM_DTG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_DATA]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_DATA].[TDT_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_DATA].[TDT_VALUE]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_DATA].[TDT_STT_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_DATA].[TDT_PRD_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_DATA].[TDT_IX]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_DATA].[TDT_MTR_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="199" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_DATA].[IX_TDT_OPTIMISER]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_DATA].[TDT_IX]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_DATA].[TDT_MTR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_DATA].[TDT_STT_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_DATA].[TDT_PRD_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[TD_DATA].[TDT_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_DATA].[TDT_VALUE]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_DATA]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_DATASET]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_DATASET].[DTT_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_DATASET].[DTT_MTR_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_DATASET].[DTT_DATETIME_LOCKED]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="190" />
			<AttachedAnnotation Disambiguator="34" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_DATASET].[IX_DTT_MTR_CODE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_DATASET].[DTT_MTR_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_DATASET]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_DIMENSION_ITEM]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_DIMENSION_ITEM].[DMT_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_DIMENSION_ITEM].[DMT_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_DIMENSION_ITEM].[DMT_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_DIMENSION_ITEM].[DMT_SEQUENCE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_DIMENSION_ITEM].[DMT_MDM_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_DIMENSION_ITEM].[DMT_ELIMINATION_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="47" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_DIMENSION_ITEM].[DMT_DECIMAL]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="46" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_DIMENSION_ITEM].[DMT_UNIT]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="200" />
			<AttachedAnnotation Disambiguator="101" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_DIMENSION_ITEM].[IX_DMT_MDM_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_MDM_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_DIMENSION_ITEM].[IX_DMT_SEQUENCE_MDM_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_MDM_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_DIMENSION_ITEM].[DMT_SEQUENCE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_DIMENSION_ITEM]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_FREQUENCY]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_FREQUENCY].[FRQ_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_FREQUENCY].[FRQ_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_FREQUENCY].[FRQ_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_FREQUENCY].[FRQ_MTR_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="202" />
			<AttachedAnnotation Disambiguator="102" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_FREQUENCY].[IX_FRQ_CODE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_FREQUENCY].[FRQ_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_FREQUENCY]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_FREQUENCY].[IX_FRQ_MTR_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_FREQUENCY].[FRQ_MTR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_FREQUENCY]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_GEOLAYER]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_GEOLAYER].[GLR_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_GEOLAYER].[GLR_NAME]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_GEOLAYER].[GLR_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_GEOLAYER].[GLR_DTG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_GEOLAYER].[GLR_DELETE_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="48" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_GEOLAYER].[GLR_TEST]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="203" />
			<AttachedAnnotation Disambiguator="103" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_GEOLAYER].[IX_GLR_CODE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_GEOLAYER].[GLR_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_GEOLAYER].[IX_GLR_DELETE_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_GEOLAYER].[GLR_DELETE_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_GEOLAYER].[IX_GLR_DTG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_GEOLAYER].[GLR_DTG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_GEOLAYER].[IX_GLR_NAME]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_GEOLAYER].[GLR_NAME]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_GEOLAYER]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_GEOMAP]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_GEOMAP].[GMP_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_GEOMAP].[GMP_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_GEOMAP].[GMP_NAME]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_GEOMAP].[GMP_DESCRIPTION]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_GEOMAP].[GMP_GEOJSON]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_GEOMAP].[GMP_FEATURE_COUNT]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="50" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_GEOMAP].[GMP_GLR_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_GEOMAP].[GMP_DTG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_GEOMAP].[GMP_DELETE_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="49" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="204" />
			<AttachedAnnotation Disambiguator="104" />
			<AttachedAnnotation Disambiguator="105" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_GEOMAP].[IX_GMP_CODE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_GEOMAP].[GMP_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_GEOMAP]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_GEOMAP].[IX_GMP_DELETE_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_GEOMAP].[GMP_DELETE_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_GEOMAP]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_GEOMAP].[IX_GMP_DTG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_GEOMAP].[GMP_DTG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_GEOMAP]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_GEOMAP].[IX_GMP_GLR_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_GEOMAP].[GMP_GLR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_GEOMAP]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_GROUP]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_GROUP].[GRP_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_GROUP].[GRP_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_GROUP].[GRP_NAME]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_GROUP].[GRP_CONTACT_NAME]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="51" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_GROUP].[GRP_CONTACT_PHONE]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="52" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_GROUP].[GRP_CONTACT_EMAIL]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_GROUP].[GRP_DTG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="53" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="205" />
			<AttachedAnnotation Disambiguator="106" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_GROUP].[IX_GRP_CODE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_GROUP].[IX_GRP_DELETE_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_GROUP].[IX_GRP_DTG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_GROUP].[GRP_DTG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_GROUP].[IX_GRP_NAME]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_KEYWORD_PRODUCT]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="186" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_PRC_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_MANDATORY_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="54" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_SINGULARISED_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="55" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="206" />
			<AttachedAnnotation Disambiguator="107" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_KEYWORD_PRODUCT].[IX_KPR_CODE]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_KEYWORD_PRODUCT].[IX_KPR_MANDATORY_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_MANDATORY_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_KEYWORD_PRODUCT].[IX_KPR_PRC_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_PRC_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_KEYWORD_PRODUCT].[IX_KPR_SINGULARISED_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_SINGULARISED_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_KEYWORD_PRODUCT].[IX_KPR_VALUE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_KEYWORD_PRODUCT].[KPR_VALUE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_PRODUCT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_KEYWORD_RELEASE]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="187" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_RLS_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_MANDATORY_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="56" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_SINGULARISED_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="57" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="207" />
			<AttachedAnnotation Disambiguator="108" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_KEYWORD_RELEASE].[IX_KRL_CODE]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_KEYWORD_RELEASE].[IX_KRL_MANDATORY_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_MANDATORY_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_KEYWORD_RELEASE].[IX_KRL_RLS_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_RLS_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_KEYWORD_RELEASE].[IX_KRL_SINGULARISED_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_SINGULARISED_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_KEYWORD_RELEASE].[IX_KRL_VALUE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_KEYWORD_RELEASE].[KRL_VALUE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_KEYWORD_SUBJECT]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="188" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_SBJ_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_MANDATORY_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="58" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_SINGULARISED_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="59" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="208" />
			<AttachedAnnotation Disambiguator="109" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_KEYWORD_SUBJECT].[IX_KSB_CODE]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_KEYWORD_SUBJECT].[IX_KSB_MANDATORY_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_MANDATORY_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_KEYWORD_SUBJECT].[IX_KSB_SBJ_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_SBJ_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_KEYWORD_SUBJECT].[IX_KSB_SINGULARISED_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_SINGULARISED_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_KEYWORD_SUBJECT].[IX_KSB_VALUE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_KEYWORD_SUBJECT].[KSB_VALUE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_KEYWORD_SUBJECT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_LOGGING]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_LOGGING].[LGG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_LOGGING].[LGG_DATETIME]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_LOGGING].[LGG_THREAD]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="8" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_LOGGING].[LGG_LEVEL]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="8" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_LOGGING].[LGG_CLASS]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_LOGGING].[LGG_METHOD]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_LOGGING].[LGG_LINE]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="8" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_LOGGING].[LGG_MESSAGE]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_LOGGING].[LGG_EXCEPTION]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_LOGGING].[LGG_MACHINENAME]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_LOGGING].[LGG_CORRELATION_ID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="400" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="209" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_LOGIN]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_LOGIN].[LGN_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_LOGIN].[LGN_1FA]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_LOGIN].[LGN_2FA]">
						<Property Name="Collation" Value="Latin1_General_BIN2" />
						<Property Name="EncryptionType" Value="1" />
						<Property Name="EncryptionAlgorithmName" Value="AEAD_AES_256_CBC_HMAC_SHA_256" />
						<Relationship Name="ColumnEncryptionKey">
							<Entry>
								<References Name="[CEK_LGN_2FA]" />
							</Entry>
						</Relationship>
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_LOGIN].[LGN_TOKEN_1FA]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_LOGIN].[LGN_TOKEN_2FA]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_LOGIN].[LGN_SESSION]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_LOGIN].[LGN_SESSION_EXPIRY]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_LOGIN].[LGN_CCN_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="210" />
			<AttachedAnnotation Disambiguator="110" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_LOGIN].[IX_LGN_CCN_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_LOGIN].[LGN_CCN_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_LOGIN].[IX_LGN_SESSION]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_LOGIN].[LGN_SESSION]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_LOGIN].[IX_LGN_TOKEN_1FA]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_LOGIN].[LGN_TOKEN_1FA]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_LOGIN].[IX_LGN_TOKEN_2FA]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_LOGIN].[LGN_TOKEN_2FA]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_LOGIN]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_MATRIX]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_MATRIX].[MTR_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_MATRIX].[MTR_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_MATRIX].[MTR_TITLE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_MATRIX].[MTR_OFFICIAL_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="64" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_MATRIX].[MTR_INPUT]">
						<Property Name="Collation" Value="Latin1_General_BIN2" />
						<Property Name="EncryptionType" Value="1" />
						<Property Name="EncryptionAlgorithmName" Value="AEAD_AES_256_CBC_HMAC_SHA_256" />
						<Relationship Name="ColumnEncryptionKey">
							<Entry>
								<References Name="[CEK_MTR_INPUT]" />
							</Entry>
						</Relationship>
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_MATRIX].[MTR_NOTE]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_MATRIX].[MTR_FRM_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_MATRIX].[MTR_CPR_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_MATRIX].[MTR_DTG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="63" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_MATRIX].[MTR_DATA_FLAG]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="62" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="211" />
			<AttachedAnnotation Disambiguator="114" />
			<AttachedAnnotation Disambiguator="115" />
			<AttachedAnnotation Disambiguator="116" />
			<AttachedAnnotation Disambiguator="117" />
			<AttachedAnnotation Disambiguator="118" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_MATRIX].[IX_MTR_CODE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_MATRIX].[IX_MTR_CPR_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_MATRIX].[MTR_CPR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_MATRIX].[IX_MTR_DATA_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_MATRIX].[MTR_DATA_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_MATRIX].[IX_MTR_DELETE_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_MATRIX].[IX_MTR_DTG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_MATRIX].[MTR_DTG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_MATRIX].[IX_MTR_FRM_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_MATRIX].[MTR_FRM_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_MATRIX].[IX_MTR_LNG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_MATRIX].[IX_MTR_OFFICIAL_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_MATRIX].[MTR_OFFICIAL_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_MATRIX].[IX_MTR_RLS_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_MATRIX_DATA]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_MATRIX_DATA].[MTD_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_MATRIX_DATA].[MTD_MTR_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_MATRIX_DATA].[MTD_DATA]">
						<Property Name="Collation" Value="Latin1_General_BIN2" />
						<Property Name="EncryptionType" Value="1" />
						<Property Name="EncryptionAlgorithmName" Value="AEAD_AES_256_CBC_HMAC_SHA_256" />
						<Relationship Name="ColumnEncryptionKey">
							<Entry>
								<References Name="[CEK_MTD_DATA]" />
							</Entry>
						</Relationship>
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_MATRIX_DATA].[MTD_DECIMAL]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="60" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="212" />
			<AttachedAnnotation Disambiguator="111" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_MATRIX_DATA].[IX_MTD_MTR_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_MATRIX_DATA].[MTD_MTR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DATA]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_MATRIX_DIMENSION]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_SEQUENCE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_CODE]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_VALUE]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_DMR_ID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_GEO_FLAG]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="61" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_GEO_URL]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2048" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="213" />
			<AttachedAnnotation Disambiguator="112" />
			<AttachedAnnotation Disambiguator="113" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_MATRIX_DIMENSION].[IX_MDM_CODE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_MATRIX_DIMENSION].[IX_MDM_MTR_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_MATRIX_DIMENSION].[IX_MDM_MTR_ID_SEQUENCE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_MTR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_MATRIX_DIMENSION].[MDM_SEQUENCE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_MATRIX_DIMENSION]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_PERFORMANCE]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_PERFORMANCE].[PRF_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_PERFORMANCE].[PRF_PROCESSOR_PERCENTAGE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_PERFORMANCE].[PRF_MEMORY_AVAILABLE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_PERFORMANCE].[PRF_REQUEST_QUEUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_PERFORMANCE].[PRF_REQUEST_PERSECOND]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_PERFORMANCE].[PRF_DATETIME]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_PERFORMANCE].[PRF_SERVER]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="214" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_PERFORMANCE].[IX_PRF_DATETIME]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_PERFORMANCE].[PRF_DATETIME]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_PERFORMANCE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_PERFORMANCE].[IX_PRF_SERVER]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_PERFORMANCE].[PRF_SERVER]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_PERFORMANCE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_PERIOD]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_PERIOD].[PRD_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_PERIOD].[PRD_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_PERIOD].[PRD_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_PERIOD].[PRD_FRQ_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="215" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_PERIOD].[IX_PRD_CODE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_PERIOD].[PRD_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_PERIOD]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_PERIOD].[IX_PRD_FRQ_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_PERIOD].[PRD_FRQ_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_PERIOD]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_PRODUCT]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_PRODUCT].[PRC_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_PRODUCT].[PRC_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_PRODUCT].[PRC_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_PRODUCT].[PRC_LNG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_PRODUCT].[PRC_DTG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="65" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="216" />
			<AttachedAnnotation Disambiguator="121" />
			<AttachedAnnotation Disambiguator="122" />
			<AttachedAnnotation Disambiguator="123" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_PRODUCT].[IX_PRC_CODE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_PRODUCT].[PRC_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_PRODUCT].[IX_PRC_DELETE_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_PRODUCT].[PRC_DELETE_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_PRODUCT].[IX_PRC_DTG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_PRODUCT].[PRC_DTG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_PRODUCT].[IX_PRC_LNG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_PRODUCT].[PRC_LNG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_PRODUCT].[IX_PRC_SBJ_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_PRODUCT].[PRC_SBJ_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_PRODUCT_LANGUAGE]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_LNG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_PRC_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="217" />
			<AttachedAnnotation Disambiguator="119" />
			<AttachedAnnotation Disambiguator="120" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_PRODUCT_LANGUAGE].[IX_PLG_LNG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_LNG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_PRODUCT_LANGUAGE].[IX_PLG_PRC_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_PRODUCT_LANGUAGE].[PLG_PRC_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_PRODUCT_LANGUAGE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_RELEASE]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_RELEASE].[RLS_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_RELEASE].[RLS_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="253" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_RELEASE].[RLS_VERSION]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_RELEASE].[RLS_REVISION]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="72" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="70" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="73" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="67" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="66" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="71" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_RELEASE].[RLS_CMM_ID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="68" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_RELEASE].[RLS_DTG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="69" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="218" />
			<AttachedAnnotation Disambiguator="124" />
			<AttachedAnnotation Disambiguator="125" />
			<AttachedAnnotation Disambiguator="126" />
			<AttachedAnnotation Disambiguator="127" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_RELEASE].[IX_RLS_ANALYTICAL_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_RELEASE].[RLS_ANALYTICAL_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_RELEASE].[IX_RLS_ARCHIVE_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_RELEASE].[IX_RLS_CMM_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_RELEASE].[RLS_CMM_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_RELEASE].[IX_RLS_CODE]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_RELEASE].[IX_RLS_DELETE_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_RELEASE].[IX_RLS_DTG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_RELEASE].[RLS_DTG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_RELEASE].[IX_RLS_EXCEPTIONAL_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_RELEASE].[IX_RLS_EXPERIMENTAL_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_RELEASE].[IX_RLS_GRP_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_RELEASE].[IX_RLS_LIVE_DATETIME_FROM]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_RELEASE].[IX_RLS_LIVE_DATETIME_TO]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_RELEASE].[IX_RLS_LIVE_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_RELEASE].[IX_RLS_PRC_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_RELEASE].[RLS_PRC_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_RELEASE].[IX_RLS_RESERVATION_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_RELEASE].[IX_RLS_REVISION]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_RELEASE].[IX_RLS_VERSION]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_STATISTIC]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_STATISTIC].[STT_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_STATISTIC].[STT_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_STATISTIC].[STT_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_STATISTIC].[STT_UNIT]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_STATISTIC].[STT_DECIMAL]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="74" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_STATISTIC].[STT_MTR_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="219" />
			<AttachedAnnotation Disambiguator="128" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_STATISTIC].[IX_STT_CODE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_STATISTIC].[STT_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_STATISTIC]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_STATISTIC].[IX_STT_MTR_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_STATISTIC].[STT_MTR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_STATISTIC]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_SUBJECT]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_SUBJECT].[SBJ_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_SUBJECT].[SBJ_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="254" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_SUBJECT].[SBJ_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_SUBJECT].[SBJ_LNG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_SUBJECT].[SBJ_DTG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="75" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_SUBJECT].[SBJ_THM_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="252" />
			<AttachedAnnotation Disambiguator="131" />
			<AttachedAnnotation Disambiguator="132" />
			<AttachedAnnotation Disambiguator="184" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_SUBJECT].[IX_SBJ_CODE]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_SUBJECT].[SBJ_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_SUBJECT].[IX_SBJ_DELETE_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_SUBJECT].[SBJ_DELETE_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_SUBJECT].[IX_SBJ_DTG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_SUBJECT].[SBJ_DTG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_SUBJECT].[IX_SBJ_LNG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_SUBJECT].[SBJ_LNG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_SUBJECT].[IX_SBJ_THM_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_SUBJECT].[SBJ_THM_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_SUBJECT_LANGUAGE]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_LNG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_SBJ_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="220" />
			<AttachedAnnotation Disambiguator="129" />
			<AttachedAnnotation Disambiguator="130" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_SUBJECT_LANGUAGE].[IX_SLG_LNG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_LNG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_SUBJECT_LANGUAGE].[IX_SLG_SBJ_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_SUBJECT_LANGUAGE].[SLG_SBJ_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_SUBJECT_LANGUAGE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_SUBSCRIBER]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_SUBSCRIBER].[SBR_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_SUBSCRIBER].[SBR_USR_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_SUBSCRIBER].[SBR_UID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_SUBSCRIBER].[SBR_PREFERENCE]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_SUBSCRIBER].[SBR_DELETE_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_SUBSCRIBER].[SBR_KEY]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="221" />
			<AttachedAnnotation Disambiguator="133" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_SUBSCRIBER].[IX_SBR_DELETE_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_SUBSCRIBER].[SBR_DELETE_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_SUBSCRIBER].[IX_SBR_KEY]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_SUBSCRIBER].[SBR_KEY]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_SUBSCRIBER].[IX_SBR_UID]">
			<Property Name="IsUnique" Value="True" />
			<Property Name="FilterPredicate">
				<Value><![CDATA[([SBR_DELETE_FLAG]=(0))]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER].[SBR_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_SUBSCRIBER].[SBR_UID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_SUBSCRIBER].[IX_SBR_USR_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_SUBSCRIBER].[SBR_USR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_SUBSCRIBER]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_THEME]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_THEME].[THM_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_THEME].[THM_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="255" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_THEME].[THM_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_THEME].[THM_LNG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_THEME].[THM_DTG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_THEME].[THM_DELETE_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="76" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="223" />
			<AttachedAnnotation Disambiguator="136" />
			<AttachedAnnotation Disambiguator="137" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_THEME].[IX_THM_CODE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_THEME].[THM_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_THEME]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_THEME].[IX_THM_DELETE_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_THEME].[THM_DELETE_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_THEME]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_THEME].[IX_THM_DTG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_THEME].[THM_DTG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_THEME]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_THEME].[IX_THM_LNG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_THEME].[THM_LNG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_THEME]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_THEME_LANGUAGE]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_THEME_LANGUAGE].[TLG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_THEME_LANGUAGE].[TLG_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_THEME_LANGUAGE].[TLG_LNG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_THEME_LANGUAGE].[TLG_THM_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="224" />
			<AttachedAnnotation Disambiguator="134" />
			<AttachedAnnotation Disambiguator="135" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_THEME_LANGUAGE].[IX_TLG_LNG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_THEME_LANGUAGE].[TLG_LNG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_THEME_LANGUAGE].[IX_TLG_THM_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_THEME_LANGUAGE].[TLG_THM_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_THEME_LANGUAGE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_TRACE]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_TRACE].[TRC_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_TRACE].[TRC_METHOD]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_TRACE].[TRC_PARAMS]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2048" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_TRACE].[TRC_IP]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="15" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_TRACE].[TRC_USERAGENT]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2048" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_TRACE].[TRC_USERNAME]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_TRACE].[TRC_DATETIME]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="225" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_TRACE].[IX_TRC_DATETIME]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_TRACE].[TRC_DATETIME]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_TRACE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_TRACE].[IX_TRC_IP]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_TRACE].[TRC_IP]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_TRACE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_TRACE].[IX_TRC_METHOD]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_TRACE].[TRC_METHOD]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_TRACE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_TRACE].[IX_TRC_USERNAME]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_TRACE].[TRC_USERNAME]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_TRACE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_USER]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_USER].[USR_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_USER].[USR_LNG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="226" />
			<AttachedAnnotation Disambiguator="138" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_USER].[IX_USR_LNG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_USER].[USR_LNG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_USER_QUERY]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_USER_QUERY].[SQR_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_USER_QUERY].[SQR_SNIPPET_TYPE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_USER_QUERY].[SQR_SNIPPET_TAGNAME]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_USER_QUERY].[SQR_SNIPPET_MATRIX]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_USER_QUERY].[SQR_SNIPPET_QUERY]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varbinary]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_USER_QUERY].[SQR_SNIPPET_ISOGRAM]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_USER_QUERY].[SQR_FLUID_TIME]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_USER_QUERY].[SQR_USR_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="227" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="256" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_USER_QUERY].[IX_SQR_USR_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_USER_QUERY].[SQR_USR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[TD_USER_QUERY_TD_USER]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY].[SQR_USR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_USER_QUERY]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TD_USER].[USR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TD_USER]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="256" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_VARIABLE]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_VARIABLE].[VRB_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_VARIABLE].[VRB_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_VARIABLE].[VRB_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_VARIABLE].[VRB_CLS_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_VARIABLE].[VRB_ELIMINATION_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="23" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="228" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_VARIABLE].[IX_VRB_CLS_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_VARIABLE].[VRB_CLS_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_VARIABLE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_VARIABLE].[IX_VRB_CODE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_VARIABLE].[VRB_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_VARIABLE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_VARIABLE].[IX_VRB_ELIMINATION_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_VARIABLE].[VRB_ELIMINATION_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_VARIABLE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_WORKFLOW_REQUEST]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RQS_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CMM_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DATETIME]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_EXCEPTIONAL_FLAG]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RESERVATION_FLAG]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ARCHIVE_FLAG]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_EXPERIMENTAL_FLAG]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="79" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CURRENT_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="77" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DTG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="78" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="229" />
			<AttachedAnnotation Disambiguator="139" />
			<AttachedAnnotation Disambiguator="140" />
			<AttachedAnnotation Disambiguator="141" />
			<AttachedAnnotation Disambiguator="142" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_WORKFLOW_REQUEST].[IX_WRQ_ARCHIVE_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ARCHIVE_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_WORKFLOW_REQUEST].[IX_WRQ_CMM_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CMM_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_WORKFLOW_REQUEST].[IX_WRQ_CURRENT_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CURRENT_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_WORKFLOW_REQUEST].[IX_WRQ_DELETE_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_WORKFLOW_REQUEST].[IX_WRQ_DTG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DTG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_WORKFLOW_REQUEST].[IX_WRQ_EXCEPTIONAL_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_EXCEPTIONAL_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_WORKFLOW_REQUEST].[IX_WRQ_EXPERIMENTAL_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_EXPERIMENTAL_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_WORKFLOW_REQUEST].[IX_WRQ_RESERVATION_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RESERVATION_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_WORKFLOW_REQUEST].[IX_WRQ_RLS_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_WORKFLOW_REQUEST].[IX_WRQ_RQS_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RQS_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_WORKFLOW_RESPONSE]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_RSP_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_CMM_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_WRQ_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_DTG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="230" />
			<AttachedAnnotation Disambiguator="143" />
			<AttachedAnnotation Disambiguator="144" />
			<AttachedAnnotation Disambiguator="145" />
			<AttachedAnnotation Disambiguator="146" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_WORKFLOW_RESPONSE].[IX_WRS_CMM_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_CMM_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_WORKFLOW_RESPONSE].[IX_WRS_DTG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_DTG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_WORKFLOW_RESPONSE].[IX_WRS_RSP_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_RSP_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_WORKFLOW_RESPONSE].[IX_WRS_WRQ_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_WRQ_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TD_WORKFLOW_SIGNOFF]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_SGN_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_CMM_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_WRS_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_DTG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="231" />
			<AttachedAnnotation Disambiguator="147" />
			<AttachedAnnotation Disambiguator="148" />
			<AttachedAnnotation Disambiguator="149" />
			<AttachedAnnotation Disambiguator="150" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_WORKFLOW_SIGNOFF].[IX_WSG_CMM_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_CMM_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_WORKFLOW_SIGNOFF].[IX_WSG_DTG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_DTG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_WORKFLOW_SIGNOFF].[IX_WSG_SGN_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_SGN_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TD_WORKFLOW_SIGNOFF].[IX_WSG_WRS_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_WRS_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlSequence" Name="[dbo].[THM_CODE_seq]">
			<Property Name="HasNoMinValue" Value="False" />
			<Property Name="MinValue" Value="1" />
			<Property Name="Increment" Value="1" />
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="TypeSpecifier">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[int]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[THM_CODE_SEQUENCE]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(NEXT VALUE FOR [dbo].[THM_CODE_seq])]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TD_THEME]" />
				</Entry>
			</Relationship>
			<Relationship Name="ExpressionDependencies">
				<Entry>
					<References Name="[dbo].[THM_CODE_seq]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TD_THEME].[THM_CODE]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="255" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_VERSION]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="2" />
									<Property Name="Precision" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_CST_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="31" />
			<AttachedAnnotation Disambiguator="151" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[IX_UQ_TM_APP_SETTING_CONFIG_VERSION]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_VERSION]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_CST_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TM_AUDITING_HISTORY]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_AUDITING_HISTORY].[DHT_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTP_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_AUDITING_HISTORY].[DHT_CCN_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DATETIME]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="232" />
			<AttachedAnnotation Disambiguator="152" />
			<AttachedAnnotation Disambiguator="153" />
			<AttachedAnnotation Disambiguator="154" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_AUDITING_HISTORY].[IX_DHT_CCN_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_CCN_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_AUDITING_HISTORY].[IX_DHT_DTG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_AUDITING_HISTORY].[IX_DHT_DTP_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTP_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TM_CHANNEL_SUBSCRIPTION]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_CHN_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_USR_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_DELETE_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="196" />
			<AttachedAnnotation Disambiguator="98" />
			<AttachedAnnotation Disambiguator="155" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[IX_CSB_CHN_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_CHN_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[IX_CSB_DELETE_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_DELETE_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[IX_CSB_USR_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION].[CSB_USR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_CHANNEL_SUBSCRIPTION]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TM_DATA_CELL]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_DATA_CELL].[DTC_TDT_IX]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_DATA_CELL].[DTC_MTR_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_DATA_CELL].[DTC_VRB_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_DATA_CELL].[IX_DTC_OPTIMISER]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_DATA_CELL].[DTC_MTR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_DATA_CELL].[DTC_VRB_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_DATA_CELL].[DTC_TDT_IX]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_DATA_CELL]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TM_GROUP_ACCOUNT]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_GRP_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_CCN_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_APPROVE_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="80" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_DTG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_DELETE_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="81" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="233" />
			<AttachedAnnotation Disambiguator="156" />
			<AttachedAnnotation Disambiguator="157" />
			<AttachedAnnotation Disambiguator="158" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_GROUP_ACCOUNT].[IX_GCC_APPROVE_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_APPROVE_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_GROUP_ACCOUNT].[IX_GCC_CNN_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_CCN_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_GROUP_ACCOUNT].[IX_GCC_DELETE_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_DELETE_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_GROUP_ACCOUNT].[IX_GCC_DTG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_DTG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_GROUP_ACCOUNT].[IX_GCC_GRP_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_GRP_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION].[HSV_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION].[HSV_VERSION]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="2" />
									<Property Name="Precision" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION].[HSV_CST_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION].[HSV_UPDATED_AT]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="21" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION].[HSV_UPDATED_BY]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="22" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION].[HSV_ASV_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="30" />
			<AttachedAnnotation Disambiguator="160" />
			<AttachedAnnotation Disambiguator="161" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION_DEPLOY]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION_DEPLOY].[HCD_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION_DEPLOY].[HCD_DEPLOYED_TIME]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="12" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION_DEPLOY].[HCD_HSV_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION_DEPLOY].[HCD_IP_ADDRESS]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="24" />
			<AttachedAnnotation Disambiguator="159" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TM_MATRIX_FLAG]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_MATRIX_FLAG].[MFG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_MATRIX_FLAG].[MFG_FLG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_MATRIX_FLAG].[MFG_MTR_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_MATRIX_FLAG].[MFG_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_MATRIX_FLAG].[MFG_PUBLIC]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="234" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_MATRIX_FLAG].[IX_MFG_FLG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_MATRIX_FLAG].[MFG_FLG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_MATRIX_FLAG]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_MATRIX_FLAG].[IX_MFG_MTR_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_MATRIX_FLAG].[MFG_MTR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_MATRIX_FLAG]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TM_REASON_RELEASE]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_REASON_RELEASE].[RSR_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_REASON_RELEASE].[RSR_RSN_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_REASON_RELEASE].[RSR_RLS_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_REASON_RELEASE].[RSR_CMM_ID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_REASON_RELEASE].[RSR_DTG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_REASON_RELEASE].[RSR_DELETE_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="82" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="235" />
			<AttachedAnnotation Disambiguator="162" />
			<AttachedAnnotation Disambiguator="163" />
			<AttachedAnnotation Disambiguator="164" />
			<AttachedAnnotation Disambiguator="165" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_REASON_RELEASE].[IX_RSR_CMM_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_REASON_RELEASE].[RSR_CMM_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_REASON_RELEASE].[IX_RSR_DELETE_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_REASON_RELEASE].[RSR_DELETE_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_REASON_RELEASE].[IX_RSR_DTG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_REASON_RELEASE].[RSR_DTG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_REASON_RELEASE].[IX_RSR_RSL_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_REASON_RELEASE].[RSR_RLS_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_REASON_RELEASE].[IX_RSR_RSN_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_REASON_RELEASE].[RSR_RSN_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_REASON_RELEASE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TM_RELEASE_FLAG]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_RELEASE_FLAG].[RFG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_RELEASE_FLAG].[RFG_FLG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_RELEASE_FLAG].[RFG_RLS_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_RELEASE_FLAG].[RFG_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_RELEASE_FLAG].[RFG_PUBLIC]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="236" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_RELEASE_FLAG].[IX_RFG_FLG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_RELEASE_FLAG].[RFG_FLG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_RELEASE_FLAG]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_RELEASE_FLAG].[IX_RFG_RLS_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_RELEASE_FLAG].[RFG_RLS_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_RELEASE_FLAG]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TM_RELEASE_PRODUCT]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_RLS_ID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_PRC_ID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DTG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DELETE_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="237" />
			<AttachedAnnotation Disambiguator="166" />
			<AttachedAnnotation Disambiguator="167" />
			<AttachedAnnotation Disambiguator="168" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_RELEASE_PRODUCT].[IX_RPR_DTG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_DTG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_RELEASE_PRODUCT].[IX_RPR_PRC_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_PRC_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_RELEASE_PRODUCT].[IX_RPR_RLS_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_RELEASE_PRODUCT].[RPR_RLS_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_RELEASE_PRODUCT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TM_TABLE_SUBSCRIPTION]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_TABLE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_USR_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_DELETE_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="222" />
			<AttachedAnnotation Disambiguator="169" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_TABLE_SUBSCRIPTION].[IX_TSB_TABLE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_TABLE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_TABLE_SUBSCRIPTION].[IX_TSB_USR_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_TABLE_SUBSCRIPTION].[TSB_USR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_TABLE_SUBSCRIPTION]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TM_WORKFLOW_REQUEST_FLAG]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_WORKFLOW_REQUEST_FLAG].[WFG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_WORKFLOW_REQUEST_FLAG].[WFG_FLG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_WORKFLOW_REQUEST_FLAG].[WFG_WRQ_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_WORKFLOW_REQUEST_FLAG].[WFG_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TM_WORKFLOW_REQUEST_FLAG].[WFG_PUBLIC]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="238" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_WORKFLOW_REQUEST_FLAG].[IX_WFG_FLG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_WORKFLOW_REQUEST_FLAG].[WFG_FLG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_WORKFLOW_REQUEST_FLAG]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TM_WORKFLOW_REQUEST_FLAG].[IX_WFG_WRQ_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TM_WORKFLOW_REQUEST_FLAG].[WFG_WRQ_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TM_WORKFLOW_REQUEST_FLAG]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TR_BROWSER_ANALYTIC]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_BROWSER_ANALYTIC].[BRW_NLT_DATE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_BROWSER_ANALYTIC].[BRW_BROWSER]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_BROWSER_ANALYTIC].[BRW_TOTAL]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TR_BROWSER_ANALYTIC].[IX_TR_BROWSER_ANALYTIC]">
			<Property Name="IsClustered" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TR_BROWSER_ANALYTIC].[BRW_NLT_DATE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TR_BROWSER_ANALYTIC]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TR_DATASET_LANGUAGE_ANALYTIC]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_DATASET_LANGUAGE_ANALYTIC].[DSL_NLT_DATE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_DATASET_LANGUAGE_ANALYTIC].[DSL_LNG_ISO_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_DATASET_LANGUAGE_ANALYTIC].[DSL_LNG_ISO_NAME]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_DATASET_LANGUAGE_ANALYTIC].[DSL_TOTAL]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TR_DATASET_LANGUAGE_ANALYTIC].[IX_TR_DS_LANGUAGE_ANALYTIC]">
			<Property Name="IsClustered" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TR_DATASET_LANGUAGE_ANALYTIC].[DSL_NLT_DATE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TR_DATASET_LANGUAGE_ANALYTIC]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TR_ENVIRONMENT_LANGUAGE_ANALYTIC]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_ENVIRONMENT_LANGUAGE_ANALYTIC].[NVL_NLT_DATE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_ENVIRONMENT_LANGUAGE_ANALYTIC].[NVL_LNG_ISO_CODE]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_ENVIRONMENT_LANGUAGE_ANALYTIC].[NVL_TOTAL]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TR_ENVIRONMENT_LANGUAGE_ANALYTIC].[IX_TR_ENVIRONMENT_LANGUAGE_ANALYTIC]">
			<Property Name="IsClustered" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TR_ENVIRONMENT_LANGUAGE_ANALYTIC].[NVL_NLT_DATE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TR_ENVIRONMENT_LANGUAGE_ANALYTIC]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TR_FORMAT_ANALYTIC]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_FORMAT_ANALYTIC].[FNL_NLT_DATE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_FORMAT_ANALYTIC].[FNL_FORMAT]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_FORMAT_ANALYTIC].[FNL_TOTAL]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TR_FORMAT_ANALYTIC].[IX_TR_FORMAT_ANALYTIC]">
			<Property Name="IsClustered" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TR_FORMAT_ANALYTIC].[FNL_NLT_DATE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TR_FORMAT_ANALYTIC]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TR_MATRIX_ANALYTIC]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_MTR_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_PRC_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_PRC_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_SBJ_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_SBJ_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_BOT]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="83" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_M2M]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="84" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_USER]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="86" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_WIDGET]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="87" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_TOTAL]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="85" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_NLT_DATE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TR_MATRIX_ANALYTIC].[IX_MNL_MTR_CODE ]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_MTR_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TR_MATRIX_ANALYTIC].[IX_MNL_NLT_DATE]">
			<Property Name="IsClustered" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_NLT_DATE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TR_MATRIX_ANALYTIC].[IX_MNL_PRC_CODE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_PRC_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TR_MATRIX_ANALYTIC].[IX_MNL_SBJ_CODE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TR_MATRIX_ANALYTIC].[MNL_SBJ_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TR_MATRIX_ANALYTIC]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TR_OS_ANALYTIC]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_OS_ANALYTIC].[SNL_NLT_DATE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_OS_ANALYTIC].[SNL_OS]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_OS_ANALYTIC].[SNL_TOTAL]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TR_OS_ANALYTIC].[IX_TR_OS_ANALYTIC]">
			<Property Name="IsClustered" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TR_OS_ANALYTIC].[SNL_NLT_DATE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TR_OS_ANALYTIC]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TR_REFERER_ANALYTIC]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_REFERER_ANALYTIC].[RFR_NLT_DATE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_REFERER_ANALYTIC].[RFR_REFERER]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TR_REFERER_ANALYTIC].[RFR_TOTAL]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TR_REFERER_ANALYTIC].[IX_TR_REFERER_ANALYTIC]">
			<Property Name="IsClustered" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TR_REFERER_ANALYTIC].[RFR_NLT_DATE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TR_REFERER_ANALYTIC]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDmlTrigger" Name="[dbo].[TRIG_TM_APP_SETTING_CONFIG_VERSION_INSERT]">
			<Property Name="IsInsertTrigger" Value="True" />
			<Property Name="SqlTriggerType" Value="2" />
			<Property Name="BodyScript">
				<Value><![CDATA[ BEGIN
           SET NOCOUNT ON;
           INSERT INTO TM_HISTORY_APP_SETTING_CONFIG_VERSION ([HSV_ASV_ID], [HSV_VERSION], [HSV_CST_ID])
           SELECT A.ASV_ID,
                  A.ASV_VERSION,
                  A.ASV_CST_ID
           FROM   TM_APP_SETTING_CONFIG_VERSION AS a
                  INNER JOIN
                  inserted AS i
                  ON a.ASV_ID = i.ASV_ID;
       END
       IF NOT EXISTS (SELECT *
                      FROM   INFORMATION_SCHEMA.TABLES
                      WHERE  TABLE_NAME = N'TM_HISTORY_APP_SETTING_CONFIG_VERSION_DEPLOY')
           BEGIN
               CREATE TABLE [dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION_DEPLOY] (
                   [HCD_ID]            INT           IDENTITY (1, 1) NOT NULL,
                   [HCD_DEPLOYED_TIME] DATETIME      DEFAULT getdate() NOT NULL,
                   [HCD_ASV_ID]        INT           NOT NULL,
                   [HCD_IP_ADDRESS]    VARCHAR (100) NOT NULL,
                   PRIMARY KEY CLUSTERED ([HCD_ID] ASC),
                   CONSTRAINT [FK_TM_HISTORY_APP_SETTING_CONFIG_VERSION_DEPLOY_TM_APP_SETTING_CONFIG_VERSION] FOREIGN KEY (HCD_ASV_ID) REFERENCES [TM_APP_SETTING_CONFIG_VERSION] ([ASV_ID])
               );
           END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION].[HSV_ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION].[HSV_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION].[HSV_CST_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_CST_ID]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION_DEPLOY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION_DEPLOY].[HCD_ID]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION_DEPLOY].[HCD_DEPLOYED_TIME]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION_DEPLOY].[HCD_IP_ADDRESS]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION_DEPLOY].[HCD_ID]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parent">
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Offset" Value="1117" />
				<Property Name="Length" Value="1382" />
				<Property Name="StartLine" Value="33" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE TRIGGER TRIG_TM_APP_SETTING_CONFIG_VERSION_INSERT&#xD;&#xA;    ON TM_APP_SETTING_CONFIG_VERSION&#xD;&#xA;    AFTER INSERT&#xD;&#xA;    AS" />
			</Annotation>
		</Element>
		<Element Type="SqlDmlTrigger" Name="[dbo].[TRIG_TM_APP_SETTING_CONFIG_VERSION_UPDATE]">
			<Property Name="IsUpdateTrigger" Value="True" />
			<Property Name="SqlTriggerType" Value="2" />
			<Property Name="BodyScript">
				<Value><![CDATA[ BEGIN
           SET NOCOUNT ON;
           INSERT INTO TM_HISTORY_APP_SETTING_CONFIG_VERSION ([HSV_VERSION], [HSV_CST_ID], [HSV_ASV_ID])
           SELECT A.ASV_VERSION,
                  A.ASV_CST_ID,
                  A.ASV_ID
           FROM   TM_APP_SETTING_CONFIG_VERSION AS a
                  INNER JOIN
                  inserted AS i
                  ON a.ASV_ID = i.[ASV_ID];
       END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION].[HSV_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION].[HSV_CST_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_HISTORY_APP_SETTING_CONFIG_VERSION].[HSV_ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_CST_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION].[ASV_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parent">
				<Entry>
					<References Name="[dbo].[TM_APP_SETTING_CONFIG_VERSION]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Offset" Value="578" />
				<Property Name="Length" Value="529" />
				<Property Name="StartLine" Value="16" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE TRIGGER TRIG_TM_APP_SETTING_CONFIG_VERSION_UPDATE&#xD;&#xA;    ON TM_APP_SETTING_CONFIG_VERSION&#xD;&#xA;    AFTER UPDATE&#xD;&#xA;    AS" />
			</Annotation>
		</Element>
		<Element Type="SqlDmlTrigger" Name="[dbo].[TRIG_TS_API_SETTING_INSERT]">
			<Property Name="IsInsertTrigger" Value="True" />
			<Property Name="SqlTriggerType" Value="2" />
			<Property Name="BodyScript">
				<Value><![CDATA[ BEGIN
           SET NOCOUNT ON;
           INSERT INTO TS_HISTORY_API_SETTING ([HPI_ASV_ID], [HPI_KEY], [HPI_VALUE], [HPI_DESCRIPTION], [HPI_API_ID])
           SELECT a.API_ASV_ID,
                  a.API_KEY,
                  a.API_VALUE,
                  a.API_DESCRIPTION,
                  a.API_ID
           FROM   TS_API_SETTING AS a
                  INNER JOIN
                  inserted AS i
                  ON a.API_ID = i.API_ID;
       END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TS_HISTORY_API_SETTING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_HISTORY_API_SETTING].[HPI_ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_HISTORY_API_SETTING].[HPI_KEY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_HISTORY_API_SETTING].[HPI_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_HISTORY_API_SETTING].[HPI_DESCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_HISTORY_API_SETTING].[HPI_API_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_KEY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_DESCRIPTION]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parent">
				<Entry>
					<References Name="[dbo].[TS_API_SETTING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Offset" Value="1266" />
				<Property Name="Length" Value="561" />
				<Property Name="StartLine" Value="38" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE TRIGGER TRIG_TS_API_SETTING_INSERT&#xD;&#xA;    ON TS_API_SETTING&#xD;&#xA;    AFTER INSERT&#xD;&#xA;    AS" />
			</Annotation>
		</Element>
		<Element Type="SqlDmlTrigger" Name="[dbo].[TRIG_TS_API_SETTING_UPDATE]">
			<Property Name="IsUpdateTrigger" Value="True" />
			<Property Name="SqlTriggerType" Value="2" />
			<Property Name="BodyScript">
				<Value><![CDATA[ BEGIN
           SET NOCOUNT ON;
           INSERT INTO TS_HISTORY_API_SETTING ([HPI_ASV_ID], [HPI_KEY], [HPI_VALUE], [HPI_DESCRIPTION], [HPI_API_ID])
           SELECT a.API_ASV_ID,
                  a.API_KEY,
                  a.API_VALUE,
                  a.API_DESCRIPTION,
                  a.API_ID
           FROM   TS_API_SETTING AS a
                  INNER JOIN
                  inserted AS i
                  ON a.API_ID = i.API_ID;
       END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TS_HISTORY_API_SETTING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_HISTORY_API_SETTING].[HPI_ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_HISTORY_API_SETTING].[HPI_KEY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_HISTORY_API_SETTING].[HPI_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_HISTORY_API_SETTING].[HPI_DESCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_HISTORY_API_SETTING].[HPI_API_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_KEY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_API_SETTING].[API_DESCRIPTION]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parent">
				<Entry>
					<References Name="[dbo].[TS_API_SETTING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Offset" Value="695" />
				<Property Name="Length" Value="561" />
				<Property Name="StartLine" Value="19" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE TRIGGER TRIG_TS_API_SETTING_UPDATE&#xD;&#xA;    ON TS_API_SETTING&#xD;&#xA;    AFTER UPDATE&#xD;&#xA;    AS" />
			</Annotation>
		</Element>
		<Element Type="SqlDmlTrigger" Name="[dbo].[TRIG_TS_APP_SETTING_INSERT]">
			<Property Name="IsInsertTrigger" Value="True" />
			<Property Name="SqlTriggerType" Value="2" />
			<Property Name="BodyScript">
				<Value><![CDATA[ BEGIN
           SET NOCOUNT ON;
           INSERT INTO TS_HISTORY_APP_SETTING ([HPP_ASV_ID], [HPP_KEY], [HPP_VALUE], [HPP_DESCRIPTION], [HPP_APP_ID])
           SELECT a.APP_ASV_ID,
                  a.APP_KEY,
                  a.APP_VALUE,
                  a.APP_DESCRIPTION,
                  a.APP_ID
           FROM   TS_APP_SETTING AS a
                  INNER JOIN
                  inserted AS i
                  ON a.APP_ID = i.APP_ID;
       END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TS_HISTORY_APP_SETTING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_HISTORY_APP_SETTING].[HPP_ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_HISTORY_APP_SETTING].[HPP_KEY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_HISTORY_APP_SETTING].[HPP_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_HISTORY_APP_SETTING].[HPP_DESCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_HISTORY_APP_SETTING].[HPP_APP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_KEY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_DESCRIPTION]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parent">
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Offset" Value="1266" />
				<Property Name="Length" Value="561" />
				<Property Name="StartLine" Value="38" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE TRIGGER TRIG_TS_APP_SETTING_INSERT&#xD;&#xA;    ON TS_APP_SETTING&#xD;&#xA;    AFTER INSERT&#xD;&#xA;    AS" />
			</Annotation>
		</Element>
		<Element Type="SqlDmlTrigger" Name="[dbo].[TRIG_TS_APP_SETTING_UPDATE]">
			<Property Name="IsUpdateTrigger" Value="True" />
			<Property Name="SqlTriggerType" Value="2" />
			<Property Name="BodyScript">
				<Value><![CDATA[ BEGIN
           SET NOCOUNT ON;
           INSERT INTO TS_HISTORY_APP_SETTING ([HPP_ASV_ID], [HPP_KEY], [HPP_VALUE], [HPP_DESCRIPTION], [HPP_APP_ID])
           SELECT a.APP_ASV_ID,
                  a.APP_KEY,
                  a.APP_VALUE,
                  a.APP_DESCRIPTION,
                  a.APP_ID
           FROM   TS_APP_SETTING AS a
                  INNER JOIN
                  inserted AS i
                  ON a.APP_ID = i.APP_ID;
       END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TS_HISTORY_APP_SETTING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_HISTORY_APP_SETTING].[HPP_ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_HISTORY_APP_SETTING].[HPP_KEY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_HISTORY_APP_SETTING].[HPP_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_HISTORY_APP_SETTING].[HPP_DESCRIPTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_HISTORY_APP_SETTING].[HPP_APP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_ASV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_KEY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING].[APP_DESCRIPTION]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parent">
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Offset" Value="695" />
				<Property Name="Length" Value="561" />
				<Property Name="StartLine" Value="19" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE TRIGGER TRIG_TS_APP_SETTING_UPDATE&#xD;&#xA;    ON TS_APP_SETTING&#xD;&#xA;    AFTER UPDATE&#xD;&#xA;    AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TS_API_SETTING]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_API_SETTING].[API_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_API_SETTING].[API_ASV_ID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_API_SETTING].[API_KEY]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_API_SETTING].[API_VALUE]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_API_SETTING].[API_DESCRIPTION]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_API_SETTING].[API_SENSITIVE_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="18" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="29" />
			<AttachedAnnotation Disambiguator="170" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_API_SETTING].[IX_UQ_TS_API_SETTING_APS_KEY]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_API_SETTING].[API_KEY]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_API_SETTING].[API_ASV_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_API_SETTING]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TS_APP_SETTING]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_APP_SETTING].[APP_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_APP_SETTING].[APP_ASV_ID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_APP_SETTING].[APP_KEY]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_APP_SETTING].[APP_VALUE]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_APP_SETTING].[APP_DESCRIPTION]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_APP_SETTING].[APP_SENSITIVE_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="15" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="27" />
			<AttachedAnnotation Disambiguator="171" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_APP_SETTING].[IX_UQ_TS_APP_SETTING_APS_KEY]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_APP_SETTING].[APP_KEY]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_APP_SETTING].[APP_ASV_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_APP_SETTING]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TS_AUDITING_TYPE]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_AUDITING_TYPE].[DTP_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_AUDITING_TYPE].[DTP_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_AUDITING_TYPE].[DTP_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="239" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TS_CHANNEL]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_CHANNEL].[CHN_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_CHANNEL].[CHN_NAME]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_CHANNEL].[CHN_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="240" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_CHANNEL].[IX_CHN_CODE]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_CHANNEL].[CHN_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_CHANNEL]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TS_CHANNEL_LANGUAGE]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_CHANNEL_LANGUAGE].[CHL_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_CHANNEL_LANGUAGE].[CHL_LNG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_CHANNEL_LANGUAGE].[CHL_CHN_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_CHANNEL_LANGUAGE].[CHL_CHN_NAME]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="241" />
			<AttachedAnnotation Disambiguator="172" />
			<AttachedAnnotation Disambiguator="173" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_CHANNEL_LANGUAGE].[IX_CHL_CHN_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_CHANNEL_LANGUAGE].[CHL_CHN_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_CHANNEL_LANGUAGE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TS_CONFIG_SETTING_TYPE]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="32" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_CONFIG_SETTING_TYPE].[IX_UQ_TS_CONFIG_SETTING_TYPE]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_CONFIG_SETTING_TYPE].[CST_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_CONFIG_SETTING_TYPE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TS_COPYRIGHT]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_COPYRIGHT].[CPR_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_COPYRIGHT].[CPR_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_COPYRIGHT].[CPR_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_COPYRIGHT].[CPR_URL]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2048" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_COPYRIGHT].[CPR_DTG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_COPYRIGHT].[CPR_DELETE_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="88" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="242" />
			<AttachedAnnotation Disambiguator="174" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_COPYRIGHT].[IX_CPR_CODE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_COPYRIGHT].[CPR_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_COPYRIGHT].[IX_CPR_DELETE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_COPYRIGHT].[CPR_DELETE_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_COPYRIGHT].[IX_CPR_DTG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_COPYRIGHT].[CPR_DTG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_COPYRIGHT].[IX_CPR_VALUE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_COPYRIGHT].[CPR_VALUE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_COPYRIGHT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TS_DIMENSION_ROLE]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_DIMENSION_ROLE].[DMR_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_DIMENSION_ROLE].[DMR_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_DIMENSION_ROLE].[DMR_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="201" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_DIMENSION_ROLE].[IX_DMR_CODE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_DIMENSION_ROLE].[DMR_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_DIMENSION_ROLE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TS_FLAG]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_FLAG].[FLG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_FLAG].[FLG_NAME]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="243" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TS_FORMAT]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_FORMAT].[FRM_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_FORMAT].[FRM_TYPE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_FORMAT].[FRM_VERSION]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_FORMAT].[FRM_DIRECTION]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="244" />
			<AttachedAnnotation Disambiguator="35" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_FORMAT].[IX_FRM_DIRECTION]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_FORMAT].[FRM_DIRECTION]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_FORMAT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_FORMAT].[IX_FRM_TYPE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_FORMAT].[FRM_TYPE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_FORMAT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_FORMAT].[IX_FRM_VERSION]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_FORMAT].[FRM_VERSION]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_FORMAT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TS_HISTORY_API_SETTING]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_HISTORY_API_SETTING].[HPI_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_HISTORY_API_SETTING].[HPI_ASV_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_HISTORY_API_SETTING].[HPI_KEY]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_HISTORY_API_SETTING].[HPI_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_HISTORY_API_SETTING].[HPI_DESCRIPTION]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_HISTORY_API_SETTING].[HPI_UPDATED_AT]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="16" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_HISTORY_API_SETTING].[HPI_UPDATED_BY]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="17" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_HISTORY_API_SETTING].[HPI_API_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="28" />
			<AttachedAnnotation Disambiguator="175" />
			<AttachedAnnotation Disambiguator="176" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TS_HISTORY_APP_SETTING]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_HISTORY_APP_SETTING].[HPP_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_HISTORY_APP_SETTING].[HPP_ASV_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_HISTORY_APP_SETTING].[HPP_KEY]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_HISTORY_APP_SETTING].[HPP_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_HISTORY_APP_SETTING].[HPP_DESCRIPTION]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_HISTORY_APP_SETTING].[HPP_APP_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_HISTORY_APP_SETTING].[HPP_UPDATED_AT]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="13" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_HISTORY_APP_SETTING].[HPP_UPDATED_BY]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="14" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="26" />
			<AttachedAnnotation Disambiguator="177" />
			<AttachedAnnotation Disambiguator="178" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TS_LANGUAGE]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_LANGUAGE].[LNG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_LANGUAGE].[LNG_ISO_NAME]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_LANGUAGE].[LNG_DTG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="89" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="245" />
			<AttachedAnnotation Disambiguator="179" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_LANGUAGE].[IX_LNG_DELETE_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_LANGUAGE].[IX_LNG_DTG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_LANGUAGE].[LNG_DTG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_LANGUAGE].[IX_LNG_ISO_CODE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TS_PRIVILEGE]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_PRIVILEGE].[PRV_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_PRIVILEGE].[PRV_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_PRIVILEGE].[PRV_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="246" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_PRIVILEGE].[IX_PRV_CODE]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_PRIVILEGE].[PRV_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TS_REASON]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_REASON].[RSN_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_REASON].[RSN_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_REASON].[RSN_VALUE_INTERNAL]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_REASON].[RSN_VALUE_EXTERNAL]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_REASON].[RSN_LNG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_REASON].[RSN_DTG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_REASON].[RSN_DELETE_FLAG]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="90" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="247" />
			<AttachedAnnotation Disambiguator="182" />
			<AttachedAnnotation Disambiguator="183" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_REASON].[IX_RSN_CODE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_REASON].[RSN_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_REASON]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_REASON].[IX_RSN_DELETE_FLAG]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_REASON].[RSN_DELETE_FLAG]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_REASON]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_REASON].[IX_RSN_DTG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_REASON].[RSN_DTG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_REASON]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_REASON].[IX_RSN_LNG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_REASON].[RSN_LNG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_REASON]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TS_REASON_LANGUAGE]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_REASON_LANGUAGE].[RLG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_REASON_LANGUAGE].[RLG_VALUE_INTERNAL]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_REASON_LANGUAGE].[RLG_VALUE_EXTERNAL]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_REASON_LANGUAGE].[RLG_LNG_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_REASON_LANGUAGE].[RLG_RSN_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="248" />
			<AttachedAnnotation Disambiguator="180" />
			<AttachedAnnotation Disambiguator="181" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_REASON_LANGUAGE].[IX_RLG_LNG_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_REASON_LANGUAGE].[RLG_LNG_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_REASON_LANGUAGE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_REASON_LANGUAGE].[IX_RLG_RSN_ID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_REASON_LANGUAGE].[RLG_RSN_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_REASON_LANGUAGE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TS_REQUEST]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_REQUEST].[RQS_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_REQUEST].[RQS_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_REQUEST].[RQS_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="249" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_REQUEST].[IX_RQS_CODE]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_REQUEST].[RQS_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_REQUEST]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TS_RESPONSE]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_RESPONSE].[RSP_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_RESPONSE].[RSP_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_RESPONSE].[RSP_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="250" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_RESPONSE].[IX_RSP_CODE]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_RESPONSE].[RSP_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_RESPONSE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TS_SIGNOFF]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_SIGNOFF].[SGN_ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_SIGNOFF].[SGN_CODE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TS_SIGNOFF].[SGN_VALUE]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="251" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[TS_SIGNOFF].[IX_SGN_CODE]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TS_SIGNOFF].[SGN_CODE]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[dbo].[ValueVarchar]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[ValueVarchar].[Value]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlView" Name="[dbo].[VW_PERFORMANCE_AVERAGES]">
			<Property Name="QueryScript">
				<Value><![CDATA[
SELECT PRF_SERVER
	,PRF_DATETIME
	,AVG(PRF_PROCESSOR_PERCENTAGE) AS 'AVG_PROCESSOR_PERCENTAGE'
	,AVG(PRF_MEMORY_AVAILABLE) AS 'AVG_MEMORY_AVAILABLE'
	,AVG(PRF_REQUEST_QUEUE) AS 'AVG_REQUEST_QUEUE'
	,AVG(PRF_REQUEST_PERSECOND) AS 'AVG_REQUEST_PERSECOND'
FROM TD_PERFORMANCE
GROUP BY PRF_SERVER
	,PRF_DATETIME]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[VW_PERFORMANCE_AVERAGES].[PRF_SERVER]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[TD_PERFORMANCE].[PRF_SERVER]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[VW_PERFORMANCE_AVERAGES].[PRF_DATETIME]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[TD_PERFORMANCE].[PRF_DATETIME]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[VW_PERFORMANCE_AVERAGES].[AVG_PROCESSOR_PERCENTAGE]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[VW_PERFORMANCE_AVERAGES].[AVG_MEMORY_AVAILABLE]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[VW_PERFORMANCE_AVERAGES].[AVG_REQUEST_QUEUE]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[VW_PERFORMANCE_AVERAGES].[AVG_REQUEST_PERSECOND]" />
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[TD_PERFORMANCE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PERFORMANCE].[PRF_SERVER]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PERFORMANCE].[PRF_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PERFORMANCE].[PRF_PROCESSOR_PERCENTAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PERFORMANCE].[PRF_MEMORY_AVAILABLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PERFORMANCE].[PRF_REQUEST_QUEUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_PERFORMANCE].[PRF_REQUEST_PERSECOND]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="274" />
				<Property Name="Length" Value="645" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Liam Millar&#xD;&#xA;-- Create date: 02/11/2020&#xD;&#xA;-- Description:&#x9;Gets the Latest Averages For the Performance Table, Grouped and ordered by server and datetime minute&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; VIEW [dbo].[VW_PERFORMANCE_AVERAGES]&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[VW_RELEASE_HISTORICAL]">
			<Property Name="QueryScript">
				<Value><![CDATA[
SELECT RLS_ID VRW_RLS_ID,
	MTR_ID VRW_MTR_ID
FROM TD_MATRIX
INNER JOIN TD_RELEASE
	ON RLS_ID = MTR_RLS_ID
		AND RLS_DELETE_FLAG = 0
		AND RLS_LIVE_FLAG = 1
		AND RLS_REVISION = 0
		AND getdate()>RLS_LIVE_DATETIME_TO

WHERE MTR_DELETE_FLAG = 0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[VW_RELEASE_HISTORICAL].[VRW_RLS_ID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[VW_RELEASE_HISTORICAL].[VRW_MTR_ID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="199" />
				<Property Name="Length" Value="497" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 06/10/2020&#xD;&#xA;-- Description:&#x9;Gets Historical Releases&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; VIEW VW_RELEASE_HISTORICAL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[VW_RELEASE_LATEST]">
			<Property Name="QueryScript">
				<Value><![CDATA[
SELECT RLS_ID VRL_RLS_ID,
	MTR_ID VRL_MTR_ID
FROM TD_MATRIX
INNER JOIN TD_RELEASE
	ON RLS_ID = MTR_RLS_ID
		AND RLS_DELETE_FLAG = 0
INNER JOIN (
	SELECT MTR.MTR_CODE LAST_MTR_CODE,
		RLS.RLS_VERSION AS MAX_RLS_VERSION,
		Max(RLS.RLS_REVISION) AS MAX_RLS_REVISION
	FROM TD_MATRIX MTR
	INNER JOIN TD_RELEASE RLS
		ON RLS.RLS_ID = MTR.MTR_RLS_ID
			AND MTR.MTR_DELETE_FLAG = 0
			AND RLS.RLS_DELETE_FLAG = 0
	INNER JOIN (
		SELECT MTR_INNER.MTR_CODE,
			MAX(RLS_INNER.RLS_VERSION) MAX_RLS_VERSION
		FROM TD_MATRIX MTR_INNER
		INNER JOIN TD_RELEASE RLS_INNER
			ON RLS_INNER.RLS_ID = MTR_INNER.MTR_RLS_ID
				AND MTR_INNER.MTR_DELETE_FLAG = 0
				AND RLS_INNER.RLS_DELETE_FLAG = 0
		GROUP BY MTR_INNER.MTR_CODE
		) a
		ON a.MTR_CODE = MTR.MTR_CODE
			AND a.MAX_RLS_VERSION = RLS.RLS_VERSION
	GROUP BY MTR.MTR_CODE,
		RLS.RLS_VERSION
	) last_mtr_release
	ON last_mtr_release.MAX_RLS_REVISION = RLS_REVISION
		AND last_mtr_release.MAX_RLS_VERSION = RLS_VERSION
		AND last_mtr_release.LAST_MTR_CODE = MTR_CODE
WHERE MTR_DELETE_FLAG = 0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[VW_RELEASE_LATEST].[VRL_RLS_ID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[VW_RELEASE_LATEST].[VRL_MTR_ID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="238" />
				<Property Name="Length" Value="1341" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Create date: 9 Nov 2018&#xD;&#xA;-- Description:&#x9;Gets the Latest Revision for the Latest Version of each Matrix&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; VIEW VW_RELEASE_LATEST&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[VW_RELEASE_LIVE_NEXT]">
			<Property Name="QueryScript">
				<Value><![CDATA[
-- by design we always have RLS_LIVE_DATETIME_TO set to NULL for the next release
-- once it goes to LIVE NOW, it will have RLS_LIVE_DATETIME_TO set once the following next release exists, or open - NULL otherwise
SELECT RLS_ID VRX_RLS_ID,
	MTR_ID VRX_MTR_ID
FROM TD_MATRIX
INNER JOIN TD_RELEASE
	ON RLS_ID = MTR_RLS_ID
		AND RLS_DELETE_FLAG = 0
		AND RLS_LIVE_FLAG = 1
		AND RLS_VERSION != 0
		AND RLS_REVISION = 0
		AND getDate() < RLS_LIVE_DATETIME_FROM
		AND RLS_LIVE_DATETIME_TO IS NULL
WHERE MTR_DELETE_FLAG = 0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[VW_RELEASE_LIVE_NEXT].[VRX_RLS_ID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[VW_RELEASE_LIVE_NEXT].[VRX_MTR_ID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="237" />
				<Property Name="Length" Value="812" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Create date: 27 Nov 2018&#xD;&#xA;-- Description:&#x9;Gets the release that will be live in the future ( not now )&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; VIEW VW_RELEASE_LIVE_NEXT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[VW_RELEASE_LIVE_NOW]">
			<Property Name="QueryScript">
				<Value><![CDATA[
SELECT RLS_ID VRN_RLS_ID,
	MTR_ID VRN_MTR_ID
FROM TD_MATRIX
INNER JOIN TD_RELEASE
	ON RLS_ID = MTR_RLS_ID
		AND RLS_DELETE_FLAG = 0
		AND RLS_LIVE_FLAG = 1
		AND RLS_VERSION != 0
		AND RLS_REVISION = 0
		AND getDate() >= RLS_LIVE_DATETIME_FROM
		AND (
			RLS_LIVE_DATETIME_TO IS NULL
			OR getDate() < RLS_LIVE_DATETIME_TO
			)
WHERE MTR_DELETE_FLAG = 0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="210" />
				<Property Name="Length" Value="621" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Create date: 27 Nov 2018&#xD;&#xA;-- Description:&#x9;Gets the release that is live now&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; VIEW VW_RELEASE_LIVE_NOW&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[VW_RELEASE_LIVE_PREVIOUS]">
			<Property Name="QueryScript">
				<Value><![CDATA[
SELECT RLS.RLS_ID AS VRP_RLS_ID
	,MTR.MTR_ID AS VRP_MTR_ID
FROM (
	SELECT MTR_CODE
		,MAX(RLS_VERSION) AS RLS_VERSION_MAX
	FROM TD_MATRIX
	INNER JOIN TD_RELEASE
		ON RLS_ID = MTR_RLS_ID
			AND RLS_DELETE_FLAG = 0
			AND RLS_LIVE_FLAG = 1
			AND RLS_VERSION != 0
			AND RLS_REVISION = 0
			AND (
				RLS_LIVE_DATETIME_FROM IS NOT NULL
				AND getDate() > RLS_LIVE_DATETIME_FROM
				)
			AND (
				RLS_LIVE_DATETIME_TO IS NOT NULL
				AND getDate() > RLS_LIVE_DATETIME_TO
				)
		AND (RLS_LIVE_DATETIME_TO IS NULL OR( DATEDIFF(s, RLS_LIVE_DATETIME_FROM,RLS_LIVE_DATETIME_TO) >0))
	WHERE MTR_DELETE_FLAG = 0
	GROUP BY MTR_CODE
	) q
INNER JOIN TD_MATRIX MTR
	ON MTR.MTR_CODE = Q.MTR_CODE
INNER JOIN TD_RELEASE RLS
	ON RLS.RLS_ID = MTR_RLS_ID
		AND RLS_VERSION = RLS_VERSION_MAX
		AND RLS_REVISION = 0
		AND RLS_DELETE_FLAG = 0
		AND RLS_LIVE_FLAG = 1]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[VW_RELEASE_LIVE_PREVIOUS].[VRP_RLS_ID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[VW_RELEASE_LIVE_PREVIOUS].[VRP_MTR_ID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="213" />
				<Property Name="Length" Value="1139" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: Revised 04/02/2020&#xD;&#xA;-- Description:&#x9;Gets the previous live release&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; VIEW VW_RELEASE_LIVE_PREVIOUS&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[VW_RELEASE_PENDING_LIVE]">
			<Property Name="QueryScript">
				<Value><![CDATA[
SELECT RLS_ID VPL_RLS_ID,
	MTR_ID VPL_MTR_ID
FROM TD_MATRIX
INNER JOIN TD_RELEASE
	ON RLS_ID = MTR_RLS_ID
		AND RLS_DELETE_FLAG = 0
		AND RLS_LIVE_FLAG = 1
		AND RLS_VERSION != 0
		AND RLS_REVISION = 0
		AND getDate() < RLS_LIVE_DATETIME_FROM
		AND (
			RLS_LIVE_DATETIME_TO IS NULL
			OR getDate() < RLS_LIVE_DATETIME_TO
			)
WHERE MTR_DELETE_FLAG = 0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[VW_RELEASE_PENDING_LIVE].[VPL_RLS_ID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[VW_RELEASE_PENDING_LIVE].[VPL_MTR_ID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_VERSION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_TO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="414" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; VIEW VW_RELEASE_PENDING_LIVE&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[VW_RELEASE_WIP]">
			<Property Name="QueryScript">
				<Value><![CDATA[
SELECT RLS_ID VRW_RLS_ID,
	MTR_ID VRW_MTR_ID
FROM TD_MATRIX
INNER JOIN TD_RELEASE
	ON RLS_ID = MTR_RLS_ID
		AND RLS_DELETE_FLAG = 0
		AND RLS_LIVE_FLAG = 0
		AND RLS_REVISION != 0
WHERE MTR_DELETE_FLAG = 0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[VW_RELEASE_WIP].[VRW_RLS_ID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[VW_RELEASE_WIP].[VRW_MTR_ID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_REVISION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="210" />
				<Property Name="Length" Value="462" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Paulo Patricio&#xD;&#xA;-- Create date: 27 Nov 2018&#xD;&#xA;-- Description:&#x9;Gets the Work in progress release&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; VIEW VW_RELEASE_WIP&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Workflow_Comment_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT = NULL
	DECLARE @CommentCode INT

	-- Do the create Audit and get the new DtgID from the stored procedure
	EXEC @DtgID = Security_Auditing_Create @CcnUsername

	-- Check for problems with the audit stored procedure
	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		RAISERROR (
				'Error in calling Security_Auditing_Create for Workflow_Comment_Create'
				,16
				,1
				)

		RETURN 0
	END

	INSERT INTO TD_COMMENT (
		CMM_DELETE_FLAG
		,CMM_DTG_ID
		,CMM_VALUE
		)
	VALUES (
		0
		,@DtgID
		,@CmmValue
		)

	SELECT @CommentCode = CMM_CODE
	FROM TD_COMMENT
	WHERE CMM_ID = @@IDENTITY

	RETURN @CommentCode
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_Comment_Create].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_Comment_Create].[@CmmValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_Comment_Create].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_Comment_Create].[@CmmValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="191" />
				<Property Name="Length" Value="985" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 22/10/2018&#xD;&#xA;-- Description:&#x9;Create a comment&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Workflow_Comment_Create @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@CmmValue NVARCHAR(1024)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Workflow_Comment_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT = NULL
	DECLARE @eMessage VARCHAR(256)
	DECLARE @updateCount INT

	--some pre-auditing work first:
	SET @DtgID = (
			SELECT CMM_DTG_ID
			FROM TD_COMMENT
			WHERE CMM_CODE = @CmmCode
				AND CMM_DELETE_FLAG = 0
			)

	IF @DtgID IS NULL
		OR @DtgID = 0
	BEGIN
		--This record doesn't exist
		RETURN 0
	END

	UPDATE TD_COMMENT
	SET CMM_DELETE_FLAG = 1
	WHERE CMM_CODE = @CmmCode
		AND CMM_DELETE_FLAG = 0

	SET @updateCount = @@ROWCOUNT

	IF @updateCount > 0
	BEGIN
		-- do the auditing 
		-- Create the entry in the TD_AUDITING table
		DECLARE @AuditUpdateCount INT

		EXEC @AuditUpdateCount = Security_Auditing_Delete @DtgID
			,@CcnUsername

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error creating entry in TD_AUDITING for Comment request delete - Comment Code: ' + cast(isnull(@CmmCode, 0) AS VARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN 0
		END
	END

	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_Comment_Delete].[@CmmCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Delete]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_Comment_Delete].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_Comment_Delete].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_Comment_Delete].[@CmmCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="223" />
				<Property Name="Length" Value="1391" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 23/10/2018&#xD;&#xA;-- Description:&#x9;Delete a comment. This is done as a soft delete.&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Workflow_Comment_Delete @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@CmmCode INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Workflow_Comment_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgId INT = NULL
	DECLARE @updateCount INT
	DECLARE @eMessage VARCHAR(256)

	SET @DtgID = (
			SELECT CMM_DTG_ID
			FROM TD_COMMENT
			WHERE CMM_CODE = @CmmCode
				AND CMM_DELETE_FLAG = 0
			)

	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		-- the requested record doesn't exist
		RETURN 0
	END

	UPDATE TD_COMMENT
	SET CMM_VALUE = @CmmValue
	WHERE CMM_CODE = @CmmCode
		AND CMM_DELETE_FLAG = 0

	SET @updateCount = @@rowcount

	IF @updateCount > 0
	BEGIN
		-- Auditing:
		DECLARE @AuditUpdateCount INT

		EXEC @AuditUpdateCount = Security_Auditing_Update @DtgID
			,@CcnUsername

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error creating entry in TD_AUDITING for Comment update, CmmCode:' + cast(isnull(@CmmCode, 0) AS VARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN 0
		END
	END

	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_Comment_Update].[@CmmCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_Comment_Update].[@CmmValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_Comment_Update].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_Comment_Update].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_Comment_Update].[@CmmCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_Comment_Update].[@CmmValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="194" />
				<Property Name="Length" Value="1298" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 23/10/2018&#xD;&#xA;-- Description:&#x9;To update a Comment&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Workflow_Comment_Update @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@CmmCode INT&#xD;&#xA;&#x9;,@CmmValue NVARCHAR(1024)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Workflow_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT DISTINCT RLS_CODE AS RlsCode
		,WRQ_DATETIME AS WrqDatetime
		,WRQ_EXCEPTIONAL_FLAG AS WrqExceptionalFlag
		,WRQ_RESERVATION_FLAG AS WrqReservationFlag
		,WRQ_ARCHIVE_FLAG AS WrqArchiveFlag
		,WRQ_EXPERIMENTAL_FLAG As WrqExperimentalFlag
		,RQS_CODE AS RqsCode
		,RQS_VALUE AS RqsValue
		,RQS_CMM.CMM_VALUE AS RqsCmmValue
		,RQS_CCN.CCN_USERNAME AS RqsCcnCreateUsername
		,RQS_DHT.DHT_DATETIME AS RqsDtgCreateDatetime
		,RSP_CODE AS RspCode
		,RSP_VALUE AS RspValue
		,RSP_CMM.CMM_VALUE AS RspCmmValue
		,RSP_CCN.CCN_USERNAME AS RspCcnCreateUsername
		,RSP_DHT.DHT_DATETIME AS RspDtgCreateDatetime
		,SGN_CODE AS SgnCode
		,SGN_VALUE AS SgnValue
		,SGN_CMM.CMM_VALUE AS SgnCmmValue
		,SGN_CCN.CCN_USERNAME AS SgnCcnCreateUsername
		,SGN_DHT.DHT_DATETIME AS SgnDtgCreateDatetime
	FROM TD_RELEASE
	LEFT OUTER JOIN TD_WORKFLOW_REQUEST
		ON RLS_ID = WRQ_RLS_ID
			AND WRQ_DELETE_FLAG = 0
	LEFT OUTER JOIN TS_REQUEST
		ON WRQ_RQS_ID = RQS_ID
	LEFT OUTER JOIN TD_COMMENT RQS_CMM
		ON WRQ_CMM_ID = RQS_CMM.CMM_ID
			AND RQS_CMM.CMM_DELETE_FLAG = 0
	LEFT OUTER JOIN TD_AUDITING RQS_DTG
		ON WRQ_DTG_ID = RQS_DTG.DTG_ID
	LEFT OUTER JOIN TM_AUDITING_HISTORY RQS_DHT
		ON RQS_DTG.DTG_ID = RQS_DHT.DHT_DTG_ID
	INNER JOIN TS_AUDITING_TYPE RQS_DTP
		ON RQS_DHT.DHT_DTP_ID = RQS_DTP.DTP_ID
			AND RQS_DTP.DTP_CODE = 'CREATED'
	LEFT OUTER JOIN TD_ACCOUNT RQS_CCN
		ON RQS_DHT.DHT_CCN_ID = RQS_CCN.CCN_ID
	LEFT OUTER JOIN TD_WORKFLOW_RESPONSE resp
		ON WRQ_ID = resp.WRS_WRQ_ID
	LEFT OUTER JOIN TS_RESPONSE
		ON resp.WRS_RSP_ID = RSP_ID
	LEFT OUTER JOIN TD_COMMENT RSP_CMM
		ON resp.WRS_CMM_ID = RSP_CMM.CMM_ID
			AND RSP_CMM.CMM_DELETE_FLAG = 0
	LEFT OUTER JOIN TD_AUDITING RSP_DTG
		ON WRS_DTG_ID = RSP_DTG.DTG_ID
	LEFT OUTER JOIN TM_AUDITING_HISTORY RSP_DHT
		ON RSP_DTG.DTG_ID = RSP_DHT.DHT_DTG_ID
	LEFT OUTER JOIN TS_AUDITING_TYPE RSP_DTP
		ON RSP_DHT.DHT_DTP_ID = RSP_DTP.DTP_ID
			AND RSP_DTP.DTP_CODE = 'CREATED'
	LEFT OUTER JOIN TD_ACCOUNT RSP_CCN
		ON RSP_DHT.DHT_CCN_ID = RSP_CCN.CCN_ID
	LEFT OUTER JOIN TD_WORKFLOW_SIGNOFF
		ON resp.WRS_ID = WSG_WRS_ID
	LEFT OUTER JOIN TS_SIGNOFF
		ON WSG_SGN_ID = SGN_ID
	LEFT OUTER JOIN TD_COMMENT SGN_CMM
		ON WSG_CMM_ID = SGN_CMM.CMM_ID
			AND SGN_CMM.CMM_DELETE_FLAG = 0
	LEFT OUTER JOIN TD_AUDITING SGN_DTG
		ON WSG_DTG_ID = SGN_DTG.DTG_ID
	LEFT OUTER JOIN TM_AUDITING_HISTORY SGN_DHT
		ON SGN_DHT.DHT_DTG_ID = SGN_DTG.DTG_ID
	LEFT OUTER JOIN TS_AUDITING_TYPE SGN_DTP
		ON SGN_DTP.DTP_ID = SGN_DHT.DHT_DTP_ID
			AND SGN_DTP.DTP_CODE = 'CREATED'
	LEFT OUTER JOIN TD_ACCOUNT SGN_CCN
		ON SGN_DHT.DHT_CCN_ID = SGN_CCN.CCN_ID
	WHERE RLS_CODE = @RlsCode
		AND RLS_DELETE_FLAG = 0
		AND (
			@WrqCurrentRequestOnly IS NULL --if null we get all Requests
			OR (
				@WrqCurrentRequestOnly = 1
				AND WRQ_CURRENT_FLAG = 1
				) --otherwise we just the current request
			OR @WrqCurrentRequestOnly = 0
			)
		AND @CcnUsername IN (
			SELECT ccn.CCN_USERNAME
			FROM TD_ACCOUNT ccn
			INNER JOIN TS_PRIVILEGE prv
				ON ccn.CCN_PRV_ID = prv.PRV_ID
					AND (
						prv.PRV_CODE = 'ADMINISTRATOR'
						OR PRV.PRV_CODE = 'POWER_USER'
						-- or the user has access to this group
						OR RLS_CODE IN (
							SELECT RLS_CODE
							FROM TD_RELEASE
							INNER JOIN TD_GROUP
								ON RLS_GRP_ID = GRP_ID
									AND GRP_DELETE_FLAG = 0
							INNER JOIN TM_GROUP_ACCOUNT
								ON GRP_ID = GCC_GRP_ID
									AND GCC_DELETE_FLAG = 0
							INNER JOIN TD_ACCOUNT
								ON GCC_CCN_ID = CCN_ID
									AND CCN_DELETE_FLAG = 0
							WHERE CCN_USERNAME = @CcnUsername
							)
						)
					AND ccn.CCN_DELETE_FLAG = 0
			)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RQS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_RSP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_WRS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_SGN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_Read].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_Read].[@WrqCurrentRequestOnly]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CURRENT_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_Read].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_Read].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_Read].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_Read].[@WrqCurrentRequestOnly]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="260" />
				<Property Name="Length" Value="4081" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 30/10/2018&#xD;&#xA;-- Description:&#x9;To read the status of an individual workflow&#xD;&#xA;-- exec Workflow_Read 132,'OKeeffeNe',0&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Workflow_Read @RlsCode INT&#xD;&#xA;&#x9;,@CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@WrqCurrentRequestOnly BIT = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Workflow_ReadAwaitingResponse]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @ccnID AS INT;

	SET @ccnID = (
			SELECT ccn_id
			FROM TD_ACCOUNT
			WHERE CCN_DELETE_FLAG = 0
				AND CCN_USERNAME = @CcnUsername
			);

	DECLARE @GroupUserHasAccess TABLE (GRP_ID INT NOT NULL);

	INSERT INTO @GroupUserHasAccess
	EXEC Security_Group_AccessList @CcnUsername

	DECLARE @LngId INT
	DECLARE @LngDefaultId INT

	SET @LngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)
	SET @LngDefaultId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCodeDefault
				AND LNG_DELETE_FLAG = 0
			)

	SELECT DISTINCT rls.RLS_CODE AS RlsCode
		,mtr.MTR_CODE AS MtrCode
		,grp.GRP_CODE AS GrpCode
		,grp.GRP_NAME AS GrpName
		,rqs.RQS_CODE AS RqsCode
		,rqs.Rqs_Value AS RqsValue
		,cmm.CMM_VALUE AS CmmRequestValue
		,RLS_EXCEPTIONAL_FLAG AS RlsExceptionalFlag
		,WRQ_DATETIME AS WrqDatetime
		,DHT_DATETIME AS DhtDatetime
		,CCN_USERNAME AS CcnUsername
		,coalesce(mtrLng.MTR_TITLE, mtr.MTR_TITLE) MtrTitle
	FROM TD_MATRIX mtr
	LEFT JOIN (
		SELECT MTR_CODE
			,MTR_TITLE
			,MTR_RLS_ID
		FROM TD_MATRIX
		WHERE MTR_DELETE_FLAG = 0
			AND MTR_LNG_ID = @LngId
		) mtrLng
		ON mtr.MTR_CODE = mtrLng.MTR_CODE
			AND MTR.MTR_RLS_ID = mtrLng.MTR_RLS_ID
	INNER JOIN TD_RELEASE rls
		ON mtr.MTR_RLS_ID = rls.RLS_ID
			AND rls.RLS_DELETE_FLAG = 0
			AND mtr.MTR_DELETE_FLAG = 0
	INNER JOIN TD_GROUP AS grp
		ON rls.RLS_GRP_ID = grp.GRP_ID
			AND grp.GRP_DELETE_FLAG = 0
			AND rls.RLS_DELETE_FLAG = 0
	INNER JOIN @GroupUserHasAccess g
		ON g.GRP_ID = rls.RLS_GRP_ID
	INNER JOIN TD_WORKFLOW_REQUEST AS wrq
		ON rls.RLS_ID = wrq.WRQ_RLS_ID
			AND wrq.WRQ_DELETE_FLAG = 0
			AND rls.RLS_DELETE_FLAG = 0
	INNER JOIN TD_COMMENT cmm
		ON wrq.WRQ_CMM_ID = cmm.CMM_ID
	INNER JOIN TM_AUDITING_HISTORY
		ON WRQ_DTG_ID = DHT_DTG_ID
	INNER JOIN TS_AUDITING_TYPE
		ON DHT_DTP_ID = DTP_ID
			AND DTP_CODE = 'CREATED'
	INNER JOIN TD_ACCOUNT
		ON DHT_CCN_ID = CCN_ID
			AND CCN_DELETE_FLAG = 0
	LEFT OUTER JOIN TS_REQUEST AS rqs
		ON rqs.RQS_ID = wrq.WRQ_RQS_ID
			AND wrq.WRQ_DELETE_FLAG = 0
	LEFT OUTER JOIN TD_WORKFLOW_RESPONSE wrs
		ON wrq.WRQ_ID = wrs.WRS_WRQ_ID
			AND wrq.WRQ_DELETE_FLAG = 0
	WHERE wrs.WRS_ID IS NULL --We are awaiting response, so this must be null
		AND (
			wrq.WRQ_CURRENT_FLAG IS NULL
			OR wrq.WRQ_CURRENT_FLAG <> 0
			)
		AND (
			@RlsCode IS NULL
			OR @RlsCode = rls.RLS_CODE
			)
		AND mtr.MTR_LNG_ID IN (
			@LngId
			,@LngDefaultId
			)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadAwaitingResponse].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_AccessList]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadAwaitingResponse].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadAwaitingResponse].[@LngIsoCodeDefault]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadAwaitingResponse].[@GroupUserHasAccess].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RQS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CURRENT_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadAwaitingResponse].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Workflow_ReadAwaitingResponse].[@GroupUserHasAccess]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Workflow_ReadAwaitingResponse].[@GroupUserHasAccess].[GRP_ID]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_ReadAwaitingResponse].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_ReadAwaitingResponse].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_ReadAwaitingResponse].[@LngIsoCodeDefault]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_ReadAwaitingResponse].[@RlsCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="268" />
				<Property Name="Length" Value="2999" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 01/11/2018&#xD;&#xA;-- Description:&#x9;Read Workflows Awaiting Approval&#xD;&#xA;-- exec Workflow_ReadAwaitingResponse 'okeeffene','ga','en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Workflow_ReadAwaitingResponse @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@LngIsoCodeDefault CHAR(2)&#xD;&#xA;&#x9;,@RlsCode INT = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Workflow_ReadAwaitingSignoff]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @ccnID INT

	SET @ccnID = (
			SELECT ccn_id
			FROM TD_ACCOUNT
			WHERE CCN_DELETE_FLAG = 0
				AND CCN_USERNAME = @CcnUsername
			)

	DECLARE @GroupUserHasAccess TABLE (GRP_ID INT NOT NULL);

	INSERT INTO @GroupUserHasAccess
	EXEC Security_Group_AccessList @CcnUsername

	DECLARE @LngId INT
	DECLARE @LngDefaultId INT

	SET @LngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)
	SET @LngDefaultId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCodeDefault
				AND LNG_DELETE_FLAG = 0
			)

	SELECT DISTINCT rls.RLS_CODE AS RlsCode
		,mtr.MTR_CODE AS MtrCode
		,grp.GRP_CODE AS GrpCode
		,grp.GRP_NAME AS GrpName
		,rqs.RQS_CODE AS RqsCode
		,rqs.Rqs_Value AS RqsValue
		,cmmRequest.CMM_VALUE AS CmmRequestValue
		,cmmResponse.CMM_VALUE AS CmmResponseValue
		,RLS_EXCEPTIONAL_FLAG AS RlsExceptionalFlag
		,WRQ_DATETIME AS WrqDatetime
		,DHT_DATETIME AS DhtDatetime
		,CCN_USERNAME AS CcnUsername
		,coalesce(mtrLng.MTR_TITLE, mtr.MTR_TITLE) MtrTitle
	FROM TD_RELEASE rls
	INNER JOIN TD_MATRIX mtr
		ON mtr.MTR_RLS_ID = rls.RLS_ID
			AND rls.RLS_DELETE_FLAG = 0
			AND mtr.MTR_DELETE_FLAG = 0
	LEFT JOIN (
		SELECT MTR_CODE
			,MTR_TITLE
			,MTR_RLS_ID
		FROM TD_MATRIX
		WHERE MTR_DELETE_FLAG = 0
			AND MTR_LNG_ID = @LngId
		) mtrLng
		ON mtr.MTR_CODE = mtrLng.MTR_CODE
			AND MTR.MTR_RLS_ID = mtrLng.MTR_RLS_ID
	INNER JOIN TD_GROUP grp
		ON rls.RLS_GRP_ID = grp.GRP_ID
			AND grp.GRP_DELETE_FLAG = 0
			AND rls.RLS_DELETE_FLAG = 0
	INNER JOIN TD_WORKFLOW_REQUEST wrq
		ON rls.RLS_ID = wrq.WRQ_RLS_ID
			AND wrq.WRQ_DELETE_FLAG = 0
			AND rls.RLS_DELETE_FLAG = 0
	INNER JOIN TS_REQUEST rqs
		ON rqs.RQS_ID = wrq.WRQ_RQS_ID
			AND wrq.WRQ_DELETE_FLAG = 0
	INNER JOIN TD_WORKFLOW_RESPONSE wrs
		ON wrq.WRQ_ID = wrs.WRS_WRQ_ID
			AND wrq.WRQ_DELETE_FLAG = 0
	INNER JOIN TD_COMMENT cmmRequest
		ON wrq.WRQ_CMM_ID = cmmRequest.CMM_ID
			AND cmmRequest.CMM_DELETE_FLAG = 0
	INNER JOIN TD_COMMENT cmmResponse
		ON wrs.WRS_CMM_ID = cmmResponse.CMM_ID
			AND cmmResponse.CMM_DELETE_FLAG = 0
	INNER JOIN TM_AUDITING_HISTORY
		ON WRS_DTG_ID = DHT_DTG_ID
	INNER JOIN TS_AUDITING_TYPE
		ON DHT_DTP_ID = DTP_ID
			AND DTP_CODE = 'CREATED'
	INNER JOIN TD_ACCOUNT
		ON CCN_ID = DHT_CCN_ID
			AND CCN_DELETE_FLAG = 0
	INNER JOIN @GroupUserHasAccess g
		ON g.GRP_ID = rls.RLS_GRP_ID
	LEFT JOIN TD_WORKFLOW_SIGNOFF wsg
		ON wrs.WRS_ID = wsg.WSG_WRS_ID
	WHERE WSG_ID IS NULL -- must be null as there is no signoff yet		
		AND wrq.WRQ_CURRENT_FLAG <> 0
		AND (
			@RlsCode IS NULL
			OR @RlsCode = rls.RLS_CODE
			)
		AND mtr.MTR_LNG_ID IN (
			@LngId
			,@LngDefaultId
			)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadAwaitingSignoff].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_AccessList]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadAwaitingSignoff].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadAwaitingSignoff].[@LngIsoCodeDefault]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RQS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadAwaitingSignoff].[@GroupUserHasAccess].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_WRS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CURRENT_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadAwaitingSignoff].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Workflow_ReadAwaitingSignoff].[@GroupUserHasAccess]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Workflow_ReadAwaitingSignoff].[@GroupUserHasAccess].[GRP_ID]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_ReadAwaitingSignoff].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_ReadAwaitingSignoff].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_ReadAwaitingSignoff].[@LngIsoCodeDefault]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_ReadAwaitingSignoff].[@RlsCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="267" />
				<Property Name="Length" Value="3211" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 01/11/2018&#xD;&#xA;-- Description:&#x9;Reads Workflows Awaiting Signoff&#xD;&#xA;-- exec Workflow_ReadAwaitingSignoff 'okeeffene','ss','en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Workflow_ReadAwaitingSignoff @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@LngIsoCodeDefault CHAR(2)&#xD;&#xA;&#x9;,@RlsCode INT = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Workflow_ReadHistory]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @ccnID INT

	SET @ccnID = (
			SELECT ccn_id
			FROM TD_ACCOUNT
			WHERE CCN_DELETE_FLAG = 0
				AND CCN_USERNAME = @CcnUsername
			)

	SELECT DISTINCT rls.RLS_CODE AS RlsCode
		,rqs.RQS_CODE AS RqsCode
		,rqs.RQS_VALUE AS RqsValue
		,wrqCmm.CMM_VALUE AS WrqCmmValue
		,wrq.WRQ_DATETIME AS WrqDatetime
		,wrq.WRQ_EXCEPTIONAL_FLAG AS WrqExceptionalFlag
		,wrq.WRQ_RESERVATION_FLAG AS WrqReservationFlag
		,wrq.WRQ_ARCHIVE_FLAG AS WrqArchiveFlag
		,wrq.WRQ_EXPERIMENTAL_FLAG As WrqExperimentalFlag
		,wrqCcn.CCN_USERNAME AS WrqDtgCreateCcnUsername
		,wrqDht.DHT_DATETIME AS WrqDtgCreateDatetime
		,rsp.RSP_CODE AS RspCode
		,rsp.RSP_VALUE AS RspValue
		,wrsCmm.CMM_VALUE AS WrsCmmValue
		,wrsCcn.CCN_USERNAME AS WrsDtgCreateCcnUsername
		,wrsDht.DHT_DATETIME AS WrsDtgCreateDatetime
		,sgn.SGN_CODE AS SgnCode
		,sgn.SGN_VALUE AS SgnValue
		,wsgCmm.CMM_VALUE WsgCmmValue
		,wsgCcn.CCN_USERNAME AS WsgDtgCreateCcnUsername
		,wsgDht.DHT_DATETIME AS WsgDtgCreateDatetime
	FROM TD_RELEASE rls
	INNER JOIN TD_MATRIX mtr
		ON rls.RLS_ID = mtr.MTR_RLS_ID
			AND mtr.MTR_DELETE_FLAG = 0
	INNER JOIN TD_WORKFLOW_REQUEST wrq
		ON wrq.WRQ_RLS_ID = rls.RLS_ID
			AND wrq.WRQ_DELETE_FLAG = 0
	INNER JOIN TS_REQUEST rqs
		ON rqs.RQS_ID = wrq.WRQ_RQS_ID
			AND wrq.WRQ_DELETE_FLAG = 0
	INNER JOIN TD_COMMENT wrqCmm
		ON wrq.WRQ_CMM_ID = wrqCmm.CMM_ID
			AND wrqCmm.CMM_DELETE_FLAG = 0
	INNER JOIN TD_AUDITING wrqDtg
		ON wrq.WRQ_DTG_ID = wrqDtg.DTG_ID
	INNER JOIN TM_AUDITING_HISTORY wrqDht
		ON wrqDht.DHT_DTG_ID = wrqDtg.DTG_ID
	INNER JOIN TS_AUDITING_TYPE wrqDtp
		ON wrqDtp.DTP_ID = wrqDht.DHT_DTP_ID
	INNER JOIN TD_ACCOUNT wrqCcn
		ON wrqDht.DHT_CCN_ID = wrqCcn.CCN_ID
			AND wrqDtp.DTP_CODE = 'CREATED'
	LEFT JOIN TD_WORKFLOW_RESPONSE wrs
		ON wrq.WRQ_ID = wrs.WRS_WRQ_ID
			AND wrq.WRQ_DELETE_FLAG = 0
	LEFT JOIN TS_RESPONSE rsp
		ON wrs.WRS_RSP_ID = rsp.RSP_ID
	LEFT JOIN TD_COMMENT wrsCmm
		ON wrs.WRS_CMM_ID = wrsCmm.CMM_ID
	LEFT JOIN TD_AUDITING wrsDtg
		ON wrs.WRS_DTG_ID = wrsDtg.DTG_ID
	LEFT JOIN TM_AUDITING_HISTORY wrsDht
		ON wrsDtg.DTG_ID = wrsDht.DHT_DTG_ID
	LEFT JOIN TS_AUDITING_TYPE wrsDtp
		ON wrsDht.DHT_DTP_ID = wrsDtp.DTP_ID
	LEFT JOIN TD_ACCOUNT wrsCcn
		ON wrsDht.DHT_CCN_ID = wrsCcn.CCN_ID
			AND wrsDtp.DTP_CODE = 'CREATED'
	LEFT JOIN TD_WORKFLOW_SIGNOFF wsg
		ON wrs.WRS_ID = wsg.WSG_WRS_ID
	LEFT JOIN TS_SIGNOFF sgn
		ON wsg.WSG_SGN_ID = sgn.SGN_ID
	LEFT JOIN TD_COMMENT wsgCmm
		ON wsg.WSG_CMM_ID = wsgCmm.CMM_ID
	LEFT JOIN TD_AUDITING wsgDtg
		ON wsg.WSG_DTG_ID = wsgDtg.DTG_ID
	LEFT JOIN TM_AUDITING_HISTORY wsgDht
		ON wsgDtg.DTG_ID = wsgDht.DHT_DTG_ID
	LEFT JOIN TS_AUDITING_TYPE wsgDtp
		ON wsgDht.DHT_DTP_ID = wsgDtp.DTP_ID
	LEFT JOIN TD_ACCOUNT wsgCcn
		ON wsgDht.DHT_CCN_ID = wsgCcn.CCN_ID
			AND wsgDtp.DTP_CODE = 'CREATED'
			AND wsgCcn.CCN_DELETE_FLAG = 0
	LEFT JOIN TM_GROUP_ACCOUNT gcc
		ON rls.RLS_GRP_ID = gcc.GCC_ID
			AND gcc.GCC_DELETE_FLAG = 0
			AND GCC_CCN_ID = @ccnID
	LEFT JOIN TD_ACCOUNT ccn
		ON gcc.GCC_CCN_ID = ccn.CCN_ID
			AND ccn.CCN_DELETE_FLAG = 0
	WHERE rls.RLS_CODE = @RlsCode
		AND @CcnUsername IN (
			SELECT ccn.CCN_USERNAME
			FROM TD_ACCOUNT ccn
			INNER JOIN TS_PRIVILEGE prv
				ON ccn.CCN_PRV_ID = prv.PRV_ID
					AND (
						prv.PRV_CODE = 'ADMINISTRATOR'
						OR PRV.PRV_CODE = 'POWER_USER'
						OR RLS_GRP_ID IN (
							SELECT GRP_ID
							FROM TD_GROUP
							INNER JOIN TM_GROUP_ACCOUNT
								ON GRP_ID = GCC_GRP_ID
									AND GCC_CCN_ID = @ccnID
							)
						)
					AND ccn.CCN_DELETE_FLAG = 0
			)
		OR (ccn.CCN_USERNAME = @CcnUsername)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadHistory].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RQS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_AUDITING]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_RSP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_WRS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_SGN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_AUDITING].[DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadHistory].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_PRIVILEGE].[PRV_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_ReadHistory].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_ReadHistory].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="267" />
				<Property Name="Length" Value="4022" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 01/11/2018&#xD;&#xA;-- Description:&#x9;Reads Workflow History for a given Release Code&#xD;&#xA;-- exec Workflow_ReadHistory 'okeeffene',43&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Workflow_ReadHistory @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@RlsCode INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Workflow_ReadIsCurrent]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @result INT

	SET @result = (
			iif(EXISTS (
					SELECT rls.RLS_ID
					FROM TD_RELEASE rls
					INNER JOIN TD_WORKFLOW_REQUEST wrq
						ON wrq.WRQ_RLS_ID = rls.RLS_ID
					WHERE rls.RLS_CODE = @RlsCode
						AND wrq.WRQ_CURRENT_FLAG = 1
						AND rls.RLS_DELETE_FLAG = 0
						AND wrq.WRQ_DELETE_FLAG = 0
					), 1, 0)
			)

	RETURN @result
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadIsCurrent].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CURRENT_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_ReadIsCurrent].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="230" />
				<Property Name="Length" Value="695" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 01/11/2018&#xD;&#xA;-- Description:&#x9;Checks if there is a current workflow for a ReleaseCode&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Workflow_ReadIsCurrent @RlsCode INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Workflow_ReadLive]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @GroupUserHasAccess TABLE (GRP_ID INT NOT NULL);

	INSERT INTO @GroupUserHasAccess
	EXEC Security_Group_AccessList @CcnUsername

	DECLARE @LngId INT
	DECLARE @LngDefaultId INT

	SET @LngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)
	SET @LngDefaultId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCodeDefault
				AND LNG_DELETE_FLAG = 0
			)

	SELECT DISTINCT RLS_CODE RlsCode
		,mtr.MTR_CODE MtrCode
		,GRP_CODE GrpCode
		,GRP_NAME GrpName
		,CCN_USERNAME CcnUsername
		,RLS_RESERVATION_FLAG RlsReservationFlag
		,RLS_ARCHIVE_FLAG RlsArchiveFlag
		,RLS_EXPERIMENTAL_FLAG RlsExperimentalFlag
		,MTR_OFFICIAL_FLAG MtrOfficialFlag
		,RLS_LIVE_DATETIME_FROM RlsLiveDatimeFrom
		,coalesce(mtrLng.MTR_TITLE, mtr.MTR_TITLE) MtrTitle
		
	FROM TD_MATRIX mtr
	LEFT JOIN (
		SELECT MTR_CODE
			,MTR_TITLE
			,MTR_RLS_ID
		FROM TD_MATRIX
		WHERE MTR_DELETE_FLAG = 0
			AND MTR_LNG_ID = @LngId
		) mtrLng
		ON mtr.MTR_CODE = mtrLng.MTR_CODE
			AND MTR.MTR_RLS_ID = mtrLng.MTR_RLS_ID
	INNER JOIN TD_RELEASE
		ON RLS_ID = mtr.MTR_RLS_ID
			AND RLS_DELETE_FLAG = 0
	INNER JOIN VW_RELEASE_LIVE_NOW
		ON VRN_RLS_ID = RLS_ID
			AND VRN_MTR_ID = MTR_ID
	INNER JOIN @GroupUserHasAccess g
		ON g.GRP_ID = RLS_GRP_ID
	INNER JOIN TD_GROUP GRP
		ON GRP.GRP_ID = RLS_GRP_ID
			AND GRP_DELETE_FLAG = 0
	INNER JOIN TM_AUDITING_HISTORY
		ON MTR_DTG_ID = DHT_DTG_ID
	INNER JOIN TD_ACCOUNT
		ON DHT_CCN_ID = CCN_ID
			AND CCN_DELETE_FLAG = 0
	LEFT JOIN TD_WORKFLOW_REQUEST
		ON RLS_ID = WRQ_RLS_ID
			AND WRQ_DELETE_FLAG = 0
	LEFT JOIN TS_REQUEST 
	ON WRQ_RQS_ID =RQS_ID
	LEFT JOIN TD_WORKFLOW_RESPONSE 
	ON WRQ_ID=WRS_WRQ_ID
	LEFT JOIN TS_RESPONSE 
	ON WRS_RSP_ID=RSP_ID  
	LEFT JOIN TD_WORKFLOW_SIGNOFF 
	ON WRS_ID=WSG_WRS_ID 
	LEFT JOIN TS_SIGNOFF 
	ON WSG_SGN_ID=SGN_ID
	WHERE MTR_DELETE_FLAG = 0
		AND (
			@RlsCode IS NULL
			OR @RlsCode = RLS_CODE
			)
		AND mtr.MTR_LNG_ID IN (
			@LngId
			,@LngDefaultId
			)
	ORDER BY mtr.MTR_CODE
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_AccessList]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadLive].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadLive].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadLive].[@LngIsoCodeDefault]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_LIVE_NOW].[VRN_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadLive].[@GroupUserHasAccess].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RQS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_RSP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_WRS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_SGN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_OFFICIAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadLive].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Workflow_ReadLive].[@GroupUserHasAccess]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Workflow_ReadLive].[@GroupUserHasAccess].[GRP_ID]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_ReadLive].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_ReadLive].[@RlsCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_ReadLive].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_ReadLive].[@LngIsoCodeDefault]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="244" />
				<Property Name="Length" Value="2521" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;Neil O'Keeffe&#xD;&#xA;-- Read date: 06/11/2019&#xD;&#xA;-- Description:&#x9;Reads live records&#xD;&#xA;-- exec Workflow_ReadLive 'okeeffene',null,'en','en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Workflow_ReadLive @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@RlsCode INT = NULL&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@LngIsoCodeDefault CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Workflow_ReadPendingLive]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @GroupUserHasAccess TABLE (GRP_ID INT NOT NULL);

	INSERT INTO @GroupUserHasAccess
	EXEC Security_Group_AccessList @CcnUsername

	DECLARE @LngId INT
	DECLARE @LngDefaultId INT

	SET @LngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)
	SET @LngDefaultId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCodeDefault
				AND LNG_DELETE_FLAG = 0
			)

	SELECT DISTINCT *
	FROM (
		SELECT RLS_CODE RlsCode
			,mtr.MTR_CODE MtrCode
			,GRP_CODE GrpCode
			,GRP_NAME GrpName
			,RQS_CODE RqsCode
			,RQS_VALUE RqsValue
			,CCN_USERNAME CcnUsername
			,RLS_RESERVATION_FLAG RlsReservationFlag
			,RLS_ARCHIVE_FLAG RlsArchiveFlag
			,MTR_OFFICIAL_FLAG MtrOfficialFlag
			,RLS_LIVE_DATETIME_FROM RlsLiveDatimeFrom
			,WRQ_DATETIME WrqDatetime
			,max(DHT_DATETIME) DhtDatetime
			,coalesce(mtrLng.MTR_TITLE, mtr.MTR_TITLE) MtrTitle
		FROM TD_MATRIX mtr
		LEFT JOIN (
			SELECT MTR_CODE
				,MTR_TITLE
				,MTR_RLS_ID
			FROM TD_MATRIX
			WHERE MTR_DELETE_FLAG = 0
				AND MTR_LNG_ID = @LngId
			) mtrLng ON mtr.MTR_CODE = mtrLng.MTR_CODE
			AND MTR.MTR_RLS_ID = mtrLng.MTR_RLS_ID
		INNER JOIN TD_RELEASE ON RLS_ID = mtr.MTR_RLS_ID
			AND RLS_DELETE_FLAG = 0
		INNER JOIN VW_RELEASE_PENDING_LIVE ON VPL_RLS_ID = RLS_ID
			AND VPL_MTR_ID = MTR_ID
		INNER JOIN @GroupUserHasAccess g ON g.GRP_ID = RLS_GRP_ID
		INNER JOIN TD_GROUP GRP ON GRP.GRP_ID = RLS_GRP_ID
			AND GRP_DELETE_FLAG = 0
		LEFT JOIN TD_WORKFLOW_REQUEST ON RLS_ID = WRQ_RLS_ID
			AND WRQ_DELETE_FLAG = 0
		LEFT JOIN TS_REQUEST ON WRQ_RQS_ID = RQS_ID
		LEFT JOIN TD_WORKFLOW_RESPONSE ON WRQ_ID = WRS_WRQ_ID
		LEFT JOIN TS_RESPONSE ON WRS_RSP_ID = RSP_ID
		INNER JOIN TD_WORKFLOW_SIGNOFF ON WRS_ID = WSG_WRS_ID
		INNER JOIN TS_SIGNOFF ON WSG_SGN_ID = SGN_ID
			AND SGN_CODE = 'APPROVED'
		LEFT JOIN TM_AUDITING_HISTORY ON WSG_DTG_ID = DHT_DTG_ID
		INNER JOIN TD_ACCOUNT ON DHT_CCN_ID = CCN_ID
			AND CCN_DELETE_FLAG = 0
		WHERE MTR_DELETE_FLAG = 0
			AND (
				@RlsCode IS NULL
				OR @RlsCode = RLS_CODE
				)
			AND mtr.MTR_LNG_ID IN (
				@LngId
				,@LngDefaultId
				)
			AND WRQ_DATETIME > getdate()
		GROUP BY RLS_CODE
			,mtr.MTR_CODE
			,GRP_CODE
			,GRP_NAME
			,RQS_CODE
			,RQS_VALUE
			,CCN_USERNAME
			,RLS_RESERVATION_FLAG
			,RLS_ARCHIVE_FLAG
			,MTR_OFFICIAL_FLAG
			,RLS_LIVE_DATETIME_FROM
			,WRQ_DATETIME
			,mtrLng.MTR_TITLE
			,mtr.MTR_TITLE
		) Q
	WHERE Q.RlsLiveDatimeFrom = Q.WrqDatetime
	ORDER BY Q.MtrCode
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_AccessList]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadPendingLive].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadPendingLive].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadPendingLive].[@LngIsoCodeDefault]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_PENDING_LIVE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_PENDING_LIVE].[VPL_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_PENDING_LIVE].[VPL_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadPendingLive].[@GroupUserHasAccess].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RQS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_RSP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_WRS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_SGN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_OFFICIAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadPendingLive].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_OFFICIAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_LIVE_DATETIME_FROM]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Workflow_ReadPendingLive].[@GroupUserHasAccess]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Workflow_ReadPendingLive].[@GroupUserHasAccess].[GRP_ID]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_ReadPendingLive].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_ReadPendingLive].[@RlsCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_ReadPendingLive].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_ReadPendingLive].[@LngIsoCodeDefault]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="259" />
				<Property Name="Length" Value="3019" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;Neil O'Keeffe&#xD;&#xA;-- Read date: 18/12/2019&#xD;&#xA;-- Description:&#x9;Reads pending live records&#xD;&#xA;-- exec Workflow_ReadPendingLive 'okeeffene',null,'en','en'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Workflow_ReadPendingLive @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@RlsCode INT = NULL&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@LngIsoCodeDefault CHAR(2)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Workflow_ReadWorkInProgress]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @GroupUserHasAccess TABLE (GRP_ID INT NOT NULL);

	INSERT INTO @GroupUserHasAccess
	EXEC Security_Group_AccessList @CcnUsername

	DECLARE @LngId INT
	DECLARE @LngDefaultId INT

	SET @LngId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCode
				AND LNG_DELETE_FLAG = 0
			)
	SET @LngDefaultId = (
			SELECT LNG_ID
			FROM TS_LANGUAGE
			WHERE LNG_ISO_CODE = @LngIsoCodeDefault
				AND LNG_DELETE_FLAG = 0
			)

	SELECT  q.RlsCode
		,q.MtrCode
		,q.GrpCode
		,q.GrpName
		,q.RqsValue
		,q.CcnUsername 
		,max(q.DhtDatetime) as DhtDatetime
		,q.MtrTitle
	FROM (
		SELECT RLS_CODE RlsCode
			,mtr.MTR_CODE MtrCode
			,GRP_CODE GrpCode
			,GRP_NAME GrpName
			,CCN_USERNAME CcnUsername
			,RQS_VALUE AS RqsValue
			,max(DHT_DATETIME) DhtDatetime
			,coalesce(mtrLng.MTR_TITLE, mtr.MTR_TITLE) MtrTitle
			,MTR_LNG_ID
			,WRQ_ID 
			,WRS_ID 
			,WSG_ID 
		FROM TD_MATRIX mtr
		LEFT JOIN (
			SELECT MTR_CODE
				,MTR_TITLE
				,MTR_RLS_ID
			FROM TD_MATRIX
			WHERE MTR_DELETE_FLAG = 0
				AND MTR_LNG_ID = @LngId
			) mtrLng
			ON mtr.MTR_CODE = mtrLng.MTR_CODE
				AND MTR.MTR_RLS_ID = mtrLng.MTR_RLS_ID
		INNER JOIN TD_RELEASE
			ON RLS_ID = mtr.MTR_RLS_ID
				AND RLS_DELETE_FLAG = 0
		INNER JOIN VW_RELEASE_WIP
			ON VRW_RLS_ID = RLS_ID
				AND VRW_MTR_ID = MTR_ID
		INNER JOIN @GroupUserHasAccess g
			ON g.GRP_ID = RLS_GRP_ID
		INNER JOIN TD_GROUP GRP
			ON GRP.GRP_ID = RLS_GRP_ID
				AND GRP_DELETE_FLAG = 0
		INNER JOIN TM_AUDITING_HISTORY
			ON MTR_DTG_ID = DHT_DTG_ID
		INNER JOIN TS_AUDITING_TYPE
			ON DHT_DTP_ID = DTP_ID
				AND DTP_CODE = 'CREATED'
		INNER JOIN TD_ACCOUNT
			ON DHT_CCN_ID = CCN_ID
				AND CCN_DELETE_FLAG = 0
		LEFT JOIN TD_WORKFLOW_REQUEST
			ON RLS_ID = WRQ_RLS_ID
			and WRQ_DELETE_FLAG=0
			and WRQ_CURRENT_FLAG=1
		LEFT JOIN TS_REQUEST
			ON WRQ_RQS_ID = RQS_ID			
		LEFT JOIN TD_WORKFLOW_RESPONSE  
		ON WRS_WRQ_ID =WRQ_ID
		LEFT JOIN TD_WORKFLOW_SIGNOFF 
		ON WSG_WRS_ID = WRS_ID 
		WHERE MTR_DELETE_FLAG = 0
			AND (
				@RlsCode IS NULL
				OR @RlsCode = RLS_CODE
				)
		GROUP BY RLS_CODE
			,mtr.MTR_CODE
			,GRP_CODE
			,GRP_NAME
			,CCN_USERNAME
			,RQS_VALUE
			,mtrLng.MTR_TITLE
			,mtr.MTR_TITLE
			,MTR_LNG_ID
			,WRQ_ID 
			,WRS_ID 
			,WSG_ID 
		) q

	WHERE q.MTR_LNG_ID IN (
			@LngId
			,@LngDefaultId
			)
			AND WRQ_ID IS NULL 
		group by
		RlsCode,
	MtrCode
		,GrpCode
		,GrpName
		,RqsValue
		,CcnUsername 
		,MtrTitle
	ORDER BY q.MtrCode
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_AccessList]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadWorkInProgress].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_ISO_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadWorkInProgress].[@LngIsoCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_LANGUAGE].[LNG_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadWorkInProgress].[@LngIsoCodeDefault]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_WIP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_WIP].[VRW_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[VW_RELEASE_WIP].[VRW_MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadWorkInProgress].[@GroupUserHasAccess].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CURRENT_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RQS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_WRS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_TITLE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_ReadWorkInProgress].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_MATRIX].[MTR_LNG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Workflow_ReadWorkInProgress].[@GroupUserHasAccess]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Workflow_ReadWorkInProgress].[@GroupUserHasAccess].[GRP_ID]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_ReadWorkInProgress].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_ReadWorkInProgress].[@LngIsoCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_ReadWorkInProgress].[@LngIsoCodeDefault]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_ReadWorkInProgress].[@RlsCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="257" />
				<Property Name="Length" Value="2988" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;Paulo Patricio&#xD;&#xA;-- Read date: 12 Nov 2018&#xD;&#xA;-- Description:&#x9;Reads record(s) from &#xD;&#xA;-- exec Workflow_ReadWorkInProgress 'okeeffene','ga','en',99&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Workflow_ReadWorkInProgress @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@LngIsoCode CHAR(2)&#xD;&#xA;&#x9;,@LngIsoCodeDefault CHAR(2)&#xD;&#xA;&#x9;,@RlsCode INT = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Workflow_Release_Usage]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @result INT

	SET @result = (
			SELECT iif(EXISTS (
						SELECT req.wrq_id
						FROM TD_WORKFLOW_REQUEST req
						INNER JOIN TD_RELEASE rel
							ON req.WRQ_RLS_ID = rel.RLS_ID
						WHERE rel.RLS_CODE = @RlsCode
							AND req.wrq_delete_flag = 0
							AND rel.rls_delete_flag = 0
						), 1, 0)
			)

	RETURN @result
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_Release_Usage].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_Release_Usage].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="227" />
				<Property Name="Length" Value="671" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 24/10/2018&#xD;&#xA;-- Description:&#x9;Checks if a ReleaseCode already has related entities&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Workflow_Release_Usage @RlsCode INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Workflow_Request_ReadRequest]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT rqs.RQS_CODE AS RqsCode
		,rqs.RQS_VALUE AS RqsValue
	FROM TS_REQUEST rqs
	WHERE @RqsCode IS NULL
		OR (@RqsCode = RQS_CODE)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TS_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_Request_ReadRequest].[@RqsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_CODE]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_Request_ReadRequest].[@RqsCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="256" />
				<Property Name="Length" Value="510" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 20/11/2018&#xD;&#xA;-- Description:&#x9;Read the static list of Requests&#xD;&#xA;-- exec Workflow_Request_ReadRequest 'ROLLBACK'&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Workflow_Request_ReadRequest @RqsCode VARCHAR(32) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Workflow_Response_Usage]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @result INT

	SET @result = (
			SELECT iif(EXISTS (
						SELECT resp.WRS_ID
						FROM TD_WORKFLOW_REQUEST req
						INNER JOIN TD_WORKFLOW_RESPONSE resp
							ON resp.WRS_WRQ_ID = req.WRQ_ID
						INNER JOIN TD_RELEASE rel
							ON req.WRQ_RLS_ID = rel.RLS_ID
						WHERE rel.RLS_CODE = @RlsCode
							AND req.wrq_delete_flag = 0
							AND rel.rls_delete_flag = 0
							AND req.wrq_current_flag = 1
						), 1, 0)
			)

	RETURN @result
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_Response_Usage].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CURRENT_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_Response_Usage].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="228" />
				<Property Name="Length" Value="795" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 24/10/2018&#xD;&#xA;-- Description:&#x9;Check if a Release Code has related Response entities&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Workflow_Response_Usage @RlsCode INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Workflow_WorkflowRequest_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @RqsID INT = NULL
	DECLARE @RlsID INT = NULL
	DECLARE @CmmID INT = NULL
	DECLARE @DtgID INT = NULL
	DECLARE @errorMessage VARCHAR(256)

	SET @CmmID = (
			SELECT CMM_ID
			FROM TD_COMMENT
			WHERE CMM_CODE = @CmmCode
				AND CMM_DELETE_FLAG = 0
			)

	IF @CmmID IS NULL
		OR @CmmID = 0
	BEGIN
		SET @errorMessage = 'No comment ID found for Release code: ' + cast(isnull(@RlsCode, 0) AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				)

		RETURN 0
	END

	SET @RqsID = (
			SELECT Rqs_id
			FROM TS_REQUEST
			WHERE RQS_CODE = @RqsCode
			)

	IF @RqsID IS NULL
		OR @RqsID = 0
	BEGIN
		SET @errorMessage = 'No Request ID found for Request code: ' + cast(isnull(@RlsCode, 0) AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				)

		RETURN 0
	END

	SET @RlsID = (
			SELECT rls_id
			FROM td_release
			WHERE rls_code = @rlscode
				AND TD_RELEASE.RLS_DELETE_FLAG = 0
			)

	IF @RlsId IS NULL
		OR @RlsId = 0
	BEGIN
		SET @errorMessage = 'No Release ID found for Release Code: ' + cast(isnull(@RlsCode, 0) AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				)

		RETURN 0
	END

	-- Do the create Audit and get the new DtgID from the stored procedure
	EXEC @DtgID = Security_Auditing_Create @CcnUsername

	-- Check for problems with the audit stored procedure
	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		RAISERROR (
				'Error in calling Security_Auditing_Create for WorkflowRequest_Create'
				,16
				,1
				)

		RETURN 0
	END

	INSERT INTO TD_WORKFLOW_REQUEST (
		WRQ_RLS_ID
		,WRQ_CMM_ID
		,WRQ_DATETIME
		,WRQ_EXCEPTIONAL_FLAG
		,WRQ_RESERVATION_FLAG
		,WRQ_ARCHIVE_FLAG
		,WRQ_EXPERIMENTAL_FLAG
		,WRQ_RQS_ID
		,WRQ_DTG_ID
		,WRQ_DELETE_FLAG
		,WRQ_CURRENT_FLAG
		)
	VALUES (
		@RlsId
		,@CmmID
		,@WrqDatetime
		,@WrqExceptionalFlag
		,@WrqReservationFlag
		,@WrqArchiveFlag
		,@WrqExperimentalFlag
		,@RqsID
		,@DtgID
		,0
		,1
		)

	RETURN @@identity
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowRequest_Create].[@CmmCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowRequest_Create].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowRequest_Create].[@RqsCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowRequest_Create].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RQS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CURRENT_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowRequest_Create].[@WrqDatetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowRequest_Create].[@WrqExceptionalFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowRequest_Create].[@WrqReservationFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowRequest_Create].[@WrqArchiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowRequest_Create].[@WrqExperimentalFlag]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowRequest_Create].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowRequest_Create].[@RqsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowRequest_Create].[@CmmCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowRequest_Create].[@WrqDatetime]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowRequest_Create].[@WrqExceptionalFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowRequest_Create].[@WrqReservationFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowRequest_Create].[@WrqArchiveFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowRequest_Create].[@WrqExperimentalFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowRequest_Create].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="200" />
				<Property Name="Length" Value="2552" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 22/10/2018&#xD;&#xA;-- Description:&#x9;Creates a WorkflowRequest&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Workflow_WorkflowRequest_Create @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@RqsCode NVARCHAR(32)&#xD;&#xA;&#x9;,@CmmCode INT&#xD;&#xA;&#x9;,@WrqDatetime DATETIME = NULL&#xD;&#xA;&#x9;,@WrqExceptionalFlag BIT = NULL&#xD;&#xA;&#x9;,@WrqReservationFlag BIT = NULL&#xD;&#xA;&#x9;,@WrqArchiveFlag BIT = NULL&#xD;&#xA;&#x9;,@WrqExperimentalFlag BIT=NULL&#xD;&#xA;&#x9;,@RlsCode INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Workflow_WorkflowRequest_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT = NULL
	DECLARE @RlsID INT = NULL
	DECLARE @WrqID INT = NULL
	DECLARE @eMessage VARCHAR(256)
	DECLARE @updateCount INT

	DECLARE @GroupUserHasAccess TABLE (GRP_ID INT NOT NULL);

	INSERT INTO @GroupUserHasAccess
	EXEC Security_Group_AccessList  @CcnUsername



	SELECT @DtgID = WRQ_DTG_ID
		,@WrqID = WRQ_ID
	FROM (
		SELECT req.WRQ_DTG_ID
			,req.WRQ_ID
		FROM TD_WORKFLOW_REQUEST req
		INNER JOIN TD_RELEASE rel
			ON req.WRQ_RLS_ID = rel.RLS_ID
		WHERE req.WRQ_DELETE_FLAG = 0
			AND rel.RLS_DELETE_FLAG = 0
			AND rel.RLS_CODE = @RlsCode
			AND req.WRQ_CURRENT_FLAG <> 0
		) query

	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		SET @eMessage = 'No workflow found for Release Code: ' + cast(isnull(@RlsCode, 0) AS VARCHAR)

		RAISERROR (
				@eMessage
				,16
				,1
				)

		RETURN
	END



	UPDATE TD_WORKFLOW_REQUEST
	SET WRQ_DELETE_FLAG = 1,
	WRQ_CURRENT_FLAG=0
	FROM TD_WORKFLOW_REQUEST req
	INNER JOIN TD_RELEASE rel
		ON req.WRQ_RLS_ID = rel.RLS_ID
	INNER JOIN @GroupUserHasAccess
	ON rel.RLS_GRP_ID=GRP_ID 
	WHERE rel.RLS_CODE = @RlsCode
		AND rel.RLS_DELETE_FLAG = 0
		AND req.WRQ_DELETE_FLAG = 0
		AND req.WRQ_CURRENT_FLAG=1
	 

	SET @updateCount = @@rowcount

	IF @updateCount > 0
	BEGIN
		-- do the auditing 
		-- Create the entry in the TD_AUDITING table
		DECLARE @AuditUpdateCount INT

		EXEC @AuditUpdateCount = Security_Auditing_Delete @DtgID
			,@CcnUsername

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error creating entry in TD_AUDITING for Workflow request delete - Release Code: ' + cast(isnull(@RlsCode, 0) AS VARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN
		END
	END

	-- Return the number of rows deleted
	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Group_AccessList]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowRequest_Delete].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowRequest_Delete].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CURRENT_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ID]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowRequest_Delete].[@GroupUserHasAccess].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CURRENT_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CURRENT_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Delete]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Workflow_WorkflowRequest_Delete].[@GroupUserHasAccess]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[Workflow_WorkflowRequest_Delete].[@GroupUserHasAccess].[GRP_ID]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowRequest_Delete].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowRequest_Delete].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="240" />
				<Property Name="Length" Value="2221" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 22/10/2018&#xD;&#xA;-- Description:&#x9;Deletes a Workflow_Request entity. This is done as a soft delete.&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Workflow_WorkflowRequest_Delete @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@RlsCode INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Workflow_WorkflowRequest_Read]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SELECT cmm.CMM_VALUE AS CmmValue
		,wrq.WRQ_DATETIME AS WrqDatetime
		,wrq.WRQ_EXCEPTIONAL_FLAG AS WrqExceptionalFlag
		,wrq.WRQ_RESERVATION_FLAG AS WrqReservationFlag
		,wrq.WRQ_ARCHIVE_FLAG AS WrqArchiveFlag
		,wrq.WRQ_CURRENT_FLAG AS WrqCurrentFlag
		,wrq.WRQ_EXPERIMENTAL_FLAG AS WrqExperimentalFlag
		,rqs.RQS_VALUE AS RqsValue
		,rqs.RQS_CODE AS RqsCode
		,CCN_USERNAME As CcnUsername
		
	FROM TD_WORKFLOW_REQUEST wrq
	INNER JOIN TD_RELEASE rls
		ON wrq.WRQ_RLS_ID = rls.RLS_ID
			AND wrq.WRQ_DELETE_FLAG = 0
			AND rls.RLS_DELETE_FLAG = 0
	INNER JOIN TD_COMMENT cmm
		ON wrq.WRQ_CMM_ID = cmm.CMM_ID
			AND cmm.CMM_DELETE_FLAG = 0
	INNER JOIN TS_REQUEST rqs
		ON wrq.WRQ_RQS_ID = rqs.RQS_ID
	INNER JOIN TM_AUDITING_HISTORY 
	ON	wrq.WRQ_DTG_ID=DHT_DTG_ID 
	INNER JOIN TS_AUDITING_TYPE 
	ON DHT_DTP_ID=DTP_ID 
	AND DTP_CODE='CREATED'
	INNER JOIN TD_ACCOUNT 
	ON DHT_CCN_ID=CCN_ID
	AND CCN_DELETE_FLAG=0
	WHERE rls.RLS_CODE = @RlsCode
		AND (
			@WrqCurrentFlag IS NULL
			OR wrq.WRQ_CURRENT_FLAG = @WrqCurrentFlag
			)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RQS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_AUDITING_TYPE].[DTP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_AUDITING_HISTORY].[DHT_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DATETIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_EXCEPTIONAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CURRENT_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_VALUE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_REQUEST].[RQS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowRequest_Read].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowRequest_Read].[@WrqCurrentFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CURRENT_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowRequest_Read].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowRequest_Read].[@WrqCurrentFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="356" />
				<Property Name="Length" Value="1546" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 15/11/2018&#xD;&#xA;-- Description:&#x9;Reads workflow requests for a Release code. If the WrqCurrentFlag parameter is supplied, it only returns the requests with that flag value&#xD;&#xA;-- exec Workflow_WorkflowRequest_Read 155&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Workflow_WorkflowRequest_Read @RlsCode INT&#xD;&#xA;&#x9;,@WrqCurrentFlag BIT = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Workflow_WorkflowRequest_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @DtgID INT
	DECLARE @updateCount INT
	DECLARE @eMessage VARCHAR(256)

	SET @DtgID = (
			SELECT WRQ_DTG_ID
			FROM TD_WORKFLOW_REQUEST wrq
			INNER JOIN TD_RELEASE rls
				ON wrq.WRQ_RLS_ID = rls.RLS_ID
					AND rls.RLS_CODE = @RlsCode
					AND wrq.WRQ_DELETE_FLAG = 0
					AND rls.RLS_DELETE_FLAG = 0
					AND wrq.WRQ_CURRENT_FLAG = 1
			)

	UPDATE TD_WORKFLOW_REQUEST
	SET WRQ_CURRENT_FLAG = @WrqCurrentFlag
	,WRQ_ARCHIVE_FLAG=COALESCE(@WrqArchiveFlag,WRQ_ARCHIVE_FLAG)
	,WRQ_RESERVATION_FLAG=COALESCE(@WrqReservationFlag,WRQ_RESERVATION_FLAG)
	,WRQ_EXPERIMENTAL_FLAG =COALESCE(@WrqExperimentalFlag,WRQ_EXPERIMENTAL_FLAG)
	FROM TD_WORKFLOW_REQUEST wrq
	INNER JOIN TD_RELEASE rls
		ON wrq.WRQ_RLS_ID = rls.RLS_ID
			AND rls.RLS_CODE = @RlsCode
			AND wrq.WRQ_DELETE_FLAG = 0
			AND rls.RLS_DELETE_FLAG = 0

	SET @updateCount = @@ROWCOUNT

	IF @updateCount > 0
	BEGIN
		-- Auditing:
		DECLARE @AuditUpdateCount INT

		EXEC @AuditUpdateCount = Security_Auditing_Update @DtgID
			,@CcnUsername

		-- check the previous stored procedure for error
		IF @AuditUpdateCount = 0
		BEGIN
			SET @eMessage = 'Error creating entry in TD_AUDITING for Workflow_Request update - RlsCode:' + cast(isnull(@RlsCode, 0) AS VARCHAR)

			RAISERROR (
					@eMessage
					,16
					,1
					)

			RETURN
		END
	END

	RETURN @updateCount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowRequest_Update].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CURRENT_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DTG_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CURRENT_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowRequest_Update].[@WrqCurrentFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowRequest_Update].[@WrqArchiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ARCHIVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowRequest_Update].[@WrqReservationFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RESERVATION_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowRequest_Update].[@WrqExperimentalFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_EXPERIMENTAL_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowRequest_Update].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowRequest_Update].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowRequest_Update].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowRequest_Update].[@WrqCurrentFlag]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowRequest_Update].[@WrqArchiveFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowRequest_Update].[@WrqReservationFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowRequest_Update].[@WrqExperimentalFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="266" />
				<Property Name="Length" Value="1891" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 01/11/2018&#xD;&#xA;-- Description:&#x9;Updates a Workflow Request. Specifically this means changing the wrq_current_flag to 1 or 0&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Workflow_WorkflowRequest_Update @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@RlsCode INT&#xD;&#xA;&#x9;,@WrqCurrentFlag BIT&#xD;&#xA;&#x9;,@WrqArchiveFlag BIT=NULL&#xD;&#xA;&#x9;,@WrqReservationFlag BIT=NULL&#xD;&#xA;&#x9;,@WrqExperimentalFlag BIT=NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Workflow_WorkflowRequestComment_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @CmmID INT
	DECLARE @errorMessage VARCHAR(256)
	DECLARE @returnValue INT

	--we're not insisting the req.WRQ_DELETE_FLAG=0 because you probably just deleted it!
	SET @CmmID = (
			SELECT req.WRQ_CMM_ID
			FROM TD_WORKFLOW_REQUEST req
			INNER JOIN TD_RELEASE rel
				ON req.WRQ_RLS_ID = rel.RLS_ID
			INNER JOIN TD_COMMENT com
				ON req.WRQ_CMM_ID = com.CMM_ID
			WHERE rel.RLS_CODE = @RlsCode
				AND rel.RLS_DELETE_FLAG = 0
				AND com.CMM_DELETE_FLAG = 0
			)

	IF @CmmID IS NULL
		OR @CmmID = 0
	BEGIN
		RETURN 0
	END

	-- execute the generic Comment delete stored procedure
	EXEC @returnValue = Workflow_Comment_Delete @CcnUsername
		,@CmmID

	IF @returnValue IS NULL
		OR @returnValue = 0
	BEGIN
		SET @errorMessage = 'Unable to delete Request Comment for Request Code ' + cast(isnull(@RlsCode, 0) AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				)

		RETURN 0
	END

	RETURN @returnValue
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowRequestComment_Delete].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_Comment_Delete]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowRequestComment_Delete].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowRequestComment_Delete].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowRequestComment_Delete].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="210" />
				<Property Name="Length" Value="1312" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 24/10/2018&#xD;&#xA;-- Description:&#x9;To delete a WorkflowRequest comment&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Workflow_WorkflowRequestComment_Delete @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@RlsCode INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Workflow_WorkflowRequestComment_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @RlsID INT
	set @RlsID = 0
	DECLARE @CmmID INT 
	set @CmmID = 0
	DECLARE @errorMessage VARCHAR(256)
	DECLARE @returnValue INT

	--we need a comment id
	SET @CmmID = (
			SELECT req.WRQ_CMM_ID
			FROM TD_WORKFLOW_REQUEST req
			INNER JOIN TD_RELEASE rel
				ON req.WRQ_RLS_ID = rel.RLS_ID
			WHERE rel.RLS_CODE = @RlsCode
				AND rel.RLS_DELETE_FLAG = 0
				AND req.WRQ_DELETE_FLAG = 0
			)

	IF @CmmID IS NULL
		OR @CmmID = 0
	BEGIN
		RETURN 0
	END

	IF @CmmID IS NULL
		OR @CmmID = 0
	BEGIN
		RETURN 0
	END

	-- execute the generic Comment update stored procedure
	EXEC @returnValue = Workflow_Comment_Update @CcnUsername
		,@CmmID
		,@CmmValue

	RETURN @returnValue
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowRequestComment_Update].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_Comment_Update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowRequestComment_Update].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowRequestComment_Update].[@CmmValue]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowRequestComment_Update].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowRequestComment_Update].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowRequestComment_Update].[@CmmValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="210" />
				<Property Name="Length" Value="1091" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 24/10/2018&#xD;&#xA;-- Description:&#x9;To delete a WorkflowRequest comment&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Workflow_WorkflowRequestComment_Update @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@RlsCode INT&#xD;&#xA;&#x9;,@CmmValue NVARCHAR(256)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Workflow_WorkflowResponse_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @WfRqID INT = NULL
	DECLARE @RlsID INT = NULL
	DECLARE @DtgID INT = NULL
	DECLARE @RspID INT = NULL
	DECLARE @CmmID INT
	DECLARE @errorMessage VARCHAR(256)
	DECLARE @returnValue INT

	SET @CmmID = (
			SELECT CMM_ID
			FROM TD_COMMENT
			WHERE CMM_CODE = @CmmCode
				AND CMM_DELETE_FLAG = 0
			)

	IF @CmmID IS NULL
		OR @CmmID = 0
	BEGIN
		SET @errorMessage = 'No Comment ID found for Release Code: ' + cast(isnull(@RlsCode, 0) AS INT)

		RAISERROR (
				@errorMessage
				,16
				,1
				)

		RETURN 0
	END

	--Getting the id of the Release entry
	SET @RlsID = (
			SELECT rls_id
			FROM td_release
			WHERE rls_code = @RlsCode
				AND TD_RELEASE.RLS_DELETE_FLAG = 0
			)

	IF @RlsId IS NULL
		OR @RlsId = 0
	BEGIN
		SET @errorMessage = 'No Release ID found for Release Code: ' + cast(isnull(@RlsCode, 0) AS INT)

		RAISERROR (
				@errorMessage
				,16
				,1
				)

		RETURN 0
	END

	--Getting the id of the Workflow Request entry 
	SET @WfRqID = (
			SELECT wrq_id
			FROM TD_WORKFLOW_REQUEST
			WHERE WRQ_RLS_ID = @RlsID
				AND WRQ_CURRENT_FLAG = 1
				AND WRQ_DELETE_FLAG = 0
			)

	IF @WfRqID IS NULL
		OR @WfRqID = 0
	BEGIN
		SET @errorMessage = 'No WorkFlow Request ID found for Release Code: ' + cast(isnull(@RlsCode, 0) AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				)

		RETURN 0
	END

	SET @RspID = (
			SELECT rsp_id
			FROM ts_response
			WHERE RSP_CODE = @RspCode
			)

	IF @RspId IS NULL
		OR @RspId = 0
	BEGIN
		SET @errorMessage = 'No Response ID found for Response code: ' + cast(isnull(@RspCode, 0) AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				)

		RETURN 0
	END

	-- Do the create Audit and get the new DtgID from the stored procedure
	EXEC @DtgID = Security_Auditing_Create @CcnUsername

	-- Check for problems with the audit stored procedure
	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		RAISERROR (
				'Error in calling Security_Auditing_Create for WorkflowResponse_Create'
				,16
				,1
				)

		RETURN 0
	END

	--we may now proceed with the create operation
	INSERT INTO TD_WORKFLOW_RESPONSE (
		WRS_RSP_ID
		,WRS_CMM_ID
		,WRS_WRQ_ID
		,WRS_DTG_ID
		)
	VALUES (
		@RspID
		,@CmmID
		,@WfRqID
		,@DtgID
		)

	RETURN @@rowcount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowResponse_Create].[@CmmCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowResponse_Create].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CURRENT_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_RESPONSE].[RSP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowResponse_Create].[@RspCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowResponse_Create].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_RSP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowResponse_Create].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowResponse_Create].[@RspCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowResponse_Create].[@CmmCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowResponse_Create].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="201" />
				<Property Name="Length" Value="2703" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 22/10/2018&#xD;&#xA;-- Description:&#x9;Create a Workflow Response&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Workflow_WorkflowResponse_Create @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@RspCode NVARCHAR(32)&#xD;&#xA;&#x9;,@CmmCode INT&#xD;&#xA;&#x9;,@RlsCode INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Workflow_WorkflowResponse_ReadApprovalAccess]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SELECT GRP_NAME AS GrpName
		,GRP_CODE AS GrpCode
		,CCN_USERNAME AS CcnUsername
		,RLS_CODE AS RlsCode
		,GCC_APPROVE_FLAG AS GccApproveFlag
	FROM TD_RELEASE
	INNER JOIN TM_GROUP_ACCOUNT
		ON GCC_GRP_ID = RLS_GRP_ID
			AND GCC_DELETE_FLAG = 0
			AND RLS_DELETE_FLAG = 0
	INNER JOIN TD_GROUP
		ON GCC_GRP_ID = GRP_ID
			AND GRP_DELETE_FLAG = 0
	INNER JOIN TD_ACCOUNT
		ON GCC_CCN_ID = CCN_ID
			AND CCN_DELETE_FLAG = 0
	WHERE CCN_USERNAME = @CcnUsername
		AND (
			@RlsCode IS NULL
			OR RLS_CODE = @RlsCode
			)
		AND (
			@GccApproveFlag IS NULL
			OR GCC_APPROVE_FLAG = @GccApproveFlag
			)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_NAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_GROUP].[GRP_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_APPROVE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_ACCOUNT].[CCN_USERNAME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowResponse_ReadApprovalAccess].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowResponse_ReadApprovalAccess].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowResponse_ReadApprovalAccess].[@GccApproveFlag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TM_GROUP_ACCOUNT].[GCC_APPROVE_FLAG]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowResponse_ReadApprovalAccess].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowResponse_ReadApprovalAccess].[@RlsCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowResponse_ReadApprovalAccess].[@GccApproveFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="331" />
				<Property Name="Length" Value="1115" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 21/06/2019&#xD;&#xA;-- Description:&#x9;Gets data to indicate if a user has approval access for a release via group membership&#xD;&#xA;-- exec Workflow_WorkflowResponse_ReadApprovalAccess 'okeeffene',6,1&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Workflow_WorkflowResponse_ReadApprovalAccess @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@RlsCode INT = NULL&#xD;&#xA;&#x9;,@GccApproveFlag BIT = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Workflow_WorkflowResponseComment_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @CmmID INT
	DECLARE @errorMessage VARCHAR(256)
	DECLARE @returnValue INT

	SET @CmmID = (
			SELECT com.CMM_ID
			FROM TD_COMMENT com
			INNER JOIN TD_WORKFLOW_RESPONSE res
				ON com.CMM_ID = res.WRS_CMM_ID
			INNER JOIN TD_WORKFLOW_REQUEST req
				ON res.WRS_WRQ_ID = req.WRQ_ID
			INNER JOIN TD_RELEASE rel
				ON req.WRQ_RLS_ID = rel.RLS_ID
			WHERE rel.RLS_CODE = @RlsCode
				AND rel.RLS_DELETE_FLAG = 0
				AND req.WRQ_DELETE_FLAG = 0
				AND com.CMM_DELETE_FLAG = 0
			)

	IF @CmmID IS NULL
		OR @CmmID = 0
	BEGIN
		RETURN 0
	END

	EXEC @returnValue = Workflow_Comment_Update @CcnUsername
		,@CmmID
		,@CmmValue

	RETURN @returnValue
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowResponseComment_Update].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_Comment_Update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowResponseComment_Update].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowResponseComment_Update].[@CmmValue]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowResponseComment_Update].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowResponseComment_Update].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowResponseComment_Update].[@CmmValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="212" />
				<Property Name="Length" Value="1063" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 25/10/2018&#xD;&#xA;-- Description:&#x9;To update a Workflow Response Comment&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Workflow_WorkflowResponseComment_Update @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@RlsCode INT&#xD;&#xA;&#x9;,@CmmValue NVARCHAR(1024)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Workflow_WorkflowSignoff_Create]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @WrsID INT = NULL
	DECLARE @SgnID INT = NULL
	DECLARE @DtgID INT = NULL
	DECLARE @CmmID INT
	DECLARE @errorMessage VARCHAR(256)

	SET @CmmID = (
			SELECT CMM_ID
			FROM TD_COMMENT
			WHERE CMM_CODE = @CmmCode
				AND CMM_DELETE_FLAG = 0
			)

	IF @CmmID IS NULL
		OR @CmmID = 0
	BEGIN
		SET @errorMessage = 'No Comment ID found for Release Code: ' + cast(isnull(@RlsCode, 0) AS INT)

		RAISERROR (
				@errorMessage
				,16
				,1
				)

		RETURN 0
	END

	SET @SgnID = (
			SELECT SGN_ID
			FROM TS_SIGNOFF
			WHERE SGN_CODE = @SgnCode
			)

	IF @SgnID IS NULL
		OR @SgnID = 0
	BEGIN
		SET @errorMessage = 'No @SgnID found for Signoff code ' + cast(isnull(@SgnCode, 0) AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				)

		RETURN 0
	END

	SET @WrsID = (
			SELECT wrs.WRS_ID
			FROM TD_WORKFLOW_RESPONSE wrs
			INNER JOIN TD_WORKFLOW_REQUEST wrp
				ON wrs.WRS_WRQ_ID = wrp.WRQ_ID
			INNER JOIN TD_RELEASE rl
				ON wrp.WRQ_RLS_ID = rl.RLS_ID
			WHERE rl.RLS_CODE = @RlsCode
				AND wrp.WRQ_DELETE_FLAG = 0
				AND rl.RLS_DELETE_FLAG = 0
				AND wrp.WRQ_CURRENT_FLAG = 1
			)

	IF @WrsID IS NULL
		OR @WrsID = 0
	BEGIN
		SET @errorMessage = 'No Response found for RlsCode ' + cast(isnull(@RlsCode, 0) AS VARCHAR)

		RAISERROR (
				@errorMessage
				,16
				,1
				)

		RETURN 0
	END

	-- Do the create Audit and get the new DtgID from the stored procedure
	EXEC @DtgID = Security_Auditing_Create @CcnUsername

	-- Check for problems with the audit stored procedure
	IF @DtgID = 0
		OR @DtgID IS NULL
	BEGIN
		RAISERROR (
				'Error in calling Security_Auditing_Create for WorkflowResponse_Create'
				,16
				,1
				)

		RETURN 0
	END

	INSERT INTO TD_WORKFLOW_SIGNOFF (
		WSG_SGN_ID
		,WSG_CMM_ID
		,WSG_WRS_ID
		,WSG_DTG_ID
		)
	VALUES (
		@SgnID
		,@CmmID
		,@WrsID
		,@DtgID
		)

	RETURN @@rowcount
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowSignoff_Create].[@CmmCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowSignoff_Create].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TS_SIGNOFF].[SGN_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowSignoff_Create].[@SgnCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_CURRENT_FLAG]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Security_Auditing_Create]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowSignoff_Create].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_SGN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_WRS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_DTG_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowSignoff_Create].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowSignoff_Create].[@SgnCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowSignoff_Create].[@CmmCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowSignoff_Create].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="206" />
				<Property Name="Length" Value="2324" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 23/10/2018&#xD;&#xA;-- Description:&#x9;Create a Workflow signoff entry&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Workflow_WorkflowSignoff_Create @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@SgnCode NVARCHAR(256)&#xD;&#xA;&#x9;,@CmmCode INT&#xD;&#xA;&#x9;,@RlsCode NVARCHAR(32)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Workflow_WorkflowSignoffComment_Update]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	DECLARE @CmmID INT
	DECLARE @errorMessage VARCHAR(256)
	DECLARE @returnValue INT

	SET @CmmID = (
			SELECT com.CMM_ID
			FROM TD_COMMENT com
			INNER JOIN TD_WORKFLOW_SIGNOFF sgn
				ON com.CMM_ID = sgn.WSG_CMM_ID
			INNER JOIN TD_WORKFLOW_RESPONSE res
				ON sgn.WSG_WRS_ID = res.WRS_ID
			INNER JOIN TD_WORKFLOW_REQUEST req
				ON res.WRS_WRQ_ID = req.WRQ_ID
			INNER JOIN TD_RELEASE rel
				ON req.WRQ_RLS_ID = rel.RLS_ID
			WHERE rel.RLS_CODE = @RlsCode
				AND rel.RLS_DELETE_FLAG = 0
				AND req.WRQ_DELETE_FLAG = 0
				AND com.CMM_DELETE_FLAG = 0
			)

	IF @CmmID IS NULL
		OR @CmmID = 0
	BEGIN
		RETURN 0
	END

	EXEC @returnValue = Workflow_Comment_Update @CcnUsername
		,@CmmID
		,@CmmValue

	RETURN @returnValue
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_SIGNOFF].[WSG_WRS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_RESPONSE].[WRS_WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_CODE]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowSignoffComment_Update].[@RlsCode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_RELEASE].[RLS_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_WORKFLOW_REQUEST].[WRQ_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[TD_COMMENT].[CMM_DELETE_FLAG]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_Comment_Update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowSignoffComment_Update].[@CcnUsername]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Workflow_WorkflowSignoffComment_Update].[@CmmValue]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowSignoffComment_Update].[@CcnUsername]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowSignoffComment_Update].[@RlsCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Workflow_WorkflowSignoffComment_Update].[@CmmValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="211" />
				<Property Name="Length" Value="1136" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Neil O'Keeffe&#xD;&#xA;-- Create date: 26/10/2018&#xD;&#xA;-- Description:&#x9;To update a Workflow Signoff Comment&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA; PROCEDURE Workflow_WorkflowSignoffComment_Update @CcnUsername NVARCHAR(256)&#xD;&#xA;&#x9;,@RlsCode INT&#xD;&#xA;&#x9;,@CmmValue NVARCHAR(1024)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlLogin" Name="[pxstat]" Disambiguator="11">
			<Property Name="Password" Value="v{?g.UbbSvontupqeuRyrki}msFT7_&amp;#$!~&lt;l|?smC{=Rwoi" />
			<Property Name="DefaultLanguage" Value="us_english" />
			<Property Name="Sid" Value="0x2902A52D43694941904D74F7C78E8E3F" />
			<Property Name="IsCheckPolicyOn" Value="False" />
			<Annotation Type="GloballyScoped" />
		</Element>
		<Element Type="SqlUser" Name="[pxstat]">
			<Property Name="LoginIdentifierScript">
				<Value><![CDATA[[pxstat]]]></Value>
			</Property>
			<Property Name="AuthenticationType" Value="1" />
			<Relationship Name="Login">
				<Entry>
					<References Name="[pxstat]" Disambiguator="11" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlExtendedProperty" Name="[SqlColumn].[dbo].[TD_API_TRACE].[TRC_ERROR_PATH].[MS_Description]">
			<Property Name="Value">
				<Value><![CDATA[N'the path of the url if there is an error']]></Value>
			</Property>
			<Relationship Name="Host">
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_ERROR_PATH]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlExtendedProperty" Name="[SqlColumn].[dbo].[TD_API_TRACE].[TRC_IP].[MS_Description]">
			<Property Name="Value">
				<Value><![CDATA[N'the ip address of the request']]></Value>
			</Property>
			<Relationship Name="Host">
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_IP]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlExtendedProperty" Name="[SqlColumn].[dbo].[TD_API_TRACE].[TRC_METHOD].[MS_Description]">
			<Property Name="Value">
				<Value><![CDATA[N'the method that was called']]></Value>
			</Property>
			<Relationship Name="Host">
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_METHOD]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlExtendedProperty" Name="[SqlColumn].[dbo].[TD_API_TRACE].[TRC_PARAMS].[MS_Description]">
			<Property Name="Value">
				<Value><![CDATA[N'the parameters that were passed in']]></Value>
			</Property>
			<Relationship Name="Host">
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_PARAMS]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlExtendedProperty" Name="[SqlColumn].[dbo].[TD_API_TRACE].[TRC_REQUEST_TYPE].[MS_Description]">
			<Property Name="Value">
				<Value><![CDATA[N'the type of request e.g. jsonrpc']]></Value>
			</Property>
			<Relationship Name="Host">
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_REQUEST_TYPE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlExtendedProperty" Name="[SqlColumn].[dbo].[TD_API_TRACE].[TRC_REQUEST_VERB].[MS_Description]">
			<Property Name="Value">
				<Value><![CDATA[N'the request method e.g. get, post']]></Value>
			</Property>
			<Relationship Name="Host">
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_REQUEST_VERB]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlExtendedProperty" Name="[SqlColumn].[dbo].[TD_API_TRACE].[TRC_USERAGENT].[MS_Description]">
			<Property Name="Value">
				<Value><![CDATA[N'the useragent of the request (browser)']]></Value>
			</Property>
			<Relationship Name="Host">
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_USERAGENT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlExtendedProperty" Name="[SqlColumn].[dbo].[TD_API_TRACE].[TRC_USERNAME].[MS_Description]">
			<Property Name="Value">
				<Value><![CDATA[N'the username if available of the person that made the request']]></Value>
			</Property>
			<Relationship Name="Host">
				<Entry>
					<References Name="[dbo].[TD_API_TRACE].[TRC_USERNAME]" />
				</Entry>
			</Relationship>
		</Element>
	</Model>
</DataSchemaModel>